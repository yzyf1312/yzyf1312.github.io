import"./modulepreload-polyfill.b7f2da20.js";const{callNative:a,callNativeSync:c}=window.biliBridgePc;window.initLoginPage=(i,l,o,n)=>{let t="../main/assets/bili-bridge.js";c("app/isDev")&&(t=t.replace(/^\.\.\//,"../../app/"));const e=document.querySelector(".login-webview");e.setAttribute("preload",t),e.setAttribute("useragent",navigator.userAgent.replace(/bilibili(?=\/\d*\.\d*\.)/,"bilibili_pc")),e.setAttribute("src",l),e.addEventListener("did-fail-load",()=>{const r=document.querySelector(".network-error");r.style.display="block"}),e.addEventListener("dom-ready",()=>{n&&e.insertCSS(n),o&&e.executeJavaScript(o),setTimeout(()=>{e.style.display="inline-flex",e.executeJavaScript("const { callNative, callNativeSync } = window.biliBridgePc;const interceptorSetCookie = () => {  const originalCookieDescriptor = Object.getOwnPropertyDescriptor(Document.prototype, 'cookie');  Object.defineProperty(document, 'cookie', {    configurable: false,    get: function () {      return originalCookieDescriptor.get.call(document);    },    set: function (val) {      if (val.match(/^\\s*buvid3\\s*=/)) return;      originalCookieDescriptor.set.call(document, val);    }  });};const getBuvid3 = () => document.cookie.match(/(?:^|.*;\\s*)buvid3\\s*\\=\\s*([^;]*).*$/) && RegExp.$1;const cookieTimer = setInterval(() => {  if (getBuvid3()) {    clearInterval(cookieTimer);    callNative('auth/loginWebviewReady');    setTimeout(() => {      const buvid3 = getBuvid3();      const { buvid } = callNativeSync('app/getAppInfo');      if (buvid3 !== buvid) document.cookie = 'buvid3='+buvid+'; domain=.bilibili.com; path=/';      interceptorSetCookie();    }, 200);  }}, 200);setInterval(() => callNative('auth/handleLoginXhr'), 1000);")},200)})};window.addEventListener("load",()=>{if(!c("system/isMac")){const i=document.querySelector(".close-button");i.style.display="flex",i.addEventListener("click",()=>a("window/close"))}});
