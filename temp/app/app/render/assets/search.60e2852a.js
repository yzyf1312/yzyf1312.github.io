import"./modulepreload-polyfill.b7f2da20.js";import{a5 as Kt,C as Ea,T as ca,a6 as Gt,_ as re,a7 as Jt,a8 as Zt,a9 as Yt,aa as vt,V as pt,ab as Ba,ac as Ua,ad as Fa,ae as Da,W as Ra,P as Ma,L as Va,af as Na,ag as Oa,ah as gt,h as Wa,y as nt,ai as ot,aj as He,k as qa,U as Ha,ak as rt,p as za,n as ja,N as Qa,O as Ka,Q as Ga,R as Xt,S as ea,B as ta,X as aa,Y as Ja,Z as sa}from"./index.d0821554.js";import{i as Za,n as Ya,p as ua,o as Me,l as Xa,u as es,F as ts,A as as,D as ss,k as os,G as ns,H as is,h as ls,U as da,j as Et,J as Bt,K as Ut,L as ct,a as Ke,m as Ge,M as rs,t as cs,I as us,P as ds,C as _s,R as vs,v as fs,w as ms,x as ps,q as hs,y as gs,z as ys}from"./UserLevel.7d7f4c68.js";import{br as At,e5 as oa,ay as a,W as s,a0 as yt,X as l,bE as it,c4 as Ft,k as y,aY as se,al as ht,dV as st,em as Re,en as bs,eo as ks,ep as ws,eq as $s,er as Cs,es as Ss,et as xs,eu as Ps,bs as me,ao as bt,a4 as le,bG as Is,ck as As,r as Ts,ev as Ls,Q as R,aA as ve,ew as Je,ex as be,ey as _a,ez as va,eA as fa,eB as Ze,eC as Es,eD as Dt,eE as ma,eF as qe,eG as pa,eH as Rt,eI as Ye,eJ as Xe,cl as Bs,as as kt,cx as Us,a2 as A,b1 as ee,V as x,cS as Fs,cK as ha,aG as N,aH as fe,x as o,I as j,aE as ae,U as T,A as H,b3 as M,a1 as W,D as L,bn as Mt,e0 as Ds,bI as We,eK as mt,eL as ga,e3 as Rs,by as St,af as F,b$ as Ms,c0 as Vs,eM as ze,aB as xe,az as Pe,ap as Ns,bK as je,C as Tt,eN as Le,c3 as ya,cf as ba,bF as Qe,bL as ft,f as wt,aI as Os,eO as at,e7 as Ws,bq as qs,dR as Hs,dS as zs,b9 as js,dT as Qs,dU as ka}from"./index.e69ae269.js";import"./isUdf.1a76b9f4.js";var Vt={number:"0123456789",letter:"abcdefghijklmnopqrstuvwxyz",special:"~`!@#$%^&*()-_+=[]{};:\"',<.>/?"};function Ks(e){return e==null}function Gs(e,t,r){var c=Math.random();if(!At(e))return c;Za(t)&&(r=t);var v;return!At(t)||t===e?v=c*e:v=c*(t-e)+e,r?v:Math.floor(v)}var xt=Vt.number,Lt=Vt.letter,Pt=Lt.toUpperCase(),na=Vt.special;function ia(e,t){oa(e)&&(t=e),At(e)||(e=12);var r="";!t||!oa(t)?r=xt+Pt:t==="[*]"?r=xt+Lt+Pt+na:t.match(/0-9|a-z|A-Z|\[s\]/)?(/0-9/.test(t)&&(r+=xt),/a-z/.test(t)&&(r+=Lt),/A-Z/.test(t)&&(r+=Pt),/\[s\]/.test(t)&&(r+=na),r+=Ya(t.replace(/0-9|a-z|A-Z|\[s\]/g,""))):r=t;for(var c="",v=-1;++v<e;)c+=r[Gs(r.length)];return c}function wa(e){return e.replace(/^https?:/g,"")}function Js(e,t){return!e||!e.classList?!1:e.classList.contains(t)}const Zs={viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ys=yt('<g filter="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M29.148 22.427a1.056 1.056 0 1 0-2.112 0v1.884h-2.005a1.056 1.056 0 0 0 0 2.112h2.005v1.912a1.056 1.056 0 0 0 2.112 0v-1.912h1.976a1.056 1.056 0 0 0 0-2.112h-1.976v-1.884Z" fill="#fff"></path><path d="M24.684 31.24c-.44.32-.884.633-1.334.94a1.34 1.34 0 0 1-1.49.002 52.583 52.583 0 0 1-2.85-2.085c-.51-.4-1.006-.816-1.486-1.249l-.204-.181c-.502-.445-1.302-1.153-1.623-1.456-1.088-1.03-1.868-1.984-2.386-2.917a6.394 6.394 0 0 1-.845-3.168c0-1.796.507-3.61 1.652-4.8 1.125-1.173 2.47-1.668 4.134-1.66 1.534 0 3.225.776 4.324 1.832l.013.012.015-.013c1.151-1.074 2.957-1.83 4.46-1.83 1.687 0 3.005.48 4.142 1.66 1.145 1.189 1.536 3.002 1.536 4.798" stroke="#fff" stroke-width="2.592" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><filter id="a" x="9.17" y="13.371" width="26.867" height="24.333" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="1"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_1644_110696"></feBlend><feBlend in="SourceGraphic" in2="effect1_dropShadow_1644_110696" result="shape"></feBlend></filter></defs>',2),Xs=[Ys];function eo(e,t){return a(),s("svg",Zs,Xs)}var to={render:eo};const ao={viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},so=yt('<g filter="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M31.79 14.297c-1.546-1.261-3.204-1.93-4.887-1.918-1.457.01-2.841.527-4.1 1.463-1.27-.937-2.676-1.435-4.137-1.435-1.687 0-3.343.663-4.846 1.89-1.68 1.372-2.463 3.786-2.44 5.897.021 2.117.773 4.123 2.277 5.748 2.958 3.196 6.58 5.69 8.006 6.668.685.47 1.597.471 2.283.002 1.43-.977 5.057-3.485 7.996-6.686 1.502-1.635 2.269-3.612 2.29-5.726.023-2.11-.763-4.532-2.443-5.903Zm-3.68 5.906a1 1 0 1 0-1.372-1.455l-4.214 3.974-2.101-1.91a1 1 0 0 0-1.346 1.48l2.786 2.533a1 1 0 0 0 1.36-.012l4.887-4.61Z" fill="currentColor"></path></g><defs><filter id="a" x="9.379" y="12.379" width="26.855" height="24.584" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="1"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_1644_133773"></feBlend><feBlend in="SourceGraphic" in2="effect1_dropShadow_1644_133773" result="shape"></feBlend></filter></defs>',2),oo=[so];function no(e,t){return a(),s("svg",ao,oo)}var io={render:no};const lo={viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ro=l("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.664 5.39a2 2 0 1 0-3.328 2.22l2.026 3.038c-2.277.093-4.173.218-5.689.344-3.59.297-6.353 3.098-6.69 6.648C3.741 20.197 3.5 23.59 3.5 27c0 3.41.24 6.803.483 9.36.337 3.55 3.1 6.35 6.69 6.648 2.976.247 7.418.492 13.327.492s10.35-.245 13.327-.492c3.59-.297 6.353-3.099 6.69-6.648.242-2.557.483-5.95.483-9.36 0-3.41-.24-6.803-.483-9.36-.337-3.55-3.1-6.35-6.69-6.648a135.933 135.933 0 0 0-5.689-.344l2.026-3.039a2 2 0 1 0-3.328-2.218l-3.42 5.13a203.698 203.698 0 0 0-5.832 0l-3.42-5.13ZM30.75 24.836c1.667.962 1.667 3.368 0 4.33l-9 5.196c-1.667.962-3.75-.24-3.75-2.165V21.804c0-1.925 2.083-3.127 3.75-2.165l9 5.196Z",fill:"currentColor",opacity:".9"},null,-1),co=[ro];function uo(e,t){return a(),s("svg",lo,co)}var _o={render:uo};const Ve=()=>{const e=it(),t=Ft(),r=y(!1),c=y({}),v=(n,i)=>{if(Ks(i))return!1;switch(n){case"keyword":return!!i.trim();case"page":return/^[1-9][0-9]*$/.test(i);case"o":return/^[1-9][0-9]*$/.test(i)&&[24,30].some(_=>i%_===0);case"order":return e.name===Re.SearchAll||e.name===Re.SearchVideo?Ss.includes(i):e.name===Re.SearchLive?xs.includes(i):e.name===Re.SearchUpuser?Ps.includes(i):!1;case"duration":return Cs.some(_=>_===+i);case"tids":return $s.some(_=>_===+i);case"search_type":return e.name===Re.SearchLive&&ws.includes(i);case"order_sort":return e.name===Re.SearchUpuser&&ks.includes(+i);case"user_type":return e.name===Re.SearchUpuser&&bs.includes(+i);default:return!1}},p=(n,i)=>{if(!i)return!1;switch(n){case"keyword":return v(n,i);case"page":return v(n,i)&&+i!=1;case"o":return v(n,i)&&+i!=0;case"order":return v(n,i)&&!!i&&i!=="totalrank"&&i!=="online";case"duration":return v(n,i)&&+i!=0;case"tids":return v(n,i)&&i!==0;case"search_type":return v(n,i)&&i!=="live";case"category_id":return v(n,i)&&+i!=0;case"order_sort":return v(n,i)&&+i!=0;case"user_type":return v(n,i)&&+i!=0;default:return!0}},f=n=>{const i=JSON.stringify(e.query),_=JSON.parse(i);Object.entries(n).forEach(([h,$])=>{p(h,$)?_[h]=$:(delete _[h],h==="page"&&delete _.o,h==="o"&&delete _.page)}),JSON.stringify(_)!==i&&ht(()=>t.replace({path:e.path,query:_}))},d=()=>{f({search_type:"",order:"",order_sort:"",user_type:"",page:"",o:""})},m=(n,i,_)=>{if(i=+i,n=+n,i){const h=Math.ceil((i+1)/_);return{page:h>1?h:2,offset:i}}else if(n){const h=(n-1)*_;return{page:Math.ceil((h+1)/_),offset:h}}else return{page:1,offset:0}},b=(n,i,_=!1)=>{const{page:h,offset:$}=m(n,void 0,i),P={page:h};_||(P.o=$),setTimeout(()=>f(P))},k=(n,i)=>{const _=c.value,{page:h,offset:$}=m(_.page,_.o,n);setTimeout(()=>f({page:h,o:$})),st(i)&&i({page:h,offset:$})},g=()=>{const n={},{query:i={}}=e;return Object.entries(i).forEach(([_,h])=>{v(_,h)&&(n[_]=h)}),n},u=()=>{if(e.name!==Re.SearchAll)return!1;const n={...c.value};return delete n.keyword,Object.keys(n).length==0};return se(e,()=>{c.value=g(),r.value=u()},{immediate:!0}),{isSearchAll:r,validQueryParams:c,updateQueryParams:f,initQueryParams:d,getValidPageInfo:m,updatePageParams:b,initPageParams:k}},Nt=e=>{const{validQueryParams:t,initPageParams:r,updatePageParams:c,getValidPageInfo:v}=Ve(),p=y(!1),f=y(1),d=y(0),m=()=>{const{page:b,offset:k}=v(t.value.page,t.value.o,e.value);f.value=b,d.value=k};return m(),se(f,b=>{p.value||(d.value=(b-1)*e.value,c(b,e.value))}),se(e,b=>{const{page:k,offset:g}=v(void 0,t.value.o,b);p.value=!0,f.value=k,d.value=g,c(k,b,!0),ht(()=>p.value=!1)}),r(e.value,({page:b,offset:k})=>{p.value=!0,f.value=b,d.value=k,ht(()=>p.value=!1)}),{page:f,offset:d,resetPageParams:m}},et=({submitSearchHandler:e,reloadSearchHandler:t})=>{st(e)&&me.on("submitSearch",e),st(t)&&me.on("reloadSearch",t),bt(()=>{st(e)&&me.off("submitSearch",e),st(t)&&me.off("reloadSearch",t)})};const vo={key:0,class:"search_layout i_page_wrapper"},fo={class:"search_layout--content i_page_content h_100vh"},mo={class:"search-header"},po={class:"search-tabs i_wrapper"},ho=l("hr",{class:"search-line"},null,-1),go={class:"conditions-order flex_between"},yo={class:"search-condition-row"},bo=W(" \u66F4\u591A\u7B5B\u9009 "),ko={class:"search-condition-row"},wo={class:"search-condition-row"},$o=["onMouseover","onMouseleave"],Co={class:"search-sub-wrapper pt_xs invisible"},So={key:0,class:"search-sub-channel flex_start"},xo=["onClick"],Po={class:"search-content"},Io={class:"search-page-wrapper"},Ao=le({__name:"Search",setup(e){const t=it(),r=Ft(),{isSearchAll:c,validQueryParams:v,initQueryParams:p,updateQueryParams:f}=Ve(),{keyword:d,searchKeyword:m}=Is(As()),b=y(!0),k=Ts([{tab:"\u7EFC\u5408",route:"SearchAll",field:"",num:0},{tab:"\u89C6\u9891",route:"SearchVideo",field:"video",num:0},{tab:"\u756A\u5267",route:"SearchBangumi",field:"media_bangumi",num:0},{tab:"\u5F71\u89C6",route:"SearchPgc",field:"media_ft",num:0},{tab:"\u76F4\u64AD",route:"SearchLive",field:"live",num:0},{tab:"\u7528\u6237",route:"SearchUpuser",field:"bili_user",num:0}]),g=[{name:"\u7EFC\u5408\u6392\u5E8F",order:"totalrank"},{name:"\u6700\u591A\u70B9\u51FB",order:"click"},{name:"\u6700\u65B0\u53D1\u5E03",order:"pubdate"},{name:"\u6700\u591A\u5F39\u5E55",order:"dm"},{name:"\u6700\u591A\u6536\u85CF",order:"stow"}],u=[{name:"\u5168\u90E8\u65F6\u957F",duration:0},{name:"10\u5206\u949F\u4EE5\u4E0B",duration:1},{name:"10-30\u5206\u949F",duration:2},{name:"30-60\u5206\u949F",duration:3},{name:"60\u5206\u949F\u4EE5\u4E0A",duration:4}],n=Ds,i=y("totalrank"),_=y(0),h=y(0),$=y(0),P=y("SearchAll");Ls.includes(t.name)?P.value=t.name:P.value=null;const I=R(()=>P.value==="SearchAll"||P.value==="SearchVideo"),C=y(!1),Q=y(!1),S=y({}),ne=y(null),{isShowMoreConditions:B,toggleSlideMoreConditions:X}=ua(ne),{screenWidth:D,isMinMd:Y,pageVideos:G}=Me(!0),ce=Nt(G),ke=y(""),ge=y(!1),Ee=y(ia(32,"0-9a-zA-Z")),Fe=y(!1),pe=window,we=R(()=>{var Z,O,ie,_e;const w=k.find(Te=>Te.route==P.value),E={query:d.value,qv_id:Ee.value,trackid:c.value?S.value.seid:ke.value,tab_id:P.value,tab_name:w==null?void 0:w.tab,page:((Z=v.value)==null?void 0:Z.page)||1,page_offset:((O=v.value)==null?void 0:O.o)||0};return(_e=(ie=pe.parent)==null?void 0:ie.handleSetSearchParams)==null||_e.call(ie,E),E}),Ie=R(()=>{var Z,O;const{tids1_name:w,tids2_name:E}=Kt($.value||h.value);return{order_id:i.value,order_name:(Z=g.find(ie=>ie.order===i.value))==null?void 0:Z.name,duration_id:_.value,duration_name:(O=u.find(ie=>ie.duration===Number(_.value)))==null?void 0:O.name,tids1_id:h.value,tids1_name:w,tids2_id:$.value,tids2_name:E}});(()=>{var O,ie,_e;const w=(O=v.value.keyword)==null?void 0:O.trim();w&&d.value!==w&&(d.value=w,m.value=w,S.value={}),i.value=(ie=v.value.order)!=null?ie:"totalrank",_.value=(_e=v.value.duration)!=null?_e:0;const{tids1:E,tids2:Z}=Kt(v.value.tids);h.value=E,$.value=Z,(v.value.duration||v.value.tids)&&(B.value=!0)})();const Ne=()=>{i.value="totalrank",_.value=0,h.value=0,$.value=0},tt=(w=!1)=>{Fe.value&&(Fe.value=!1,!w)||(Ee.value=ia(32,"0-9a-zA-Z"))};let Ae=null,q=null;const J=w=>{var E;if(q){(E=w.result)!=null&&E.length||(w.result=[]);const Z=w.result.findIndex(O=>O.result_type==="video");if(Z===-1)w.result.push({result_type:"video",data:[q]});else{const O=w.result[Z].data[0];(O==null?void 0:O.aid)!==q.aid&&w.result[Z].data.unshift(q)}}S.value=w},ue=()=>{var E,Z,O,ie;if(Q.value=!0,C.value=!1,q=null,Ae&&Ae.abort(),c.value){tt();const _e=((Z=(E=d.value)==null?void 0:E.match(/\/(bv\w+)/i))==null?void 0:Z[1])||((ie=(O=d.value)==null?void 0:O.match(/\/(av\d+)/i))==null?void 0:ie[1]);if(_e){Ae=new AbortController;const Te=Gt(_e,Ee.value);as(Te,Ae).then(De=>{var K;const Se=(De.result||[]).find(he=>he.result_type==="video");q=(K=Se==null?void 0:Se.data)==null?void 0:K[0],J(S.value)}).finally(()=>{Ae=null})}}const w=Gt(d.value,Ee.value);ss(w).then(_e=>{Q.value=!1,J(_e)}).catch(()=>{C.value=!0,Q.value=!1,S.value={}})},Be=async(w=!1,E=!1)=>{var O;const Z=m.value.trim();if(Z||E){const ie=(!w||t.name!=="SearchAll")&&(c.value||!((O=S.value.result)!=null&&O.length)||Z&&d.value!==Z);Z&&d.value!==Z&&(tt(!0),d.value=Z),ie&&(await Fs(),ue(),c.value||(Fe.value=!0)),setTimeout(()=>me.emit("submitSearch"),100)}},ye=ha(Be,600),te=w=>{dt(),b.value=!1,B.value=!1,ce.page.value=1,Ne(),p(),setTimeout(()=>{if(r.replace({name:w,query:t.query}),b.value=!0,w==="SearchAll"){const E=S.value.top_tlist;S.value={top_tlist:E}}setTimeout(()=>{ye(w!=="SearchAll",!0)},100)})},V=w=>{w!==i.value&&(i.value=w,setTimeout(()=>ye()))},U=w=>{w!==_.value&&(_.value=w,setTimeout(()=>ye()))},$e=w=>{w===h.value&&$.value===0||(h.value=w,$.value=0,setTimeout(()=>ye()))},Ce=(w,E)=>{E!==$.value&&(h.value=w,$.value=E,setTimeout(()=>ye()))},Oe=()=>{f({order:i.value,duration:_.value,tids:$.value||h.value,keyword:d.value})};let z={};const de="channel-item-display",Ue="channel-item-opaque",zt=(w,E,Z)=>{var ie;const O=(ie=os(w,".search-channel-item"))==null?void 0:ie.querySelector(".search-sub-wrapper");O&&(Z?Js(O,de)||(O.classList.add(de,Ue),clearTimeout(z[E]),setTimeout(()=>{const{left:_e,right:Te}=O.getBoundingClientRect();_e<=0&&(O.style.left=`calc(50% + ${-_e}px)`),Te>=D.value&&(O.style.left=`calc(50% - ${Te-D.value}px)`),mt(O,"invisible")})):(mt(O,Ue),z[E]=setTimeout(()=>{O.style.left="50%",mt(O,de),ga(O,"invisible")},200)))},Ia=(w,E)=>zt(w.target,E,!0),Aa=(w,E)=>zt(w.target,E,!1),ut=()=>{const w=document.querySelector(".search_layout--scroll");Ea({element:w,speed:3})},Ta=w=>{ut(),P.value=w},dt=()=>{var w,E;m.value.trim()||(m.value=d.value),(E=(w=pe.parent)==null?void 0:w.handleRestoreKeyword)==null||E.call(w)},La=()=>{Fe.value=!0,dt()};me.on("onPageChange",La),ve(Je,d),ve(be,we),ve(_a,C),ve(va,Q),ve(fa,S),ve(Ze,ke),ve(Es,Ie),ve(Dt,ce),ve(ma,Ta),ve(qe,ut),ve(pa,Be),ve(Rt,ye),ve(Ye,Ee),ve(Xe,tt),se(P,()=>{We({type:"click",spm_info:"main.search-result.search-navbar.all"},{msg:JSON.stringify({...we.value,trackid:void 0})})},{immediate:!0}),se(S,w=>{const E=w.top_tlist||{};k.forEach(Z=>{Z.num=E[Z.field]||0})}),se(d,()=>{Ne()}),se([d,i,_,h,$],()=>{dt(),ce.page.value=1,Oe()}),Oe(),setTimeout(()=>{ye(!0)}),pe.updateSearchParams=({searchKeyword:w})=>{m.value=w},pe.handleQuitSearch=()=>ge.value=!1,pe.handleInitSearch=()=>{ge.value=!0,P.value="SearchAll",ce.page.value!=1&&(ce.page.value=1,setTimeout(()=>Be(),200))},pe.handleConfirmSearch=()=>{ge.value=!0,ye(!1,!0),setTimeout(()=>ut())},pe.handleReloadSearch=()=>{ge.value=!0,m.value||(m.value=d.value),me.emit("reloadSearch")},pe.handleWatchLaterChange=w=>me.emit("watchLaterSync",w),me.on("watchLaterChange",w=>{var E,Z;return(Z=(E=pe.parent)==null?void 0:E.handleWatchLaterChange)==null?void 0:Z.call(E,w)}),Xa("Search",()=>{dt(),ut(),ye()}),es(".search_layout--scroll");let _t=!1;const jt=w=>{var De,Se;const{target:E,key:Z,ctrlKey:O,shiftKey:ie,altKey:_e,metaKey:Te}=w||{};if((E==null?void 0:E.getAttribute("contenteditable"))!=="true"&&!(["INPUT","TEXTAREA"].includes(E==null?void 0:E.tagName)&&E.getAttribute("type")!=="checkbox")&&!(O||_e||Te)&&/^g$/i.test(Z)&&!ie){_t||(_t=!0,(Se=(De=pe.parent)==null?void 0:De.toggleWinMaximize)==null||Se.call(De));return}},Qt=w=>{if(/^g$/i.test(w.key)){_t=!1;return}};return Bs("window/focusChange",()=>{_t=!1}),kt(()=>{pe.isSearchReady=!0,Us("window/searchPageReady"),setTimeout(()=>{var w,E;(E=(w=pe.parent)==null?void 0:w.handleSearchPageReady)==null||E.call(w)},250),document.addEventListener("keydown",jt,!0),document.addEventListener("keyup",Qt,!0)}),bt(()=>{document.removeEventListener("keydown",jt,!0),document.removeEventListener("keyup",Qt,!0)}),(w,E)=>{const Z=N("v-tab-item"),O=N("v-button"),ie=N("WidgetArrow"),_e=N("fragment"),Te=N("router-view"),De=N("Scroller"),Se=fe("report");return ge.value?(a(),s("div",vo,[l("div",fo,[A(De,{class:"search_layout--scroll h_100 page_scroller pt_md"},{default:ee(()=>[l("div",mo,[l("div",po,[A(o(ca),{"auto-adjustment":"",activeKey:P.value,"onUpdate:activeKey":E[0]||(E[0]=K=>P.value=K),"slide-to-hover":!1,"active-pink":!0,"slider-width":18,onTabChange:te},{default:ee(()=>[(a(!0),s(j,null,ae(k,K=>(a(),T(Z,{key:K.route,tab:K.tab,num:K.num,"show-zerro":K.route!=="SearchAll"},null,8,["tab","num","show-zerro"]))),128))]),_:1},8,["activeKey"]),ho]),A(_e,{"auto-report":{show:!0,spm_info:"main.search-result.search-filter.all",msg:{...o(we),trackid:void 0}}},{default:ee(()=>[o(I)?(a(),s("div",{key:0,class:H(["search-conditions i_wrapper",{mt_xxl:o(Y)}])},[l("div",go,[l("div",yo,[(a(),s(j,null,ae(g,K=>M(A(O,{"active-pink":"",key:K.order,type:"tab",class:"mr_sm",active:K.order===i.value,onClick:he=>V(K.order)},{default:ee(()=>[W(L(K.name),1)]),_:2},1032,["active","onClick"]),[[Se,{...o(Ie),click_type:"order",order_id:K.order,order_name:K.name},"msg"]])),64))]),M((a(),T(O,{class:"i_button_more","active-shrink":"","no-auto-report":"",onClick:o(X)},{default:ee(()=>[bo,A(ie,{class:H(["i_icon_more ts_all_fast rotate_90",{rotate_n90:o(B)}])},null,8,["class"])]),_:1},8,["onClick"])),[[Se,{spm_info:"main.search-result.search.filter-toggle",msg:{...o(we),show:!o(B)}},"click"]])]),l("div",{class:"more-conditions hide ov_hidden",ref_key:"moreConditions",ref:ne},[l("div",ko,[(a(),s(j,null,ae(u,K=>M(A(O,{"active-pink":"",key:K.duration,type:"tab",class:"mt_sm mr_sm",active:K.duration===+_.value,onClick:he=>U(K.duration)},{default:ee(()=>[W(L(K.name),1)]),_:2},1032,["active","onClick"]),[[Se,{...o(Ie),click_type:"duration",duration_id:K.duration,duration_name:K.name},"msg"]])),64))]),l("div",wo,[(a(!0),s(j,null,ae(o(n),K=>(a(),s("div",{key:K.tids,class:"search-channel-item mt_sm",onMouseover:he=>Ia(he,K.tids),onMouseleave:he=>Aa(he,K.tids)},[M((a(),T(O,{"active-pink":"",type:"tab",class:"mr_sm",active:K.tids===+h.value,onClick:he=>$e(K.tids)},{default:ee(()=>[W(L(K.name),1)]),_:2},1032,["active","onClick"])),[[Se,{...o(Ie),click_type:"tids1",tids1_id:K.tids,tids1_name:K.name},"msg"]]),l("div",Co,[K.children.length?(a(),s("ul",So,[(a(!0),s(j,null,ae(K.children,he=>(a(),s("li",{key:he.tids,class:"sub-channel-item"},[M((a(),s("a",{class:H(["text2 text_nowrap",{brand_pink:he.tids===+$.value}]),onClick:rc=>Ce(K.tids,he.tids)},[W(L(he.name),1)],10,xo)),[[Se,{...o(Ie),click_type:"tids2",tids2_id:he.tids,tids2_name:he.name},"msg"]])]))),128))])):x("",!0)])],40,$o))),128))])],512)],2)):x("",!0)]),_:1},8,["auto-report"])]),l("div",Po,[M(l("div",Io,[A(Te)],512),[[Mt,b.value]])])]),_:1})]),A(ts,{"scroll-container":".search_layout--scroll"})])):x("",!0)}}});const To=le({__name:"Tag",props:{value:{type:String,default:""},type:{type:String,default:"default"}},setup(e){const t=e,r=R(()=>({tag:!0,flex_shrink_0:!0,"tag-primary":t.type==="primary"}));return(c,v)=>t.value?(a(),s("div",{key:0,class:H(o(r))},L(t.value),3)):x("",!0)}});var Ot=re(To,[["__scopeId","data-v-0a130a53"]]);const Lo={skeleton:{type:Boolean,default:!1},grid:{type:Boolean,default:!1},disableFrame:{type:Boolean,default:!1},disableInlinePlayer:{type:Boolean,default:!1},playerOption:{type:Object,default:()=>({guide:""})},disableWatchLater:{type:Boolean,default:!1},showAv:{type:Boolean,default:!1},showBv:{type:Boolean,default:!1},imgCbStr:{type:String,default:""},gridClass:{type:String,default:""},imgLazy:{type:String,default:"lazy"},hoverScale:{type:Boolean,default:!0},disableScale:{type:Boolean,default:!1},info:{type:Object,default:()=>({})},showFace:{type:Boolean,default:!1},locId:{type:Number,default:0},index:{type:Number,default:0},useInnerReport:{type:Boolean,default:!1},mergeReportMsg:{type:Object,default:{}},showChargeTag:{type:Boolean,default:!1},iid:String},Eo=le({name:"BiliVideoCard",directives:{[Jt.name]:Jt,[Zt.name]:Zt,[Yt.VDirective.name]:Yt.VDirective,[vt.VSpm.name]:vt.VSpm,[vt.VScale.name]:vt.VScale},components:{VImg:pt,VAvatar:Ba,Tag:Ot,PaletteAd:Ua,WidgetAgree:Fa,WidgetPlayCount:Da,WidgetUp:Ra,PlayTime:Ma,IcoCharge:Va,WatchLater:Na.component},props:Lo,emits:["watch-later","click-face","click-uname","click-video","player-play","player-close","player-init","show-video"],setup:(e,{emit:t})=>{const{pubdate:r,duration:c,stats:v,bvid:p,author:f,url:d,spaceUrl:m,aid:b,cid:k}=e.info,g={pubdate:isNaN(Number(r))?r:Rs(r),duration:Oa(c),view:St(v.view),like:St(v.like),vt:St(v.vt)},u={page:d||`//www.bilibili.com/video/${p}`,space:m||`//space.bilibili.com/${f.mid}`},n=y(!0),i=!e.disableInlinePlayer&&(b||p)&&{aid:b,cid:k,bvid:p,config:e.playerOption,iid:e.iid},_=!e.disableFrame&&b,h=(D,Y)=>{D==="in"?Y.target.classList.add("scale-in"):Y.target.classList.remove("scale-in")},$=R(()=>gt(e.info.title)),P=F(be),I=()=>{if(!e.useInnerReport){t("show-video",e.info);return}We({type:"show",spm_info:"main.search-result.search-card.all"},{msg:JSON.stringify({spmid:"search.search-result.video.all",avid:e.info.aid,content_id:e.info.aid,...e.mergeReportMsg})})},C=(D,Y)=>{var G;if(e.info.type==="ketang"){if(e.info.arcurl){const ce=e.info.arcurl.includes("?"),ke=e.info.arcurl+(ce?"&":"?")+"is_PCend=1";Ms(ke,"search.ketang")}}else Vs({type:"ugc",bvid:p,fromSpmid:"main.search-result.0.0.pv",...(G=P.value)!=null&&G.trackid?{trackId:P.value.trackid}:{}});if(!e.useInnerReport){t("click-video",e.info,Y);return}We({type:"click",spm_info:"main.search-result.search-card.all"},{msg:JSON.stringify({spmid:`search.search-result.video.${D}`,content_id:e.info.aid,avid:e.info.aid,...e.mergeReportMsg})})},Q=(D,Y)=>{var G,ce,ke;if(ze({page:"SpacePage",meta:{mid:(G=e.info.author)==null?void 0:G.mid}}),!e.useInnerReport){t(D==="avatar"?"click-face":"click-uname",(ce=e.info)==null?void 0:ce.author,Y);return}We({type:"click",spm_info:"main.search-result.search-card.all"},{msg:JSON.stringify({spmid:`search.search-result.video.${D}`,content_id:e.info.aid,avid:e.info.aid,up_id:(ke=e.info.author)==null?void 0:ke.mid,...e.mergeReportMsg})})},S=y(null),ne=D=>{var Y,G;if(D.code===0){const ce=(G=(Y=S.value)==null?void 0:Y.el)==null?void 0:G.getBoundingClientRect();me.emit("watchLaterChange",{id:e.info.aid,type:D.type,rect:ce})}if(!e.useInnerReport){t("watch-later",D);return}We({type:"click",spm_info:"main.search-result.search-card.all"},{msg:JSON.stringify({watchlater_type:D.type,spmid:"search.search-result.video.watchlater",avid:e.info.aid,...e.mergeReportMsg})})},B=D=>{if(!e.useInnerReport){t("player-play",e.info,D);return}We({type:"click",spm_info:"main.search-result.search-card.all"},{msg:JSON.stringify({spmid:"search.search-result.video.play",avid:e.info.aid,...e.mergeReportMsg})})},X=y(!1);return{formats:g,links:u,showStats:n,inlinePlayerParam:i,frameParam:_,videoTitle:$,watchLaterEl:S,scaleHandle:h,reportShowVideo:I,reportClickVideo:C,reportClickUp:Q,reportClickWatchLater:ne,reportPlayerPlay:B,isImageError:X}}}),Bo=e=>(xe("data-v-383f54eb"),e=e(),Pe(),e),Uo=yt('<div class="bili-video-card__skeleton--cover" data-v-383f54eb></div><div class="bili-video-card__skeleton--info" data-v-383f54eb><div class="bili-video-card__skeleton--right" data-v-383f54eb><p class="bili-video-card__skeleton--text" data-v-383f54eb></p><p class="bili-video-card__skeleton--text short" data-v-383f54eb></p><p class="bili-video-card__skeleton--light" data-v-383f54eb></p></div></div>',2),Fo=[Uo],Do=["href"],Ro=Bo(()=>l("div",{class:"bili-video-card__cover"},[l("img",{class:"p_center",src:Wa})],-1)),Mo={class:"bili-video-card__mask"},Vo={key:0,class:"bili-video-card__stats"},No={key:0,class:"bili-video-card__stats--left"},Oo={key:0,class:"bili-video-card__stats--item"},Wo={class:"bili-video-card__stats--text"},qo={key:1,class:"bili-video-card__stats--item"},Ho={key:2,class:"bili-video-card__stats--item"},zo={class:"bili-video-card__stats__duration"},jo={key:0,class:"bili-video-card__av"},Qo={class:"bili-video-card__av--top"},Ko=["href"],Go={class:"bili-video-card__av--tit text_ellipsis"},Jo={class:"bili-video-card__av--tit-av"},Zo=["innerHTML"],Yo=["title"],Xo={class:"bili-video-card__av--bottom"},en=["href"],tn=["href"],an={class:"bili-video-card__av--author"},sn={key:0,class:"bili-video-card__av--date"},on=["href"],nn={class:"bili-video-card__info--right"},ln=["href"],rn={key:0,class:"bili-video-card__info--tit"},cn=["innerHTML"],un=["innerHTML","title"],dn={class:"bili-video-card__info--bottom"},_n={key:0,class:"bd_radius_sm bd_1 brand_pink bc_brand_pink fs_6 px_xs mr_xs"},vn=W("\u5145\u7535\u4E13\u5C5E "),fn=["href"],mn={key:0,class:"bili-video-card__info--author-kt mr_2"},pn={key:2,class:"bili-video-card__info--author"};function hn(e,t,r,c,v,p){const f=N("WatchLater"),d=N("VImg"),m=N("PlayTime"),b=N("WidgetPlayCount"),k=N("WidgetAgree"),g=N("Tag"),u=N("VAvatar"),n=N("PaletteAd"),i=N("IcoCharge"),_=N("WidgetUp"),h=fe("inline-player"),$=fe("frame"),P=fe("danmaku"),I=fe("report"),C=fe("spm"),Q=fe("scale");return M((a(),s("div",{class:H(["bili-video-card",{"bili-video-card-grid":e.grid}])},[e.gridClass?x("",!0):(a(),s("div",{key:0,class:H(["bili-video-card__skeleton",{hide:!e.skeleton}])},Fo,2)),e.skeleton?x("",!0):M((a(),s("div",{key:1,class:H(["bili-video-card__wrap __scale-wrap",{row:!!e.gridClass}]),onScaleIn:t[14]||(t[14]=S=>e.scaleHandle("in",S)),onScaleOut:t[15]||(t[15]=S=>e.scaleHandle("out",S))},[M((a(),s("a",{href:e.links.page,class:H(e.gridClass),target:"_blank",onClick:t[7]||(t[7]=S=>e.reportClickVideo("cover",S))},[l("div",{class:H(["bili-video-card__image __scale-player-wrap",{"bili-video-card__image_hover-scale":e.hoverScale}])},[M((a(),s("div",{class:"bili-video-card__image--wrap",onMouseenter:t[2]||(t[2]=S=>e.showStats=!1),onMouseleave:t[3]||(t[3]=S=>e.showStats=!0),onPlayerPlay:t[4]||(t[4]=S=>e.reportPlayerPlay(S)),onPlayerClose:t[5]||(t[5]=S=>e.$emit("player-close",S.detail,S)),onPlayerInit:t[6]||(t[6]=S=>e.$emit("player-init",S.detail,S))},[(!e.disableWatchLater||!e.info.isAd)&&e.info.aid?(a(),T(f,{key:0,ref:"watchLaterEl",aid:e.info.aid,visible:!e.showStats,onDo:t[0]||(t[0]=S=>e.reportClickWatchLater(S))},null,8,["aid","visible"])):x("",!0),Ro,M(A(d,{class:"bili-video-card__cover","cb-str":e.imgCbStr,src:e.info.cover,alt:e.videoTitle,width:336,height:189,loading:e.imgLazy,"bfs-style":"pc-common-cover-h",rule:"1c_100q",onError:t[1]||(t[1]=S=>e.isImageError=!0)},null,8,["cb-str","src","alt","loading"]),[[Mt,!e.isImageError]])],32)),[[h,e.inlinePlayerParam,"video"],[$,e.frameParam],[P,e.frameParam]]),l("div",Mo,[e.info.isAd?x("",!0):(a(),s("div",Vo,[e.info.stats?(a(),s("div",No,[e.info.enableVt?(a(),s("span",Oo,[A(m,{class:"bili-video-card__stats--icon"}),l("span",Wo,L(e.info.vtDisplay||e.formats.vt),1)])):(a(),s("span",qo,[A(b,{class:"bili-video-card__stats--icon"}),l("span",null,L(e.formats.view),1)])),e.info.stats.like!==-1?(a(),s("span",Ho,[A(k,{class:"bili-video-card__stats--icon"}),l("span",null,L(e.formats.like),1)])):x("",!0)])):x("",!0),l("span",zo,L(e.formats.duration),1)]))])],2)],10,Do)),[[I,{data:e.info,id:e.locId},"show",{ad:!0,strict:!0,relink:!0}],[I,{data:e.info,id:e.locId},"click",{ad:!0}],[I,{spmid:"search.search-result.up_card.5",location:e.index+1,content_id:e.info.aid},"msg"],[C,e.info.spmInfo]]),l("div",{class:H(["bili-video-card__info __scale-disable",{col_auto:!!e.gridClass}])},[e.showAv||e.showBv?(a(),s("div",jo,[l("div",Qo,[M((a(),s("a",{href:e.links.page,target:"_blank",onClick:t[8]||(t[8]=S=>e.reportClickVideo("title",S))},[l("h3",Go,[l("span",Jo,L(e.showAv?"AV"+e.info.aid:e.info.bvid),1),A(g,{class:"bili-video-card__av--tit-type",value:e.info.typename},null,8,["value"]),l("span",{innerHTML:e.info.title},null,8,Zo)])],8,Ko)),[[C,e.info.spmInfo],[I,{data:e.info,id:e.locId},"show",{ad:!0,strict:!0,relink:!0}],[I,{data:e.info,id:e.locId},"click",{ad:!0}]]),l("div",{title:e.info.description,class:"bili-video-card__av--desc text_ellipsis_2l"},L(e.info.description),9,Yo)]),l("div",Xo,[e.info.author.face&&!e.info.isAd?M((a(),s("a",{key:0,href:e.links.space,target:"_blank",onClick:t[9]||(t[9]=S=>e.reportClickUp("avatar",S))},[A(u,{"custom-class":"bili-video-card__avatar",info:e.info.author,size:36},null,8,["info"])],8,en)),[[C,e.info.spmInfo]]):x("",!0),e.info.author.name?M((a(),s("a",{key:1,class:"bili-video-card__av--owner",href:e.links.space,target:"_blank",onClick:t[10]||(t[10]=S=>e.reportClickUp("nickname",S))},[l("span",an,L(e.info.author.name),1),!e.info.isAd&&e.info.pubdate?(a(),s("span",sn,"\xB7 "+L(e.formats.pubdate),1)):x("",!0)],8,tn)),[[C,e.info.spmInfo]]):x("",!0)])])):(a(),s(j,{key:1},[e.info.author.face&&!e.info.isAd&&e.showFace?M((a(),s("a",{key:0,href:e.links.space,target:"_blank",onClick:t[11]||(t[11]=S=>e.reportClickUp("avatar",S))},[A(u,{"custom-class":"bili-video-card__avatar",info:e.info.author,size:36},null,8,["info"])],8,on)),[[C,e.info.spmInfo]]):x("",!0),l("div",nn,[M((a(),s("a",{href:e.links.page,target:"_blank",onClick:t[12]||(t[12]=S=>e.reportClickVideo("title",S))},[e.info.isAd?(a(),s("h3",rn,[A(n,{class:"bili-video-card__info--ad"}),l("span",{innerHTML:e.info.title},null,8,cn)])):(a(),s("h3",{key:1,class:"bili-video-card__info--tit",innerHTML:e.info.title,title:e.videoTitle},null,8,un))],8,ln)),[[C,e.info.spmInfo],[I,{data:e.info,id:e.locId},"show",{ad:!0,strict:!0,relink:!0}],[I,{data:e.info,id:e.locId},"click",{ad:!0}],[I,{spmid:"search.search-result.up_card.5",location:e.index+1,content_id:e.info.aid},"msg"]]),l("p",dn,[e.showChargeTag&&e.info.isCharge?(a(),s("span",_n,[A(i,{class:"mt_n2"}),vn])):x("",!0),e.info.author.name?M((a(),s("a",{key:1,class:"bili-video-card__info--owner",href:e.links.space,target:"_blank",onClick:t[13]||(t[13]=S=>e.reportClickUp("nickname",S))},[e.info.type==="ketang"?(a(),s("span",mn,"\u8BFE\u5802")):(a(),T(_,{key:1,class:"bili-video-card__info--author-ico mr_2"})),e.info.author.name?(a(),s("span",pn,L(e.info.author.name),1)):x("",!0),!e.info.isAd&&e.info.pubdate?(a(),s("span",{key:3,class:H(["bili-video-card__info--date",{ml_0:!e.info.author.name}])}," \xB7 "+L(e.formats.pubdate),3)):x("",!0)],8,fn)),[[C,e.info.spmInfo]]):x("",!0),!e.info.author.name&&!e.info.isAd&&e.info.pubdate?(a(),s("span",{key:2,class:H(["bili-video-card__info--date",{ml_0:!e.info.author.name}])},L(e.formats.pubdate),3)):x("",!0)])])],64))],2)],34)),[[Q,e.disableScale,"disabled"]])],2)),[[I,()=>e.reportShowVideo(),"show"]])}var lt=re(Eo,[["render",hn],["__scopeId","data-v-383f54eb"]]);const gn={class:"video-list row gutter_md"},$a=le({__name:"SearchSkeleton",setup(e){const t=y(new Array(36).fill({}).map(v=>nt(v))),{isMinMd:r,pageVideos:c}=Me(!0);return(v,p)=>(a(),s("div",{class:H(["i_wrapper mt_lg",{mt_xxl:o(r)}])},[l("div",gn,[(a(!0),s(j,null,ae(t.value,(f,d)=>(a(),s("div",{key:f.bvid,class:H([{hide:d>=o(c)},"video-list-item col_3 col_sm_1_5 mb_xxl"])},[A(lt,{"disable-frame":"","disable-scale":"",info:f,skeleton:!0},null,8,["info"])],2))),128))])],2))}});const yn={class:"special-card"},bn=["href"],kn={class:"special-card-info"},wn=["href"],$n=["title","innerHTML"],Cn=["title"],Sn=["title"],xn=le({__name:"SpecialCard",props:{info:{type:Object,required:!0}},setup(e){const t=e,r=F(be),c=R(()=>({spm_info:"main.search-result.search-card.all",msg:{spmid:"search.search-result.special-video.all",avid:t.info.aid,...r.value}}));return(v,p)=>{const f=N("VImg"),d=fe("report");return M((a(),s("div",yn,[M((a(),s("a",{href:t.info.url,target:"_blank",class:"special-card-img"},[A(f,{src:t.info.cover,width:336,height:189,rule:"1c_100q"},null,8,["src"])],8,bn)),[[d,{...o(c)},"click"]]),l("div",kn,[M((a(),s("a",{href:t.info.url,target:"_blank"},[l("div",{class:"special-card-info-title text_ellipsis",title:o(gt)(t.info.title),innerHTML:t.info.title},null,8,$n)],8,wn)),[[d,{...o(c)},"click"]]),l("div",{class:H(["special-card-info-dec text_ellipsis",{"special-card-info-mutilines":!t.info.rec_reason}]),title:t.info.desc},L(t.info.desc),11,Cn),e.info.rec_reason?(a(),s("div",{key:0,class:"special-card-info-reason text_ellipsis",title:t.info.rec_reason},L(t.info.rec_reason),9,Sn)):x("",!0)])])),[[d,{...o(c)},"show"]])}}});var Pn=re(xn,[["__scopeId","data-v-46ffad84"]]);const In={class:"video i_wrapper search-all-list"},An={key:0,class:"video-v"},Tn={class:"video-list row gutter_md"},Ln=le({__name:"VideoList",props:{info:{type:Array,default:()=>[]}},setup(e){const t=e,{pageVideos:r}=Me(!0),c=R(()=>{var u,n,i,_;const k=String((u=it().query)==null?void 0:u.keyword);if(!k||!((i=(n=t.info)==null?void 0:n[0])!=null&&i.aid))return!1;const g=t.info[0].aid.toString();return k.replace(/^av/i,"")===g||((_=k.match(/\/av(\d+)/i))==null?void 0:_[1])===g}),v=R(()=>{var u,n,i,_;const k=String((u=it().query)==null?void 0:u.keyword);if(!k||!((i=(n=t.info)==null?void 0:n[0])!=null&&i.bvid))return!1;const g=t.info[0].bvid.slice(2);return k.replace(/^bv/i,"")===g||((_=k.match(/\/bv(\w+)/i))==null?void 0:_[1])===g}),p=R(()=>{var k;return nt((k=t.info)==null?void 0:k[0])}),f=R(()=>{const k=[...t.info];return c.value||v.value?k.slice(1):k}),d=k=>nt(k),m=F(be),b=(k,g)=>({video_type:g,card_index:k+1,...m.value});return(k,g)=>(a(),s("div",In,[o(c)||o(v)?(a(),s("div",An,[A(lt,{"grid-class":"col_3 col_sm_1_5","show-av":o(c),"show-bv":o(v),"disable-frame":"","disable-scale":"",grid:"","use-inner-report":"","merge-report-msg":b(0,"av_bv_special"),info:o(p),iid:"pc_app_search_avbv"},null,8,["show-av","show-bv","merge-report-msg","info"])])):x("",!0),l("div",Tn,[(a(!0),s(j,null,ae(o(f),(u,n)=>(a(),s("div",{key:(u==null?void 0:u.bvid)+(u==null?void 0:u.id),class:H([{hide:n>=o(r)},"video-list-item col_3 col_sm_1_5 mb_xxl"])},[u.type==="special_card"?(a(),T(Pn,{key:0,info:u},null,8,["info"])):(a(),T(lt,{key:1,info:d(u),"disable-frame":"","disable-scale":"","use-inner-report":"","show-charge-tag":"","merge-report-msg":b(n),iid:"pc_app_search_videos"},null,8,["info","merge-report-msg"]))],2))),128))])]))}});var En=re(Ln,[["__scopeId","data-v-51b43e48"]]);const Bn=e=>(xe("data-v-38e5f6dd"),e=e(),Pe(),e),Un={class:"score"},Fn={class:"score-text"},Dn={class:"score-value"},Rn=Bn(()=>l("span",null,"\u5206",-1)),Mn=le({__name:"Score",props:{text:{type:String,default:"\u8BC4\u5206"},score:{type:Number,default:0}},setup(e){const t=e;return(r,c)=>(a(),s("div",Un,[l("span",Fn,L(t.text),1),l("span",Dn,[W(L(t.score.toFixed(1)),1),Rn])]))}});var Vn=re(Mn,[["__scopeId","data-v-38e5f6dd"]]);const Nn=e=>(xe("data-v-4efbba96"),e=e(),Pe(),e),On={key:0,class:"media-footer"},Wn=["href","onClick"],qn={key:1,class:"seleced-ep"},Hn={class:"search-exposed"},zn=["innerHTML"],jn=Nn(()=>l("span",{class:"ep"},L("\u9009\u96C6"),-1)),Qn={class:"media-footer-select-content"},Kn=["href","onClick"],Gn=["title","innerHTML"],Jn=["href"],Zn=W(" \u67E5\u770B\u66F4\u591A "),Yn=le({__name:"MediaFooter",props:{info:{type:Array,default:()=>[]},showSelection:{type:Boolean,default:!1},ellipsisUrl:{type:String,default:""},seasonId:{type:Number,default:0},type:{type:String,default:""},cardIndex:{type:Number,default:0}},setup(e){const t=e;let r=[];const c=n=>{r.push(n)},v=y(!1),p=y(-1),f={id:-1,title:"...",url:t.ellipsisUrl,index_title:"",long_title:"\u67E5\u770B\u66F4\u591A"},d=F(be);Ns(()=>{r=[]});const m=y(t.info),b=R(()=>{var n;return((n=t.info)==null?void 0:n.length)>7?[...t.info.slice(0,6)]:t.info}),k=async()=>{var _;await ht();const n=r.length;let i=!0;for(let h=0;h<n;h++)if(((_=r[h])==null?void 0:_.offsetTop)>0){if(h<3){i=!1;break}const $=34,P=8,I=r[h-1].offsetParent.offsetWidth,C=r[h-2].offsetLeft,Q=I-C,S=r[n-1].offsetWidth+P+$,ne=S+P+r[0].offsetWidth;if(Q===I||ne>I){i=!1;break}p.value=Q>S?h-1:h-2;break}i?m.value=p.value===-1?[...t.info]:[...t.info.slice(0,p.value-1),f,t.info[t.info.length-1]]:m.value=[]},g=()=>{m.value=t.info,k()},u=()=>{v.value=!0;const i=document.getElementsByClassName("media-footer-select")[0].getBoundingClientRect().width,_=document.getElementsByClassName("media-footer-select-content");Array.from(_).forEach(h=>{h.style.width=`${i}px`})};return kt(()=>{k(),window.addEventListener("resize",g)}),bt(()=>{window.removeEventListener("resize",g)}),(n,i)=>{const _=N("VButton"),h=N("WidgetArrow"),$=N("VDropdown"),P=fe("report");return e.showSelection?(a(),s("div",On,[(a(!0),s(j,null,ae(m.value,(I,C)=>M((a(),s("a",{key:C,ref_for:!0,ref:c,href:I.url,target:"_blank",onClick:Q=>{var S;return o(ot)(I.url,(S=o(d))==null?void 0:S.trackid)}},[A(_,{class:"media-footer-btn"},{default:ee(()=>[W(L(I.title),1)]),_:2},1024)],8,Wn)),[[P,{spm_info:"main.search-result.search-card.all",msg:{...o(d),location:e.cardIndex+1,type:t.type,spmid:"search.search-result.pgcCard."+(I.title==="..."?"ellipsis":"ep"),epid:I.id,seasonid:e.seasonId,card_index:e.cardIndex+1}},"click"]])),128))])):(a(),s("div",qn,[A($,{trigger:"hover",classname:"selected-ep__dropdown",onShow:u,onHide:i[1]||(i[1]=I=>v.value=!1)},{content:ee(()=>{var I;return[M(l("div",Qn,[(a(!0),s(j,null,ae(o(b),(C,Q)=>M((a(),s("a",{key:Q,target:"_blank",href:C.url,onClick:S=>{var ne;return o(ot)(C.url,(ne=o(d))==null?void 0:ne.trackid)}},[l("div",{class:"media-footer-select-content-item text_ellipsis",title:o(He)(C.title,!1),innerHTML:C.title},null,8,Gn)],8,Kn)),[[P,{spm_info:"main.search-result.search-card.all",msg:{...o(d),index:Q,type:t.type,spmid:"search.search-result.pgcCard.ep",epid:C.id,card_index:e.cardIndex+1}},"click"]])),128)),((I=t.info)==null?void 0:I.length)>7?M((a(),s("a",{key:0,class:"media-footer-select-content-more brand_pink",href:t.ellipsisUrl,target:"_blank",onClick:i[0]||(i[0]=C=>{var Q;return o(ot)(t.ellipsisUrl,(Q=o(d))==null?void 0:Q.trackid)})},[Zn,A(h,{class:"media-footer-select-icon"})],8,Jn)),[[P,{spm_info:"main.search-result.search-card.all",msg:{...o(d),index:0,type:t.type,spmid:"search.search-result.pgcCard.ellipsis",epid:"...",card_index:e.cardIndex+1}},"click"]]):x("",!0)],512),[[Mt,v.value]])]}),default:ee(()=>[A(_,{class:"media-footer-select"},{default:ee(()=>[l("div",Hn,[l("span",{class:"title",innerHTML:o(b)[0].title},null,8,zn),jn]),A(h,{class:H(["media-footer-select-icon rotate_90 ts_all_fast",{rotate_n90:v.value}])},null,8,["class"])]),_:1})]),_:1})]))}}});var Xn=re(Yn,[["__scopeId","data-v-4efbba96"]]);const Ca=e=>(xe("data-v-a966d1a6"),e=e(),Pe(),e),ei={key:0,class:"media-card-skeleton media-card"},ti=yt('<div class="media-card-skeleton-image" data-v-a966d1a6></div><div class="media-card-skeleton-content" data-v-a966d1a6><div class="media-card-skeleton-content-head" data-v-a966d1a6><div class="media-card-skeleton-content-title" data-v-a966d1a6></div><div class="media-card-skeleton-content-text" data-v-a966d1a6></div><div class="media-card-skeleton-content-staff" data-v-a966d1a6></div><div class="media-card-skeleton-content-desc" data-v-a966d1a6></div></div><div class="media-card-skeleton-content-footer" data-v-a966d1a6></div></div>',2),ai=[ti],si={key:1,class:"media-card"},oi=["href"],ni=["textContent"],ii={class:"media-card-image-follow"},li={class:"media-card-content"},ri={class:"media-card-content-head"},ci={class:"media-card-content-head-title"},ui=["title","href","innerHTML"],di={class:"media-card-content-head-text media-card-content-head-label"},_i={key:0},vi={key:0},fi={key:1},mi={key:0},pi={key:2},hi={key:0,class:"media-card-content-head-text media-card-content-head-staff text_ellipsis"},gi=Ca(()=>l("div",null,"\u5236\u4F5C\u56E2\u961F:",-1)),yi=["title","innerHTML"],bi={key:1,class:"media-card-content-head-text media-card-content-head-cv text_ellipsis"},ki=["title","innerHTML"],wi=["title"],$i=Ca(()=>l("div",null,"\u7B80\u4ECB:",-1)),Ci={class:"media-card-content-footer"},Si={class:"media-card-content-footer-btns"},xi=["href"],Pi=W(" \u7ACB\u5373\u89C2\u770B"),Ii=le({__name:"MediaCard",props:{info:{type:Object,default:()=>({})},index:{type:Number,default:0},skeleton:{type:Boolean,default:!1}},setup(e){const t=e,r=y(Boolean(t.info.is_follow)),c=R(()=>{var u,n,i;return(n=(u=t.info)==null?void 0:u.media_score)!=null&&n.user_count?je((i=t.info.media_score)==null?void 0:i.user_count)+"\u4EBA\u8BC4\u5206":""}),v=R(()=>t.info.season_id===26484||t.info.season_id===26481?"\u97F3\u4E50":t.info.season_type_name),p=R(()=>{if(t.info.fix_pubtime_str||t.info.pubtime){const u=t.info.fix_pubtime_str?t.info.fix_pubtime_str:t.info.pubtime;return qa("YYYY-MM-DD",+u*1e3)}return null}),f=F(be),d=R(()=>{var n;const u=(n=t.info.styles)==null?void 0:n.split("/");return u.length>5?u.splice(0,5).join("/"):t.info.styles}),m=R(()=>({spmid:"search.search-result.pgcCard.",seasonid:t.info.season_id,type:t.info.type,location:t.index+1,card_index:t.index+1,...f.value})),b=(u,n)=>{var i;n&&ot(n,(i=f.value)==null?void 0:i.trackid),We({type:"click",spm_info:"main.search-result.search-card.all"},{msg:JSON.stringify({...m.value,spmid:m.value.spmid+u})})},k=async u=>{u.stopPropagation(),u.preventDefault();const{code:n,result:i}=await ns(t.info.season_id);n===0&&i.status===2&&(r.value=!0),b("follow")},g=async u=>{u.stopPropagation(),u.preventDefault();const{code:n,result:i}=await is(t.info.season_id);n===0&&i.status===0&&(r.value=!1),b("follow")};return(u,n)=>{var h,$,P,I;const i=N("VButton"),_=fe("report");return t.skeleton?(a(),s("div",ei,ai)):M((a(),s("div",si,[l("a",{class:"media-card-image",href:e.info.url,target:"_blank",onClick:n[0]||(n[0]=C=>b("other",e.info.url))},[A(o(pt),{src:t.info.cover,alt:t.info.title,width:181,height:241,rule:"1c_100q","bfs-style":"pc-common-cover-v"},null,8,["src","alt"]),(h=e.info.badges)!=null&&h.length?(a(),s("div",{key:0,style:Tt({backgroundColor:e.info.badges[0].bg_color,borderColor:e.info.badges[0].border_color,color:e.info.badges[0].text_color}),class:"media-card-image-tag",textContent:L(e.info.badges[0].text)},null,12,ni)):x("",!0),l("div",ii,[r.value?(a(),T(o(io),{key:0,onClick:g})):(a(),T(o(to),{key:1,onClick:k}))]),A(o(_o),{class:"media-card-image-play"})],8,oi),l("div",li,[l("div",ri,[l("div",ci,[A(Ot,{value:o(v),class:"media-card-content-head-title-tag"},null,8,["value"]),l("a",{title:o(He)(e.info.title,!1),class:"text_ellipsis",href:e.info.url,target:"_blank",onClick:n[1]||(n[1]=C=>b("other",e.info.url)),innerHTML:e.info.title},null,8,ui)]),l("div",di,[e.info.styles?(a(),s("span",_i,[W(L(o(d))+" ",1),o(p)?(a(),s("span",vi," \xB7 ")):x("",!0)])):x("",!0),o(p)?(a(),s("span",fi,[W(L(o(p))+" ",1),e.info.index_show?(a(),s("span",mi," \xB7 ")):x("",!0)])):x("",!0),e.info.index_show?(a(),s("span",pi,L(e.info.index_show),1)):x("",!0)]),e.info.staff&&e.info.media_type===3?(a(),s("div",hi,[gi,l("span",{title:o(He)(e.info.staff,!1),innerHTML:o(He)(e.info.staff,($=e.info.hit_columns)==null?void 0:$.includes("staff"))},null,8,yi)])):e.info.cv?(a(),s("div",bi,[l("div",null,L(t.info.type==="media_ft"?"\u51FA\u6F14":"\u58F0\u4F18")+":",1),l("span",{title:o(He)(e.info.cv,!1),innerHTML:o(He)(e.info.cv,(P=e.info.hit_columns)==null?void 0:P.includes("cv"))},null,8,ki)])):x("",!0),e.info.desc?(a(),s("div",{key:2,title:e.info.desc,class:"media-card-content-head-text media-card-content-head-desc text_ellipsis_3l"},[$i,l("span",null,L(e.info.desc),1)],8,wi)):x("",!0)]),l("div",Ci,[o(c)?(a(),T(Vn,{key:0,class:"media-card-content-footer-score",text:o(c),score:(I=e.info.media_score)==null?void 0:I.score},null,8,["text","score"])):x("",!0),l("div",Si,[M((a(),s("a",{href:e.info.url,target:"_blank",onClick:n[2]||(n[2]=C=>{var Q;return o(ot)(e.info.url,(Q=o(f))==null?void 0:Q.trackid)})},[A(i,{type:"pink",class:"media-card-btn pgc_btn_size"},{default:ee(()=>[Pi]),_:1})],8,xi)),[[_,{spm_info:"main.search-result.search-card.all",msg:{...o(m),spmid:o(m).spmid+"view"}},"click"]]),e.info.ep_size&&e.info.is_selection?(a(),T(Xn,{key:0,"show-selection":e.info.selection_style==="grid","ellipsis-url":e.info.url,info:e.info.eps,"season-id":e.info.season_id,type:e.info.type,"card-index":e.index},null,8,["show-selection","ellipsis-url","info","season-id","type","card-index"])):x("",!0)])])])])),[[_,{spm_info:"main.search-result.search-card.all",msg:{...o(m),spmid:o(m).spmid+"all"}},"show"]])}}});var Wt=re(Ii,[["__scopeId","data-v-a966d1a6"]]);const Ai={class:"row media-item gutter_sm"},Ti=le({__name:"MediaItem",props:{info:{type:Array,default:()=>[]},totalList:{type:Number,default:0},mixin:{type:Boolean,default:!1}},setup(e){const t=e,r=2,c=3,v=5,p=F(be),f=F(ma),d=R(()=>{var b;return`\u67E5\u770B\u5168\u90E8 ${t.mixin?c:t.totalList} \u90E8\u76F8\u5173${((b=t.info[t.info.length-1])==null?void 0:b.type)===Le.media_bangumi?"\u756A\u5267":"\u5F71\u89C6"}\u4F5C\u54C1`}),m=()=>{var k;const b=((k=t.info[t.info.length-1])==null?void 0:k.type)===Le.media_bangumi?"SearchBangumi":"SearchPgc";f(b)};return(b,k)=>{var i;const g=N("WidgetArrow"),u=N("v-button"),n=fe("report");return a(),s(j,null,[l("div",Ai,[(a(!0),s(j,null,ae(t.info,(_,h)=>(a(),s("div",{key:h,class:H(["col_6 media-item-col",{to_hide_md:t.mixin?h>v-2:h>r-1,to_show_md:!t.mixin&&h>c-1,col_md_4:t.info.length>c-1}])},[A(Wt,{info:_,index:h},null,8,["info","index"]),l("div",{class:H({line:!0,"hide-more":!0,showMediaMoreMin:t.mixin&&t.info.length>=v&&h<=1})},null,2)],2))),128))]),M((a(),s("div",{class:"show-more-text",onClick:m},[t.totalList?(a(),T(u,{key:0,type:"link","active-pink":"",class:H(["p_center",{"hide-more":t.mixin?!0:e.totalList<=t.info.length,showMediaMoreMin:t.mixin?t.info.length>=v:t.info.length>r,showMediaMoreMax:!t.mixin&&t.info.length>c}])},{default:ee(()=>[W(L(o(d))+" ",1),A(g,{class:"i_icon_more"})]),_:1},8,["class"])):x("",!0)])),[[n,{spm_info:"main.search-result.search-card.all",msg:{spmid:"search.search-result.pgcCard.showmore",type:(i=t.info[t.info.length-1])==null?void 0:i.type,...o(p)}},"click"]])],64)}}});var It=re(Ti,[["__scopeId","data-v-65bef1bf"]]);const Li={key:0,class:"bangumi-pgc-list i_wrapper search-all-list"},Ei=le({__name:"MediaList",props:{info:{type:Object,default:()=>({})},topTList:{type:Object,default:()=>({})}},setup(e){const t=e,r=R(()=>t.info.bangumi.length>=t.topTList.media_bangumi&&t.info.pgc.length>=t.topTList.media_ft&&t.info.bangumi.length<=2&&t.info.pgc.length<=3?[...t.info.bangumi,...t.info.pgc]:[]),c=R(()=>r.value.length||t.info.bangumi.length||t.info.pgc.length);return(v,p)=>{var f,d;return o(c)?(a(),s("div",Li,[o(r).length?(a(),T(It,{key:0,mixin:"",info:o(r),"total-list":o(r).length},null,8,["info","total-list"])):(a(),s(j,{key:1},[t.info.bangumi.length?(a(),T(It,{key:0,info:t.info.bangumi,"total-list":(f=e.topTList)==null?void 0:f.media_bangumi},null,8,["info","total-list"])):x("",!0),t.info.pgc.length?(a(),T(It,{key:1,info:t.info.pgc,"total-list":(d=e.topTList)==null?void 0:d.media_ft},null,8,["info","total-list"])):x("",!0)],64))])):x("",!0)}}});const Sa=e=>(xe("data-v-1b85e80a"),e=e(),Pe(),e),Bi={key:0,class:"tips-list i_wrapper search-all-list"},Ui=["href","onClick"],Fi={class:"tips-list-item-title"},Di=Sa(()=>l("span",{class:"tips-list-item-split"},"|",-1)),Ri={class:"tips-list-item-sub"},Mi={class:"tips-list-item-title"},Vi=Sa(()=>l("span",{class:"tips-list-item-split"},"|",-1)),Ni={class:"tips-list-item-sub"},Oi=le({__name:"TipsList",props:{info:{type:Array,default:()=>[]}},setup(e){const t=e,r=v=>wa(v),c=F(be);return(v,p)=>{var d;const f=fe("report");return(d=t.info)!=null&&d.length?(a(),s("div",Bi,[(a(!0),s(j,null,ae(t.info,(m,b)=>M((a(),s("div",{key:b,class:"tips-list-item"},[m.jump_url?M((a(),s("a",{key:0,href:r(m.jump_url),target:"_blank",onClick:k=>o(ya)(m.jump_url,"search.Tips")},[l("span",Fi,L(m.title),1),Di,l("span",Ri,L(m.sub_title),1)],8,Ui)),[[f,{spm_info:"main.search-result.search-card.all",msg:{spmid:"search.search-result.tip.click",id:m.id,url:m.jump_url,...o(c)}},"click"]]):(a(),s(j,{key:1},[l("span",Mi,L(m.title),1),Vi,l("span",Ni,L(m.sub_title),1)],64))])),[[f,{spm_info:"main.search-result.search-card.all",msg:{spmid:"search.search-result.tip.show",id:m.id,url:m.jump_url,...o(c)}},"show"]])),128))])):x("",!0)}}});var Wi=re(Oi,[["__scopeId","data-v-1b85e80a"]]),qi="./assets/bili_100.142ea65c.png";const $t=e=>(xe("data-v-084a4224"),e=e(),Pe(),e),Hi=$t(()=>l("div",{class:"a-cycle a-cycle-1"},null,-1)),zi=$t(()=>l("div",{class:"a-cycle a-cycle-2"},null,-1)),ji=$t(()=>l("div",{class:"a-cycle a-cycle-3"},null,-1)),Qi={key:0,class:"live-tab p_center_x text_white bg_brand_pink bd_radius_md fs_6 flex_center text_nowrap"},Ki=$t(()=>l("img",{class:"live-gif w_md mr_xs",src:ls,alt:"live"},null,-1)),Gi=W(" \u76F4\u64AD\u4E2D "),Ji=[Ki,Gi],Zi=le({__name:"UserAvatar",props:{isShowLive:Boolean,isSmall:Boolean,isShowLiveAni:Boolean,info:{type:Object,default:()=>({})}},setup(e){const t=e,r=R(()=>t.isShowLive&&t.info.is_live),c=R(()=>{var p,f;if(!r.value){if(((p=t.info.official_verify)==null?void 0:p.type)===1)return"business";if(((f=t.info.official_verify)==null?void 0:f.type)===0)return"personal"}}),v=y(null);return kt(()=>{new Ha({}).append({avatar:t.info.upic,avatarWidth:86,renderWidth:86,isNFT:!!t.info.face_nft,isCenterScale:!0,iconType:c.value},v.value,"avatar")}),(p,f)=>(a(),s("div",{class:H(["search-user-avatar p_relative",{"avatar-small":e.isSmall}])},[l("div",{class:H(["avatar-wrap p_relative",{"live-ani":o(r)&&e.isShowLiveAni}])},[l("div",{class:"avatar-inner",ref_key:"avatarRef",ref:v},null,512),o(r)&&e.isShowLiveAni?(a(),s(j,{key:0},[Hi,zi,ji],64)):x("",!0)],2),o(r)&&e.info.is_live?(a(),s("div",Qi,Ji)):x("",!0)],2))}});var qt=re(Zi,[["__scopeId","data-v-084a4224"]]);const xa=e=>(xe("data-v-3bd4479d"),e=e(),Pe(),e),Yi={class:"b-user-video-card p_relative"},Xi={key:0,class:"bili-100-bg p_cover"},el=xa(()=>l("div",{class:"bg-gradient w_100 h_100"},null,-1)),tl=[el],al={class:"video-card-content i_wrapper"},sl={class:"user-info flex_start p_relative"},ol={class:"info-card flex_start"},nl=["href"],il={key:0,class:"bili-100-img u_drag_none",src:qi,alt:"\u767E\u5927UP\u4E3B"},ll={class:"b_text i_card_title mt_0"},rl=["href"],cl={class:"user-actions d_inline_block ml_md"},ul=W(" + \u5173\u6CE8 "),dl=W(" + \u5173\u6CE8 "),_l=W("\u5DF2\u5173\u6CE8"),vl={class:"b_text text2 text_ellipsis mt_sm"},fl={class:"text3 ml_md"},ml={key:0,class:"user-tip-row"},pl={class:"tip-content-wrap pr_md p_relative"},hl=["src"],gl=["textContent"],yl=xa(()=>l("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.27145 1.27145 C4.07618 1.46671 4.07618 1.78329 4.27145 1.97855 L8.29289 6 L4.27145 10.0214C4.07618 10.2167 4.07618 10.5333 4.27145 10.7286 C4.46671 10.9238 4.78329 10.9238 4.97855 10.7286L9.17678 6.53033 C9.46967 6.23744 9.46967 5.76256 9.17678 5.46967L4.97855 1.27145 C4.78329 1.07618 4.46671 1.07618 4.27145 1.27145Z"},null,-1)),bl=[yl],kl={key:1,class:"user-video-info mt_md p_relative"},wl={class:"video-list row"},$l=le({__name:"UserVideosCard",props:{info:null},emits:["follow","unfollow"],setup(e,{emit:t}){const r=e,c=R(()=>({fans:je(r.info.fans||0),videos:je(r.info.videos||0)})),v=y(null),p=R(()=>(r.info.res||[]).map(u=>nt(u)).slice(0,6)),f=R(()=>r.info.is_live?`//live.bilibili.com/${r.info.room_id}`:`//space.bilibili.com/${r.info.mid}`),d=R(()=>{var u,n;return wa(`${(n=(u=r.info.expand)==null?void 0:u.system_notice)==null?void 0:n.icon}@28h`)}),{rowVideos:m}=Me(!0),b=()=>{r.info.is_live?ba(r.info.room_id):ze({page:"SpacePage",meta:{mid:r.info.mid}})},k=()=>{var u,n;(n=(u=r.info.expand)==null?void 0:u.system_notice)!=null&&n.url&&ya(r.info.expand.system_notice.url,"search.UserVideoCard")},g=F(be);return(u,n)=>{var h,$,P,I;const i=N("v-button"),_=fe("report");return a(),s("div",Yi,[(h=e.info.expand)!=null&&h.is_power_up?(a(),s("div",Xi,tl)):x("",!0),l("div",al,[l("div",sl,[l("div",ol,[M((a(),s("a",{href:o(f),target:"_blank",onClick:n[0]||(n[0]=C=>b())},[A(qt,{class:"mr_md cs_pointer",info:e.info,"is-small":!0,"is-show-live":!0,"is-show-live-ani":!0},null,8,["info"])],8,nl)),[[_,{spmid:`search.search-result.up_card.${e.info.is_live?3:1}`},"msg"]]),l("div",{ref_key:"userContent",ref:v,class:"user-content p_relative"},[($=e.info.expand)!=null&&$.is_power_up?(a(),s("img",il)):x("",!0),l("h2",ll,[l("a",{class:"user-name cs_pointer v_align_middle",href:`//space.bilibili.com/${e.info.mid}`,target:"_blank",onClick:n[1]||(n[1]=C=>o(ze)({page:"SpacePage",meta:{mid:e.info.mid}}))},[W(L(e.info.uname),1),A(da,{class:"ml_sm",level:e.info.level,"is-senior":!!e.info.is_senior_member},null,8,["level","is-senior"])],8,rl),l("div",cl,[e.info.relation?e.info.relation.followed?(a(),T(i,{key:2,type:"grey",onClick:n[3]||(n[3]=C=>t("unfollow"))},{default:ee(()=>[_l]),_:1})):M((a(),T(i,{key:1,type:"pink",onClick:n[2]||(n[2]=C=>t("follow"))},{default:ee(()=>[dl]),_:1})),[[_,{spmid:"search.search-result.up_card.6"},"msg"]]):M((a(),T(i,{key:0,disabled:"",type:"pink"},{default:ee(()=>[ul]),_:1})),[[_,{spmid:"search.search-result.up_card.6"},"msg"]])])]),l("p",vl,[W(" \u7C89\u4E1D\uFF1A"+L(o(c).fans)+" \xB7 \u89C6\u9891\uFF1A"+L(o(c).videos)+" ",1),l("span",fl,L(((P=e.info.official_verify)==null?void 0:P.desc)||e.info.usign),1)])],512)])]),(I=e.info.expand)!=null&&I.system_notice?(a(),s("div",ml,[M((a(),s("div",{class:"tip-content mt_xs",style:Tt({background:e.info.expand.system_notice.bg_color||"transparent",color:e.info.expand.system_notice.text_color||"#18191c",cursor:e.info.expand.system_notice.url?"pointer":"default"}),onClick:k},[l("div",pl,[e.info.expand.system_notice.icon?(a(),s("img",{key:0,class:"tip-icon",src:o(d)},null,8,hl)):x("",!0),l("span",{class:"tip-text",textContent:L(e.info.expand.system_notice.content)},null,8,gl),e.info.expand.system_notice.url?(a(),s("svg",{key:1,width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",class:"p_center_y r_0",style:Tt({fill:e.info.expand.system_notice.text_color})},bl,4)):x("",!0)])],4)),[[_,{spm_info:"main.search-result.search-card.all",msg:{spmid:"search.search-result.up_card.2",up_mid:e.info.mid,type:e.info.expand.system_notice.notice_type,url:encodeURIComponent(e.info.expand.system_notice.url),...o(g)}},"both"]])])):x("",!0),o(p).length?(a(),s("div",kl,[l("div",wl,[(a(!0),s(j,null,ae(o(p),(C,Q)=>(a(),s("div",{key:C.bvid,class:H([{hide:Q>o(m)},"video-list-item col_1_5 col_sm_2"])},[A(lt,{"disable-frame":"","disable-scale":"","show-charge-tag":"",index:Q,info:C,iid:"pc_app_search_user"},null,8,["index","info"])],2))),128))])])):x("",!0)])])}}});var Cl=re($l,[["__scopeId","data-v-3bd4479d"]]);const Sl=e=>(xe("data-v-0eed2e11"),e=e(),Pe(),e),xl={key:0,class:"user-list search-all-list"},Pl={class:"p_relative"},Il=Sl(()=>l("div",{class:"card-bottom"},null,-1)),Al=["href","onClick"],Tl=le({__name:"UserList",props:{info:{type:Array,default:()=>[]}},setup(e){const r=y([...e.info]),c=it();Ft();const v=()=>{if(!r.value.length)return;const g=r.value.map(u=>u.mid);Et(g).then(u=>{r.value=r.value.map(n=>(n.relation=u[n.mid],n))}).catch(()=>{r.value=r.value.map(u=>(u.relation={followed:!1,mid:u.mid},u))})},f=Qe(g=>{const u=c.query.keyword;Bt(g,u).then(()=>{const n=r.value.find(i=>i.mid===g.mid);n&&(n.relation.attribute=2,n.relation.followed=!0),ft({content:"\u5173\u6CE8\u6210\u529F"})}).catch(n=>{ft({content:n.message||"\u7F51\u7EDC\u5F02\u5E38"})})},500),m=Qe(g=>{const u=c.query.keyword;Ut(g,u).then(()=>{const n=r.value.find(i=>i.mid===g.mid);n&&(n.relation.attribute=void 0,n.relation.followed=!1),ft({content:"\u53D6\u6D88\u5173\u6CE8\u6210\u529F"})}).catch(n=>{ft({content:n.message||"\u7F51\u7EDC\u5F02\u5E38"})})},500);v();const b=F(be),k=g=>{ze({page:"SpacePage",meta:{mid:g,tab:1}})};return(g,u)=>{var h;const n=N("WidgetArrow"),i=N("v-button"),_=fe("report");return(h=e.info)!=null&&h.length?(a(),s("div",xl,[(a(!0),s(j,null,ae(r.value,$=>{var P;return a(),s("div",{key:$.mid},[A(Cl,{info:$,class:H({not_100:!((P=$.expand)!=null&&P.is_power_up)}),"auto-report":{show:!0,spm_info:"main.search-result.search-card.all",msg:{spmid:"search.search-result.up_card.0",up_mid:$.mid,is_live:$.is_live,is_resident_live_room:Number(!!$.live_room),...o(b)}},onFollow:I=>o(f)($.relation),onUnfollow:I=>o(m)($.relation)},null,8,["info","class","auto-report","onFollow","onUnfollow"]),l("div",Pl,[Il,M((a(),s("a",{class:"watch-more",href:`//space.bilibili.com/${$.mid}/video`,target:"_blank",onClick:I=>k($.mid)},[A(i,{type:"link","active-pink":"",class:"p_center"},{default:ee(()=>{var I;return[W(L((I=$.res)!=null&&I.length?"\u67E5\u770BTA\u7684\u6240\u6709\u7A3F\u4EF6":"\u6682\u65E0\u89C6\u9891\u7A3F\u4EF6\uFF0C\u524D\u5F80TA\u7684\u7A7A\u95F4")+" ",1),A(n,{class:"i_icon_more"})]}),_:2},1024)],8,Al)),[[_,{spm_info:"main.search-result.search-card.all",msg:{spmid:"search.search-result.up_card.7",up_mid:$.mid,...o(b)}},"click"]])])])}),128))])):x("",!0)}}});var la=re(Tl,[["__scopeId","data-v-0eed2e11"]]);const Ll={class:"video-list row gutter_md"},El={key:0,class:"flex_center mt_x50 mb_lg"},Pa=le({__name:"SearchVideo",setup(e){const t=y([]),{validQueryParams:r}=Ve(),{pageVideos:c,isMinMd:v}=Me(!0),p=y(!0),f=y(!1),d=y(!1),m=R(()=>p.value||d.value&&!t.value.length),b=y(0),k=y(36),g=F(Je),{page:u,offset:n}=F(Dt),i=F(Ze),_=F(Rt),h=F(qe),$=F(Ye),P=F(Xe),I=F(be),C=B=>({card_index:B+1,...I.value}),Q=()=>{const{order:B,duration:X,tids:D}=r.value;if(!g)return;P(),f.value=!1,d.value=!0,i.value="";const Y=rt({keyword:g.value,search_type:"video",order:B,duration:X,tids:D,page:u.value,page_size:k.value,dynamic_offset:n.value},$.value);ct(Y,[]).then(G=>{p.value=!1,d.value=!1,i.value=G.seid,S(G)}).catch(()=>{f.value=!0,p.value=!1,d.value=!1,S({})})},S=({result:B,numResults:X})=>{b.value=X||0,t.value=(B||[]).map(D=>nt(D))},ne=()=>{me.emit("onPageChange"),setTimeout(()=>{h(),_()},100)};return se(d,B=>{B&&(t.value=[],d.value=!0)}),et({submitSearchHandler:()=>Q(),reloadSearchHandler:()=>m.value&&Q()}),(B,X)=>{const D=N("v-pagenation");return o(m)?(a(),T($a,{key:0})):f.value?(a(),T(Ke,{key:1})):t.value.length?(a(),s("div",{key:3,class:H(["search-page search-page-video i_wrapper mt_lg pb_xxl",{mt_xxl:o(v)}])},[l("div",Ll,[(a(!0),s(j,null,ae(t.value,(Y,G)=>(a(),s("div",{key:Y.bvid,class:H([{hide:G>=o(c)},"video-list-item col_3 col_sm_1_5 mb_xxl"])},[A(lt,{"disable-frame":"","disable-scale":"",info:Y,"use-inner-report":"","show-charge-tag":"","merge-report-msg":C(G),iid:"pc_app_search_videos"},null,8,["info","merge-report-msg"])],2))),128))]),b.value>o(c)?(a(),s("div",El,[A(D,{theme:"pink",pageNum:o(u),"onUpdate:pageNum":X[0]||(X[0]=Y=>wt(u)?u.value=Y:null),"page-size":o(c),total:b.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:ne},null,8,["pageNum","page-size","total"])])):x("",!0)],2)):(a(),T(Ge,{key:2}))}}});const Bl={key:0,class:"search-page search-page-all"},Ul={key:0,class:"flex_center mt_x50 mb_x50"},Fl=le({__name:"SearchAll",setup(e){const t={media_mixin:Ei,video:En,bili_user:la,user:la,tips:Wi},r=y(),c=y([]),v=y([]),p=y([]),f=y([]),d=y([]);ve("bangumi",v),ve("pgc",p);const{pageVideos:m}=Me(!0),{isSearchAll:b}=Ve(),k=y(!0),g=F(_a),u=F(va),n=F(fa),i=R(()=>{var B;return k.value||b.value&&u.value&&!((B=c.value)!=null&&B.length)}),_=R(()=>{var B;return((B=n.value.top_tlist)==null?void 0:B.video)||0}),{page:h}=F(Dt),$=F(pa),P=F(Rt),I=F(qe),C=R(()=>!i.value&&c.value.every(B=>{var X,D;return!B.data.length&&!((X=B.data.bangumi)!=null&&X.length)&&!((D=B.data.pgc)!=null&&D.length)})),Q=(B,X)=>{var D;return((D=B==null?void 0:B.find(Y=>Y.result_type===X))==null?void 0:D.data)||[]},S=B=>{f.value=Q(B,Le.activity),d.value=Q(B,Le.web_game),v.value=Q(B,Le.media_bangumi),p.value=Q(B,Le.media_ft);const X=B.map(G=>G.result_type===Le.activity?{result_type:at.activity_game,data:[...f.value,...d.value]}:G.result_type===Le.web_game?{result_type:at.activity_game,data:[...d.value,...f.value]}:G.result_type===Le.media_bangumi||G.result_type===Le.media_ft?{result_type:at.media_mixin,data:{bangumi:v.value,pgc:p.value}}:G);let D=!1,Y=!1;for(let G=0;G<X.length;G++)X[G].result_type===at.activity_game&&(D?X.splice(G,1):D=!0),X[G].result_type===at.media_mixin&&(Y?X.splice(G,1):Y=!0);return X},ne=()=>{me.emit("onPageChange"),setTimeout(()=>{I(),P()},100)};return se(n,B=>{k.value=!1,c.value=S(B.result||[]),r.value=B==null?void 0:B.top_tlist}),se(u,B=>{B&&(c.value=[])}),se(b,B=>k.value=B),et({reloadSearchHandler:()=>i.value&&$()}),(B,X)=>{const D=N("v-pagenation");return o(b)?(a(),s("div",Bl,[o(i)?(a(),T($a,{key:0})):x("",!0),o(g)?(a(),T(Ke,{key:1})):o(C)?(a(),T(Ge,{key:2})):(a(),s(j,{key:3},[(a(!0),s(j,null,ae(c.value,(Y,G)=>(a(),T(Os(t[Y.result_type]),{key:G,info:Y.data,"top-t-list":r.value},null,8,["info","top-t-list"]))),128)),o(_)>o(m)?(a(),s("div",Ul,[A(D,{theme:"pink",pageNum:o(h),"onUpdate:pageNum":X[0]||(X[0]=Y=>wt(h)?h.value=Y:null),"page-size":o(m),total:o(_),"show-extend-btn":!1,"show-jump-info":!1,onPageChange:ne},null,8,["pageNum","page-size","total"])])):x("",!0)],64))])):(a(),T(Pa,{key:1}))}}});var Dl=re(Fl,[["__scopeId","data-v-3bf1b332"]]),Rl="./assets/loading.5a3d88cd.gif";const Ml={},Vl=e=>(xe("data-v-ac77b742"),e=e(),Pe(),e),Nl={class:"search-loading-container p_relative"},Ol=Vl(()=>l("p",{class:"loading-text b_text text3 p_center"},[l("img",{class:"loading-gif mt_n4 mr_xs",src:Rl,alt:""}),W(" \u52A0\u8F7D\u4E2D... ")],-1)),Wl=[Ol];function ql(e,t){return a(),s("div",Nl,Wl)}var Ct=re(Ml,[["render",ql],["__scopeId","data-v-ac77b742"]]);const Hl=e=>(xe("data-v-69bbc3a9"),e=e(),Pe(),e),zl={class:"search-page i_page_container search-page-bangumi mt_xxl"},jl={class:"media-list pb_xxl i_wrapper"},Ql={class:"row"},Kl={key:0,class:"mt_x50 mb_x50 flex_center"},Gl=Hl(()=>l("div",{class:"page-bottom-fix"},null,-1)),Jl=le({__name:"SearchBangumi",setup(e){const t=y([]),r=y(!1),c=y(!0),{validQueryParams:v,updateQueryParams:p}=Ve(),f=y(+v.value.page||1),d=y(0),m=y(12),b=F(Je),k=F(Ze),g=F(qe),u=R(()=>c.value&&!t.value.length),n=F(Ye),i=F(Xe),_=()=>{i(),r.value=!1,c.value=!0,k.value="";const $=rt({keyword:b.value,search_type:"media_bangumi",page:f.value,page_size:m.value},n.value);ct($).then(({result:P,numResults:I,seid:C})=>{c.value=!1,d.value=I||0,t.value=P||[],k.value=C}).catch(()=>{r.value=!0,c.value=!1,d.value=0,t.value=[]})},h=()=>{me.emit("onPageChange"),g(),setTimeout(()=>_())};return se(b,()=>f.value=1),se(c,$=>{$&&(t.value=[])}),se(f,$=>p({page:$})),et({submitSearchHandler:()=>_(),reloadSearchHandler:()=>u.value&&_()}),($,P)=>{const I=N("v-pagenation");return a(),s("div",zl,[o(u)?(a(),T(Ct,{key:0})):r.value?(a(),T(Ke,{key:1})):!c.value&&!t.value.length?(a(),T(Ge,{key:2})):(a(),s(j,{key:3},[l("div",jl,[l("div",Ql,[(a(!0),s(j,null,ae(t.value,C=>(a(),s("div",{key:C.media_id,class:"col_6 mb_x40"},[(a(),T(Wt,{key:C.media_id,info:C},null,8,["info"]))]))),128))])]),d.value>m.value?(a(),s("div",Kl,[A(I,{theme:"pink",pageNum:f.value,"onUpdate:pageNum":P[0]||(P[0]=C=>f.value=C),total:d.value,"page-size":m.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:h},null,8,["pageNum","total","page-size"])])):x("",!0),Gl],64))])}}});var Zl=re(Jl,[["__scopeId","data-v-69bbc3a9"]]);const Yl=e=>(xe("data-v-5a898f68"),e=e(),Pe(),e),Xl={class:"search-page i_page_container search-page-pgc mt_xxl"},er={class:"media-list pb_xxl i_wrapper"},tr={class:"row"},ar={key:0,class:"mt_x50 mb_x50 flex_center"},sr=Yl(()=>l("div",{class:"page-bottom-fix"},null,-1)),or=le({__name:"SearchPgc",setup(e){const t=y([]),r=y(!1),c=y(!0),{validQueryParams:v,updateQueryParams:p}=Ve(),f=y(+v.value.page||1),d=y(0),m=y(12),b=F(Je),k=F(Ze),g=F(qe),u=R(()=>c.value&&!t.value.length),n=F(Ye),i=F(Xe),_=()=>{i(),r.value=!1,c.value=!0,k.value="";const $=rt({keyword:b.value,search_type:"media_ft",page:f.value,page_size:m.value},n.value);ct($).then(({result:P,numResults:I,seid:C})=>{c.value=!1,d.value=I||0,t.value=P||[],k.value=C}).catch(()=>{r.value=!0,c.value=!1,d.value=0,t.value=[]})},h=()=>{me.emit("onPageChange"),g(),setTimeout(()=>_())};return se(b,()=>f.value=1),se(c,$=>{$&&(t.value=[])}),se(f,$=>p({page:$})),et({submitSearchHandler:()=>_(),reloadSearchHandler:()=>u.value&&_()}),($,P)=>{const I=N("v-pagenation");return a(),s("div",Xl,[o(u)?(a(),T(Ct,{key:0})):r.value?(a(),T(Ke,{key:1})):!c.value&&!t.value.length?(a(),T(Ge,{key:2})):(a(),s(j,{key:3},[l("div",er,[l("div",tr,[(a(!0),s(j,null,ae(t.value,C=>(a(),s("div",{key:C.media_id,class:"col_6 mb_x40"},[(a(),T(Wt,{key:C.media_id,info:C},null,8,["info"]))]))),128))])]),d.value>m.value?(a(),s("div",ar,[A(I,{theme:"pink",pageNum:f.value,"onUpdate:pageNum":P[0]||(P[0]=C=>f.value=C),total:d.value,"page-size":m.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:h},null,8,["pageNum","total","page-size"])])):x("",!0),sr],64))])}}});var nr=re(or,[["__scopeId","data-v-5a898f68"]]);const ir={class:"b-user-live-card flex_start"},lr=["href"],rr={class:"live-content pr_md"},cr={class:"b_text i_card_title mt_0"},ur=["href"],dr=["innerHTML","title"],_r={class:"live-desc b_text fs_5 text3 flex_start text_nowrap"},vr={class:"text_ellipsis d_inline_block"},fr={key:0},mr={class:"live-actions"},pr=W("+ \u5173\u6CE8"),hr=W("+ \u5173\u6CE8"),gr=W("\u5DF2\u5173\u6CE8"),yr=le({__name:"UserLiveCard",props:{info:null},emits:["follow","unfollow"],setup(e,{emit:t}){const r=e,c=y(null),v=R(()=>gt(r.info.uname)),p=R(()=>({...r.info,is_live:r.info.is_live,upic:r.info.uface,official_verify:{}})),f=R(()=>je(r.info.attentions||0)),d=R(()=>r.info.is_live?`//live.bilibili.com/${r.info.roomid}`:`//space.bilibili.com/${r.info.uid}`),m=R(()=>{var u;return((u=r.info.tags)==null?void 0:u.split(","))||[]}),b=()=>{r.info.is_live?ba(r.info.roomid):ze({page:"SpacePage",meta:{mid:r.info.uid}})},g=ha(()=>{if(!!rs()&&c.value){const u=c.value.querySelectorAll(".live-tag-item");if(u.length){const{right:n}=c.value.getBoundingClientRect();[].forEach.call(u,i=>{const{right:_}=i.getBoundingClientRect();_<n?mt(i,"invisible"):ga(i,"invisible")})}}},500);return se([c,m],()=>g()),kt(()=>{g(),window.addEventListener("resize",g)}),bt(()=>{window.removeEventListener("resize",g)}),(u,n)=>{const i=N("v-button");return a(),s("div",ir,[l("a",{class:"mr_md",href:o(d),target:"_blank",onClick:n[0]||(n[0]=_=>b())},[A(qt,{info:o(p),isShowLive:!0},null,8,["info"])],8,lr),l("div",rr,[l("h2",cr,[l("a",{class:"live-title",href:o(d),target:"_blank",onClick:n[1]||(n[1]=_=>b())},[l("span",{innerHTML:e.info.uname,title:o(v)},null,8,dr)],8,ur)]),l("div",_r,[l("span",vr,[W(L(e.info.cate_name),1),e.info.cate_name?(a(),s("span",fr,"\xA0\xB7\xA0")):x("",!0),W(L(o(f))+"\u4EBA\u5173\u6CE8\u76F4\u64AD\u95F4 ",1)]),l("div",{class:"live-tags ml_sm",ref_key:"tagsWrap",ref:c},[(a(!0),s(j,null,ae(o(m),_=>(a(),T(Ot,{class:"live-tag-item mr_xs invisible",key:_,value:_},null,8,["value"]))),128))],512)]),l("div",mr,[e.info.relation?e.info.relation.followed?(a(),T(i,{key:2,type:"grey",onClick:n[3]||(n[3]=_=>t("unfollow"))},{default:ee(()=>[gr]),_:1})):(a(),T(i,{key:1,type:"pink",onClick:n[2]||(n[2]=_=>t("follow"))},{default:ee(()=>[hr]),_:1})):(a(),T(i,{key:0,disabled:"",type:"pink"},{default:ee(()=>[pr]),_:1}))])])])}}});var ra=re(yr,[["__scopeId","data-v-c0c2d280"]]);const br={class:"search-page search-page-live i_page_container i_wrapper"},kr={class:"b_text flex_between"},wr={class:"flex_start"},$r=W(" \u4E3B\u64AD "),Cr={class:"ml_md fs_4 text3 fw_400"},Sr=W(" \u67E5\u770B\u66F4\u591A "),xr={class:"live-user-cards row mt_lg"},Pr={class:"b_text flex_start"},Ir=W(" \u4E3B\u64AD "),Ar={class:"ml_md fs_4 text3 fw_400"},Tr={class:"live-user-cards row mt_lg"},Lr={class:"room-header b_text flex_between"},Er={class:"flex_start"},Br=W(" \u76F4\u64AD\u95F4 "),Ur={class:"room-order flex_start ml_sm"},Fr={class:"ml_md fs_4 text3 fw_400"},Dr={class:"live-room-cards row mt_lg gutter_md"},Rr={key:3,class:"mt_x50 mb_x50 flex_center"},Mr=le({__name:"SearchLive",setup(e){const t=[{type:"live",name:"\u5168\u90E8",query:"live"},{type:"live_user",name:"\u4E3B\u64AD",query:"live_user"},{type:"live_room",name:"\u76F4\u64AD\u95F4",query:"live"}],r=[{order:"online",name:"\u4EBA\u6C14\u76F4\u64AD"},{order:"live_time",name:"\u6700\u65B0\u5F00\u64AD"}],c=y(!1),v=y(!0),p=y([]),f=y([]),d=y(0),m=y(36),b=y(0),k=y(0),g=y("live"),u=y("live"),n=y("online"),i=F(Je),_=F(be),h=F(Ze),$=F(qe),{pageUsers:P,pageVideos:I,isMinMd:C,pageUsersLess:Q}=Me(!0),{validQueryParams:S,initQueryParams:ne,updateQueryParams:B}=Ve(),X=R(()=>g.value==="live_user"?P.value:I.value),{page:D,offset:Y,resetPageParams:G}=Nt(X),ce=R(()=>v.value&&ge.value),ke=R(()=>({userTotal:b.value>=1e3?"1000+":b.value,roomTotal:k.value>=1e3?"1000+":k.value})),ge=R(()=>g.value==="live"&&!p.value.length&&!f.value.length||g.value==="live_user"&&!p.value.length||g.value==="live_room"&&!f.value.length),Ee=F(Ye),Fe=F(Xe);(()=>{var U;const te=S.value,V=te.search_type;g.value=V!=null?V:"live",u.value=["live","live_user"].includes(V)?V:"live",n.value=(U=te.order)!=null?U:"online"})();const we=()=>{Fe(),c.value=!1,v.value=!0,h.value="";const te=rt({keyword:i.value,search_type:u.value,order:n.value,page:D.value,page_size:m.value,dynamic_offset:Y.value},Ee.value);ct(te).then(({result:V,pageinfo:U,numResults:$e,seid:Ce})=>{var Oe,z;if(v.value=!1,h.value=Ce,u.value==="live"&&Ws(V)){d.value=((Oe=U.live_room)==null?void 0:Oe.numResults)||0,k.value=d.value,b.value=((z=U.live_user)==null?void 0:z.numResults)||0;const{live_user:de,live_room:Ue}=V;p.value=de||[],f.value=(Ue||[]).map(za),Ie()}else u.value==="live_user"&&qs(V)&&(d.value=$e||0,b.value=d.value,p.value=V||[],Ie())}).catch(()=>{c.value=!0,v.value=!1,d.value=0,f.value=[]})},Ie=()=>{if(!p.value.length)return;const te=p.value.map(V=>V.uid);Et(te).then(V=>{p.value=p.value.map(U=>(U.relation=V[U.uid],U))}).catch(()=>{p.value=p.value.map(V=>(V.relation={followed:!1,mid:V.uid},V))})},Ne=Qe(te=>{Bt(te,S.value.keyword).then(()=>{const V=p.value.find(U=>U.uid===te.mid);V&&(V.relation.attribute=2,V.relation.followed=!0)})},500),Ae=Qe(te=>{Ut(te,S.value.keyword).then(()=>{const V=p.value.find(U=>U.uid===te.mid);V&&(V.relation.attribute=void 0,V.relation.followed=!1)})},500),q=(te,V,U)=>{const $e=U==="liveUser"?"live_user":"live_room",Ce=te;return{show:!0,spm_info:"main.search-result.search-card.all",msg:{spmid:`search.search-result.${$e}.all`,inner_tab_type:g.value,up_mid:U==="liveUser"?Ce.uid:Ce.author.mid,roomid:U==="liveUser"?Ce.roomid:Ce.roomId,card_index:V+1,..._.value}}},J=({type:te,query:V})=>{g.value=te,u.value=V,D.value=1,setTimeout(()=>we())},ue=te=>{n.value=te,D.value=1,setTimeout(()=>we())},Be=()=>{me.emit("onPageChange"),$(),setTimeout(()=>we())},ye=()=>{B({page:D.value,search_type:g.value,order:n.value})};return se(i,()=>D.value=1),se(v,te=>{te&&(p.value=[],f.value=[],b.value=0,k.value=0)}),se(g,te=>{te==="live_user"&&(n.value="online")},{immediate:!0}),se([D,g,n],()=>ye()),et({submitSearchHandler:()=>we(),reloadSearchHandler:()=>ce.value&&we()}),(te,V)=>{const U=N("v-button"),$e=N("WidgetArrow"),Ce=N("bili-live-card"),Oe=N("v-pagenation");return a(),s("div",br,[l("div",{class:H(["live-condition mt_xl",{mt_xxl:o(C)}])},[(a(),s(j,null,ae(t,z=>A(U,{"active-pink":"",key:z.name,type:"tab",class:"mr_sm",active:z.type===g.value,onClick:de=>J(z)},{default:ee(()=>[W(L(z.name),1)]),_:2},1032,["active","onClick"])),64))],2),o(ce)?(a(),T(Ct,{key:0})):c.value?(a(),T(Ke,{key:1})):!v.value&&o(ge)?(a(),T(Ge,{key:2})):(a(),s(j,{key:3},[g.value==="live"&&p.value.length?(a(),s("div",{key:0,class:H(["live-user mt_xl",{mt_xxl:o(C)}])},[l("h1",kr,[l("span",wr,[$r,l("span",Cr,"\u5171\u627E\u5230"+L(o(ke).userTotal)+"\u4E2A\u7ED3\u679C",1)]),A(U,{class:"i_button_more","active-shrink":"",onClick:V[0]||(V[0]=z=>J(t[1]))},{default:ee(()=>[Sr,A($e,{class:"i_icon_more"})]),_:1})]),l("div",xr,[(a(!0),s(j,null,ae(p.value,(z,de)=>(a(),s("div",{key:z.uid,class:H(["col_6 col_md_4",{hide:de>=o(Q)}])},[(a(),T(ra,{key:z.uid,info:z,class:"live-user-card","auto-report":q(z,de,"liveUser"),onFollow:Ue=>o(Ne)(z.relation),onUnfollow:Ue=>o(Ae)(z.relation)},null,8,["info","auto-report","onFollow","onUnfollow"]))],2))),128))])],2)):x("",!0),g.value==="live_user"&&p.value.length?(a(),s("div",{key:1,class:H(["live-user mt_xl",{mt_xxl:o(C)}])},[l("h1",Pr,[Ir,l("span",Ar,"\u5171\u627E\u5230"+L(o(ke).userTotal)+"\u4E2A\u7ED3\u679C",1)]),l("div",Tr,[(a(!0),s(j,null,ae(p.value,(z,de)=>(a(),s("div",{key:z.uid,class:H(["col_6 col_md_4",{hide:de>=o(P)}])},[(a(),T(ra,{key:z.uid,info:z,class:"live-user-card","auto-report":q(z,de,"liveUser"),onFollow:Ue=>o(Ne)(z.relation),onUnfollow:Ue=>o(Ae)(z.relation)},null,8,["info","auto-report","onFollow","onUnfollow"]))],2))),128))])],2)):x("",!0),g.value!=="live_user"&&f.value.length?(a(),s("div",{key:2,class:H(["live-room mt_sm",{mt_xl:g.value==="live_room"&&!o(C),mt_xxl:g.value==="live_room"&&o(C)}])},[l("h1",Lr,[l("span",Er,[Br,l("div",Ur,[(a(),s(j,null,ae(r,(z,de)=>A(U,{round:"",size:"small",class:H(["live-type-btn",{ml_sm:de>0}]),key:z.name,active:z.order===n.value,onClick:Ue=>ue(z.order)},{default:ee(()=>[W(L(z.name),1)]),_:2},1032,["class","active","onClick"])),64))]),l("span",Fr,"\u5171\u627E\u5230"+L(o(ke).roomTotal)+"\u4E2A\u7ED3\u679C",1)])]),l("div",Dr,[(a(!0),s(j,null,ae(f.value,(z,de)=>(a(),s("div",{key:z.roomId,class:H([{hide:de>=o(I)},"video-list-item col_3 col_sm_1_5 mb_xxl"])},[A(Ce,{info:z,"disable-scale":!0,"auto-report":q(z,de,"liveRoom")},null,8,["info","auto-report"])],2))),128))])],2)):x("",!0),d.value>o(X)?(a(),s("div",Rr,[A(Oe,{theme:"pink",pageNum:o(D),"onUpdate:pageNum":V[1]||(V[1]=z=>wt(D)?D.value=z:null),total:d.value,"page-size":o(X),"show-extend-btn":!1,"show-jump-info":!1,onPageChange:Be},null,8,["pageNum","total","page-size"])])):x("",!0)],64))])}}});var Vr=re(Mr,[["__scopeId","data-v-2698b53c"]]);const Nr={class:"b-user-info-card flex_start"},Or={class:"user-content pr_md"},Wr={class:"b_text i_card_title mt_0"},qr=["title"],Hr=["title"],zr={class:"user-actions"},jr=W("+ \u5173\u6CE8"),Qr=W("+ \u5173\u6CE8"),Kr=W("\u5DF2\u5173\u6CE8"),Gr=le({__name:"UserInfoCard",props:{info:null},emits:["follow","unfollow"],setup(e,{emit:t}){const r=e,c=R(()=>{var m;return((m=r.info.official_verify)==null?void 0:m.desc)||r.info.usign}),v=R(()=>gt(c.value)),p=R(()=>({fans:je(r.info.fans||0),videos:je(r.info.videos||0)})),f=()=>{ze({page:"SpacePage",meta:{mid:r.info.mid}})},d={spmid:"search.search-result.up_card.6"};return(m,b)=>{const k=N("v-button"),g=fe("report");return a(),s("div",Nr,[M((a(),s("a",{class:"mr_md cs_pointer",onClick:f},[A(qt,{info:e.info},null,8,["info"])])),[[g,{spmid:"search.search-result.up_card.1"},"msg"]]),l("div",Or,[l("h2",Wr,[M((a(),s("a",{class:"text1 p_relative cs_pointer",onClick:f,title:e.info.uname},[W(L(e.info.uname),1)],8,qr)),[[g,{spmid:"search.search-result.up_card.8"},"msg"]]),A(da,{class:"ml_sm v_align_baseline",level:e.info.level,"is-senior":!!e.info.is_senior_member},null,8,["level","is-senior"])]),l("p",{class:"b_text fs_5 text2 text_ellipsis",title:o(v)},L(o(p).fans)+"\u7C89\u4E1D \xB7 "+L(o(p).videos)+"\u4E2A\u89C6\u9891 \xA0"+L(o(c)),9,Hr),l("div",zr,[e.info.relation?e.info.relation.followed?M((a(),T(k,{key:2,type:"grey",onClick:b[1]||(b[1]=u=>t("unfollow"))},{default:ee(()=>[Kr]),_:1})),[[g,d,"msg"]]):M((a(),T(k,{key:1,type:"pink",onClick:b[0]||(b[0]=u=>t("follow"))},{default:ee(()=>[Qr]),_:1})),[[g,d,"msg"]]):M((a(),T(k,{key:0,disabled:"",type:"pink"},{default:ee(()=>[jr]),_:1})),[[g,d,"msg"]])])])])}}});var Jr=re(Gr,[["__scopeId","data-v-4aafa3fc"]]);const Zr={class:"search-page search-page-upuser i_page_container i_wrapper"},Yr={class:"conditions-order flex_between mb_sm"},Xr={class:"condition-row"},ec=W(" \u66F4\u591A\u7B5B\u9009 "),tc={class:"condition-row"},ac={class:"media-list row mt_x40"},sc={key:0,class:"mt_x50 mb_x50 flex_center"},oc=le({__name:"SearchUpuser",setup(e){const t=y([{name:"\u9ED8\u8BA4\u6392\u5E8F",order:"",sort:0,orderKey:"default"},{name:"\u7C89\u4E1D\u6570\u7531\u9AD8\u5230\u4F4E",order:"fans",sort:0,orderKey:"fans_desc"},{name:"\u7C89\u4E1D\u6570\u7531\u4F4E\u5230\u9AD8",order:"fans",sort:1,orderKey:"fans_asc"},{name:"Lv\u7B49\u7EA7\u7531\u9AD8\u5230\u4F4E",order:"level",sort:0,orderKey:"level_desc"},{name:"Lv\u7B49\u7EA7\u7531\u4F4E\u5230\u9AD8",order:"level",sort:1,orderKey:"level_asc"}]),r=y([{name:"\u5168\u90E8\u7528\u6237",type:0},{name:"UP\u4E3B\u7528\u6237",type:1},{name:"\u666E\u901A\u7528\u6237",type:2},{name:"\u8BA4\u8BC1\u7528\u6237",type:3}]),c=y([]),v=y(!1),p=y(!0),f=y(""),d=y(0),m=y(0),b=y(null),{isShowMoreConditions:k,toggleSlideMoreConditions:g}=ua(b),u=y(0),n=y(36),i=F(Je),_=F(be),h=F(Ze),$=F(qe),{pageUsers:P,isMinMd:I}=Me(!0),{validQueryParams:C,initQueryParams:Q,updateQueryParams:S}=Ve(),{page:ne,offset:B,resetPageParams:X}=Nt(P),D=R(()=>p.value&&!c.value.length),Y=F(Ye),G=F(Xe),ce=(q,J)=>({show:!0,spm_info:"main.search-result.search-card.all",msg:{spmid:"search.search-result.up_card.0",up_mid:q.mid,is_live:q.is_live,card_index:J+1,is_resident_live_room:Number(!!q.live_room),..._.value}});(()=>{var J;const q=C.value;f.value=(J=q.order)!=null?J:"",d.value=+q.order_sort||0,m.value=+q.user_type||0,k.value=m.value>0})();const ge=()=>{G(),v.value=!1,p.value=!0,h.value="";const q=rt({keyword:i.value,search_type:"bili_user",page:ne.value,page_size:n.value,order:f.value,order_sort:d.value,user_type:m.value,dynamic_offset:B.value},Y.value);ct(q).then(({result:J,numResults:ue,seid:Be})=>{p.value=!1,u.value=ue||0,c.value=J||[],h.value=Be,Ie()}).catch(()=>{v.value=!0,p.value=!1,u.value=0,c.value=[]})},Ee=()=>{me.emit("onPageChange"),$(),setTimeout(()=>ge())},Fe=({order:q,sort:J})=>{f.value===q&&d.value===J||(f.value=q,d.value=J,ne.value=1,setTimeout(()=>ge()))},pe=({type:q})=>{m.value!==q&&(m.value=q,ne.value=1,setTimeout(()=>ge()))},we=()=>{S({page:ne.value,order:f.value,order_sort:d.value,user_type:m.value})},Ie=()=>{if(!c.value.length)return;const q=c.value.map(J=>J.mid);Et(q).then(J=>{c.value=c.value.map(ue=>(ue.relation=J[ue.mid],ue))}).catch(()=>{c.value=c.value.map(J=>(J.relation={followed:!1,mid:J.mid},J))})},Ne=Qe(q=>{Bt(q,C.value.keyword).then(()=>{const J=c.value.find(ue=>ue.mid===q.mid);J&&(J.relation.attribute=2,J.relation.followed=!0)})},500),Ae=Qe(q=>{Ut(q,C.value.keyword).then(()=>{const J=c.value.find(ue=>ue.mid===q.mid);J&&(J.relation.attribute=void 0,J.relation.followed=!1)})},500);return se(i,()=>{ne.value=1,f.value="",d.value=0,m.value=0}),se(p,q=>{q&&(c.value=[])}),se([ne,f,d,m],()=>we()),et({submitSearchHandler:()=>ge(),reloadSearchHandler:()=>D.value&&ge()}),(q,J)=>{const ue=N("v-button"),Be=N("WidgetArrow"),ye=N("fragment"),te=N("v-pagenation"),V=fe("report");return a(),s("div",Zr,[A(ye,{"auto-report":{show:!0,spm_info:"main.search-result.search-filter.all",msg:{...o(_)}}},{default:ee(()=>[l("div",{class:H(["search-conditions mt_xl",{mt_xxl:o(I)}])},[l("div",Yr,[l("div",Xr,[(a(!0),s(j,null,ae(t.value,U=>M((a(),T(ue,{"active-pink":"",key:U.name,type:"tab",class:"mr_sm",active:f.value===U.order&&d.value===U.sort,onClick:$e=>Fe(U)},{default:ee(()=>[W(L(U.name),1)]),_:2},1032,["active","onClick"])),[[V,{click_type:"order",order_id:U.orderKey,order_name:U.name},"msg"]])),128))]),M((a(),T(ue,{class:"i_button_more","active-shrink":"","no-auto-report":"",onClick:o(g)},{default:ee(()=>[ec,A(Be,{class:H(["i_icon_more ts_all_fast rotate_90",{rotate_n90:o(k)}])},null,8,["class"])]),_:1},8,["onClick"])),[[V,{spm_info:"main.search-result.search.filter-toggle",msg:{...o(_),show:!o(k)}},"click"]])]),l("div",{ref_key:"moreConditions",ref:b,class:"more-conditions hide ov_hidden"},[l("div",tc,[(a(!0),s(j,null,ae(r.value,U=>M((a(),T(ue,{"active-pink":"",key:U.name,type:"tab",class:"mb_sm mr_sm",active:m.value===U.type,onClick:$e=>pe(U)},{default:ee(()=>[W(L(U.name),1)]),_:2},1032,["active","onClick"])),[[V,{click_type:"up_type",type_id:U.type,type_name:U.name},"msg"]])),128))])],512)],2)]),_:1},8,["auto-report"]),o(D)?(a(),T(Ct,{key:0})):v.value?(a(),T(Ke,{key:1})):!p.value&&!c.value.length?(a(),T(Ge,{key:2})):(a(),s(j,{key:3},[l("div",ac,[(a(!0),s(j,null,ae(c.value,(U,$e)=>(a(),s("div",{class:H(["col_6 col_md_4 mb_x60",{to_hide_md:$e>23}]),key:U.mid},[(a(),T(Jr,{key:U.mid,"auto-report":ce(U,$e),info:U,onFollow:Ce=>o(Ne)(U.relation),onUnfollow:Ce=>o(Ae)(U.relation)},null,8,["auto-report","info","onFollow","onUnfollow"]))],2))),128))]),u.value>o(P)?(a(),s("div",sc,[A(te,{theme:"pink",pageNum:o(ne),"onUpdate:pageNum":J[0]||(J[0]=U=>wt(ne)?ne.value=U:null),total:u.value,"page-size":o(P),"show-extend-btn":!1,"show-jump-info":!1,onPageChange:Ee},null,8,["pageNum","total","page-size"])])):x("",!0)],64))])}}});var nc=re(oc,[["__scopeId","data-v-4c40412c"]]);const ic=Hs({history:zs(),routes:[{name:"Root",path:"/",redirect:{name:"Search"}},{name:"Search",path:"/search",component:Ao,children:[{path:"",name:"Search0",redirect:{name:"SearchAll"}},{name:"SearchAll",path:"all",component:Dl},{name:"SearchVideo",path:"video",component:Pa},{name:"SearchBangumi",path:"bangumi",component:Zl},{name:"SearchPgc",path:"pgc",component:nr},{name:"SearchLive",path:"live",component:Vr},{name:"SearchUpuser",path:"upuser",component:nc}]}]}),oe=js(ys);oe.use(Qs());oe.use(ic);oe.use(ja);oe.use(ca);oe.use(Qa);oe.use(Ka);oe.use(Ga);oe.use(cs);oe.use(us);oe.use(ds);oe.use(_s);oe.use(vs);oe.use(fs);oe.component(Xt.name,Xt);oe.component(pt.name,pt);oe.component(ea.name,ea);oe.component(ta.name,ta);oe.component(aa.name,aa);oe.component("WidgetArrow",Ja);oe.component("HeaderSlot",ms);oe.component("NotFound",ps);oe.component("Scroller",hs);oe.component("Fragment",gs);oe.mount("#app");const{build:lc,device:fc}=ka("app/getAppInfo");ka("system/isInitSentry")&&Sentry.init({dsn:"http://c8fb384106ac4e03b53db13882e67228@api.bilibili.com/x/traceback/293",debug:!1,release:lc,environment:"production",sampleRate:.1,ignoreErrors:["ResizeObserver loop limit exceeded"],integrations:[new sa.BiliIntegration({ignoreMessageList:[]}),new sa.TrackingReport({env:"production"}),new Sentry.Integrations.Vue({Vue:oe,attachProps:!0})]});
