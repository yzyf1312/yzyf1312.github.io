import"./modulepreload-polyfill.b7f2da20.js";import{v as vuiCssPrefix,T as Tabs,f as formatToDate,i as isHTMLElement,w as withInstall,a as withInstallFunction,b as isObject$1,c as baseGetTag,t as transformRankingPgcToBangumiInfo,d as transformArchiveToVideoInfo,_ as _export_sfc,u as useIntersectionObserver,g as getBmgSrc,e as useTextSelection,V as VImg,P as PlayTime,h as _imports_0$5,j as cookie,B as BiliVideoCard,U as UserAvatar$1,k as formatDate,m as md5,o as onWindowResize,l as offWindowResize,n as Button,p as transformRecToLiveInfo,q as transformRcmdToVideoInfo,r as transformPopularAllToVideoInfo,s as transformSeriesToVideoInfo,x as BiliBangumiCard,y as transformRegionToVideoInfo,z as PaletteTop,A as scrollTo,C as scrollToTop,D as useResizeObserver,E as promiseTimeout,F as transformDynamicArchiveToVideoInfo,W as WidgetUp,G as transformFavFolderVideoToVideoInfo,H as transformFavSeasonVideoToVideoInfo,I as transformBangumiItemToBangumiInfo,J as debounce$2,K as n,L as IcoCharge,M as transformSpaceSeasonToVideoInfo,N as Dropdown,O as Dialog,Q as directive$1,R as VPopover,S as ClientOnly,X as BiliLiveCard,Y as WidgetArrow,Z as sentryIntegrations}from"./index.d0821554.js";import{g as getContext,b as bezier,S as Shader,i as isBol,a as SearchNetError,_ as _imports_0$3,c as _imports_0$4,d as _imports_1,e as getSearchTrending,f as getSearchSuggest,h as _imports_0$6,j as getRelations,k as getClosestElement,F as FixedButtons,u as useScrollToTop,l as useRefresh,m as SearchNoData,n as unique,o as useBreakPoint,p as useToggleMoreConditions,q as _sfc_main$2K,U as UserLevel,r as _imports_0$8,E as ExitIcon,B as BtnLog,s as BtnDev,t as Space$1,I as Input,P as Pagenation,C as Checkbox,R as Radio,v as RadioGroup,w as _sfc_main$2L,x as _sfc_main$2M,y as Fragment$1,z as _sfc_main$2N}from"./UserLevel.7d7f4c68.js";import{E as EffectScope,R as ReactiveEffect,c as customRef,e as effect,a as effectScope,g as getCurrentScope,i as isProxy,b as isReactive,d as isReadonly,f as isRef,h as isShallow,m as markRaw,o as onScopeDispose,p as proxyRefs,r as reactive,j as readonly,k as ref,s as shallowReactive,l as shallowReadonly,n as shallowRef,q as stop,t as toRaw,u as toRef,v as toRefs,w as triggerRef,x as unref,y as camelize,z as capitalize,A as normalizeClass,B as normalizeProps,C as normalizeStyle,D as toDisplayString,F as toHandlerKey,G as BaseTransition,H as Comment,I as Fragment,K as KeepAlive,S as Static,J as Suspense,T as Teleport,L as Text,M as callWithAsyncErrorHandling,N as callWithErrorHandling,O as cloneVNode,P as compatUtils,Q as computed,U as createBlock,V as createCommentVNode,W as createElementBlock,X as createBaseVNode,Y as createHydrationRenderer,Z as createPropsRestProxy,_ as createRenderer,$ as createSlots,a0 as createStaticVNode,a1 as createTextVNode,a2 as createVNode,a3 as defineAsyncComponent,a4 as defineComponent,a5 as defineEmits,a6 as defineExpose,a7 as defineProps,a8 as devtools,a9 as getCurrentInstance,aa as getTransitionRawChildren,ab as guardReactiveProps,ac as h,ad as handleError,ae as initCustomFormatter,af as inject,ag as isMemoSame,ah as isRuntimeOnly,ai as isVNode,aj as mergeDefaults,ak as mergeProps,al as nextTick,am as onActivated,an as onBeforeMount,ao as onBeforeUnmount,ap as onBeforeUpdate,aq as onDeactivated,ar as onErrorCaptured,as as onMounted,at as onRenderTracked,au as onRenderTriggered,av as onServerPrefetch,aw as onUnmounted,ax as onUpdated,ay as openBlock,az as popScopeId,aA as provide,aB as pushScopeId,aC as queuePostFlushCb,aD as registerRuntimeCompiler,aE as renderList,aF as renderSlot,aG as resolveComponent,aH as resolveDirective,aI as resolveDynamicComponent,aJ as resolveFilter,aK as resolveTransitionHooks,aL as setBlockTracking,aM as setDevtoolsHook,aN as setTransitionHooks,aO as ssrContextKey,aP as ssrUtils,aQ as toHandlers,aR as transformVNodeArgs,aS as useAttrs,aT as useSSRContext,aU as useSlots,aV as useTransitionState,aW as version$1,aX as warn,aY as watch,aZ as watchEffect,a_ as watchPostEffect,a$ as watchSyncEffect,b0 as withAsyncContext,b1 as withCtx,b2 as withDefaults,b3 as withDirectives,b4 as withMemo,b5 as withScopeId,b6 as Transition,b7 as TransitionGroup,b8 as VueElement,b9 as createApp,ba as createSSRApp,bb as defineCustomElement,bc as defineSSRCustomElement,bd as hydrate,be as initDirectivesForSSR,bf as render$1a,bg as useCssModule,bh as useCssVars,bi as vModelCheckbox,bj as vModelDynamic,bk as vModelRadio,bl as vModelSelect,bm as vModelText,bn as vShow,bo as withKeys,bp as withModifiers,bq as isArr,br as isNum,bs as events,bt as server,bu as httpServer,bv as resToObj,bw as SPM_PV,bx as http,by as formatNumberWithUnit,bz as httpSvc,bA as biHttp,bB as stringifyQueryString,bC as HttpService,bD as BUILT_IN_MIDDLEWARE,bE as useRoute,bF as debounce$1,bG as storeToRefs,bH as useUserInfoStore,bI as allCustomReport,bJ as logOpenAppPage,bK as formatNum,bL as toastAsync,bM as requestLogin,bN as getData,bO as getAppInfoSync,bP as playerFirstPlay,bQ as setData,bR as isVipUser,bS as playerHeartbeat,bT as playerHistory,bU as useRoutePositionsStore,bV as useMessageStore,bW as formatImg,bX as uploadPicture,bY as messageEvents,bZ as computed$1,b_ as alertAsync,b$ as openInBrowser,c0 as openPlayerWindow,c1 as DPR,c2 as formatImg$1,c3 as openInBrowser$1,c4 as useRouter,c5 as parseContent,c6 as useElementVisible,c7 as contentToDisplayString,c8 as formatTime$1,c9 as getNotificationItemOpenState,ca as handleNotificationItemOpenState,cb as useScrollTriggerInlinePlayStore,cc as setClipboardData,cd as addWatchLater,ce as useScrollTriggerInlinePlayInjectTarget,cf as openLiveRoomWindow,cg as dynamicEvents,ch as useAppInfoStore,ci as useAbTestStore,cj as useConfigStore,ck as useSearchStore,cl as useIpcListener,cm as setMainWindowTheme,cn as IS_MAC,co as RouterLink,cp as selectedEvents,cq as openUploadWindow,cr as captureWindow,cs as trimHttp,ct as callNativeSync,cu as toggleWindowMaximize,cv as getIsMaximized,cw as minimizeWindow,cx as callNative,cy as videoLink,cz as unhtml,cA as ugcSeasonEvents,cB as useUgcSeasonToolStore,cC as useSelectedToolStore,cD as useSelectedStore,cE as useUgcSeasonStore,cF as Upinfo,cG as loadVideoData,cH as requestBigVip,cI as setMainVideoSize,cJ as IS_GPU_DISABLED,cK as throttle$2,cL as reloadUserInfo,cM as share,cN as closeWindow,cO as getIsVisible,cP as setPlayerFullscreen,cQ as setMiniMainBtnsVisible,cR as mainWindowMouseEnter,cS as sleep,cT as getVersion,cU as PRIVACY_POLICY_HIDDEN_KEY,cV as getIsQuitByCloseMain,cW as useNotificationStore,cX as setIsQuitByCloseMain,cY as forceCloseWindow,cZ as quitBiliApp,c_ as signQueryParams,c$ as IS_WIN,d0 as IS_LINUX,d1 as useMineStore,d2 as OgvCardType,d3 as getTabResult,d4 as getIndexResult,d5 as PC_APP,d6 as getCondition,d7 as useDynamicStore,d8 as useScrollTriggerInlinePlayProvideContainer,d9 as getAugmentedNamespace,da as commonjsGlobal,db as getDefaultExportFromCjs,dc as PictureUploader,dd as getDynamicLiveList,de as getUpListNew,df as formatDuration$1,dg as useDownloadPageStore,dh as formatSize,di as tryLocalImage,dj as trimHttp$1,dk as MINE_FAVORITE_FILTER_TYPE_LIST,dl as MINE_FAVORITE_OGV_OPTIONS,dm as mineEvents,dn as searchEvents,dp as spaceEvents,dq as mitt,dr as getAppStartUpTheme,ds as getIsGpuDisabled,dt as getIsSelectedFirst,du as getIsAppOpenAtLogin,dv as setIsAppOpenAtLogin,dw as setIsSelectedFirst,dx as setAppStartUpTheme,dy as setIsDisableGpu,dz as relaunchApp,dA as getDownloadInfo,dB as getBossShortcutInfo,dC as setBossShortcutInfo,dD as callNative$1,dE as IS_DEV_MODE,dF as IS_RELEASE,dG as getAppPath,dH as getPath,dI as openPath,dJ as toggleDevTools,dK as openTestWindow,dL as closeTestWindow,dM as openTestWindowDevTools,dN as closeTestWindowDevTools,dO as IS_DEV,dP as getBuildCode,dQ as requestLogout,dR as createRouter,dS as createWebHashHistory,dT as createPinia,dU as callNativeSync$1}from"./index.e69ae269.js";import{g as getRichTextareaTextNode,a as getRichTextareaHighlightNode,R as RichTextNodeType,b as getRichTextareaEmojiNode,s as splitStringWithRegExp,M as ModuleType,c as clearArray,p as postDynamicLike,D as DEFAULT_IMG,I as IcoClose,d as RichText,r as replyAdd,e as dmThumbupAdd,f as replyAction,T as ThreePoint,_ as _sfc_main$2z,h as removeDynamic,i as postSetDynamicSpaceTop,w as watchAdd,j as IcoPlay,k as IcoDanmaku,l as MdlDynType,u as useCommentModule,m as IcoClose$1,n as getFirstParentClassName,o as getDynamicDetailForward,q as getDynamicDetail,V as VPopup,t as postDynamicReport,v as _sfc_main$2A,x as IcoHome,y as IcoMini,z as IcoMin,A as IcoMax,B as IcoMaxExit,C as VdPlay,E as VdDm,F as _sfc_main$2B,G as BarLike,H as _sfc_main$2C,J as BarCoin,K as BarFav,L as BarShare,N as VdMenu,O as _sfc_main$2D,P as VdPauseS,Q as VdPlays,S as _sfc_main$2E,U as _sfc_main$2F,W as CheckboxDefault,X as CheckboxSelected,Y as IcoAdd$1,Z as ShareQzone,$ as ShareWeibo,a0 as ShareDynmic,a1 as ShareWeixin,a2 as ShareQQ,a3 as ShareVideo,a4 as shareAdd,a5 as copyText,a6 as browser,a7 as IcoMiniEx,a8 as _sfc_main$2G,a9 as _sfc_main$2H,aa as _imports_0$7,ab as getScrollParent,ac as getSelectorByClassNames,ad as getDynamicList,ae as _sfc_main$2I,af as getStringLength,ag as RichTextarea,ah as IcoEmoji,ai as _sfc_main$2J,aj as IcoAt,ak as createDynamic,al as getDynamicPublishConfig,am as getDynamicVideos,an as getDynamicUpdate,ao as IcoDelete$1,ap as VdFollow$1,aq as VdRestart,ar as directive}from"./vd_restart.dc2d5914.js";import{i as isUdf}from"./isUdf.1a76b9f4.js";import{I as IcoPin}from"./ico_pin.f7d7c54a.js";var biliapp="";const compile=()=>{};var vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,compile,EffectScope,ReactiveEffect,customRef,effect,effectScope,getCurrentScope,isProxy,isReactive,isReadonly,isRef,isShallow,markRaw,onScopeDispose,proxyRefs,reactive,readonly,ref,shallowReactive,shallowReadonly,shallowRef,stop,toRaw,toRef,toRefs,triggerRef,unref,camelize,capitalize,normalizeClass,normalizeProps,normalizeStyle,toDisplayString,toHandlerKey,BaseTransition,Comment,Fragment,KeepAlive,Static,Suspense,Teleport,Text,callWithAsyncErrorHandling,callWithErrorHandling,cloneVNode,compatUtils,computed,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSlots,createStaticVNode,createTextVNode,createVNode,defineAsyncComponent,defineComponent,defineEmits,defineExpose,defineProps,get devtools(){return devtools},getCurrentInstance,getTransitionRawChildren,guardReactiveProps,h,handleError,initCustomFormatter,inject,isMemoSame,isRuntimeOnly,isVNode,mergeDefaults,mergeProps,nextTick,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onServerPrefetch,onUnmounted,onUpdated,openBlock,popScopeId,provide,pushScopeId,queuePostFlushCb,registerRuntimeCompiler,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,ssrContextKey,ssrUtils,toHandlers,transformVNodeArgs,useAttrs,useSSRContext,useSlots,useTransitionState,version:version$1,warn,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withMemo,withScopeId,Transition,TransitionGroup,VueElement,createApp,createSSRApp,defineCustomElement,defineSSRCustomElement,hydrate,initDirectivesForSSR,render:render$1a,useCssModule,useCssVars,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,withKeys,withModifiers},Symbol.toStringTag,{value:"Module"})),component$2="tab-item",cssPrefix$2=vuiCssPrefix+"_"+component$2,tabItemProps={key:String,tab:String,num:Number,showZerro:Boolean,disabled:Boolean},TabItem=defineComponent({name:"VTabItem",inheritAttrs:!1,props:tabItemProps,setup:function(a,o){var s=o.slots;return o.attrs,o.emit,function(){var i;return h("div",{class:cssPrefix$2},(i=s.default)===null||i===void 0?void 0:i.call(s))}}});Tabs.TabItem=TabItem;Tabs.install=function(a){return a.component(Tabs.name,Tabs),a.component(TabItem.name,TabItem),a};function deepCopy(a){var o=[],s=function i(l){if(!l||typeof l!="object")return l;if(isArr(l))return l.map(function(r){return i(r)});if(o.indexOf(l)>-1)return l.constructor&&"[".concat(l.constructor.name,"]");o.push(l);var c={};return Object.keys(l).forEach(function(r){return c[r]=i(l[r])}),c};return s(a)}function omit$1(a,o,s){a=a||{},isArr(o)||(o=[]);var i={};return Object.keys(a).forEach(function(l){o.indexOf(l)===-1&&(i[l]=s?deepCopy(a[l]):a[l])}),i}function formatDuration(a,o){if(!a||!/[hms]/.test(a))return"";(!o||o<0)&&(o=0);var s=Math.floor(o/36e5),i=Math.floor(o/6e4),l=Math.floor(o/1e3),c={h:"",m:"",s:"",hh:"",mm:"",ss:""};a.match(/h/)?(c.h=s,c.m=Math.floor(l%3600/60),c.s=Math.floor(l%60)):(c.h=0,c.m=i,c.s=Math.floor(l%60));var r=a.replace(/\(([^)]*hh?[^)]*)\)\?/,function(u,d){return c.h?d:""});return["h","m","s"].forEach(function(u){c[u+u]=c[u]<10?"0"+c[u]:c[u],r=r.replace(new RegExp(u+"{2,}","g"),c[u+u]).replace(new RegExp(u,"g"),c[u])}),r}function getDayStartTime(a){isUdf(a)&&(a=new Date);var o=formatToDate(a);return o?o.setHours(0,0,0,0):NaN}function formatTime(a,o){var s=formatToDate(a);if(!s)return"";o||(o={});var i=o.justNow||"\u521A\u521A",l=o.minutesAgo||"\u5206\u949F\u524D",c=o.hoursAgo||"\u5C0F\u65F6\u524D",r=o.yesterday||"\u6628\u5929",u=o.future||"",d=Date.now();if(a=s.valueOf(),d<a)return u;if(d-a<=6e4)return i;if(d-a<36e5)return Math.floor((d-a)/6e4)+l;if(d-a<864e5)return Math.floor((d-a)/36e5)+c;if(getDayStartTime(new Date)-a<864e5)return r;var _=s.getFullYear(),f="0".concat(s.getMonth()+1).substr(-2),m="0".concat(s.getDate()).substr(-2);return _===new Date().getFullYear()?"".concat(f,"-").concat(m):"".concat(_,"-").concat(f,"-").concat(m)}function toHttps(a){if(!a)return"";var o=a.replace(/^(http:\/\/|:\/\/|\/\/|\/)/,"https://");return/^https:\/\//.test(o)?o:a}function setCursorPosition(a,o){isHTMLElement(a)&&a.focus&&setTimeout(function(){if(isNum(o)||(o=(a.value||"").length),a.setSelectionRange)a.focus(),a.setSelectionRange(o,o);else if(a.createTextRange){var s=a.createTextRange();s.collapse(!0),s.moveEnd("character",o),s.moveStart("character",o),s.select()}})}var component$1="switch",cssPrefix$1=vuiCssPrefix+"_"+component$1,switchProps={disabled:{type:Boolean,default:!1},value:{type:Boolean,default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""}},Switch$1=defineComponent({name:"VSwitch",inheritAttrs:!1,props:switchProps,emits:["change"],setup:function(a,o){o.slots,o.attrs;var s=o.emit,i=ref(),l=ref(),c=ref(a.value),r=function(_){a.disabled||(c.value=!c.value,nextTick(function(){s("change",c.value),i.value&&(i.value.checked=Boolean(c.value))}))},u=function(_){_.preventDefault(),r()},d=function(){var _=c.value?a.activeColor:a.inactiveColor;l.value.style.borderColor=_,l.value.style.backgroundColor=_};return onMounted(function(){(a.activeColor||a.inactiveColor)&&d()}),watch(function(){return c.value},function(){l.value&&(a.activeColor||a.inactiveColor)&&d()}),watch(function(){return a.value},function(){c.value=a.value}),function(){return h("div",{class:[cssPrefix$1+"--switch",c.value&&"is-checked",a.disabled&&"is-disabled"],onClick:u,"aria-checked":c.value,"aria-disabled":a.disabled},h("input",{class:[cssPrefix$1+"-input"],type:"checkbox",ref:i,onChange:r}),h("span",{class:[cssPrefix$1+"-core"],ref:l}))}}}),Switch=withInstall(Switch$1),component="notification",cssPrefix=vuiCssPrefix+"_"+component,notificationProps={showCloseIcon:{type:Boolean,default:!0},target:{type:String,default:"body"},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},id:{type:Number,default:0},duration:{type:Number,default:0},offset:{type:Number,default:0},zIndex:{type:Number,default:3e3},titleText:{type:String,default:""},className:{type:String,default:""},onClose:Function},NotificationCom=defineComponent({name:"VNotification",inheritAttrs:!1,props:notificationProps,emits:["destroy"],setup:function(a,o){var s=o.slots;o.attrs;var i=o.emit,l=o.expose,c=ref(!1),r,u=function(){c.value=!1};l({cancel:u});var d=function(){return h("div",{class:cssPrefix+"-group-close",onClick:u},h("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.46967 0.46967C0.176777 0.762563 0.176777 1.23744 0.46967 1.53033L6.01041 7.07107L0.46967 12.6118C0.176777 12.9047 0.176777 13.3796 0.46967 13.6725C0.762564 13.9654 1.23744 13.9654 1.53033 13.6725L7.07107 8.13173L12.6118 13.6725C12.9047 13.9654 13.3796 13.9654 13.6725 13.6725C13.9654 13.3796 13.9654 12.9047 13.6725 12.6118L8.13173 7.07107L13.6725 1.53033C13.9654 1.23744 13.9654 0.762563 13.6725 0.46967C13.3796 0.176777 12.9047 0.176777 12.6118 0.46967L7.07107 6.01041L1.53033 0.46967C1.23744 0.176777 0.762563 0.176777 0.46967 0.46967Z",fill:"var(--text2)"})))},_=function(){var B,C,S=(B=s.prefix)===null||B===void 0?void 0:B.call(s);return S&&h("div",{class:cssPrefix+"-prefix"},(C=s.prefix)===null||C===void 0?void 0:C.call(s))},f=function(){var B,C=h("div",{id:a.id+"",class:[cssPrefix,a.className,m.value],style:v.value,onMouseleave:$,onMouseenter:y},_(),h("div",{class:cssPrefix+"-group"},a.titleText&&h("div",{class:cssPrefix+"-group-title"},a.titleText),h("div",{class:cssPrefix+"-group-content"},(B=s.default)===null||B===void 0?void 0:B.call(s)),a.showCloseIcon&&d()));return withDirectives(C,[[vShow,c.value]])},m=computed(function(){return a.position.endsWith("right")?cssPrefix+"-right":cssPrefix+"-left"}),p=computed(function(){return a.position.startsWith("top")?"top":"bottom"}),v=computed(function(){var B;return B={},B[p.value]=a.offset+"px",B.zIndex=a.zIndex,B}),g=function(){i("destroy")},$=function(){a.duration>0&&(r=setTimeout(function(){c.value=!1},a.duration))},y=function(){r&&clearTimeout(r)};return onMounted(function(){$(),c.value=!0}),function(){return h(Transition,{name:cssPrefix,onBeforeLeave:function(){var B;return(B=a.onClose)===null||B===void 0?void 0:B.call(a)},onAfterLeave:g},function(){return f()})}}}),__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(a){for(var o,s=1,i=arguments.length;s<i;s++){o=arguments[s];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a},__assign.apply(this,arguments)},__values=globalThis&&globalThis.__values||function(a){var o=typeof Symbol=="function"&&Symbol.iterator,s=o&&a[o],i=0;if(s)return s.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&i>=a.length&&(a=void 0),{value:a&&a[i++],done:!a}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},seed=0,GAP=16,notificationArr={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},defaultOption={zIndex:3e3,id:0,offset:0,position:"top-right",target:"body",onClose:function(a){},default:null,prefix:null},close=function(a,o,s){var i,l;s===void 0&&(s=function(y){});var c=notificationArr[o],r=c.findIndex(function(y){var B;return((B=y.component)===null||B===void 0?void 0:B.props.id)===a});if(r!==-1){var u=c[r];if(!!u){s==null||s(u);var d=(i=u==null?void 0:u.el)===null||i===void 0?void 0:i.offsetHeight,_=(l=o==null?void 0:o.split("-"))===null||l===void 0?void 0:l[0];c.splice(r,1);for(var f=c.length,m=r;m<f;m++){var p=c[m],v=p.el,g=p.component,$=parseInt(v==null?void 0:v.style[_],10)-d-GAP;g.props.offset=$}}}},closeAll=function(){var a,o;try{for(var s=__values(Object.values(notificationArr)),i=s.next();!i.done;i=s.next()){var l=i.value;l.forEach(function(c){var r,u,d;return(d=(u=(r=c.component)===null||r===void 0?void 0:r.exposed)===null||u===void 0?void 0:u.cancel)===null||d===void 0?void 0:d.call(u)})}}catch(c){a={error:c}}finally{try{i&&!i.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}},notify=function(a){a===void 0&&(a=defaultOption),a=__assign(__assign({},defaultOption),a);var o=a.offset,s=a.position;notificationArr[s].forEach(function(u){var d;o+=((d=u==null?void 0:u.el)===null||d===void 0?void 0:d.offsetHeight)+GAP});var i=a.id+ ++seed,l=createVNode(NotificationCom,__assign(__assign({},a),{zIndex:a.zIndex+ ++seed,id:i,offset:o,onClose:function(){close(i,s,a.onClose)}}),{default:a.default,prefix:a.prefix});l.props.onDestroy=function(){render$1a(null,c)};var c=document.createElement("div"),r=document.querySelector(a.target);return render$1a(l,c),notificationArr[s].push(l),r==null||r.appendChild(c.firstElementChild),{close:function(){var u,d,_;return(_=(d=(u=l.component)===null||u===void 0?void 0:u.exposed)===null||d===void 0?void 0:d.cancel)===null||_===void 0?void 0:_.call(d)}}};notify.closeAll=closeAll;var NotifyFn=notify,Notification=withInstall(NotificationCom),Notify=withInstallFunction(NotifyFn,"$notify"),index$2="",index$1="",asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(a){if(!isObject$1(a))return!1;var o=baseGetTag(a);return o==funcTag||o==genTag||o==asyncTag||o==proxyTag}const RANKING_FILTER_TYPE_LIST=[{name:"\u5168\u7AD9",tid:0,slug:"all"},{name:"\u756A\u5267",type:"bangumi",tid:13,slug:"bangumi",season_type:1},{name:"\u56FD\u4EA7\u52A8\u753B",type:"bangumi",tid:168,slug:"guochan",season_type:4},{name:"\u56FD\u521B\u76F8\u5173",tid:168,slug:"guochuang"},{name:"\u7EAA\u5F55\u7247",type:"cinema",slug:"documentary",tid:177,season_type:3},{name:"\u52A8\u753B",tid:1,slug:"douga"},{name:"\u97F3\u4E50",tid:3,slug:"music"},{name:"\u821E\u8E48",tid:129,slug:"dance"},{name:"\u6E38\u620F",tid:4,slug:"game"},{name:"\u77E5\u8BC6",tid:36,slug:"knowledge"},{name:"\u79D1\u6280",tid:188,slug:"tech"},{name:"\u8FD0\u52A8",tid:234,slug:"sports"},{name:"\u6C7D\u8F66",tid:223,slug:"car"},{name:"\u751F\u6D3B",tid:160,slug:"life"},{name:"\u7F8E\u98DF",tid:211,slug:"food"},{name:"\u52A8\u7269\u5708",tid:217,slug:"animal"},{name:"\u9B3C\u755C",tid:119,slug:"kichiku"},{name:"\u65F6\u5C1A",tid:155,slug:"fashion"},{name:"\u5A31\u4E50",tid:5,slug:"ent"},{name:"\u5F71\u89C6",tid:181,slug:"cinephile"},{name:"\u7535\u5F71",type:"cinema",slug:"movie",tid:23,season_type:2},{name:"\u7535\u89C6\u5267",type:"cinema",slug:"tv",tid:11,season_type:5},{name:"\u539F\u521B",slug:"origin",tid:0,rank_type:"origin"},{name:"\u65B0\u4EBA",slug:"rookie",tid:0,rank_type:"rookie"}],LOGIN_KEEP_VIDEO="SELECTED_LOGIN_KEEP_VIDEO",KEY_DM_SWITCH="KEY_SELECTED_DM_SWITCH",KEY_QN_CONFIG="KEY_SELECTED_QN_CONFIG",KEY_RATE_CONFIG="KEY_SELECTED_RATE_CONFIG",KEY_VOLUME_CONFIG="KEY_SELECTED_VOLUME_CONFIG",getDrawOnePicPreviewSize=({width:a,height:o})=>{const s=a/o,i=180,l=240,c=320,r={width:c,height:l,bfsStyle:""};return a<i*2?s>=1?(r.width=i,r.height=r.width/s,r.bfsStyle="pc-dynamic-sm-short",r):s<.75?(r.height=l,r.width=r.height*s,r.bfsStyle="pc-dynamic-sm-long",r):(r.width=l,r.height=r.width/s,r.bfsStyle="pc-dynamic-sm-middle",r):a>c*3?s>=1?(r.width=c,r.height=r.width/s,r.bfsStyle="pc-dynamic-lg-short",r):s<.75?(r.width=l,r.height=c,r.bfsStyle="pc-dynamic-lg-long",r):(r.width=l,r.height=r.width/s,r.bfsStyle="pc-dynamic-lg-middle",r):s>=1?(r.width=l,r.height=r.width/s,r.bfsStyle="pc-dynamic-md-short",r):s<.75?(r.width=l,r.height=c,r.bfsStyle="pc-dynamic-md-long",r):(r.width=l,r.height=r.width/s,r.bfsStyle="pc-dynamic-md-middle",r)},transformRichTextNode2RichTextareNode=a=>{switch(a.type){case RichTextNodeType.RICH_TEXT_NODE_TYPE_AT:return getRichTextareaHighlightNode({type:"at",data:{text:a.text,rid:a.rid},unique:!1});case RichTextNodeType.RICH_TEXT_NODE_TYPE_LOTTERY:return getRichTextareaHighlightNode({type:"lottery",data:{text:a.text,rid:a.rid},unique:!0});case RichTextNodeType.RICH_TEXT_NODE_TYPE_VOTE:return getRichTextareaHighlightNode({type:"vote",data:{text:a.text,rid:a.rid},unique:!0});case RichTextNodeType.RICH_TEXT_NODE_TYPE_EMOJI:return getRichTextareaEmojiNode(a.text,{type:a.emoji.type,size:a.emoji.size,text:a.emoji.text,id:0,src:a.emoji.icon_url});case RichTextNodeType.RICH_TEXT_NODE_TYPE_BV:return getRichTextareaHighlightNode({type:"bv",data:{text:a.text,rid:a.rid},unique:!0});case RichTextNodeType.RICH_TEXT_NODE_TYPE_TEXT:default:return getRichTextareaTextNode(a.text)}},getDefaultForwardContentNodes=(a,o)=>[getRichTextareaTextNode("//"),getRichTextareaHighlightNode({type:"at",data:{rid:a.uid,text:`@${a.name}`},unique:!1}),getRichTextareaTextNode(":"),...o.map(transformRichTextNode2RichTextareNode)],getRichTextNodes=(a,o)=>o.length?splitStringWithRegExp(a,new RegExp(/@[^\s$]{1,16}/g)).map(i=>{if(i.type){const l=o.find(c=>c.name===i.text.substring(1));if(l)return{type:RichTextNodeType.RICH_TEXT_NODE_TYPE_AT,text:i.text,orig_text:i.text,rid:String(l.mid)}}return{type:RichTextNodeType.RICH_TEXT_NODE_TYPE_TEXT,text:i.text,orig_text:i.text}}):a?[{type:RichTextNodeType.RICH_TEXT_NODE_TYPE_TEXT,text:a,orig_text:a}]:[],getRemoveAuthorAllDynamicCardFilter=a=>o=>{var i,l,c;const s=(i=o.modules)==null?void 0:i.find(r=>r.module_type===ModuleType.MODULE_TYPE_AUTHOR);return((c=(l=s==null?void 0:s.module_author)==null?void 0:l.user)==null?void 0:c.mid)!==a},modifyRelation=async(a,o)=>{try{await postRelationModify(a,o);const s={mid:a,isFollow:!o};return events.emit("relationChange",s),s}catch(s){return Promise.reject(s)}},clamp=(a,o,s)=>Math.max(o,Math.min(s,a));let shader=null,vao=null;const getShader=a=>{if(shader)return shader;const o=`#version 300 es
    precision mediump float;

    layout(location = 0) in vec2 i_position;

    out vec2 position;

    void main() {
      position = i_position;
      gl_Position = vec4(position, 0., 1.);
    }
  `,s=`#version 300 es
    precision mediump float;

    uniform sampler2D screen;
    uniform float aspect;
    uniform float scale;
    uniform float inside;
    uniform float pct;
    uniform vec2 center;

    in vec2 position;
    out vec4 fragColor;

    void main() {
      vec2 p = vec2(position.x * aspect, position.y);
      float d = length(p - center);
      fragColor = vec4(vec3(pct), 1.);

      bool b_inside = inside > 0.5;
      float n_pct = b_inside ? 1. - pct : pct;
      bool transparent = d > n_pct * scale;
      if(b_inside ? transparent : !transparent) {
        fragColor = vec4(0., 0., 0., 0.);
      } else {
        vec2 uv = position / 2. + 0.5;
        uv.y = 1. - uv.y;
        // getBitmap() \u8FD4\u56DE\u7684r\u901A\u9053\u548Cb\u901A\u9053\u662F\u53CD\u7684?
        fragColor = texture(screen, uv).bgra;
      }
    }
  `;return shader=new Shader({gl:a,vs:o,fs:s}),shader},getGeometry=a=>{if(vao)return vao;const o=new Float32Array([-1,1,-1,-1,1,1,1,-1]);vao=a.createVertexArray();const s=a.createBuffer();return a.bindVertexArray(vao),a.bindBuffer(a.ARRAY_BUFFER,s),a.bufferData(a.ARRAY_BUFFER,o,a.STATIC_DRAW),a.enableVertexAttribArray(0),a.vertexAttribPointer(0,2,a.FLOAT,!0,8,0),vao},preloadThemeTransition=()=>{const a=getContext();getShader(a),getGeometry(a)},themeTransition=async({buffer:a,width:o,height:s},i,l)=>{const c=getContext(),r=getShader(c),u=getGeometry(c),d=500,_=o/s,f=[i.left+i.width/2,window.innerHeight-(i.top+i.height/2)],m=[(2*f[0]/window.innerWidth-1)*_,2*f[1]/window.innerHeight-1],p=_-m[0],v=1-m[1],g=Math.sqrt(p*p+v*v);r.use(),r.setUniform("aspect","FLOAT",_),r.setUniform("center","VEC2",m),r.setUniform("scale","FLOAT",g),r.setUniform("inside","FLOAT",Number(l==="light"));const $=new ImageData(new Uint8ClampedArray(a),o,s),y=c.createTexture();c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,y),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,WebGL2RenderingContext.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,WebGL2RenderingContext.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,WebGL2RenderingContext.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,WebGL2RenderingContext.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,$),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,y);const B=bezier(.65,0,.35,1);let C=-1;const S=E=>{c.clear(c.COLOR_BUFFER_BIT);const k=clamp((E-C)/d,0,1);r.use(),r.setUniform("pct","FLOAT",B(k)),c.bindVertexArray(u),c.drawArrays(c.TRIANGLE_STRIP,0,4)};return new Promise(E=>{const k=b=>{C<0&&(C=b),C+d>b?(requestAnimationFrame(k),S(b)):(E(),c.clear(c.COLOR_BUFFER_BIT))};requestAnimationFrame(k)})};class FrameAnimation{constructor(o){this.limit=2618,this.step=109.1,this.pos=0,this.speed=50,this.timer=null,this.el=o}start(){!this.el||this.timer||(this.timer=setInterval(()=>{this.pos-=this.step,Math.abs(this.pos)>this.limit-this.step&&(this.pos=0),this.setPosition()},this.speed))}stop(){clearInterval(this.timer),this.timer=null}setPosition(){this.el.style.backgroundPosition=`${this.pos}px`}}var SearchContentReport=(a=>(a[a.DEFAULT=1]="DEFAULT",a[a.SEARCH_LIST=2]="SEARCH_LIST",a[a.HISTORY_LIST=3]="HISTORY_LIST",a[a.SUGGESTION=4]="SUGGESTION",a))(SearchContentReport||{}),RankingCardType=(a=>(a.RANKING_CARD_TYPE_VIDEO="video",a.RANKING_CARD_TYPE_BANGUMI="bangumi",a))(RankingCardType||{});function getHomeRecommands(a,o,s,i,l,c){const r=`${server.api}/x/web-interface/index/top/feed/rcmd`;return httpServer.get(r,{params:{fresh_idx:a,ps:o,plat:1,feed_version:s,fresh_type:i,x_num:l,y_num:c},isWbi:!0}).then(resToObj)}function getHomeHotsAll(a){const o=`${server.api}/x/web-interface/popular?ps=${a.ps||40}&pn=${a.pn}`;return httpServer.get(o,{isWbi:!0}).then(resToObj)}function getHotsSeriesList(){const a=`${server.api}/x/web-interface/popular/series/list`;return httpServer.get(a,{isWbi:!0}).then(resToObj)}function getHotsSeriesData(a){const o=`${server.api}/x/web-interface/popular/series/one?number=${a.number}`;return httpServer.get(o,{isWbi:!0}).then(resToObj)}function getHotsPrecious(){const a=`${server.api}/x/web-interface/popular/precious`;return httpServer.get(a,{isWbi:!0}).then(resToObj)}async function getHotsRanking(a){var i,l;if((a==null?void 0:a.type)==="bangumi"||(a==null?void 0:a.type)==="cinema"){const c=a.season_type;let r=`${server.api}/pgc/web/rank/list?day=${3}&season_type=${c}`;const u=[2,3,4,5].indexOf(c)!==-1;u&&(r=`${server.api}/pgc/season/rank/web/list?day=${3}&season_type=${c}`);try{const d=await httpServer.get(r,{isWbi:!0});let _=null;return u?_=d.data:_=d.result,(i=_.list)==null?void 0:i.map((m,p)=>({type:RankingCardType.RANKING_CARD_TYPE_BANGUMI,bangumiInfo:transformRankingPgcToBangumiInfo(m,p),order:p+1}))}catch(d){return Promise.reject(d)}}const s=`${server.api}/x/web-interface/ranking/v2?rid=${a.tid}&type=${a.rank_type||"all"}`;try{return(l=(await httpServer.get(s,{isWbi:!0})).data.list)==null?void 0:l.map((d,_)=>({type:RankingCardType.RANKING_CARD_TYPE_VIDEO,videoInfo:transformArchiveToVideoInfo(d,_,`${SPM_PV.homeHot}.pv`),order:_+1}))}catch(c){return Promise.reject(c)}}const postEditCollectionDir=a=>{const o=`${server.api}/x/v3/fav/folder/edit`;return http.post(o,a).then(resToObj)},postCreateCollectionDir=a=>{const o=`${server.api}/x/v3/fav/folder/add`;return http.post(o,a).then(resToObj)},postDelCollectionDir=a=>{const o=`${server.api}/x/v3/fav/folder/del`;return http.post(o,{...a,platform:"web",jsonp:"jsonp"}).then(resToObj)},postSortCollectionDir=a=>{const o=`${server.api}/x/v3/fav/folder/sort`;return http.post(o,a).then(resToObj)},postUnfavSeason=a=>{const o=`${server.api}/x/v3/fav/season/unfav`;return http.post(o,{...a,platform:"web",jsonp:"jsonp"}).then(resToObj)},postUnfavFolder=a=>{const o=`${server.api}/x/v3/fav/folder/unfav`;return http.post(o,{...a,jsonp:"jsonp"}).then(resToObj)},postUnfollowerPgc=a=>{const o=`${server.api}/pgc/web/follow/del`;return http.post(o,a).then(resToObj)};function getRelationStat(a){return httpServer.get("https://api.bilibili.com/x/relation/stat",{params:{vmid:a},isWbi:!0}).then(resToObj)}function getDynNum(a){return httpServer.get("https://api.vc.bilibili.com/dynamic_svr/v1/dynamic_svr/space_num_ex",{params:{uids:a},isWbi:!0}).then(resToObj)}async function getMineData(a){const o=await Promise.all([getRelationStat(a),getDynNum(a)]);return{follower:formatNumberWithUnit(o[0].follower),following:formatNumberWithUnit(o[0].following),dynamic:formatNumberWithUnit(o[1].items[0].num)}}function getWatchHistory(a){return httpServer.get("https://api.bilibili.com/x/web-interface/history/cursor",{params:a,isWbi:!0}).then(resToObj)}function deleteHistory(a){return httpServer.post("https://api.bilibili.com/x/v2/history/delete",a,{isWbi:!0}).then(resToObj)}function clearHistory(){return httpServer.post("https://api.bilibili.com/x/v2/history/clear",{},{isWbi:!0}).then(resToObj)}function searchHistory(a){return httpServer.get("https://api.bilibili.com/x/web-goblin/history/search",{params:a,isWbi:!0}).then(resToObj)}function getWatchLater(a){return httpServer.get("https://api.bilibili.com/x/v2/history/toview/web",{params:a,isWbi:!0}).then(resToObj)}function deleteWatched(){const a="https://api.bilibili.com/x/v2/history/toview/del";return httpServer.post(a,{viewed:!0},{isWbi:!0}).then(resToObj)}function clearWatchLater(){return httpServer.post("https://api.bilibili.com/x/v2/history/toview/clear",{},{isWbi:!0}).then(resToObj)}function deleteWatchLaterItem(a){const o="https://api.bilibili.com/x/v2/history/toview/del";return httpServer.post(o,{aid:a},{isWbi:!0}).then(resToObj)}function getFavoriteFolders(a,o=1){const s="https://api.bilibili.com/x/v3/fav/folder/created/list";return httpServer.get(s,{params:{up_mid:a,ps:200,pn:o,platform:"pc"},isWbi:!0}).then(resToObj)}function getFavoriteFolderResourceList(a){const o="https://api.bilibili.com/x/v3/fav/resource/list";return a=Object.assign({ps:20,keyword:"",order:"mtime",platform:"web"},a),httpServer.get(o,{params:a,isWbi:!0}).then(resToObj)}function getFavoriteSeasonVideoList(a,o=1){const s="https://api.bilibili.com/x/space/fav/season/list";return httpServer.get(s,{params:{season_id:a,ps:20,pn:o,platform:"web"},isWbi:!0}).then(resToObj)}function getFavoriteCollections(a,o=1){const s="https://api.bilibili.com/x/v3/fav/folder/collected/list";return httpServer.get(s,{params:{up_mid:a,ps:20,pn:o,platform:"web"},isWbi:!0}).then(resToObj)}function getFavoriteOgvList(a,o,s,i=1){const l="https://api.bilibili.com/x/space/bangumi/follow/list";return httpServer.get(l,{params:{vmid:a,type:o,ps:20,pn:i,platform:"web",follow_status:s},isWbi:!0}).then(resToObj)}function postFavoriteFolderVideoBatchDel(a,o){const s="https://api.bilibili.com/x/v3/fav/resource/batch-del";return httpServer.post(s,{resources:o,media_id:a,platform:"web"},{isWbi:!0})}function getFolderListAll(a,o,s=2){const i=`${server.api}/x/v3/fav/folder/created/list-all`;return httpServer.get(i,{params:{rid:a,up_mid:o,type:s},isWbi:!0}).then(resToObj)}function postCreateFolder(a){const o=`${server.api}/x/v3/fav/folder/add`;return httpServer.post(o,{...a,privacy:0},{isWbi:!0}).then(resToObj)}function postSaveSelectDir(a){const o=`${server.api}/x/v3/fav/resource/deal`;return isNum(a.type)||(a.type=2),httpServer.post(o,{...a,platform:"web"},{isWbi:!0}).then(resToObj)}function fetchFollowTags(a){return http.get("https://api.bilibili.com/x/relation/tags",{params:a})}function fetchFollowTag(a){return http.get("https://api.bilibili.com/x/relation/tag",{params:a})}function fetchFollowInterRelations(a){return http.get("https://api.bilibili.com/x/relation/interrelations",{params:a}).then(resToObj)}function fetchFollowers(a){return httpSvc.request({url:"/x/relation/fans",params:a}).then(resToObj)}function fetchFollowings(a){return httpSvc.request({url:"/x/relation/followings",params:a}).then(resToObj)}function postRelationModify(a,o){return httpServer.post("//api.bilibili.com/x/relation/modify",{act:o?2:1,fid:a,spmid:"",re_src:0},{isWbi:!0}).then(resToObj)}function getAccountInfo(a){return httpServer.get("//api.bilibili.com/x/space/acc/info",{params:a,isWbi:!0}).then(resToObj)}const getSettings=a=>httpServer.get("//space.bilibili.com/ajax/settings/getSettings",{params:a,isWbi:!0}).then(resToObj),getRelationNumbers=a=>httpServer.get("//api.bilibili.com/x/relation/stat",{params:a,isWbi:!0}).then(resToObj),getUpStat=a=>httpServer.get("//api.bilibili.com/x/space/upstat",{params:a,isWbi:!0}).then(resToObj),getSearchVideosNum=a=>httpServer.get("//api.bilibili.com/x/space/arc/search",{params:a,isWbi:!0}).then(resToObj).then(o=>{var s,i,l;return{page:(s=o==null?void 0:o.page)!=null?s:{},list:(l=(i=o==null?void 0:o.list)==null?void 0:i.vlist.map(c=>({...c,pubdate:c.created,author:{name:c.author,mid:c.mid},duration:c.length,cover:c.pic,stats:{like:-1,danmaku:c.video_review,view:c.play,vt:c.vt},enableVt:c.enable_vt,vtDisplay:c.vt_display})))!=null?l:[]}}),getSeasonsAndSeries=(a,o,s)=>{const i=`${server.api}/x/polymer/web-space/seasons_series_list?mid=${a}&page_num=${o}&page_size=${s}`;return httpServer.get(i,{isWbi:!0}).then(resToObj)},getSeasonDetails=({mid:a,season_id:o,reverse:s,pn:i,ps:l})=>{const c=`${server.api}/x/polymer/web-space/seasons_archives_list?mid=${a}&season_id=${o}&sort_reverse=${s}&page_num=${i}&page_size=${l}`;return httpServer.get(c,{isWbi:!0}).then(resToObj)},getSeriesDetails=a=>{const o=`${server.api}/x/series/series?series_id=${a}`;return httpServer.get(o,{isWbi:!0}).then(resToObj)},getSeriesCollection=({mid:a,series_id:o,sort:s,pn:i,ps:l})=>{const c=`${server.api}/x/series/archives?mid=${a}&series_id=${o}&only_normal=true&sort=${s}&pn=${i}&ps=${l}`;return httpServer.get(c,{isWbi:!0}).then(resToObj)};function getMsgfeedReply(a,o){return biHttp.get("//api.bilibili.com/x/msgfeed/reply",{params:{id:a,reply_time:o,platform:"web",build:0,mobi_app:"web"}}).then(resToObj)}function getMsgfeedAt(a,o){return biHttp.get("//api.bilibili.com/x/msgfeed/at",{params:{id:a,at_time:o,platform:"web",build:0,mobi_app:"web"}}).then(resToObj)}function getMsgfeedLike(a,o){return biHttp.get("//api.bilibili.com/x/msgfeed/like",{params:{id:a,like_time:o,platform:"web",build:0,mobi_app:"web"}}).then(resToObj)}function postMsgfeedDel(a,o){return http.post("//api.bilibili.com/x/msgfeed/del",{tp:o,id:a})}function postMsgfeedNotice(a,o,s){return http.post("//api.bilibili.com/x/msgfeed/notice",{mobi_app:"web",platform:"web",tp:o,id:a,notice_state:s})}const getHomeLiveData=a=>{const o=`${server.liveApi}/xlive/app-interface/v2/index/feedV2?${a}`;return new HttpService().disable(BUILT_IN_MIDDLEWARE.TICKET_WBI).request({url:o}).then(resToObj)},getHomeLiveNowEntry=()=>{const a=`${server.liveApi}/xlive/open-interface/v1/fetch_client_resource?business=web_live:`;return httpServer.get(a,{isWbi:!0}).then(resToObj)},getLiveAreaList=a=>{const o=`${server.liveApi}/xlive/app-interface/v2/index/getAreaList?${stringifyQueryString(a)}`;return httpServer.get(o,{isWbi:!0}).then(resToObj)},getLiveRoomList=a=>{const o=`${server.liveApi}/xlive/app-interface/v2/second/getList?${a}`;return httpServer.get(o,{isWbi:!0}).then(resToObj)},useWrite=(a,o)=>{const s=useRoute(),i=debounce$1(()=>{s.name===a&&o()},800);events.on("write",i),onBeforeUnmount(()=>{events.off("write",i)})},useWatchLoginStatus=(a,o=200)=>{const{userInfo:s}=storeToRefs(useUserInfoStore()),i=ref(!1);let l=null;return watch(()=>s.value.isLogin,c=>{if(o)c?(clearTimeout(l),i.value=!0,a(i.value)):l=setTimeout(()=>{i.value=!1,a(i.value)},o);else return i.value=c,a(i.value)},{immediate:!!o}),{isLogin:i}},useRelationChange=(a,o=!1)=>{const s=ref(o),i=l=>{l.mid===a&&(s.value=l.isFollow)};return events.on("relationChange",i),onBeforeUnmount(()=>{events.off("relationChange",i)}),{isFollow:s}};let firstEnter=!0,lastOpenTime=Date.now(),lastReportTime=Date.now();const useReportPv=(a={})=>{const o=ref(Date.now()),s=ref(a.spm_id),i=ref(a.pageName),l=useRoute(),c=ref(a.routeName||l.name),r=isBol(a.isKeepAlive)?a.isKeepAlive:!0,u=isBol(a.isCustom)?a.isCustom:!1,d=()=>o.value=Date.now(),_=()=>{Date.now()-lastReportTime<200||(lastReportTime=Date.now(),allCustomReport({type:"pv",spm_info:s.value},{appPageViewInfo:{duration:Date.now()-o.value,pvstart:o.value,pvend:Date.now()}}))},f=()=>{(firstEnter||l.name===c.value&&Date.now()-lastOpenTime>200)&&(firstEnter=!1,lastOpenTime=Date.now(),logOpenAppPage(i.value),events.emit("pageSpmIdChange",s.value))},m=g=>{l.name===c.value&&(g?d():_())},p=()=>{d(),f(),events.on("windowFocusChange",m)},v=()=>{_(),events.off("windowFocusChange",m)};return u||(r?(onActivated(()=>p()),onDeactivated(()=>v())):(onMounted(()=>p()),onBeforeUnmount(()=>v()))),{spmId:s,pageName:i,reportPv:_,initEnterTime:d,logOpenAppPage:f}},useRoutePageFadeIn=(a,o=!1)=>{const s=()=>{const i=document.querySelector(a);i&&(i.style.opacity=0,i.style.transition="none",setTimeout(()=>{i.style.transition="all .3s ease-in-out",i.style.opacity=1}))};return o||onActivated(()=>nextTick(()=>s())),{handlePageFadeIn:s}},useLoadmore=(a,o)=>(events.on("loadmore",s=>{a===s&&o()}),{noMore:ref(!1),loading:ref(!1)}),useFeedState=a=>{const o=ref("initial"),s=ref(a);return{status:o,list:s,filter:c=>{const r=a.filter(c);clearArray(a,...r)},reset:()=>{o.value="initial",s.value=[]}}},useCurrentInstanceActive=()=>{const a=ref(!0);return onActivated(()=>{a.value=!0}),onDeactivated(()=>{a.value=!1}),a},useDynamicForward=(a,o,s="",i,l=!1,c="")=>{const{userInfo:r}=storeToRefs(useUserInfoStore()),u=reactive({count:o}),d=computed(()=>u.count?formatNum(u.count):s),_=()=>{if(events.emit("hidePopover"),l){toastAsync({content:c||"\u7981\u6B62\u8F6C\u53D1"});return}if(!r.value.isLogin){requestLogin("useDynamicForward.handleForward");return}events.emit("forwardDynamic",{id:a,defaultContent:i})},f=m=>{m.id===a&&m.module==="stat"&&m.key==="forwardState"&&(isNum(m.state.count)?u.count=m.state.count:m.state.offset&&(u.count+=m.state.offset))};return events.on("syncDynamicState",f),onBeforeUnmount(()=>{events.off("syncDynamicState",f)}),{forwardState:u,forwardText:d,handleForward:_}},useDynamicLike=(a,{count:o,active:s},i="")=>{const{userInfo:l}=storeToRefs(useUserInfoStore()),c=reactive({count:o,active:s,loading:!1}),r=computed(()=>c!=null&&c.count?formatNum(c==null?void 0:c.count):i),u=async()=>{if(events.emit("hidePopover"),!l.value.isLogin){requestLogin("useDynamicLike.handleLike");return}if(c.loading)return;const _=()=>{c.active?(c.active=!1,c.count--):(c.active=!0,c.count++)};try{_(),c.loading=!0,await postDynamicLike(a,c.active),c.active&&toastAsync({content:"\u70B9\u8D5E\u6210\u529F"}),events.emit("syncDynamicState",{id:a,module:"stat",key:"likeState",state:{active:c.active,count:c.count}})}catch{_()}c.loading=!1},d=_=>{_.id===a&&_.module==="stat"&&_.key==="likeState"&&(c.count=_.state.count,c.active=_.state.active)};return events.on("syncDynamicState",d),onBeforeUnmount(()=>{events.off("syncDynamicState",d)}),{likeState:c,likeText:r,handleLike:u}},useDynamicComment=(a,o,s="")=>{const i=reactive({count:o}),l=computed(()=>i.count?formatNum(i.count):s),c=r=>{r.id===a&&r.module==="stat"&&r.key==="commentState"&&(isNum(r.state.count)?i.count=r.state.count:r.state.offset&&(i.count+=r.state.offset))};return events.on("syncDynamicState",c),onBeforeUnmount(()=>{events.off("syncDynamicState",c)}),{commentState:i,commentText:l}},useSelectedTrack=()=>{let a=0;const o=ref(`${SPM_PV.selected}.pv`),s=ref({}),i=ref({}),l=computed(()=>i.value.track_id||""),c=computed(()=>i.value._location||0),r=ref(""),u=ref(null),d=ref(!1),_=ref(Date.now()),{userInfo:f}=storeToRefs(useUserInfoStore());let m=getData("player-did")||"";const p=()=>{const C=s.value.getManifest(),S=s.value.getMediaInfo(),E=s.value.getCurrentTime(),k=s.value.getDuration(!0);return{...C,...S,ctime:E,duration:k}},v=()=>{_.value=Date.now(),g()},g=async()=>{var A,x,T;if(d.value)return;d.value=!0;const{build:C,buvid:S,mobi_app:E,platform:k,device:b}=getAppInfoSync(),V={...u.value,platform:k,device:b,build:C,buvid:S,mobi_app:E,did:m||"",play_mode:1,auto_play:99,spmid:o.value,from_spmid:r.value,track_id:l.value,playlist_type:"",playlist_id:"",extra:JSON.stringify({location:c.value})};if(a=Date.now()/1e3,!(!(V!=null&&V.cid)||!(V!=null&&V.aid))){(x=(A=s.value)==null?void 0:A.clearAltAbsolutePlayTime)==null||x.call(A),$({ctime:0,maxTime:0,absoluteAltPlayTime:0},!0),V.did=m;try{const I=await playerFirstPlay(V),R=(T=I==null?void 0:I.data)==null?void 0:T.rpdid;R&&(m=R,setData("player-did",R))}catch(I){if((I==null?void 0:I.code)===-400)return;allCustomReport({type:"click",spm_info:"main.play-detail.v-error.0"},{msg:JSON.stringify(V)}),console.error("playerFirstPlay",I,V)}try{allCustomReport({type:"pv",spm_info:"app.main.player.vv"},{msg:JSON.stringify(V)})}catch{}}},$=async(C={},S=!1)=>{var N,w,D,L;if(!d.value)return;S||(d.value=!1);const E={...p(),...C};if(!(E!=null&&E.cid)||!(E!=null&&E.aid))return;const{build:k,buvid:b,mobi_app:V,platform:A,device:x}=getAppInfoSync(),T=Math.floor((Date.now()-_.value)/1e3),I={start_ts:E.firstPlayTime||_.value,build:k,buvid:b,mobi_app:V,platform:A,session:"",type:3,quality:E.quality,total_time:T,paused_time:Math.max(T-E.absoluteAltPlayTime,0),played_time:E.absoluteAltPlayTime,video_duration:E.duration,play_type:1,network_type:1,last_play_progress_time:E.ctime,max_play_progress_time:E.maxTime,mid:f.value.mid,aid:E.aid,cid:E.cid,play_mode:1,device:x,play_status:1,user_status:isVipUser(f.value.vip)?"1":"0",actual_played_time:E.relativePlayTime,auto_play:99,detail_play_time:T,list_play_time:T,from_spmid:((N=E.stats)==null?void 0:N.spmIdFrom)||r.value,spmid:((w=E.stats)==null?void 0:w.spmId)||o.value,miniplayer_play_time:0,track_id:l.value,playlist_type:((D=E.appInfo)==null?void 0:D.bizType)||0,playlist_id:((L=E.appInfo)==null?void 0:L.bizId)||"",extra:JSON.stringify({location:c.value})},R={start_ts:Math.floor(a),device_ts:Math.floor(S?0:Date.now()/1e3),access_key:"",mid:I.mid,aid:I.aid,cid:I.cid,sid:I.sid,epid:I.epid,type:I.type,subtype:I.sub_type,sub_type:I.sub_type,realtime:Math.floor(E.absoluteAltPlayTime),progress:Math.floor(I.last_play_progress_time),duration:Math.floor(I.video_duration),play_time:Math.floor(E.relativePlayTime),dt:2,device:x,platform:A,source:V};await Promise.allSettled([y(I),B(R)]);try{allCustomReport({type:"pv",spm_info:"app.main.player.vt"},{msg:JSON.stringify(I)})}catch{}},y=async C=>{try{await playerHeartbeat(C)}catch(S){if((S==null?void 0:S.code)===-400)return;allCustomReport({type:"click",spm_info:"main.play-detail.v-error.0"},{msg:JSON.stringify(C)}),console.error(S,C)}},B=async C=>{try{await playerHistory(C)}catch{}};return{player:s,itemInfo:i,fromSpmid:r,firstInfo:u,firstPlay:g,restartPlay:v,heartbeat:$}},useRouteScrollKeeper=(a,o=!0)=>{const{routePositions:s}=storeToRefs(useRoutePositionsStore()),i=ref(),l=u=>{s.value[a]=u.target.scrollTop},c=()=>{s.value[a]=0},r=()=>{if(i.value){const u=s.value[a];isNum(u)&&(i.value.$el.scrollTop=u)}};return onActivated(()=>{o&&r()}),{routePositions:s,pageScrollRef:i,handlePageScroll:l,resetScrollPosition:c,restoreScrollPosition:r}},_hoisted_1$3B={viewBox:"0 0 1024 1024"},_hoisted_2$3l=createBaseVNode("path",{d:"M690.56 766.672 435.776 511.904l251.488-251.488A48 48 0 1 0 622.8 189.36l-.128-.128-288 288 .016.016A47.84 47.84 0 0 0 320 511.792v.224c0 13.584 5.632 25.808 14.688 34.544l-.016.016 288 288 .016-.016a48 48 0 0 0 67.872-67.888z",fill:"currentColor"},null,-1),_hoisted_3$38=[_hoisted_2$3l];function render$19(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3B,_hoisted_3$38)}var IcoArrowLeft={render:render$19};const _hoisted_1$3A={width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3k=createBaseVNode("path",{d:"M4.563 5.897a.562.562 0 0 1-.562-.562V3.876c0-.621.504-1.125 1.125-1.125h15.748c.621 0 1.125.504 1.125 1.125v1.459c0 .31-.252.562-.562.562H4.563Z",fill:"currentColor"},null,-1),_hoisted_3$37=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21.999 23.12c0 .845-.9 1.389-1.648.995l-7.464-3.923-7.246 3.736a1.125 1.125 0 0 1-1.64-1V8.595c0-.62.504-1.124 1.125-1.124h15.748c.621 0 1.125.503 1.125 1.124V23.12Zm-9.478-11.964c-.3-.19-.686-.208-1.004-.046a.924.924 0 0 0-.517.82v3.716c0 .343.198.657.517.82.318.16.704.143 1.004-.047l2.934-1.858a.918.918 0 0 0 .435-.774c0-.31-.163-.6-.435-.773l-2.934-1.858Z",fill:"currentColor"},null,-1),_hoisted_4$28=[_hoisted_2$3k,_hoisted_3$37];function render$18(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3A,_hoisted_4$28)}var IcoSelected={render:render$18};const _hoisted_1$3z={width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3j=createBaseVNode("path",{d:"M8.185 18.777c-2.393 0-4.333-1.724-4.333-3.852h8.666c0 2.128-1.94 3.852-4.333 3.852ZM18.778 18.777c0 2.394-1.725 4.334-3.852 4.334v-8.667c2.127 0 3.852 1.94 3.852 4.333ZM8.185 8.185c0 2.393 1.725 4.333 3.852 4.333V3.851c-2.127 0-3.852 1.94-3.852 4.334ZM18.778 8.185c-2.393 0-4.333 1.725-4.333 3.852h8.666c0-2.127-1.94-3.852-4.333-3.852Z",fill:"currentColor",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_3$36=[_hoisted_2$3j];function render$17(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3z,_hoisted_3$36)}var IcoDynamic={render:render$17};const _hoisted_1$3y={width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3i=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.919 4.718a.963.963 0 0 0-1.541 1.156L9.39 7.223c-.652.003-1.209.013-1.684.052-.67.055-1.262.17-1.812.45a4.622 4.622 0 0 0-2.02 2.02c-.28.55-.396 1.143-.45 1.813-.054.65-.054 1.45-.054 2.44v2.336c0 .99 0 1.791.053 2.44.055.67.171 1.263.451 1.813a4.622 4.622 0 0 0 2.02 2.02c.55.28 1.143.396 1.812.45.65.054 1.451.054 2.441.054h6.669c.99 0 1.791 0 2.44-.053.67-.055 1.263-.17 1.813-.451a4.621 4.621 0 0 0 2.02-2.02c.28-.55.396-1.142.45-1.812.054-.65.054-1.451.054-2.44v-2.336c0-.99 0-1.792-.053-2.441-.055-.67-.171-1.262-.451-1.812a4.622 4.622 0 0 0-2.02-2.02c-.55-.28-1.143-.396-1.812-.451a22.668 22.668 0 0 0-1.684-.052l1.012-1.35a.963.963 0 1 0-1.54-1.155l-1.878 2.504h-3.37L9.918 4.718Zm1.637 8.763a.963.963 0 0 0-1.926 0v3.37a.963.963 0 1 0 1.926 0v-3.37Zm5.777 0a.963.963 0 0 0-1.926 0v3.37a.963.963 0 0 0 1.926 0v-3.37Z",fill:"currentColor"},null,-1),_hoisted_3$35=[_hoisted_2$3i];function render$16(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3y,_hoisted_3$35)}var IcoMine={render:render$16};const _hoisted_1$3x={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3h=createBaseVNode("path",{d:"M22.522 25.326H9.481a4.286 4.286 0 0 1-4.28-4.28V10.92c0-2.36 1.918-4.28 4.28-4.28H22.52c2.358 0 4.28 1.918 4.28 4.28v10.125a4.284 4.284 0 0 1-4.278 4.28ZM9.481 8.801c-1.169 0-2.12.951-2.12 2.12v10.125c0 1.168.951 2.12 2.12 2.12H22.52c1.168 0 2.12-.952 2.12-2.12V10.92c0-1.169-.952-2.12-2.12-2.12H9.48Z",fill:"currentColor"},null,-1),_hoisted_3$34=createBaseVNode("path",{d:"M16 17.44c-.586 0-1.173-.16-1.683-.478l-.068-.046-5.05-3.728c-.455-.335-.533-.953-.171-1.376.36-.425 1.022-.495 1.475-.16l5.01 3.7a.99.99 0 0 0 .975 0l5.01-3.7c.453-.335 1.115-.265 1.475.16a.936.936 0 0 1-.172 1.376l-5.12 3.774A3.186 3.186 0 0 1 16 17.44Z",fill:"currentColor"},null,-1),_hoisted_4$27=[_hoisted_2$3h,_hoisted_3$34];function render$15(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3x,_hoisted_4$27)}var IcoMessage={render:render$15};const _hoisted_1$3w={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3g=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.262 7.298a1.044 1.044 0 0 1 1.476 0l4.071 4.07a1.044 1.044 0 0 1-1.476 1.477l-2.29-2.29v8.066a1.044 1.044 0 1 1-2.087 0v-8.066l-2.29 2.29a1.044 1.044 0 0 1-1.475-1.476l4.071-4.071Zm-6.047 11.74c-.623 0-1.128.504-1.128 1.127v1.628c0 .623.505 1.128 1.128 1.128h13.57c.623 0 1.128-.505 1.128-1.128v-1.628c0-.623-.505-1.128-1.128-1.128h-2.714a1.044 1.044 0 0 1 0-2.087h2.714A3.215 3.215 0 0 1 26 20.165v1.628a3.215 3.215 0 0 1-3.215 3.215H9.215A3.215 3.215 0 0 1 6 21.793v-1.628a3.215 3.215 0 0 1 3.215-3.215h2.714a1.044 1.044 0 1 1 0 2.087H9.215Z",fill:"currentColor"},null,-1),_hoisted_3$33=[_hoisted_2$3g];function render$14(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3w,_hoisted_3$33)}var IcoUpload={render:render$14};const _hoisted_1$3v={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3f=createBaseVNode("path",{opacity:".01",d:"M4 4h24v24H4V4Z",fill:"currentColor"},null,-1),_hoisted_3$32=createBaseVNode("path",{d:"M25.111 17.323c.124-.862-.58-1.502-1.316-1.502A5.973 5.973 0 0 1 17.87 9.08l-.991-.126.991.127c.124-.969-.492-2.284-1.869-2.284a9.205 9.205 0 0 0 0 18.41c4.636 0 8.47-3.425 9.111-7.883Z",stroke:"currentColor","stroke-width":"2"},null,-1),_hoisted_4$26=[_hoisted_2$3f,_hoisted_3$32];function render$13(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3v,_hoisted_4$26)}var IcoDark={render:render$13};const _hoisted_1$3u={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3e=createBaseVNode("path",{d:"M8.3 16a1.1 1.1 0 0 0-1.1-1.1H6.1a1.1 1.1 0 0 0 0 2.2h1.1A1.1 1.1 0 0 0 8.3 16Zm.704 5.5-.781.781a1.1 1.1 0 0 0 0 1.551 1.1 1.1 0 0 0 1.551 0l.781-.781A1.1 1.1 0 0 0 9.004 21.5ZM16 8.3a1.1 1.1 0 0 0 1.1-1.1V6.1a1.1 1.1 0 0 0-2.2 0v1.1A1.1 1.1 0 0 0 16 8.3Zm6.226 2.574a1.1 1.1 0 0 0 .77-.319l.781-.781a1.099 1.099 0 1 0-1.551-1.551l-.726.781a1.1 1.1 0 0 0 0 1.551 1.1 1.1 0 0 0 .726.319Zm-13.2-.319a1.1 1.1 0 0 0 1.551 0 1.1 1.1 0 0 0 0-1.551l-.781-.781a1.105 1.105 0 0 0-1.573 1.551l.803.781ZM25.9 14.9h-1.1a1.1 1.1 0 0 0 0 2.2h1.1a1.1 1.1 0 0 0 0-2.2Zm-2.904 6.6a1.1 1.1 0 0 0-1.496 1.496l.781.781a1.1 1.1 0 0 0 1.551 0 1.1 1.1 0 0 0 0-1.551l-.836-.726ZM16 9.95A6.05 6.05 0 1 0 22.05 16 6.06 6.06 0 0 0 16 9.95Zm0 9.9a3.85 3.85 0 1 1 0-7.7 3.85 3.85 0 0 1 0 7.7Zm0 3.85a1.1 1.1 0 0 0-1.1 1.1v1.1a1.1 1.1 0 0 0 2.2 0v-1.1a1.1 1.1 0 0 0-1.1-1.1Z",fill:"currentColor"},null,-1),_hoisted_3$31=[_hoisted_2$3e];function render$12(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3u,_hoisted_3$31)}var IcoLight={render:render$12};const _hoisted_1$3t={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3d=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 11.4a4.6 4.6 0 1 0 0 9.201 4.6 4.6 0 0 0 0-9.2Zm-.995 2.198a2.602 2.602 0 0 1 3.595 2.403 2.6 2.6 0 1 1-3.595-2.403Z",fill:"currentColor"},null,-1),_hoisted_3$30=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.149 5.862a4.067 4.067 0 0 1 3.702 0l5.933 3.033A4.067 4.067 0 0 1 26 12.517v6.904a4.068 4.068 0 0 1-2.186 3.605l-5.932 3.096a4.067 4.067 0 0 1-3.764 0l-5.933-3.096A4.067 4.067 0 0 1 6 19.421v-6.904a4.07 4.07 0 0 1 2.216-3.622l5.933-3.033Zm.91 1.781a2.067 2.067 0 0 1 1.882 0l5.933 3.033A2.067 2.067 0 0 1 24 12.517v6.904a2.067 2.067 0 0 1-1.111 1.832l-5.932 3.096a2.068 2.068 0 0 1-1.914 0L9.11 21.253A2.065 2.065 0 0 1 8 19.421v-6.904a2.067 2.067 0 0 1 1.126-1.841l5.878-3.005h.001l.054-.028Z",fill:"currentColor"},null,-1),_hoisted_4$25=[_hoisted_2$3d,_hoisted_3$30];function render$11(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3t,_hoisted_4$25)}var IcoSetting={render:render$11},emptyImg="./assets/empty.118f95f1.png";const _hoisted_1$3s={viewBox:"-7 -8 36 36"},_hoisted_2$3c=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.833 2.414c-2.728 0-5.11.139-6.791.275a2.353 2.353 0 0 0-2.179 2.146 58.445 58.445 0 0 0-.238 5.162c0 1.98.115 3.79.238 5.163a2.353 2.353 0 0 0 2.179 2.146 85.15 85.15 0 0 0 6.791.275c2.729 0 5.11-.14 6.792-.275a2.353 2.353 0 0 0 2.178-2.145c.124-1.373.239-3.183.239-5.164 0-1.98-.115-3.79-.239-5.163a2.353 2.353 0 0 0-2.178-2.145 85.127 85.127 0 0 0-6.792-.275ZM3.91 1.07a86.748 86.748 0 0 1 6.923-.28c2.782 0 5.21.14 6.924.28a3.978 3.978 0 0 1 3.665 3.619c.127 1.407.245 3.267.245 5.308a60.04 60.04 0 0 1-.245 5.31 3.978 3.978 0 0 1-3.665 3.618c-1.715.14-4.142.28-6.924.28-2.781 0-5.208-.14-6.923-.28a3.978 3.978 0 0 1-3.665-3.62A60.065 60.065 0 0 1 0 9.998c0-2.04.118-3.9.245-5.308A3.978 3.978 0 0 1 3.91 1.07Zm3.132 5.138a1.083 1.083 0 1 0 0 2.167 1.083 1.083 0 0 0 0-2.167ZM4.333 7.293a2.708 2.708 0 1 1 5.417 0 2.708 2.708 0 0 1-5.417 0Zm9.217 4.395a1.138 1.138 0 0 1 1.608 0l1.872 1.872a.813.813 0 0 0 1.149-1.15l-1.871-1.87a2.762 2.762 0 0 0-3.907 0l-2.351 2.35a.808.808 0 0 1-1.143 0 2.635 2.635 0 0 0-3.728-.001l-1.691 1.69a.812.812 0 1 0 1.149 1.15l1.691-1.691a1.01 1.01 0 0 1 1.43 0c.95.951 2.49.952 3.44.001l2.352-2.35Z"},null,-1),_hoisted_3$2$=[_hoisted_2$3c];function render$10(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3s,_hoisted_3$2$)}var ImageIcon={render:render$10};const _hoisted_1$3r={viewBox:"-7 -7 36 36"},_hoisted_2$3b=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.893 11a9.286 9.286 0 1 1 18.571 0 9.286 9.286 0 0 1-18.571 0ZM11.179.32C5.28.321.5 5.102.5 11c0 5.898 4.781 10.678 10.679 10.678 5.897 0 10.678-4.78 10.678-10.678C21.857 5.102 17.077.32 11.18.32ZM6.022 8.12a.696.696 0 1 0-.83 1.12l1.944 1.438-1.884 1.117a.696.696 0 0 0 .71 1.198l2.786-1.65a.696.696 0 0 0 .06-1.16L6.021 8.12Zm8.617 6.304a.696.696 0 0 0-1.35-.346c-.175.684-.549.856-.758.868-.21.012-.531-.116-.685-.628a.696.696 0 0 0-1.334 0c-.154.511-.476.64-.686.628-.209-.012-.583-.184-.758-.868a.696.696 0 0 0-1.35.346c.29 1.126 1.076 1.858 2.028 1.913a1.931 1.931 0 0 0 1.433-.522c.39.36.894.553 1.433.522.951-.055 1.738-.787 2.027-1.913Zm2.67-6.16a.696.696 0 0 0-.974-.144l-2.785 2.063a.696.696 0 0 0 .06 1.16l2.785 1.65a.696.696 0 1 0 .71-1.198l-1.884-1.117 1.944-1.439a.696.696 0 0 0 .145-.974Z"},null,-1),_hoisted_3$2_=createBaseVNode("path",{d:"m5.048 8.264.08.06-.08-.06Zm.974-.145.06-.08-.06.08Zm-.83 1.12.06-.081-.06.08Zm1.944 1.438.05.087a.1.1 0 0 0 .01-.167l-.06.08Zm-1.884 1.117-.05-.086.05.086Zm-.244.954-.086.05.086-.05Zm.954.244.051.086-.05-.086Zm2.786-1.65-.051-.087.05.086Zm.34-.564.1.005-.1-.005Zm-.28-.596.059-.08-.06.08Zm5.33 3.393.024-.097-.024.097Zm.501.848-.097-.025.097.025Zm-1.35-.346-.096-.025.097.025Zm-.758.868.006.1-.006-.1Zm-.685-.628.095-.029-.095.029Zm-.667-.496v.1-.1Zm-.667.496-.096-.03.096.03Zm-.686.628-.006.1.006-.1Zm-.758-.868-.097.025.097-.025Zm-.848-.502-.025-.097.025.097Zm-.502.848.097-.025-.097.025Zm2.028 1.913.005-.1-.005.1Zm1.433-.522.067-.074a.1.1 0 0 0-.135 0l.068.074Zm1.433.522-.006-.1.006.1Zm3.723-8.217.06.08-.06-.08Zm.975.145-.08.06.08-.06Zm-3.76 1.918-.06-.08.06.08Zm-.281.596.1-.005-.1.005Zm.34.563.051-.086-.05.086Zm2.786 1.65-.051.087.051-.086Zm.954-.243-.086-.051.086.05Zm-.244-.954-.05.086.05-.086Zm-1.884-1.117-.06-.08a.1.1 0 0 0 .01.167l.05-.087Zm1.944-1.439.06.08-.06-.08Zm-5.986-7.624A9.386 9.386 0 0 0 1.793 11h.2a9.186 9.186 0 0 1 9.186-9.186v-.2ZM20.564 11a9.386 9.386 0 0 0-9.385-9.386v.2A9.186 9.186 0 0 1 20.364 11h.2Zm-9.385 9.386A9.386 9.386 0 0 0 20.564 11h-.2a9.186 9.186 0 0 1-9.185 9.186v.2ZM1.793 11a9.386 9.386 0 0 0 9.386 9.386v-.2A9.186 9.186 0 0 1 1.993 11h-.2ZM.6 11C.6 5.157 5.336.42 11.179.42v-.2C5.226.221.4 5.047.4 11h.2Zm10.579 10.578C5.336 21.578.6 16.842.6 11H.4c0 5.953 4.826 10.778 10.779 10.778v-.2ZM21.757 11c0 5.842-4.736 10.578-10.578 10.578v.2c5.952 0 10.778-4.825 10.778-10.778h-.2ZM11.18.42C17.02.421 21.757 5.157 21.757 11h.2C21.957 5.047 17.131.22 11.18.22v.2ZM5.128 8.323a.596.596 0 0 1 .834-.124l.12-.16a.796.796 0 0 0-1.115.165l.16.12Zm.124.835a.596.596 0 0 1-.124-.835l-.16-.119a.796.796 0 0 0 .165 1.114l.12-.16Zm1.943 1.44-1.943-1.44-.119.16 1.943 1.44.12-.16ZM5.303 11.88l1.884-1.117-.102-.172L5.2 11.708l.102.172Zm-.209.817a.596.596 0 0 1 .21-.817l-.103-.172a.796.796 0 0 0-.279 1.09l.172-.101Zm.817.209a.596.596 0 0 1-.817-.21l-.172.103a.796.796 0 0 0 1.091.279l-.102-.172Zm2.786-1.65-2.786 1.65.102.172 2.786-1.65-.102-.173Zm.292-.483c-.01.2-.12.38-.292.482l.102.172a.796.796 0 0 0 .39-.644l-.2-.01Zm-.241-.51c.16.119.25.31.24.51l.2.01a.796.796 0 0 0-.321-.681l-.12.16ZM5.962 8.199l2.786 2.064.119-.161L6.08 8.039l-.119.16Zm8.15 5.473c.32.082.512.407.43.726l.194.05a.796.796 0 0 0-.574-.97l-.05.194Zm-.725.43a.597.597 0 0 1 .726-.43l.05-.194a.796.796 0 0 0-.97.574l.194.05Zm-.85.943c.261-.015.666-.226.85-.944l-.194-.05c-.167.652-.51.785-.667.794l.011.2Zm-.787-.7c.165.551.525.715.787.7l-.011-.2c-.159.01-.442-.084-.585-.557l-.191.058Zm-.571-.424c.263 0 .495.173.57.425l.192-.058a.796.796 0 0 0-.762-.567v.2Zm-.571.425a.596.596 0 0 1 .57-.425v-.2a.797.797 0 0 0-.762.567l.192.057Zm-.788.7c.262.014.622-.15.788-.7l-.192-.058c-.142.473-.426.567-.584.557l-.012.2Zm-.85-.944c.185.717.59.928.85.943l.012-.2c-.157-.009-.5-.142-.668-.793l-.193.05Zm-.725-.43c.319-.082.644.11.726.43l.193-.05a.796.796 0 0 0-.969-.574l.05.194Zm-.43.726a.596.596 0 0 1 .43-.726l-.05-.194a.796.796 0 0 0-.573.97l.193-.05Zm1.936 1.838c-.898-.052-1.655-.744-1.936-1.838l-.193.05c.296 1.156 1.112 1.93 2.118 1.988l.011-.2Zm1.36-.496c-.372.343-.85.525-1.36.496l-.011.2a2.031 2.031 0 0 0 1.506-.549l-.135-.147Zm1.495.496c-.51.03-.987-.153-1.36-.496l-.135.147c.41.378.939.581 1.506.549l-.011-.2Zm1.936-1.838c-.28 1.095-1.038 1.786-1.936 1.838l.011.2c1.006-.058 1.822-.831 2.119-1.988l-.194-.05ZM16.395 8.2a.596.596 0 0 1 .834.124l.161-.119a.797.797 0 0 0-1.114-.165l.119.16Zm-2.786 2.064 2.786-2.064-.12-.16-2.785 2.063.12.16Zm-.24.51c-.01-.2.08-.391.24-.51l-.119-.161a.797.797 0 0 0-.321.68l.2-.01Zm.291.482a.597.597 0 0 1-.291-.482l-.2.01c.014.266.16.508.39.644l.101-.172Zm2.786 1.65-2.786-1.65-.102.172 2.786 1.65.102-.171Zm.817-.208a.596.596 0 0 1-.817.209l-.102.172c.378.224.867.1 1.091-.28l-.172-.101Zm-.209-.817a.596.596 0 0 1 .21.817l.171.102a.796.796 0 0 0-.279-1.091l-.102.172Zm-1.883-1.117 1.883 1.117.102-.172-1.884-1.117-.101.173Zm1.934-1.605-1.943 1.44.119.16 1.943-1.44-.119-.16Zm.124-.835a.596.596 0 0 1-.124.835l.12.16a.796.796 0 0 0 .165-1.114l-.16.12Z"},null,-1),_hoisted_4$24=[_hoisted_2$3b,_hoisted_3$2_];function render$$(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3r,_hoisted_4$24)}var EmojiIcon={render:render$$};const _hoisted_1$3q={viewBox:"0 0 1024 1024"},_hoisted_2$3a=createBaseVNode("path",{d:"M704 511.904v-.112a47.84 47.84 0 0 0-14.688-34.544l.016-.016-288-288-.128.128a48 48 0 1 0-64.464 71.04l251.488 251.488L333.44 766.672l.016.016a48 48 0 0 0 67.856 67.856l.016.016 288-288-.016-.016A47.84 47.84 0 0 0 704 512v-.096z",fill:"currentColor"},null,-1),_hoisted_3$2Z=[_hoisted_2$3a];function render$_(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3q,_hoisted_3$2Z)}var IcoArrowRight={render:render$_},EmojiBox_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$3p=["onClick"],_hoisted_2$39=["src","alt"],_hoisted_3$2Y={class:"im_emoji--content"},_hoisted_4$23={key:0,class:"im_emoji--list"},_hoisted_5$1C=["onClick"],_hoisted_6$1l=["src","alt"],_hoisted_7$1e={key:1},_sfc_main$2y=defineComponent({__name:"EmojiBox",emits:["close","select"],setup(a,{emit:o}){const{emojiPackages:s}=storeToRefs(useMessageStore()),i=ref(0),l=computed(()=>s.value.length?s.value[i.value]:{}),c=computed(()=>(l.value.emote||[]).map($=>{let y="small",B=$.url;return $.meta.size===2?(y="middle",B=formatImg($.url,{w:112,h:112})):$.type!==4?B=formatImg($.url,{w:64,h:64}):y="large",{src:B,size:y,text:$.text,id:$.id,type:$.type}})),r=ref(null),u=ref(!0);async function d(g){g!==i.value&&(i.value=g,u.value=!1,await nextTick(),u.value=!0)}function _(g){o("select",g)}const f=ref(null),m=ref(!1);watch(s,()=>{setTimeout(()=>{const{offsetWidth:g,scrollWidth:$}=f.value||{};m.value=$>g})},{immediate:!0});const p=g=>{const $=f.value,y=$.offsetWidth,B=$.scrollLeft;if(g==="L"){const C=B-y/2;$.scrollLeft=C>=0?C:0}else $.scrollLeft=B+y/2},v=g=>{r.value&&g.composedPath().includes(r.value)||(o("close"),document.removeEventListener("click",v))};return onMounted(async()=>{await new Promise(g=>setTimeout(g,0)),document.addEventListener("click",v)}),(g,$)=>{const y=resolveComponent("v-button");return openBlock(),createElementBlock("div",{class:"im_emoji",ref_key:"container",ref:r},[createBaseVNode("div",{class:normalizeClass(["im_emoji--header p_relative",{"more-pkgs":m.value}])},[withDirectives(createVNode(y,{class:"im_emoji--hdbtn hdbtn-l p_center_y l_0 h_100",type:"grey",onClick:$[0]||($[0]=B=>p("L"))},{default:withCtx(()=>[createVNode(unref(IcoArrowLeft))]),_:1},512),[[vShow,m.value]]),createBaseVNode("div",{ref_key:"emojiPkgs",ref:f,class:"im_emoji--pkgs u_select_none"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),(B,C)=>(openBlock(),createElementBlock("div",{key:C,class:normalizeClass({"im_emoji--pkg":!0,active:C===i.value}),onClick:withModifiers(S=>d(C),["stop"])},[createBaseVNode("img",{src:unref(formatImg)(B.url,{w:48,h:48}),alt:B.text},null,8,_hoisted_2$39)],10,_hoisted_1$3p))),128))],512),withDirectives(createVNode(y,{class:"im_emoji--hdbtn hdbtn-r p_center_y r_0 h_100",type:"grey",onClick:$[1]||($[1]=B=>p("R"))},{default:withCtx(()=>[createVNode(unref(IcoArrowRight))]),_:1},512),[[vShow,m.value]])],2),createBaseVNode("div",_hoisted_3$2Y,[u.value?(openBlock(),createElementBlock("ul",_hoisted_4$23,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(c),(B,C)=>(openBlock(),createElementBlock("li",{key:C,class:normalizeClass(["im_emoji--list--item",{"im_emoji--list--item":!0,[B.size]:!0,kaomoji:B.type===4}]),onClick:withModifiers(S=>_(B),["stop"])},[B.type!==4?(openBlock(),createElementBlock("img",{key:0,src:B.src,alt:B.text},null,8,_hoisted_6$1l)):(openBlock(),createElementBlock("span",_hoisted_7$1e,toDisplayString(B.src),1))],10,_hoisted_5$1C))),128))])):createCommentVNode("",!0)])],512)}}});var EmojiBox=_export_sfc(_sfc_main$2y,[["__scopeId","data-v-7e5078ac"]]),SendBox_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$3o={key:0,class:"emoji-box"},_hoisted_2$38=["value"],_hoisted_3$2X=createTextVNode(" \u53D1\u9001 "),_hoisted_4$22={class:"im-send-img"},_sfc_main$2x=defineComponent({__name:"SendBox",setup(a){const o=useMessageStore(),{userInfo:s}=storeToRefs(useUserInfoStore()),{activeSession:i}=storeToRefs(o),l=ref(!1),c=ref(""),r=y=>{c.value=y.target.value},u=y=>{c.value+=y.text},d=async y=>{var k,b,V;const B=y.target.files[0];if(y.target.value="",!B)return toastAsync({content:"\u8BF7\u9009\u62E9\u56FE\u7247"});if(B.size>20*1024*1024)return toastAsync({content:"\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC720M"});const C=new Image;if(await new Promise(A=>{C.onload=A,C.src=URL.createObjectURL(B)}),C.width<10||C.height<10)return toastAsync({content:"\u56FE\u7247\u5C3A\u5BF8\u592A\u5C0F"});let S=null;try{S=await uploadPicture(B,{biz:"im"}),URL.revokeObjectURL(C.src)}catch{return toastAsync({content:"\u56FE\u7247\u4E0A\u4F20\u5931\u8D25"})}const E=_(2,JSON.stringify({url:S.img_src,size:S.img_size,imageType:(V=(b=(k=B.type)==null?void 0:k.split)==null?void 0:b.call(k,"/")[1])!=null?V:"png",original:1,width:S.img_width,height:S.img_height}));try{await o.sendMessage(E)}catch(A){return toastAsync({content:A.message||"\u53D1\u9001\u5931\u8D25"})}await nextTick(),messageEvents.emit("scrollToBottom")},_=(y,B)=>({msg_type:y,content:B,sender_uid:s.value.mid,receiver_id:i.value.id,receiver_type:1,msg_status:0,timestamp:Math.floor(Date.now()/1e3),dev_id:"0",new_face_version:/\[(?:[^[\]]+)]/g.test(B)&&y===1?1:0}),f=ref(!1),m=ref(null),p=y=>{var B;(B=m.value)!=null&&B.contains(y.relatedTarget)||(f.value=!1)},v=y=>{y.key==="Enter"&&$()};let g=!1;const $=async()=>{if(!(!c.value||g)){g=!0;try{const y=_(1,JSON.stringify({content:c.value}));await o.sendMessage(y)}catch(y){toastAsync({content:y.message||"\u7F51\u7EDC\u5F02\u5E38"})}c.value="",await nextTick(),messageEvents.emit("scrollToBottom"),g=!1}};return(y,B)=>{const C=resolveComponent("VButton");return openBlock(),createElementBlock(Fragment,null,[createVNode(Transition,{name:"im-emoji-box"},{default:withCtx(()=>[l.value?(openBlock(),createElementBlock("div",_hoisted_1$3o,[createVNode(EmojiBox,{onClose:B[0]||(B[0]=S=>l.value=!1),onSelect:u})])):createCommentVNode("",!0)]),_:1}),createBaseVNode("div",{class:normalizeClass(["im-send-box",{opened:l.value}])},[createBaseVNode("div",{class:normalizeClass(["im-text-input-warp",{active:f.value}]),onFocusout:p,ref_key:"inputWrapEl",ref:m},[createBaseVNode("input",{class:"im-text-input",placeholder:"\u53D1\u4E2A\u6D88\u606F\u804A\u804A\u5457\uFF5E",value:c.value,onInput:r,onKeydown:v,onFocus:B[1]||(B[1]=S=>f.value=!0)},null,40,_hoisted_2$38),withDirectives(createVNode(C,{class:"send-btn",type:"pink",disabled:!c.value,onClick:$},{default:withCtx(()=>[_hoisted_3$2X]),_:1},8,["disabled"]),[[vShow,c.value]])],34),createBaseVNode("label",_hoisted_4$22,[createVNode(unref(ImageIcon),{class:"input-icon"}),createBaseVNode("input",{type:"file",accept:"image/png, image/jpeg, image/webp",onChange:d},null,32)]),createVNode(unref(EmojiIcon),{class:normalizeClass(["im-emoji-btn input-icon",{active:l.value}]),onClick:B[2]||(B[2]=S=>l.value=!l.value)},null,8,["class"])],2)],64)}}});var SendBox=_export_sfc(_sfc_main$2x,[["__scopeId","data-v-78e02a3e"]]);const _hoisted_1$3n={width:"14",height:"14",viewBox:"0 0 14 14",fill:"#c9ccd0"},_hoisted_2$37=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 1.333a5.667 5.667 0 1 0 0 11.334A5.667 5.667 0 0 0 7 1.334ZM.333 7a6.667 6.667 0 1 1 13.334 0A6.667 6.667 0 0 1 .333 7ZM7.5 9.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM6.167 5.833a.833.833 0 0 1 1.666 0 .719.719 0 0 1-.183.498 2.62 2.62 0 0 1-.247.252l-.074.068a7.983 7.983 0 0 0-.26.245c-.255.255-.407.498-.489.735-.08.232-.08.424-.08.53v.006a.5.5 0 0 0 1 0c0-.09.002-.141.025-.21.024-.068.083-.186.25-.353a6.393 6.393 0 0 1 .307-.287c.108-.1.23-.216.34-.35.234-.285.411-.642.411-1.134a1.833 1.833 0 0 0-3.666 0 .5.5 0 1 0 1 0Z"},null,-1),_hoisted_3$2W=[_hoisted_2$37];function render$Z(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3n,_hoisted_3$2W)}var IMHelpInfoIcon={render:render$Z},SessionOptions_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$o=a=>(pushScopeId("data-v-0487698a"),a=a(),popScopeId(),a),_hoisted_1$3m=["textContent"],_hoisted_2$36={class:"help"},_hoisted_3$2V=_withScopeId$o(()=>createBaseVNode("div",{class:"help-info t-center"},"\u9ED8\u8BA4\u6570\u5B57\u63D0\u9192\uFF0C\u5F00\u542F\u514D\u6253\u6270\u540E\u5C06\u4E0D\u518D\u63D0\u9192",-1)),_hoisted_4$21=["textContent"],_hoisted_5$1B={class:"help"},_hoisted_6$1k=_withScopeId$o(()=>createBaseVNode("div",{class:"help-info",textContent:`\u82E5\u5173\u95ED\u6B64\u5F00\u5173\uFF0C\u4F60\u5C06\u4E0D\u518D\u6536\u5230\u8BE5\u8D26\u53F7\u7684\u7FA4\u53D1
\u5185\u5BB9\u6D88\u606F\uFF0C\u4F46\u901A\u77E5\u7C7B\u6D88\u606F\u4E0D\u53D7\u5F71\u54CD`},null,-1)),_hoisted_7$1d=_withScopeId$o(()=>createBaseVNode("div",{class:"divider"},null,-1)),_sfc_main$2w=defineComponent({__name:"SessionOptions",setup(a){const o=ref(null),s=useMessageStore(),{activeSession:i,sessionOptionsMap:l,reportDialogVisible:c,selectedMessage:r,subSessionList:u}=storeToRefs(s),d=computed$1(()=>{var B;return(B=i.value.session)==null?void 0:B.system_msg_type}),_=computed$1(()=>{var B,C;return(C=(B=i.value)==null?void 0:B.session)==null?void 0:C.top_ts}),f=()=>s.toggleSetTop(),m=()=>{var S;const B=i.value.id,C=Number(!((S=l.value[B])!=null&&S.push_setting));!B||s.togglePushSetting(B.toString(),C)},p=()=>{s.toggleMessageDnd(i.value.session,Number(!i.value.session.is_dnd))},v=()=>{i.value.from&&u.value.length?s.setActiveSession({type:i.value.from}):s.setActiveSession(null)},g=async()=>{if(!!await alertAsync({content:"\u52A0\u5165\u9ED1\u540D\u5355\u540E\u5C06\u4E0D\u518D\u6536\u5230\u8BE5\u7528\u6237\u7684\u65B0\u6D88\u606F\uFF0C\u5E76\u81EA\u52A8\u89E3\u9664\u5173\u6CE8\u5173\u7CFB\u3002",cancelText:"\u53D6\u6D88",confirmText:"\u786E\u5B9A"})){try{await s.setBlacklist(i.value.id),toastAsync({content:"\u62C9\u9ED1\u6210\u529F"})}catch(B){toastAsync({content:B.message||"\u7F51\u7EDC\u5F02\u5E38"});return}await s.removeSession(i.value.session),v()}},$=async()=>{try{await s.removeSession(i.value.session,!0),toastAsync({content:"\u5220\u9664\u6210\u529F"})}catch(B){toastAsync({content:B.message||"\u7F51\u7EDC\u5F02\u5E38"})}v()},y=async()=>{r.value=null,c.value=!0};return(B,C)=>{var S,E;return unref(i).session?(openBlock(),createElementBlock("div",{key:0,class:"option-list",ref_key:"el",ref:o},[createBaseVNode("div",{class:"option",textContent:toDisplayString(unref(_)?"\u53D6\u6D88\u7F6E\u9876":"\u7F6E\u9876"),onClick:f},null,8,_hoisted_1$3m),createBaseVNode("div",{class:"option",onClick:p},[createBaseVNode("span",null,toDisplayString(unref(i).session.is_dnd?"\u5173\u95ED":"\u6D88\u606F")+"\u514D\u6253\u6270",1),createBaseVNode("div",_hoisted_2$36,[createVNode(unref(IMHelpInfoIcon),{class:"help-icon"}),_hoisted_3$2V])]),unref(d)?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:0},[(S=unref(l)[unref(i).id])!=null&&S.show_push_setting?(openBlock(),createElementBlock("div",{key:0,class:"option",onClick:m},[createBaseVNode("span",{textContent:toDisplayString(((E=unref(l)[unref(i).id])==null?void 0:E.push_setting)===1?"\u63A5\u53D7\u5185\u5BB9\u63A8\u9001":"\u5173\u95ED\u5185\u5BB9\u63A8\u9001")},null,8,_hoisted_4$21),createBaseVNode("div",_hoisted_5$1B,[createVNode(unref(IMHelpInfoIcon),{class:"help-icon"}),_hoisted_6$1k])])):createCommentVNode("",!0),createBaseVNode("div",{class:"option",onClick:g},"\u52A0\u5165\u9ED1\u540D\u5355"),_hoisted_7$1d,createBaseVNode("div",{class:"option",onClick:$},"\u5220\u9664\u4F1A\u8BDD"),createBaseVNode("div",{class:"option",onClick:y},"\u4E3E\u62A5\u8BE5\u7528\u6237")],64))],512)):createCommentVNode("",!0)}}});var SessionOptions=_export_sfc(_sfc_main$2w,[["__scopeId","data-v-0487698a"]]),Img_vue_vue_type_style_index_0_lang="";const _sfc_main$2v=defineComponent({props:{src:{type:String,required:!0},default:{type:String,default:DEFAULT_IMG},alt:{type:String,default:""},width:{type:Number,default:0},height:{type:Number,default:0},s:{type:Number,default:0},bfsStyle:{type:String,default:""}},emits:["inited"],setup(a,{emit:o}){const s=ref(null),i=ref(0),l=ref(0),c=ref(!1),{stop:r}=useIntersectionObserver(s,([{isIntersecting:f}])=>{f&&(i.value=s.value.offsetWidth,l.value=s.value.offsetWidth,u())});function u(){const f=()=>{o("inited"),r(),c.value=!0};if(!d.value){f();return}const m=new Image;m.onload=()=>{f()},m.src=d.value}const d=computed(()=>a.src?getBmgSrc(a.src,{w:(a.width||i.value)*window.devicePixelRatio|0,h:(a.height||l.value)*window.devicePixelRatio|0,s:!!a.s,ext:"webp",style:a.bfsStyle||"pc-avatar"}):a.default);function _(f){s.value=f}return()=>h("img",{ref:_,class:"base_img",src:c.value?d.value:a.default,alt:a.alt})}});var _imports_0$2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ0AAACbCAMAAABPoWn5AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA2UExUReXp79PZ37zEy8DIzrW+xOLm7OPn7bC5wOTo7rG6wcjP1s/V2+Dk6szS2d3i6LrCycXM0tje5LaE170AAAY/SURBVHja7ZuLduMoDEAXEFjizf//7ETglLRJmyYQNrvje840ycTHvZV4Wdj/HBwcHBwcHBwcHBwcHBwcHBwcvCt44tdHrpYzxbqIv3Hzzgq/Vs4HIErF3JeLigisXxq+kmjbKAlzN8SStm3jA9eBArat6umfj2tyGwW9Onb39UxRtDHAsVuHt7AxJH/Qww+5vLbdYbRwL3qmy5XVY0rs0TP3Ihdx+WjsLW3MNz3XDMmN4zPtyS14u7cypFhuPWjO0QNh3kuOQW1hu9k1TJGjvXUc9Jm63g05yhFxSZxiKeIKzm3TC6LjWI4hK64oJZrJxro4JRNcQ9sO3fxfuCbJ7KKZOvYGCUS0zYCIQDmP0+RK3qNBE2iBtuNduY+rtBGBnENiQ1Bz9LAkdkuh+DlEWxeHyuOsUYMzMQ0TuaWQNRPyGmgjCB7ZFM0giPscDTzD4HhegSPnW9ct4hvcCfELSvTYEgIbyThqpy2d50otspLpZ+Rt+vcqt0slnk0o4IQlOtSzGJekdWIMZ1NyrKfthOAht7pU+J1IuXgcxPiiksC9xYy2PK1o/xNjynHOvJNUOx+3Zz041m0b8dnQwaSLA3Q1eLGdeexMUMfN07uszKxll+SRzsu6qh63y55TbHGSnVZZ720mibFOwXbtZAFnrcYsJ8OwHYzZ2ToWm6l2JnAysE6Qbpadm2inZ9rhYfesXXiJnf1L7Kb32b/GzuJ7j3f/VTtEH6O5sU7iVbpGvGmnZtt5ecsOfRFWZaevDCyAVFZEs9quR62ELAHo+uoKBdTr86SsixoX2Dn8kjunEnyUEK+X1A0CmYXHpXaoi01AXaF8KdpK6kUdAMV+i+wQ9bns850dOvr8vSoGX2WHl+0OvVOfqmV0o+qO9rM+QS7mNXbh0g6L+hIXGSLeKFzl1AV7Uazb2RfYYeQm1bnpxqApQX3yA/t6OweX+ZKhN6hrv96tGcqvtxMfdpSUu7d/7IWVZz8IL7Rze2YV1ail7H5RPMc2myQ6IePL7Th4Tc2bX29ZRa7Y80bja+0YXbgKpxEfOA1qH/mvebEdw14DvNJunPV2iHj5agyus3Nsl36y8yJia5K+zhPO4/vYoUvZ1/JoPTYqEG9lB+A0r+p4UIsW3svOW0hWBDiRgwLIKzN7v8/6AIwViaCtRu7ahVl2969n0YssVfC6ZFVX6j/a5aV2DGqtTXvB+3WUiXbid1UexIeqPG6inWG7exx2N9vdfLvwf6+QhbeukIUXVMh0rnZ9N2V8JwpVnmSHXuX659LwPpn42MWzUk+yi8m1Pcbh7eN+jjLrzlJjUznbKT92qnyOP4ZUNOJo4FCLGjos+2gwmFriAa9tDboY/RixhJQ5B4b7GwdxiCjbPRWt9pTt8+Rcf6jg8eO8o015n3B8qysJF4L9ifAttiFabcPvk9D4Pjm3PKf3e3m01t57zS9X6IZpP+tLZz/EYJVziepIxYwPKomvsmaBPrBcihNOqQMQ11ZdNHPwIgNNu/e93fZMkNQcJLsROD0pERaq3ywmyjE+JPabBoEUGifJ9Rp1h0bcki1m7n3PxWVVkYrJ/A5aXXtnb0/9Y1WR6is2FA7cZHT8wDNR1HBKERtCEtuU88dU7VzkQy952b3l2Ph0Ez4IjZX9SaSCFR322EW8eACt/lv4bE8f8nml2m9tiop6pX09GGirQMG2IKdu06aYHryVoEHsmz5kTdsqaJ+yrr1oD12b6xeDl5s+KWK7kbCi/GXo2tJ6OT04G3F0zNlWcqL1xbccvNWI1H9/8ifbvH8GgXVdzvxbD88Ye/n7T0JFne2Cbj2ksfopxr5d1qPjUaTzh+yxwKUd5cUtj2U6BEI76omsoetQEitT21tZN8oXLq37dsj6pXZFsl0HrOzvQ+5tsvfjdZiWxw6lLkQq0dZZ/vwsch6/B7rc+hG5zQuPAQv7hQ70oB3ldanlwe5BIOKyxML2KBRw2SxGj9vJRalFn7bHgYJr7AQ9YUfZrLHLT9mluMTOw/YM4PBtE/tACXu40P0UaUW/iOlJO7BmQWJhew5S8X0Ty8vSBYndngXcuyaWoewXXCk+jSz4dounDjizoATwEAsvbDHANmCXyoLr2DdNLRa5jUDZv7hAMcSD5ag/Cv22ACdT9YQAAAAASUVORK5CYII=",Avatar_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$3l={class:"user_avatar"},_sfc_main$2u=defineComponent({__name:"Avatar",props:{face:{type:String,required:!0},verifyType:{type:Number,default:-1},nft:{type:Boolean,default:!1},width:{type:Number,default:0},height:{type:Number,default:0}},setup(a){return(o,s)=>(openBlock(),createElementBlock("div",_hoisted_1$3l,[createVNode(_sfc_main$2v,{class:"user_avatar--face",src:a.face,default:unref(_imports_0$2),s:1,width:a.width,height:a.height},null,8,["src","default","width","height"]),a.nft?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["user_avatar--badge nft",{shift_left:a.verifyType!==-1}])},null,2)):createCommentVNode("",!0),a.verifyType!==-1?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["user_avatar--badge",{verify_personal:a.verifyType===0,verify_business:a.verifyType===1}])},null,2)):createCommentVNode("",!0)]))}});var Avatar=_export_sfc(_sfc_main$2u,[["__scopeId","data-v-53000ebe"]]);const _hoisted_1$3k={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$35=createBaseVNode("path",{d:"M9.499 6.528a2.991 2.991 0 0 0-.306-.264.607.607 0 0 0-.886.827.61.61 0 0 0 .15.13c.057.047.113.093.166.146l.05.05c.63.629.441 1.712-.188 2.341l-2.686 2.685a1.616 1.616 0 0 1-2.282 0l-.05-.05a1.614 1.614 0 0 1 0-2.282l1.186-1.186a.658.658 0 0 0-.41-1.176.656.656 0 0 0-.37.114V7.86l-.014.012a.663.663 0 0 0-.125.117L2.501 9.144a2.99 2.99 0 0 0 0 4.215l.05.05a2.99 2.99 0 0 0 4.214 0l2.685-2.686c1.158-1.159 1.256-2.987.098-4.145l-.05-.05Z",fill:"currentColor"},null,-1),_hoisted_3$2U=createBaseVNode("path",{d:"m13.369 2.591-.05-.05a2.988 2.988 0 0 0-4.214 0L6.42 5.227C5.26 6.386 5.197 8.06 6.356 9.219l.05.049c.052.052.107.102.162.15.04.045.088.083.141.114h.001a.573.573 0 0 0 .802-.747c-.076-.169-.218-.273-.316-.37l-.05-.05c-.628-.629-.39-1.543.24-2.172l2.686-2.685a1.613 1.613 0 0 1 2.281 0l.05.05c.63.629.63 1.653 0 2.281L11.22 7.023a.653.653 0 0 0 .732 1.083l.003.004.018-.017a.657.657 0 0 0 .149-.138l1.246-1.15a2.988 2.988 0 0 0 .001-4.214Z",fill:"currentColor"},null,-1),_hoisted_4$20=[_hoisted_2$35,_hoisted_3$2U];function render$Y(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3k,_hoisted_4$20)}var IMLinkIcon={render:render$Y},TextMessage$1="",TextMessage=defineComponent({props:{content:{type:String,required:!0},isSelf:{type:Boolean,default:!1}},setup(a){const o=useMessageStore(),{urlParseConfig:s,emojiDict:i}=storeToRefs(o),l=r=>{const u=m=>m.reduce((p,v)=>p.concat(Array.isArray(v)?u(v):v),[]),d=(m,p)=>v=>{const g=v.match(m)||[],$=v.split(m);return[g.map(p),$]};return((m,p)=>{const v=m.map($=>$.match instanceof RegExp?d($.match,$.replace):y=>{const[B,C]=$.match(y);return[B.map($.replace),C]}),g=($,y)=>{const B=v[$];return B?y.map(C=>{const[S,E]=B(C),k=g($+1,E),b=[];for(let V=0;V<S.length;V++)b.push(k[V]),b.push(S[V]);return b.push(k[S.length]),b}):y};return u(g(0,[p]))})([{match:m=>{const p=new RegExp(s.value.any_url,"g"),v=m.match(p)||[],g=s.value.white_list.length?new RegExp(s.value.white_list.filter(C=>C.indexOf("bilibili://")===-1).join("|")):null,$=s.value.black_list.length?new RegExp(s.value.black_list.join("|")):null,y=[];let B=[m];for(let C=0;C<v.length;C++)g&&g.test(v[C])&&!($&&$.test(v[C]))&&(y.push(v[C]),B=u(B.map(S=>S.split(v[C]))));return[y,B]},replace:m=>({type:"link",url:m})},{match:/\[br]/g,replace:()=>({type:"br"})},{match:/av\d+/gi,replace:m=>({type:"avid",id:m})},{match:/bv1[\d\w]{9}/gi,replace:m=>({type:"bvid",id:m})},{match:/cv\d+/gi,replace:m=>({type:"cvid",id:m})},{match:/(?:bilibili:\/\/)(?:[/.$*?~=#!%@&\-\w]*)?/g,replace:m=>({type:"native-link",url:m})},{match:/\[(?:[^[\]]+)]/g,replace:m=>(o.getEmojiData(m),i.value[m]?{type:"emoji",name:m}:m)}],r)},c=computed(()=>l(a.content||""));return()=>createVNode("div",{class:`text-message ${a.isSelf?"is-self":""}`},[c.value.map(r=>{var d,_,f,m;return typeof r=="string"?createVNode("span",null,[r]):(m={link:createVNode("span",{class:"c-link","data-href":r.url,onClick:()=>openInBrowser(r.url,"message.CLink")},[createVNode(IMLinkIcon,null,null),createTextVNode("\u7F51\u9875\u94FE\u63A5")]),br:createVNode("br",null,null),avid:createVNode("span",{class:"c-link",onClick:()=>openPlayerWindow({type:"ugc",aid:r.id.slice(2)})},[r.id]),bvid:createVNode("span",{class:"c-link",onClick:()=>openPlayerWindow({type:"ugc",bvid:r.id})},[r.id]),cvid:createVNode("span",{class:"c-link",onClick:()=>openInBrowser("https://www.bilibili.com/read/"+r.id,"message.CLink")},[r.id]),emoji:createVNode("div",{class:`im-emoji ${((_=(d=i.value[r.name])==null?void 0:d.meta)==null?void 0:_.size)>1?"big":""}`,style:{backgroundImage:"url("+((f=i.value[r.name])==null?void 0:f.src)+")"}},null)}[r.type])!=null?m:null})])}}),ImageMessage_vue_vue_type_style_index_0_lang="";const _hoisted_1$3j=["src"],_sfc_main$2t=defineComponent({__name:"ImageMessage",props:{content:{type:Object,required:!0},isSelf:{type:Boolean,default:!1},status:{type:Number,default:0}},setup(a){const o=a,s=DPR(),i=299,l=computed(()=>{const{width:c,height:r,url:u}=o.content,d=o.status===50;if(!c||!r||!u||d)return{error:!0,url:u||"",width:c||100,height:r||100};const _=(()=>{if(c>i){const f=c/r;return{width:i,height:Math.round(i/f)}}else return{width:c,height:r}})();return{..._,url:formatImg$1(u,_.width*s,_.height*s)}});return(c,r)=>(openBlock(),createElementBlock("img",{class:normalizeClass(["img-msg",{error:unref(l).error,"is-self":a.isSelf}]),src:unref(l).url,alt:"[\u56FE\u7247]",style:normalizeStyle({width:unref(l).width+"px",height:unref(l).height+"px"})},null,14,_hoisted_1$3j))}}),_hoisted_1$3i={class:"icon",viewBox:"0 0 16 16",fill:"currentColor"},_hoisted_2$34=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 3.75c-1.714 0-3.208.088-4.258.174A1.45 1.45 0 0 0 2.4 5.246C2.323 6.107 2.25 7.25 2.25 8.5s.073 2.393.15 3.254a1.45 1.45 0 0 0 1.342 1.322c1.05.086 2.544.174 4.258.174s3.208-.088 4.258-.174a1.45 1.45 0 0 0 1.341-1.321c.078-.862.151-2.004.151-3.255s-.073-2.393-.15-3.255a1.45 1.45 0 0 0-1.342-1.321A52.956 52.956 0 0 0 8 3.75Zm-4.34-.823A53.955 53.955 0 0 1 8 2.75c1.747 0 3.27.09 4.34.177a2.45 2.45 0 0 1 2.255 2.228c.08.883.155 2.057.155 3.345 0 1.288-.075 2.462-.155 3.345a2.45 2.45 0 0 1-2.255 2.228c-1.07.087-2.593.177-4.34.177-1.747 0-3.27-.09-4.34-.177a2.45 2.45 0 0 1-2.255-2.229A37.662 37.662 0 0 1 1.25 8.5c0-1.288.075-2.461.155-3.344A2.45 2.45 0 0 1 3.66 2.927ZM4 7.25a.5.5 0 0 1 .5-.5h.25a.5.5 0 0 1 0 1H4.5a.5.5 0 0 1-.5-.5Zm2 0a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5Zm-.5 2a.5.5 0 0 0 0 1h.25a.5.5 0 0 0 0-1H5.5Zm2 0a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4Z"},null,-1),_hoisted_3$2T=[_hoisted_2$34];function render$X(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3i,_hoisted_3$2T)}var dmNum={render:render$X},VideoMessage_vue_vue_type_style_index_0_lang="";const _hoisted_1$3h={class:"im_video_card--l flex_shrink_0 mr_sm bd_radius ov_hidden"},_hoisted_2$33={class:"im_video_card--r flex_col_between items_start h_100 py_xs"},_hoisted_3$2S={class:"b_text text_ellipsis_2l mt_0 hover_pink ts_all_fast"},_hoisted_4$1$={key:0,class:"text3 fs_5"},_hoisted_5$1A={class:"text3 fs_5 video-card-num flex_start"},_hoisted_6$1j={class:"flex_start"},_sfc_main$2s=defineComponent({__name:"VideoMessage",props:{content:{type:Object,default:()=>({})}},setup(a){const o=a,s=computed(()=>formatNum(o.content.danmaku||0)),i=computed(()=>formatTime(o.content.pub_date*1e3)),l=()=>{o.content.title&&o.content.bvid&&openPlayerWindow({type:"ugc",bvid:o.content.bvid})};return(c,r)=>{const u=resolveComponent("VImg");return openBlock(),createElementBlock("div",{class:"im_video_card flex_start mx_lg w_100 cs_pointer u_select_none",onClick:l},[createBaseVNode("div",_hoisted_1$3h,[createVNode(u,{class:"im_video_card--img cs_pointer",src:a.content.cover,width:128,height:72,rule:"1c"},null,8,["src"])]),createBaseVNode("div",_hoisted_2$33,[createBaseVNode("p",_hoisted_3$2S,toDisplayString(a.content.title||"\u5DF2\u5931\u6548"),1),createBaseVNode("div",null,[a.content.title?(openBlock(),createElementBlock("p",_hoisted_4$1$,toDisplayString(unref(i)),1)):createCommentVNode("",!0),createBaseVNode("p",_hoisted_5$1A,[createBaseVNode("span",_hoisted_6$1j,[createVNode(unref(dmNum)),createTextVNode("\xA0"+toDisplayString(unref(s)),1)])])])])])}}}),_hoisted_1$3g={width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor"},_hoisted_2$32=createBaseVNode("path",{d:"m8.633 7.096.53-.53-.53.53Zm0-.442.53.53-.53-.53Zm3.217 3.659.53-.53a.75.75 0 0 1 0 1.06l-.53-.53Zm-3.217 3.216-.53-.53.53.53Zm0 .442-.53.53.53-.53Zm.442 0 .53.53-.53-.53Zm3.29-3.29.53.53-.53-.53Zm0-.737-.53.53.53-.53Zm-3.29-3.29-.53.53.53-.53Zm-.972.972a1.063 1.063 0 0 1 0-1.502l1.06 1.06a.437.437 0 0 0 0-.618l-1.06 1.06Zm3.216 3.217L8.103 7.626l1.06-1.06 3.217 3.216-1.06 1.06Zm-3.216 2.156 3.216-3.217 1.06 1.06-3.216 3.217L8.103 13Zm0 1.502a1.063 1.063 0 0 1 0-1.502l1.06 1.06a.438.438 0 0 0 0-.618l-1.06 1.06Zm1.502 0a1.063 1.063 0 0 1-1.502 0l1.06-1.06a.438.438 0 0 0-.618 0l1.06 1.06Zm3.29-3.29-3.29 3.29-1.06-1.06 3.29-3.29 1.06 1.06Zm0-1.797a1.27 1.27 0 0 1 0 1.797l-1.06-1.06a.229.229 0 0 0 0 .324l1.06-1.061Zm-3.29-3.29 3.29 3.29-1.06 1.06-3.29-3.29 1.06-1.06Zm-1.502 0a1.063 1.063 0 0 1 1.502 0l-1.06 1.06c.17.171.447.171.618 0l-1.06-1.06Z"},null,-1),_hoisted_3$2R=[_hoisted_2$32];function render$W(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3g,_hoisted_3$2R)}var IMRightArrow={render:render$W},NotifyMessage_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$3f=["textContent"],_hoisted_2$31={class:"header"},_hoisted_3$2Q=["textContent"],_hoisted_4$1_=["textContent"],_hoisted_5$1z={key:2,class:"modules"},_hoisted_6$1i=["textContent"],_hoisted_7$1c=["textContent"],_hoisted_8$16=["onClick"],_hoisted_9$_=["textContent"],_sfc_main$2r=defineComponent({__name:"NotifyMessage",props:{content:{type:Object,required:!0}},setup(a){const o=a,s=computed(()=>{var _;const c=["jump_text","jump_text_2","jump_text_3"],r=["jump_uri","jump_uri_2","jump_uri_3"],u=["jump_uri_config","jump_uri_2_config","jump_uri_3_config"],d=[];for(let f=0;f<3;f++){const m=o.content[c[f]]||((_=o.content[u[f]])==null?void 0:_.text),p=o.content[r[f]];m&&p&&d.push({text:m,url:p,native:p.indexOf("bilibili://")===0})}return d}),i=computed(()=>{var r;const c=(r=o.content.jump_uri_config)==null?void 0:r.all_uri;return!c||c.indexOf("bilibili://")===0?"":c}),l=computed(()=>{var r;const c=((r=o.content.notifier)==null?void 0:r.jump_url)||o.content.jump_uri;return!c||c.indexOf("bilibili://")===0?"":c});return(c,r)=>{var u;return openBlock(),createElementBlock("div",{class:normalizeClass(["notify-message",{active:unref(i)}]),onClick:r[1]||(r[1]=()=>unref(i)?unref(openInBrowser$1)(unref(i),"message.Notify"):null)},[a.content.notifier?(openBlock(),createElementBlock("div",{key:0,class:"notifier",onClick:r[0]||(r[0]=withModifiers(d=>unref(l)?unref(openInBrowser$1)(unref(l),"message.Notify"):null,["stop"]))},[createBaseVNode("div",{class:"avatar",style:normalizeStyle({backgroundImage:`url(${unref(formatImg$1)(a.content.notifier.avatar_url,48,48)})`})},null,4),createBaseVNode("div",{class:"name",textContent:toDisplayString(a.content.notifier.nickname)},null,8,_hoisted_1$3f)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_2$31,[createBaseVNode("div",{class:"title",textContent:toDisplayString(a.content.title)},null,8,_hoisted_3$2Q)]),a.content.text?(openBlock(),createElementBlock("div",{key:1,class:"text-content",textContent:toDisplayString(a.content.text)},null,8,_hoisted_4$1_)):createCommentVNode("",!0),(u=a.content.modules)!=null&&u.length?(openBlock(),createElementBlock("div",_hoisted_5$1z,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.content.modules,(d,_)=>(openBlock(),createElementBlock("div",{class:"module",key:_},[createBaseVNode("div",{class:"title",textContent:toDisplayString(d.title)},null,8,_hoisted_6$1i),createBaseVNode("div",{class:"detail",textContent:toDisplayString(d.detail)},null,8,_hoisted_7$1c)]))),128))])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),(d,_)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["link",{active:!d.native}]),key:_,onClick:withModifiers(()=>d.native?null:unref(openInBrowser$1)(d.url,"message.Notify"),["stop"])},[createBaseVNode("span",{textContent:toDisplayString(d.text)},null,8,_hoisted_9$_),createVNode(unref(IMRightArrow),{class:"arrow"})],10,_hoisted_8$16))),128))],2)}}});var NotifyMessage=_export_sfc(_sfc_main$2r,[["__scopeId","data-v-9ebbe37e"]]),IMMessageItem_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$3e=["textContent"],_sfc_main$2q=defineComponent({__name:"IMMessageItem",props:{item:{type:Object,required:!0}},setup(a){const o=a,s=useRouter(),i=useMessageStore(),{userInfos:l,contextMenu:c,messageList:r,selectedMessage:u,reportDialogVisible:d,spaceFromMessage:_}=storeToRefs(i),{userInfo:f}=storeToRefs(useUserInfoStore()),m=computed(()=>![5,8,10,11].includes(o.item.msg_type)&&!p.value),p=computed(()=>{var k,b;return o.item.msg_type===10&&((b=(k=B.value)==null?void 0:k.biz_content)==null?void 0:b.biz_type)===4}),v=computed(()=>o.item.msg_status===1||[301,302,303,304,305].includes(o.item.msg_type)),g=computed(()=>v.value?o.item.msg_status===1?`${f.value.mid===o.item.sender_uid?"\u4F60":"\u5BF9\u65B9"}\u64A4\u56DE\u4E86\u4E00\u6761\u6D88\u606F`:o.item.content||"\u672A\u77E5\u6D88\u606F":""),$=computed(()=>f.value.mid===o.item.sender_uid),y=computed(()=>l.value[o.item.sender_uid]),B=computed(()=>parseContent(o.item));let C=!1;const S=k=>{if(v.value)return;const b=[{text:"\u5220\u9664",handler:()=>{const V=r.value.findIndex(A=>A.msg_key===o.item.msg_key);V>=0&&r.value.splice(V,1)}}];$.value?b.unshift({text:"\u64A4\u56DE",handler:async()=>{C||(C=!0,await i.drawbackMessage(o.item),C=!1)}}):b.push({text:"\u4E3E\u62A5",handler:async()=>{d.value=!0}}),u.value=o.item,c.value=b,i.openContextMenu(k)},E=(k=!1)=>{s.push({name:"Space",query:{mid:k?f.value.mid:y.value.mid}}),messageEvents.emit("close"),_.value=!0};return(k,b)=>{var V,A,x,T,I,R,N,w;return openBlock(),createElementBlock("div",{class:"im-message-item",onContextmenu:S},[unref(m)&&!unref(v)?(openBlock(),createElementBlock(Fragment,{key:0},[unref($)?createCommentVNode("",!0):(openBlock(),createBlock(Avatar,{key:0,class:"avatar talker",face:(V=unref(y))==null?void 0:V.face,verifyType:(T=(x=(A=unref(y))==null?void 0:A.official)==null?void 0:x.type)!=null?T:-1,nft:!!((I=unref(y))!=null&&I.face_nft_new),onClick:b[0]||(b[0]=()=>E(!1))},null,8,["face","verifyType","nft"])),createBaseVNode("div",{class:normalizeClass(["content",{self:unref($),talker:!unref($)}])},[a.item.msg_type===1?(openBlock(),createBlock(unref(TextMessage),{key:0,content:unref(B).content||"",isSelf:unref($)},null,8,["content","isSelf"])):createCommentVNode("",!0),a.item.msg_type===2?(openBlock(),createBlock(_sfc_main$2t,{key:1,content:unref(B)||"",isSelf:unref($),status:a.item.msg_status},null,8,["content","isSelf","status"])):createCommentVNode("",!0),a.item.msg_type===12?(openBlock(),createBlock(unref(TextMessage),{key:2,content:unref(B).rid?"cv"+unref(B).rid:"",isSelf:unref($)},null,8,["content","isSelf"])):createCommentVNode("",!0),![1,2,10,11,12].includes(a.item.msg_type)||unref(p)?(openBlock(),createBlock(unref(TextMessage),{key:3,class:"not-support",content:"\u6682\u4E0D\u652F\u6301\u6B64\u7C7B\u578B\u6D88\u606F",isSelf:unref($)},null,8,["isSelf"])):createCommentVNode("",!0)],2),unref($)?(openBlock(),createBlock(Avatar,{key:1,class:"avatar self",face:unref(f).face,verifyType:(w=(N=(R=unref(f))==null?void 0:R.official)==null?void 0:N.type)!=null?w:-1,nft:!!unref(f).face_nft,onClick:b[1]||(b[1]=()=>E(!0))},null,8,["face","verifyType","nft"])):createCommentVNode("",!0)],64)):createCommentVNode("",!0),a.item.msg_type===11?(openBlock(),createBlock(_sfc_main$2s,{key:1,content:unref(B)},null,8,["content"])):createCommentVNode("",!0),a.item.msg_type===10&&!unref(p)?(openBlock(),createBlock(NotifyMessage,{key:2,content:unref(B)},null,8,["content"])):createCommentVNode("",!0),unref(v)?(openBlock(),createElementBlock("div",{key:3,class:"sys-notify-message",textContent:toDisplayString(unref(g))},null,8,_hoisted_1$3e)):createCommentVNode("",!0)],32)}}});var IMMessageItem=_export_sfc(_sfc_main$2q,[["__scopeId","data-v-34e9a392"]]),IMReportDialog_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$n=a=>(pushScopeId("data-v-616e8200"),a=a(),popScopeId(),a),_hoisted_1$3d={class:"im-report-wrapper"},_hoisted_2$30=_withScopeId$n(()=>createBaseVNode("div",{class:"im-report-mask"},null,-1)),_hoisted_3$2P={class:"im-report-dialog"},_hoisted_4$1Z=_withScopeId$n(()=>createBaseVNode("div",{class:"header"},"\u6211\u8981\u4E3E\u62A5",-1)),_hoisted_5$1y=_withScopeId$n(()=>createBaseVNode("div",{class:"reason-tip"},"\u8BF7\u9009\u62E9\u4E3E\u62A5\u7684\u7406\u7531\uFF1A",-1)),_hoisted_6$1h={class:"reason-list"},_hoisted_7$1b={class:"footer"},_hoisted_8$15=createTextVNode("\u53D6\u6D88"),_hoisted_9$Z=createTextVNode("\u786E\u5B9A"),_sfc_main$2p=defineComponent({__name:"IMReportDialog",emits:["close"],setup(a,{emit:o}){const s=useMessageStore(),i=[{type:1,name:"\u8272\u60C5\u4F4E\u4FD7"},{type:2,name:"\u653F\u6CBB\u654F\u611F"},{type:3,name:"\u8FDD\u6CD5\u6709\u5BB3"},{type:4,name:"\u5E7F\u544A\u9A9A\u6270"},{type:5,name:"\u4EBA\u8EAB\u653B\u51FB"},{type:6,name:"\u8BC8\u9A97"},{type:0,name:"\u5176\u4ED6\u95EE\u9898"}],l=ref(1),c=ref("");let r=!1;const u=async()=>{if(!(l.value===0&&!c.value)&&!r){r=!0;try{await s.reportCurrent(l.value,c.value),toastAsync({content:"\u4E3E\u62A5\u6210\u529F"}),o("close")}catch(d){console.error(d),toastAsync({content:d.message||"\u7F51\u7EDC\u5F02\u5E38"})}r=!1}};return(d,_)=>{const f=resolveComponent("v-checkbox"),m=resolveComponent("VButton");return openBlock(),createElementBlock("div",_hoisted_1$3d,[_hoisted_2$30,createBaseVNode("div",_hoisted_3$2P,[createVNode(unref(IcoClose),{class:"close",onClick:_[0]||(_[0]=p=>o("close"))}),_hoisted_4$1Z,_hoisted_5$1y,createBaseVNode("div",_hoisted_6$1h,[(openBlock(),createElementBlock(Fragment,null,renderList(i,(p,v)=>createVNode(f,{key:v,modelValue:l.value===p.type,"onUpdate:modelValue":()=>l.value=p.type,class:"reason",size:"large",theme:"pink",label:p.name},null,8,["modelValue","onUpdate:modelValue","label"])),64))]),withDirectives(createBaseVNode("textarea",{class:"reason-text","onUpdate:modelValue":_[1]||(_[1]=p=>c.value=p),type:"text",maxlength:"60",placeholder:"\u8BF7\u586B\u5199\u4E3E\u62A5\u7406\u7531"},null,512),[[vModelText,c.value]]),createBaseVNode("div",_hoisted_7$1b,[createVNode(m,{class:"cancel",onClick:_[2]||(_[2]=p=>o("close"))},{default:withCtx(()=>[_hoisted_8$15]),_:1}),createVNode(m,{class:"confirm",onClick:u,type:"pink",disabled:l.value===0&&!c.value},{default:withCtx(()=>[_hoisted_9$Z]),_:1},8,["disabled"])])])])}}});var IMReportDialog=_export_sfc(_sfc_main$2p,[["__scopeId","data-v-616e8200"]]);const _hoisted_1$3c={width:"9",height:"15",viewBox:"0 0 9 15",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2$=createBaseVNode("path",{d:"m7.187 2.354-.53-.53.53.53Zm0-.708-.53.53.53-.53ZM2.041 7.5l-.53-.53a.75.75 0 0 0 0 1.06l.53-.53Zm5.146 5.146.53-.53-.53.53Zm0 .708.53.53-.53-.53Zm-.707 0-.53.53.53-.53ZM1.216 8.089l-.53.53.53-.53Zm0-1.178.53.53-.53-.53ZM6.48 1.646l.53.53-.53-.53Zm1.237 1.238a1.25 1.25 0 0 0 0-1.768l-1.06 1.06a.25.25 0 0 1 0-.353l1.06 1.06ZM2.571 8.03l5.146-5.146-1.06-1.06L1.51 6.97l1.061 1.06Zm5.146 4.086L2.571 6.97l-1.06 1.06 5.146 5.147 1.06-1.06Zm0 1.768a1.25 1.25 0 0 0 0-1.768l-1.06 1.06a.25.25 0 0 1 0-.353l1.06 1.06Zm-1.767 0a1.25 1.25 0 0 0 1.767 0l-1.06-1.06a.25.25 0 0 1 .353 0l-1.06 1.06ZM.685 8.62l5.265 5.264 1.06-1.06-5.264-5.265-1.06 1.06Zm0-2.24a1.583 1.583 0 0 0 0 2.24l1.061-1.061a.083.083 0 0 1 0-.118l-1.06-1.06ZM5.95 1.116.685 6.38l1.061 1.061L7.01 2.177l-1.06-1.06Zm1.767 0a1.25 1.25 0 0 0-1.767 0l1.06 1.06a.25.25 0 0 1-.353 0l1.06-1.06Z"},null,-1),_hoisted_3$2O=[_hoisted_2$2$];function render$V(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3c,_hoisted_3$2O)}var IMGoBackIcon={render:render$V};const _hoisted_1$3b={width:"24",height:"24",viewBox:"0 0 24 24",fill:"#61666d"},_hoisted_2$2_=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.748 5.498a1.748 1.748 0 1 1-3.496 0 1.748 1.748 0 0 1 3.496 0Zm0 13a1.749 1.749 0 1 1-3.497 0 1.749 1.749 0 0 1 3.498 0ZM12 13.748a1.749 1.749 0 1 0 0-3.497 1.749 1.749 0 0 0 0 3.498Z"},null,-1),_hoisted_3$2N=[_hoisted_2$2_];function render$U(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$3b,_hoisted_3$2N)}var IMOptionsIcon={render:render$U};const useDropDownVisible=(a,o)=>{const s=ref(!1),i=l=>{(o==null?void 0:o.value)||a.value&&l.composedPath().includes(a.value)||(s.value=!1)};return watch(s,async l=>{await new Promise(c=>setTimeout(c,0)),l?(document.body.addEventListener("click",i),document.body.addEventListener("contextmenu",i)):(document.body.removeEventListener("click",i),document.body.removeEventListener("contextmenu",i))}),s};var IMDialog_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$3a={class:"dialog"},_hoisted_2$2Z={class:"header"},_hoisted_3$2M=["textContent"],_hoisted_4$1Y={key:1,class:"no-more"},_hoisted_5$1x=["textContent"],_sfc_main$2o=defineComponent({__name:"IMDialog",setup(a){const o=useMessageStore(),{activeSession:s,userInfos:i,messageList:l,messageListCursor:c,messagePanelVisibleLock:r,reportDialogVisible:u,contextMenuVisible:d}=storeToRefs(o),_=computed(()=>{var A;return(A=s.value.session)==null?void 0:A.system_msg_type}),f=o.initMessageList(),m=ref(null),p=ref(null),v=useElementVisible(p),g=ref(!1);watch(v,()=>{v.value&&C()});const $=computed(()=>{var A,x,T,I,R,N;return((A=s.value.session)==null?void 0:A.system_msg_type)&&((x=s.value.session)==null?void 0:x.account_info)?{face:((I=(T=s.value.session)==null?void 0:T.account_info)==null?void 0:I.pic_url)||"",name:((N=(R=s.value.session)==null?void 0:R.account_info)==null?void 0:N.name)||""}:i.value[s.value.id]}),y=()=>{const A=m.value;A&&(A.scrollTop=A.scrollHeight-A.clientHeight,o.updateSessionAck())};onMounted(async()=>{await f,await nextTick(),y(),g.value=!0,messageEvents.on("scrollToBottom",y),o.getSessionOptions(s.value.id.toString())}),onBeforeUnmount(()=>{messageEvents.off("scrollToBottom",y)});const B=A=>{const x=m.value;x.scrollTop>x.scrollHeight-x.clientHeight-10&&o.updateSessionAck()},C=async()=>{var I;let A=0,x=0;if(await o.loadMoreMessage(()=>{var R,N;A=(R=m.value)==null?void 0:R.scrollHeight,x=(N=m.value)==null?void 0:N.scrollTop})){await nextTick();const R=(I=m.value)==null?void 0:I.scrollHeight;m.value&&(m.value.scrollTop=R-A+x)}},S=()=>{var A,x;(A=s.value)!=null&&A.from?o.setActiveSession({type:(x=s.value)==null?void 0:x.from}):o.setActiveSession(null)},E=ref(null),k=useDropDownVisible(E,computed(()=>r.value>0)),b=A=>{const x=new Date(A),T=(()=>{const R=new Date;return R.setHours(0,0,0,0),R.getTime()})(),I=`${("0"+x.getHours()).slice(-2)}:${("0"+x.getMinutes()).slice(-2)}`;return T<x.getTime()?I:T-1e3*60*60*24<x.getTime()?`\u6628\u5929 ${I}`:`${x.getMonth()+1}\u6708${x.getDate()}\u65E5 ${I}`},V=A=>{const x=l.value;return!(x[A-1]&&x[A].timestamp-x[A-1].timestamp<300)};return(A,x)=>{var T;return openBlock(),createElementBlock("div",_hoisted_1$3a,[createBaseVNode("div",_hoisted_2$2Z,[createBaseVNode("div",{class:"back",onClick:S},[createVNode(unref(IMGoBackIcon))]),createBaseVNode("div",{class:"name",textContent:toDisplayString((T=unref($))==null?void 0:T.name)},null,8,_hoisted_3$2M),createBaseVNode("div",{class:normalizeClass(["options-btn",{active:unref(k)}])},[createVNode(unref(IMOptionsIcon),{onClick:x[0]||(x[0]=I=>k.value=!unref(k))}),unref(k)?(openBlock(),createElementBlock("div",{key:0,class:"options",ref_key:"optionsEl",ref:E},[createVNode(SessionOptions)],512)):createCommentVNode("",!0)],2)]),createBaseVNode("div",{class:normalizeClass(["content",{sys_height:unref(_),"lock-scroll":unref(d)}]),ref_key:"container",ref:m,onScroll:B},[g.value?(openBlock(),createElementBlock("div",{key:0,class:"load-top",ref_key:"loadTop",ref:p},null,512)):createCommentVNode("",!0),unref(c).has_more?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_4$1Y,"\u6CA1\u6709\u66F4\u591A\u6D88\u606F\u4E86\uFF5E")),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(l),(I,R)=>(openBlock(),createElementBlock(Fragment,{key:I.msg_key},[V(R)?(openBlock(),createElementBlock("div",{key:0,class:"time-label",textContent:toDisplayString(b(I.timestamp*1e3))},null,8,_hoisted_5$1x)):createCommentVNode("",!0),createVNode(IMMessageItem,{item:I},null,8,["item"])],64))),128))],34),unref(_)?createCommentVNode("",!0):(openBlock(),createBlock(SendBox,{key:0})),(openBlock(),createBlock(Teleport,{to:"body"},[unref(u)?(openBlock(),createBlock(IMReportDialog,{key:0,onClose:x[1]||(x[1]=I=>u.value=!1)})):createCommentVNode("",!0)]))])}}});var IMDialog=_export_sfc(_sfc_main$2o,[["__scopeId","data-v-6a177158"]]),IMUnfollowIcon="./assets/im_unfollow.56ec5de4.png",IMDustbinIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8rAziDFwMmgzGCdmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsgszXOb+YwZIp7KHzp//HRjZASmehTAlZJanAyk/wBxWnJBUQkDA2MKkK1cXlIAYncA2SJFQEcB2XNA7HQIewOInQRhHwGrCQlyBrJvANkCyRmJQDMYXwDZOklI4ulIbKi9IMDj4urjoxBgZGJo6UHAuaSDktSKEhDtnF9QWZSZnlGi4AgMpVQFz7xkPR0FIwMjQwYGUJhDVH++AQ5LRjEOhFjKUwYG41ygoAZCLEuAgWH3NwYGwa0IMfWHQG/NZWA4EFCQWJQIdwDjN5biNGMjCJt7OwMD67T//z+HMzCwazIw/L3+///v7f///13GwMB8C6j3GwAcEGAanFDBOwAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAYKADAAQAAAABAAAAYAAAAACK+310AAAJRElEQVR4Ae1dTWzcRBR+492kUlpgAVWoSCWbC1yQSI5tgG4EV2hucGv6x7WtxL0JV5DaXmlLtzc4NYUrKCnQ9pitBAcEUrb0gET5SVFbqenuDO+N14nXa3vH3hl7NuuREtvjmffefN/Mmx/bswwsDWJloQLl8jQwPg2OMwnAqiBEFUBUQLAKMKh0mS5gA5jAP9bEtBuYrgmc3wXhNKDVarC5OsbZF5gtJknAS848lEqHAHhNAq7XuAaSQn83YJOvIiFNveLTScuVAAn6mLOANfwwCKilK0LKXAxWQfCreZORCwHihxM1KMHZzEGP4oqxZWjxq+zty8tRSUzFZ0bAVm1npVPoBqqmCjSYXOo/2kts9ov6YHLUc2dCgLh18hRwsdjTcarbmXHK7IgwSoB0NQ67Ym+N78ereSKMEIDupgrjpXM4kpnvV8ThuC/qsImuycDISTsB4vZHR6DNzw+Pu1GtAmZagzYCZCe7q0wjm9OqRRrKdAzOw5MWtYYNHfZrIcB1OWMrw+vrk0KJrWHz6ZwOl+QkVR1Mj+BPw1h5bXTAJwRwGD0+tiJunpwO4pH0eiACpL8fR/CD6zJJrRjK9HJdak1iMID9qQlwx/a8PoDunZGV87q4dSJ1v5eqD5DgC3F+ZyCoqRQMzrCDlxJjkpgA2eSQdU1m7ywxjrPADnx+NUmhEhEgO1zy+UWIQYDNsNmLjZgEXbeU+4DOUPNaV+7iIgQBsSKxCrkTFqXUAlBgBYddIzbUDINLNU7OE2ZUJmtqLYBmuNYuIauCkmU6HKJKzPrr7NsCxM1jCwAOrmgWITECCp1yLAEdvz9CSwyJIe6XYQM2W+SKmlEJ413QeKlwPVHIqcVXYNfYubikkS2gcD1xsCW8x2GOvXVpNSxXTAug2l8ELQjIp4LhkkIJcGu/rQ/Owwtid6yoRq0XhbogXGZdNzbsfPY1gP3vAezeD1CesAO31mOAR/cA7t8C+BP/zATqkKeCc4NyUJfR2j/1AcC+d4Mq87+mivAcVgz6m8CK0fzKhE0VfG6ygIK7FuxCXJAh30+13kbwg1C/jBWkihXFRGDsVFBsFwHi++PzRlzPrhfR7bwf1G3vNZFgxD1iX0BvBfpCtwsqwRHfPX2nL0yrybr3DcAf3wKQT1YJBNLegwDk2nSHvQfQlu90SwX5SibAqid4qwW4K3iG3uPZ/YqnL/q4jn733tfq4JMkIooIo3y6wx4Fm9PoxJeQ5eJmJ+8WATDu1NLI05aHRiBpg4mamtYWlXxuZyxTbhMgHDPuh9Q8+l3FLLvSPDRoswOHvcJKAqT7YVDzIrUf79/uL3LfO/3TRKUgf607/HNHt8RteT43JAkw7n7IV1MHGxdolEQkJBl9UFoa3k59GCc5+T2y9clfyfMlyTGOXwNh6IyC2KEkeVOlpY6SAIur6QSkbjCTGkv9iYlOvccO+hQL6m4LEExxnNgjJVnE+pf9W0IyiXpTU80nG7MJNVLD5JBovPxvNjo7WsjdkOuwKRD4mdR8X6E3W8878lNQX1wmp1RQGvfbErw5SNb24Ge4Dr7XmY37CRaOJlC/XgnGZn/9G9pAtuQREPuy/PiZha5KmzeJJl+0DPz6x8lGPzoso5HZz5+5+nXISyODiaoDDkymyastz2Mk4CcE4snf2kT2FUS68gZfGsmQAPrsP+8gSfg0GxIIfCKcWl7+YRL7AEsePUpgDJPggW96kqVMLKvgPMCCFuAZ7JFgonZuuTrDM1yvLEpHQQRA/i7IbyyRoNs/Wwm+LLQkwF98O85phHLnEz0PyOkhewNlkUwLA7UAe4Mcow/wVIrWdUiGxcFuAgi4tOtH2a7rpKaYCNhInTurjGnWaNLkyao823o2kADc5qsIOSHAkABB+6sVIRcEmGjSRKyZi/JCKTofeOAAh7sFFnkhIFsAa+alfuT1CoYuSEBj5IHICwDE3qFNTfPSP/J6EXvHfV+96IhzqAxyN193JizgRg4GjLhK2sUXPwCWKHCxKo/FvwwRwC2UMbgEtPlyhpoLVRJ5vioP9E/2AwJkBF0XwTACuG81O1Bvkha3Bbj6rruH4r9xBGjT8E7YJuBpq+5FFkfDCDiu+yEtWwQUbsgw6Nvir3vup4sAeV/A0na64swIAm3cBtkXtloAxbn7GRSTMh8+mk9FM/gbBV0ESG2CXdCsVY+4B7/okZOrFNHjYXoJcDvjjVztDFNOz3hVg4n3ilR1R6bD2h/ywxA9BLidMe9hKlJuVjf+wxag+g5pXm87x2LRW/spOYvKI24eX8fb1aj7ucbTfg4vzeLeDq+6ezv4jcnjQwu//tBzqv2Xp8JudX8p70/B2VEcpK74o6w5pzfdvE+JaBsE70t8+rLRmvc+/WiF135KEdkC6CZuW3MN/8/TeRHSIiDqWPuPRuXu6QO6EjpPz+C1fR1yl5E2X+CQ3mkvxVkYS4A7Y+NEQhFSISCW/LPeMBGxBFAGOXTiws65QViJrIkTF8KGnUHz+hIgM7Tai9gXNIOZi+soBBCrCcKsf1AiQM4NnPYciiv6g76YSr8/x2bqSljFjoKCutzfTBFrwfji2o8A7pQ7W2/4Y+LOlVqAJ8DdF59HDqm8dKN7ZEeTgE84JSKAMsiORRQjI8KiKwj8CZPZi/WuOIWLRC7IL0/8eOw0MOecP25kzwn8N5P/fgzhlZoAylzsLy0hRLeTvOZTTgoDEUAC3I6Z45IFq+Ll6ASBH7aw9lxSnx8EaGACSKC4vVAFXsKFO1bFyxEInaFm59WSQQqcuBMOUyan25vtGfzR5hGYMWMZJ9oz/ZYYwnAKi9PSAvyC3X6Bnd1xrUG6HCfVSMePT/BcOwGkQLqkdmkRGDsSVDic12IZVzXP6Kr1fgyMEOApGP7WgL4eH0xF/fqFV85BjkYJ8AwbOiLI3QBbSju298qtcsyEAM8Q+4nAGi+wk93N66qLaV7Z0h4zJcAzUm6TX6Ktki153ElvhuNbgSZdjVf24DEXAjwj3PmDUwPat9rk1smeQv9Rvo7Pr2dZ2/3qvfNcCfCMoOM2GayG/vcNJGTaf3/wc3Qv4KxCu30DnuHLWbmYfnZbQ0DQULGGPyD6sDwNjOMfqyJ4k+ifK3KLNYGbTLHATl9ynI4PjGjrBUbfPvO7mL6JrasBe1oNWwAPlvN/MigE4rwUFeMAAAAASUVORK5CYII=";const _hoisted_1$39={viewBox:"0 0 40 40"},_hoisted_2$2Y=createBaseVNode("circle",{cx:"20",cy:"20",r:"20",fill:"#48D1EA"},null,-1),_hoisted_3$2L=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.76 18.446a3.4 3.4 0 0 1 3.4-3.4h1.432l3.059-1.962c1.73-1.11 4.003.133 4.003 2.189V25.39c0 2.056-2.273 3.298-4.003 2.188l-3.059-1.962H13.16a3.4 3.4 0 0 1-3.4-3.4v-3.77Zm14.247 6.065a5.666 5.666 0 0 0 1.866-4.218 5.666 5.666 0 0 0-1.877-4.227.888.888 0 0 0-1.267.079.921.921 0 0 0 .078 1.286 3.831 3.831 0 0 1 1.271 2.862 3.832 3.832 0 0 1-1.263 2.855.921.921 0 0 0-.075 1.287c.329.376.896.41 1.267.076Zm5.353-4.18a8.033 8.033 0 0 1-3.328 6.535.889.889 0 0 1-1.251-.216.92.92 0 0 1 .213-1.271 6.201 6.201 0 0 0 2.571-5.047c0-2.03-.97-3.894-2.57-5.047a.92.92 0 0 1-.213-1.27.889.889 0 0 1 1.25-.217 8.033 8.033 0 0 1 3.328 6.534Z",fill:"#fff"},null,-1),_hoisted_4$1X=[_hoisted_2$2Y,_hoisted_3$2L];function render$T(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$39,_hoisted_4$1X)}var SystemNotifyIcon={render:render$T};const _hoisted_1$38={width:"16",height:"16",viewBox:"0 0 16 16",fill:"#C9CCD0"},_hoisted_2$2X=createBaseVNode("path",{d:"m14.833 14.204-.94-.94a.904.904 0 0 0-.017-.528c-.568-1.68-.966-4.3-1.223-6.522A4.681 4.681 0 0 0 8.88 2.157c.003-.028.009-.054.009-.083a.89.89 0 0 0-1.778 0c0 .032.006.062.01.093a4.674 4.674 0 0 0-2.718 1.607L3.278 2.649a.443.443 0 1 0-.628.627l11.556 11.556a.444.444 0 1 0 .627-.628ZM3.52 5.392c-.08.264-.139.539-.172.822-.257 2.222-.655 4.841-1.223 6.522-.198.583.22 1.19.836 1.19h3.51c.308.53.874.89 1.53.89.655 0 1.224-.36 1.53-.89h2.523L3.519 5.392Z"},null,-1),_hoisted_3$2K=[_hoisted_2$2X];function render$S(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$38,_hoisted_3$2K)}var DndBellIcon={render:render$S},IMListItem_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$37={key:0,class:"avatar-container"},_hoisted_2$2W=["src"],_hoisted_3$2J=["src"],_hoisted_4$1W={class:"im-li-info"},_hoisted_5$1w=["textContent"],_hoisted_6$1g=["title","textContent"],_hoisted_7$1a={class:"time-label"},_hoisted_8$14=["textContent"],_hoisted_9$Y={class:"notify"},_hoisted_10$P={key:1,class:"red-dot"},_hoisted_11$L=["textContent"],_sfc_main$2n=defineComponent({__name:"IMListItem",props:{item:{type:Object,required:!0},from:{type:String,default:""}},setup(a){const o=a,s=useMessageStore(),{userInfos:i,notifyConfig:l,unreadCount:c,imUnreadCount:r,contextMenu:u,selectedSession:d}=storeToRefs(s),{userInfo:_}=storeToRefs(useUserInfoStore()),f=computed(()=>{var b,V,A,x;return{user:((b=o.item.session)==null?void 0:b.unread_count)||0,system:((V=c.value)==null?void 0:V.sys_msg)||0,unfollow:((A=r.value)==null?void 0:A.unfollow_unread)||0,dustbin:((x=r.value)==null?void 0:x.dustbin_unread)||0}[o.item.type]}),m=computed(()=>{var b,V,A,x,T,I,R;if(((b=o.item.session)==null?void 0:b.system_msg_type)&&((V=o.item.session)==null?void 0:V.account_info))return{face:((x=(A=o.item.session)==null?void 0:A.account_info)==null?void 0:x.pic_url)||"",name:((I=(T=o.item.session)==null?void 0:T.account_info)==null?void 0:I.name)||""};const k=((R=o.item.session)==null?void 0:R.talker_id)||"";return i.value[k]}),p=computed(()=>{var b;return{user:((b=m.value)==null?void 0:b.name)||"",system:"\u7CFB\u7EDF\u901A\u77E5",unfollow:"\u672A\u5173\u6CE8\u4EBA\u6D88\u606F",dustbin:"\u7591\u4F3C\u4E0D\u826F\u6D88\u606F"}[o.item.type]}),v=computed(()=>{var k;return o.item.type==="user"&&((k=o.item.session)==null?void 0:k.last_msg)?contentToDisplayString(o.item.session,_.value.mid,$)||"":o.item.content||""}),g=computed(()=>{var k,b;return["dustbin","unfollow"].includes(o.item.type)?f.value?"dot":"arrow":!((k=o.item.session)!=null&&k.is_dnd)&&f.value&&l.value.msg_notify===2?"dot":!((b=o.item.session)!=null&&b.is_dnd)&&f.value&&l.value.msg_notify===1?"number":"arrow"}),$={},y=k=>{k=Math.round(k/1e3);const b=new Date(k),V=(()=>{const A=new Date;return A.setHours(0,0,0,0),A.getTime()})();return V<b.getTime()?`${("0"+b.getHours()).slice(-2)}:${("0"+b.getMinutes()).slice(-2)}`:V-1e3*60*60*24<b.getTime()?"\u6628\u5929":`${b.getMonth()+1}\u6708${b.getDate()}\u65E5`},B=()=>{var k;s.setActiveSession({type:o.item.type,id:(k=o.item.session)==null?void 0:k.talker_id,session:o.item.session,from:o.from})};computed(()=>{var k;return(k=o.item.session)==null?void 0:k.system_msg_type});const C=computed(()=>{var k,b;return(b=(k=o.item)==null?void 0:k.session)==null?void 0:b.top_ts}),S=(k,b)=>{const V=u.value.findIndex(A=>A.key==="top");V>=0&&(u.value[V].text=b)},E=k=>{var A;d.value=o.item;const b=()=>{u.value=[{text:"\u5168\u90E8\u6807\u8BB0\u4E3A\u5DF2\u8BFB",handler:async()=>{try{await s.handleClearSubListUnread(),toastAsync({content:"\u6807\u8BB0\u6210\u529F"})}catch(x){toastAsync({content:x.message||"\u7F51\u7EDC\u5F02\u5E38"})}}},{text:"\u6E05\u7A7A\u5217\u8868",handler:async()=>{try{await s.handleClearSubList(),toastAsync({content:"\u6E05\u7A7A\u6210\u529F"})}catch(x){toastAsync({content:x.message||"\u7F51\u7EDC\u5F02\u5E38"})}}},{text:"\u8BBE\u7F6E",handler:s.toSettingsPage}],s.openContextMenu(k)},V={unfollow:b,dustbin:b,user:()=>{var T,I;const x=[{key:"top",text:C.value?"\u53D6\u6D88\u7F6E\u9876":"\u7F6E\u9876",handler:async()=>{await s.toggleSetTop(),S("top",C.value?"\u53D6\u6D88\u7F6E\u9876":"\u7F6E\u9876")}},{key:"dnd",text:`${(T=o.item.session)!=null&&T.is_dnd?"\u5173\u95ED":"\u6D88\u606F"}\u514D\u6253\u6270`,handler:async()=>{var R;s.toggleMessageDnd(o.item.session,Number(!o.item.session.is_dnd)),S("dnd",`${(R=o.item.session)!=null&&R.is_dnd?"\u5173\u95ED":"\u6D88\u606F"}\u514D\u6253\u6270`)}},{text:"\u5220\u9664\u4F1A\u8BDD",handler:async()=>{try{await s.removeSession(o.item.session,!0),toastAsync({content:"\u5220\u9664\u6210\u529F"})}catch(R){toastAsync({content:R.message||"\u7F51\u7EDC\u5F02\u5E38"})}}}];(I=o.item.session)!=null&&I.unread_count&&x.unshift({text:"\u6807\u8BB0\u4E3A\u5DF2\u8BFB",handler:async()=>{try{await s.updateSessionAck(),toastAsync({content:"\u6807\u8BB0\u6210\u529F"})}catch(R){toastAsync({content:R.message||"\u7F51\u7EDC\u5F02\u5E38"})}}}),u.value=x,s.openContextMenu(k)}};(A=V[o.item.type])==null||A.call(V)};return(k,b)=>{var V,A;return openBlock(),createBlock(resolveDynamicComponent((V=a.item.session)!=null&&V.top_ts?"span":"div"),{class:normalizeClass(["im-list-item",{"top-ts":(A=a.item.session)==null?void 0:A.top_ts}]),onClick:B,onContextmenu:E},{default:withCtx(()=>{var x,T,I,R,N,w,D,L;return[a.item.type==="user"?(openBlock(),createElementBlock("div",_hoisted_1$37,[createVNode(Avatar,{face:((x=unref(m))==null?void 0:x.face)||"",verifyType:(R=(I=(T=unref(m))==null?void 0:T.official)==null?void 0:I.type)!=null?R:-1,nft:!!((N=unref(m))!=null&&N.face_nft_new),width:40,height:40},null,8,["face","verifyType","nft"])])):createCommentVNode("",!0),a.item.type==="system"?(openBlock(),createBlock(unref(SystemNotifyIcon),{key:1,class:"avatar-container"})):createCommentVNode("",!0),a.item.type==="unfollow"?(openBlock(),createElementBlock("img",{key:2,class:"im-unfollow-icon",src:unref(IMUnfollowIcon)},null,8,_hoisted_2$2W)):createCommentVNode("",!0),a.item.type==="dustbin"?(openBlock(),createElementBlock("img",{key:3,class:"im-dustbin-icon",src:unref(IMDustbinIcon)},null,8,_hoisted_3$2J)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_4$1W,[createBaseVNode("div",{class:"im-li-title",textContent:toDisplayString(unref(p))},null,8,_hoisted_5$1w),createBaseVNode("div",{class:"im-li-content",title:unref(v),textContent:toDisplayString(unref(v))},null,8,_hoisted_6$1g)]),createBaseVNode("div",_hoisted_7$1a,[(w=a.item.session)!=null&&w.session_ts?(openBlock(),createElementBlock("div",{key:0,class:"time",textContent:toDisplayString(y((D=a.item.session)==null?void 0:D.session_ts))},null,8,_hoisted_8$14)):createCommentVNode("",!0),(L=a.item.session)!=null&&L.is_dnd?(openBlock(),createBlock(unref(DndBellIcon),{key:1,class:"bell"})):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_9$Y,[unref(g)==="arrow"?(openBlock(),createBlock(unref(IMRightArrow),{key:0,class:"a-right"})):createCommentVNode("",!0),unref(g)==="dot"?(openBlock(),createElementBlock("div",_hoisted_10$P)):createCommentVNode("",!0),unref(g)==="number"?(openBlock(),createElementBlock("div",{key:2,class:"unread-count",textContent:toDisplayString(unref(f)>99?"99+":unref(f))},null,8,_hoisted_11$L)):createCommentVNode("",!0)])]}),_:1},40,["class"])}}});var IMListItem=_export_sfc(_sfc_main$2n,[["__scopeId","data-v-41a2d064"]]),SystemNotifyItem_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$36={class:"sn-item"},_hoisted_2$2V={class:"header"},_hoisted_3$2I=["textContent"],_hoisted_4$1V=["textContent"],_hoisted_5$1v={class:"content"},_hoisted_6$1f=["textContent"],_hoisted_7$19=["textContent","onClick"],_hoisted_8$13=["href","onClick"],_hoisted_9$X=createTextVNode(" \u7F51\u9875\u94FE\u63A5 "),_hoisted_10$O={key:3},_hoisted_11$K=["textContent","onClick"],_hoisted_12$E=["textContent","onClick"],_hoisted_13$w=["textContent","onClick"],_hoisted_14$s=["textContent"],_sfc_main$2m=defineComponent({__name:"SystemNotifyItem",props:{item:{type:Object,required:!0}},setup(a){const o=a,s=useMessageStore(),i=_=>{const f=g=>g.reduce(($,y)=>$.concat(Array.isArray(y)?f(y):y),[]),m=(g,$)=>y=>{const B=y.match(g)||[],C=y.split(g);return[B.map($),C]};return((g,$)=>{const y=g.map(C=>C.match instanceof RegExp?m(C.match,C.replace):S=>{const[E,k]=C.match(S);return[E.map(C.replace),k]}),B=(C,S)=>{const E=y[C];return E?S.map(k=>{const[b,V]=E(k),A=B(C+1,V),x=[];for(let T=0;T<b.length;T++)x.push(A[T]),x.push(b[T]);return x.push(A[b.length]),x}):S};return f(B(0,[$]))})([{match:/#\{.*?\}\{.*?\}/,replace:g=>{const $=g.match(/#\{(.*?)\}\{"?(.*?)"?\}/);return{type:"s-link",text:$[1]||"",url:$[2]}}},{match:/(?:(?:(?:http:\/\/|https:\/\/)(?:[a-zA-Z0-9_.-]+\.)*(?:bilibili|biligame)\.com(?:\/[/.$*?~=#!%@&\-\w]*)?)|(?:(?:http:\/\/|https:\/\/)(?:[a-zA-Z0-9_.-]+\.)*(?:acg|b23)\.tv(?:\/[/.$*?~=#!%@&\-\w]*)?)|(?:(?:http:\/\/|https:\/\/)dl\.(?:hdslb)\.com(?:\/[/.$*?~=#!%@&\-\w]*)?))/g,replace:g=>({type:"link",url:g})},{match:/\[br]/g,replace:()=>({type:"br"})},{match:/av\d+/gi,replace:g=>({type:"avid",id:g})},{match:/bv1[\d\w]{9}/gi,replace:g=>({type:"bvid",id:g})},{match:/cv\d+/gi,replace:g=>({type:"cvid",id:g})},{match:/#[^\n\r#@]{1,32}?#/g,replace:g=>({type:"tag",tag:g})}],_)},l=computed(()=>{const _=(()=>{const f=o.item.content;try{return JSON.parse(f).web||f}catch{return f}})();return i(_||"")}),c=_=>{!_||_.indexOf("bilibili://")===0||openInBrowser(_,"message.SystemNotify")},r=ref(null),u=useDropDownVisible(r),d=async _=>{u.value=!1;try{await s.deleteSystemNotify(_),toastAsync({content:"\u5220\u9664\u6210\u529F"})}catch(f){toastAsync({content:f.message||"\u7F51\u7EDC\u5F02\u5E38"})}};return(_,f)=>(openBlock(),createElementBlock("div",_hoisted_1$36,[createBaseVNode("div",_hoisted_2$2V,[createBaseVNode("div",{class:"title",textContent:toDisplayString(a.item.title)},null,8,_hoisted_3$2I),createBaseVNode("div",{class:"time-ago",textContent:toDisplayString(unref(formatTime$1)(new Date(a.item.time_at).getTime()))},null,8,_hoisted_4$1V),createVNode(unref(IMOptionsIcon),{class:"options-btn",onClick:f[0]||(f[0]=m=>u.value=!unref(u))}),unref(u)?(openBlock(),createElementBlock("div",{key:0,class:"option-list",ref_key:"optionsEl",ref:r},[createBaseVNode("div",{class:"option",onClick:f[1]||(f[1]=m=>d(a.item.id))},"\u5220\u9664")],512)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_5$1v,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(l),(m,p)=>(openBlock(),createElementBlock(Fragment,{key:p},[m.length?(openBlock(),createElementBlock("span",{key:0,textContent:toDisplayString(m)},null,8,_hoisted_6$1f)):createCommentVNode("",!0),m.type==="s-link"?(openBlock(),createElementBlock("span",{key:1,class:"c-link",textContent:toDisplayString(m.text),onClick:v=>c(m.url)},null,8,_hoisted_7$19)):createCommentVNode("",!0),m.type==="link"?(openBlock(),createElementBlock("span",{key:2,class:"c-link",href:m.url,onClick:v=>c(m.url)},[createVNode(unref(IMLinkIcon)),_hoisted_9$X],8,_hoisted_8$13)):createCommentVNode("",!0),m.type==="br"?(openBlock(),createElementBlock("br",_hoisted_10$O)):createCommentVNode("",!0),m.type==="avid"?(openBlock(),createElementBlock("span",{key:4,class:"c-link",textContent:toDisplayString(m.id),onClick:v=>unref(openPlayerWindow)({type:"ugc",aid:m.id})},null,8,_hoisted_11$K)):createCommentVNode("",!0),m.type==="bvid"?(openBlock(),createElementBlock("span",{key:5,class:"c-link",textContent:toDisplayString(m.id),onClick:v=>unref(openPlayerWindow)({type:"ugc",bvid:m.id})},null,8,_hoisted_12$E)):createCommentVNode("",!0),m.type==="cvid"?(openBlock(),createElementBlock("span",{key:6,class:"c-link",textContent:toDisplayString(m.id),onClick:v=>unref(openInBrowser)("https://www.bilibili.com/read/cv"+m.id,"message.Article")},null,8,_hoisted_13$w)):createCommentVNode("",!0),m.type==="tag"?(openBlock(),createElementBlock("span",{key:7,class:"c-link",textContent:toDisplayString(m.tag)},null,8,_hoisted_14$s)):createCommentVNode("",!0)],64))),128))])]))}});var SystemNotifyItem=_export_sfc(_sfc_main$2m,[["__scopeId","data-v-0b76c7b4"]]),SystemNotify_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$m=a=>(pushScopeId("data-v-1c60552c"),a=a(),popScopeId(),a),_hoisted_1$35={class:"system-notify"},_hoisted_2$2U={class:"header"},_hoisted_3$2H=_withScopeId$m(()=>createBaseVNode("div",{class:"title"},"\u7CFB\u7EDF\u901A\u77E5",-1)),_hoisted_4$1U={class:"content page_scroller"},_hoisted_5$1u={class:"content-wrap"},_sfc_main$2l=defineComponent({__name:"SystemNotify",setup(a){const o=useMessageStore(),{systemNotifyList:s}=storeToRefs(o),i=()=>{o.setActiveSession(null)};onMounted(()=>{o.systemNotifyUpdateAck()});const l=ref(null),c=useElementVisible(l);return watch(c,()=>{c.value&&o.systemNotifyLoadMore()}),(r,u)=>(openBlock(),createElementBlock("div",_hoisted_1$35,[createBaseVNode("div",_hoisted_2$2U,[createBaseVNode("div",{class:"back",onClick:i},[createVNode(unref(IMGoBackIcon))]),_hoisted_3$2H]),createBaseVNode("div",_hoisted_4$1U,[createBaseVNode("div",_hoisted_5$1u,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),d=>(openBlock(),createBlock(SystemNotifyItem,{class:"sn-li",key:d.id,item:d},null,8,["item"]))),128)),createBaseVNode("div",{class:"load-more",ref_key:"loadMoreEl",ref:l},null,512)])])]))}});var SystemNotify=_export_sfc(_sfc_main$2l,[["__scopeId","data-v-1c60552c"]]),IMSubList_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$34={class:"im-sub-list"},_hoisted_2$2T={class:"header"},_hoisted_3$2G=["textContent"],_hoisted_4$1T={class:"options-btn"},_hoisted_5$1t={class:"option-list",ref:"el"},_sfc_main$2k=defineComponent({__name:"IMSubList",setup(a){const o={unfollow:"\u672A\u5173\u6CE8\u4EBA\u6D88\u606F",dustbin:"\u7591\u4F3C\u4E0D\u826F\u6D88\u606F"},s=computed(()=>{var y,B;return o[(y=c.value)==null?void 0:y.type]||o[(B=c.value)==null?void 0:B.from]}),i=useMessageStore(),{subSessionList:l,activeSession:c,contextMenuVisible:r}=storeToRefs(i),u=computed(()=>{var y,B;return((y=c.value)==null?void 0:y.from)||((B=c.value)==null?void 0:B.type)});i.fetchSubSessionList().then(()=>{messageEvents.emit("subListLoaded")});const d=ref(null),_=useElementVisible(d);watch(_,y=>{y&&i.fetchSubSessionList(!0)});const f=()=>{i.setActiveSession(null)},m=ref(null),p=useDropDownVisible(m);let v=!1;const g=async()=>{if(!v){v=!0,p.value=!1;try{await i.handleClearSubListUnread(),toastAsync({content:"\u6807\u8BB0\u6210\u529F"})}catch(y){toastAsync({content:y.message||"\u7F51\u7EDC\u5F02\u5E38"})}v=!1}},$=async()=>{if(!v){v=!0,p.value=!1;try{await i.handleClearSubList(),toastAsync({content:"\u6E05\u7A7A\u6210\u529F"})}catch(y){toastAsync({content:y.message||"\u7F51\u7EDC\u5F02\u5E38"})}v=!1}};return(y,B)=>(openBlock(),createElementBlock("div",_hoisted_1$34,[createBaseVNode("div",_hoisted_2$2T,[createBaseVNode("div",{class:"back",onClick:f},[createVNode(unref(IMGoBackIcon))]),createBaseVNode("div",{class:"name",textContent:toDisplayString(unref(s)||"")},null,8,_hoisted_3$2G),createBaseVNode("div",_hoisted_4$1T,[createVNode(unref(IMOptionsIcon),{onClick:B[0]||(B[0]=C=>p.value=!unref(p))}),unref(p)?(openBlock(),createElementBlock("div",{key:0,class:"options",ref_key:"optionsEl",ref:m},[createBaseVNode("div",_hoisted_5$1t,[createBaseVNode("div",{class:"option",onClick:g},"\u5168\u90E8\u6807\u8BB0\u4E3A\u5DF2\u8BFB"),createBaseVNode("div",{class:"option",onClick:$},"\u6E05\u7A7A\u5217\u8868"),createBaseVNode("div",{class:"option",onClick:B[1]||(B[1]=(...C)=>unref(i).toSettingsPage&&unref(i).toSettingsPage(...C))},"\u8BBE\u7F6E")],512)],512)):createCommentVNode("",!0)])]),createBaseVNode("div",{class:normalizeClass(["content page_scroller",{"lock-scroll":unref(r)}]),ref:"container"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(l),C=>(openBlock(),createBlock(IMListItem,{key:C.talker_id,item:{type:"user",session:C},from:unref(u)},null,8,["item","from"]))),128)),createBaseVNode("div",{class:"load-more",ref_key:"loadMoreEl",ref:d},null,512)],2)]))}});var IMSubList=_export_sfc(_sfc_main$2k,[["__scopeId","data-v-7c3f7450"]]),MessageContextMenu_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$33=["onClick"],_sfc_main$2j=defineComponent({__name:"MessageContextMenu",setup(a){const o=ref(null),s=useMessageStore(),{contextMenu:i,contextMenuVisible:l,contextMenuPosition:c,messagePanelVisibleLock:r}=storeToRefs(s),u=computed(()=>{const m=i.value.length*40+24;let p=c.value.y;return p+m>window.innerHeight&&(p=p-m),{left:c.value.x+"px",top:p+"px"}}),d=f=>{f.composedPath().some(m=>m===o.value)||(l.value=!1,document.body.removeEventListener("click",d),document.body.removeEventListener("contextmenu",d))};watch(l,async()=>{l.value?(r.value+=1,await new Promise(f=>setTimeout(f,0)),document.body.addEventListener("click",d),document.body.addEventListener("contextmenu",d)):r.value=Math.max(0,r.value-1)});const _=async f=>{var m;(m=f.handler)==null||m.call(f),l.value=!1};return(f,m)=>(openBlock(),createBlock(Teleport,{to:"body"},[unref(l)?(openBlock(),createElementBlock("div",{key:0,class:"msg-context-menu",ref_key:"container",ref:o,style:normalizeStyle(unref(u))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(i),(p,v)=>(openBlock(),createElementBlock("div",{class:"option",key:v,onClick:()=>_(p)},toDisplayString(p.text),9,_hoisted_1$33))),128))],4)):createCommentVNode("",!0)]))}});var MessageContextMenu=_export_sfc(_sfc_main$2j,[["__scopeId","data-v-f50d9a3c"]]),MessageIM_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$l=a=>(pushScopeId("data-v-577337b8"),a=a(),popScopeId(),a),_hoisted_1$32={class:"panel-im"},_hoisted_2$2S={key:1,class:"im-empty"},_hoisted_3$2F=_withScopeId$l(()=>createBaseVNode("div",{class:"im-empty-text"},"\u6682\u65F6\u6CA1\u6709\u6D88\u606F\u54E6~",-1)),_sfc_main$2i=defineComponent({__name:"MessageIM",setup(a){const o=useMessageStore(),{sessionList:s,activeSession:i,sessionListCursor:l,contextMenuVisible:c}=storeToRefs(o),r=computed(()=>s.value.filter(f=>{var m;return((m=f.session)==null?void 0:m.system_msg_type)!==8})),u=ref(null),d=useElementVisible(u);watch(d,f=>{f&&o.loadMoreSession()});const _=ref(!0);return messageEvents.on("openMessage",()=>{_.value=!1,setTimeout(()=>{_.value=!0},500)}),(f,m)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:normalizeClass(["panel-im-wrap pd_lg",{"lock-scroll":unref(c)}])},[createBaseVNode("div",_hoisted_1$32,[!unref(l).initialized&&!unref(r).length?(openBlock(),createBlock(SearchNetError,{key:0,"is-small":""})):createCommentVNode("",!0),unref(l).initialized&&!unref(r).length?(openBlock(),createElementBlock("div",_hoisted_2$2S,[createBaseVNode("div",{class:"im-empty-img",style:normalizeStyle({backgroundImage:`url(${unref(emptyImg)})`})},null,4),_hoisted_3$2F])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r),p=>{var v;return openBlock(),createBlock(IMListItem,{key:`${p.type}_${((v=p.session)==null?void 0:v.talker_id)||""}`,item:p},null,8,["item"])}),128)),createBaseVNode("div",{class:"load-more",ref_key:"loadMoreEl",ref:u},null,512)])],2),(openBlock(),createBlock(Teleport,{to:"#message-pages-container"},[createVNode(Transition,{name:"message-page-slide"},{default:withCtx(()=>{var p;return[((p=unref(i))==null?void 0:p.type)==="system"?(openBlock(),createBlock(SystemNotify,{key:0,class:"im-window"})):createCommentVNode("",!0)]}),_:1}),createVNode(Transition,{name:"message-page-slide"},{default:withCtx(()=>[["unfollow","dustbin"].some(p=>{var v,g;return p===((v=unref(i))==null?void 0:v.type)||p===((g=unref(i))==null?void 0:g.from)})?(openBlock(),createBlock(IMSubList,{key:0,class:"im-window"})):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{name:"message-page-slide",css:_.value},{default:withCtx(()=>{var p;return[((p=unref(i))==null?void 0:p.type)==="user"?(openBlock(),createBlock(IMDialog,{key:0,class:"im-window"})):createCommentVNode("",!0)]}),_:1},8,["css"])])),createVNode(MessageContextMenu)],64))}});var MessageIM=_export_sfc(_sfc_main$2i,[["__scopeId","data-v-577337b8"]]),Name_vue_vue_type_style_index_0_lang="";const _hoisted_1$31=["textContent"],_sfc_main$2h=defineComponent({__name:"Name",props:{name:{type:String,required:!0},isVip:{type:Boolean,default:!1},hoverPink:{type:Boolean,default:!1}},setup(a){return(o,s)=>(openBlock(),createElementBlock("span",{class:normalizeClass(["user_name u_select_none cs_pointer",{"is-vip":a.isVip,hover_pink:a.hoverPink}]),textContent:toDisplayString(a.name)},null,10,_hoisted_1$31))}});var NotificationItem_vue_vue_type_style_index_0_lang="";const _hoisted_1$30={class:"message_notification_item"},_hoisted_2$2R={class:"message_notification_item--main"},_hoisted_3$2E={class:"message_notification_item--body"},_hoisted_4$1S={class:"message_notification_item--details"},_hoisted_5$1s={class:"message_notification_item--details--author"},_hoisted_6$1e=["textContent"],_hoisted_7$18={key:0,class:"message_notification_item--details--content"},_hoisted_8$12={class:"message_notification_item--bottom"},_hoisted_9$W=["textContent"],_hoisted_10$N={class:"message_notification_item--reference"},_hoisted_11$J={key:0,class:"message_notification_item--reference--img"},_hoisted_12$D=["textContent"],_sfc_main$2g=defineComponent({__name:"NotificationItem",props:{users:{type:Object,required:!0},pubText:{type:String,required:!0},pubTs:{type:Number,default:()=>Date.now()},contentNodes:{type:Array,default:null},reference:{type:Object,required:!0}},setup(a){const o=a,s=useRouter(),{spaceFromMessage:i}=storeToRefs(useMessageStore()),l=computed(()=>{let r=o.pubTs;return r<9466848e5&&(r*=1e3),formatTime(r)}),c=r=>{s.push({name:"Space",query:{mid:r}}),messageEvents.emit("close"),i.value=!0};return(r,u)=>(openBlock(),createElementBlock("div",_hoisted_1$30,[createBaseVNode("div",_hoisted_2$2R,[createBaseVNode("div",{class:normalizeClass(["message_notification_item--avatar",{"is-overlap--front":a.users.length===2}])},[createVNode(Avatar,{face:a.users[0].face,onClick:u[0]||(u[0]=withModifiers(d=>c(a.users[0].mid),["stop"]))},null,8,["face"])],2),a.users[1]?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["message_notification_item--avatar",{"is-overlap--back":a.users.length===2}])},[createVNode(Avatar,{face:a.users[1].face,onClick:u[1]||(u[1]=withModifiers(d=>c(a.users[1].mid),["stop"]))},null,8,["face"])],2)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$2E,[createBaseVNode("div",_hoisted_4$1S,[createBaseVNode("div",_hoisted_5$1s,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.users,(d,_)=>(openBlock(),createElementBlock(Fragment,{key:_},[createVNode(_sfc_main$2h,{name:d.name,hoverPink:"",onClick:withModifiers(f=>c(d.mid),["stop"])},null,8,["name","onClick"]),createTextVNode(" "+toDisplayString(_!==a.users.length-1?"\u3001":""),1)],64))),128)),createBaseVNode("span",{class:"text2",textContent:toDisplayString(a.pubText)},null,8,_hoisted_6$1e)]),a.contentNodes&&a.contentNodes.length?(openBlock(),createElementBlock("div",_hoisted_7$18,[createVNode(unref(RichText),{nodes:a.contentNodes,lines:"2",unfold:!1,"show-action":!1},null,8,["nodes"])])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_8$12,[createBaseVNode("div",{class:"text3 flex_shrink_0",textContent:toDisplayString(unref(l))},null,8,_hoisted_9$W),renderSlot(r.$slots,"actions")])]),createBaseVNode("div",_hoisted_10$N,[a.reference.type==="img"?(openBlock(),createElementBlock("div",_hoisted_11$J,[createVNode(_sfc_main$2v,{src:a.reference.img},null,8,["src"])])):(openBlock(),createElementBlock("span",{key:1,class:"text3",textContent:toDisplayString(a.reference.text)},null,8,_hoisted_12$D))])]),renderSlot(r.$slots,"extension")]))}});var NotificationReplyBox_vue_vue_type_style_index_0_lang="";const _hoisted_1$2$=["onClick"],_hoisted_2$2Q={class:"message_notification_reply_box--avatar_wrap"},_hoisted_3$2D={class:"message_notification_item--avatar"},_hoisted_4$1R={class:"message_notification_reply_box--input_wrap"},_hoisted_5$1r=["placeholder"],_hoisted_6$1d=["disabled","onClick"],_sfc_main$2f=defineComponent({__name:"NotificationReplyBox",props:{placeholder:{type:String,default:"\u8BF7\u81EA\u89C9\u9075\u5B88\u4E92\u8054\u7F51\u76F8\u5173\u7684\u653F\u7B56\u6CD5\u89C4\uFF0C\u4E25\u7981\u53D1\u5E03\u8272\u60C5\u3001\u66B4\u529B\u3001\u53CD\u52A8\u7684\u8A00\u8BBA\u3002"},oid:{type:Number,required:!0},type:{type:Number,required:!0},root:{type:Number,required:!0},parent:{type:Number,required:!0},replyNickname:{type:String,default:""}},emits:["done"],setup(a,{emit:o}){const s=a,{userInfo:i}=storeToRefs(useUserInfoStore()),l=ref("");async function c(){try{await replyAdd({oid:s.oid,type:s.type,root:s.root,parent:s.parent,message:s.replyNickname?`\u56DE\u590D @${s.replyNickname} :${l.value}`:l.value,scene:"msg",from:"im-reply"}),toastAsync({content:"\u53D1\u9001\u6210\u529F"}),o("done")}catch(r){toastAsync({content:r.message||`\u7535\u6CE2\u65E0\u6CD5\u5230\u8FBE~${r.code}`})}}return(r,u)=>(openBlock(),createElementBlock("div",{class:"message_notification_reply_box flex_center",onClick:withModifiers(d=>{},["stop"])},[createBaseVNode("div",_hoisted_2$2Q,[createBaseVNode("div",_hoisted_3$2D,[createVNode(Avatar,{face:unref(i).face},null,8,["face"])])]),createBaseVNode("div",_hoisted_4$1R,[withDirectives(createBaseVNode("textarea",{class:"message_notification_reply_box--input bili_textarea",placeholder:a.placeholder,"onUpdate:modelValue":u[0]||(u[0]=d=>l.value=d)},`\r
      `,8,_hoisted_5$1r),[[vModelText,l.value]]),createBaseVNode("button",{class:"message_notification_reply_box--btn",disabled:!l.value,onClick:withModifiers(c,["stop"])},"\u56DE\u590D",8,_hoisted_6$1d)])],8,_hoisted_1$2$))}}),_hoisted_1$2_={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2P=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.333 7.833A5.333 5.333 0 0 1 6.667 2.5h2.666a5.333 5.333 0 0 1 .304 10.658c-.639.819-1.688 1.844-3.163 2.246a.655.655 0 0 1-.692-.232.678.678 0 0 1-.086-.687c.22-.509.27-.976.241-1.368a5.334 5.334 0 0 1-4.604-5.284ZM6.667 3.5a4.333 4.333 0 0 0-.26 8.659.5.5 0 0 1 .46.4 3.81 3.81 0 0 1-.028 1.65c.957-.44 1.674-1.204 2.14-1.838a.5.5 0 0 1 .398-.205A4.333 4.333 0 0 0 9.333 3.5H6.667Z",fill:"currentColor"},null,-1),_hoisted_3$2C=[_hoisted_2$2P];function render$R(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2_,_hoisted_3$2C)}var IcoReply={render:render$R};const _hoisted_1$2Z={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2O=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.283 2.53a.532.532 0 0 0-.455.17c-.176.206-.248.375-.336.625l-.03.088c-.088.253-.2.576-.433.988-.398.707-.77 1.134-1.228 1.535-.375.329-.757.553-1.134.66v7.054a71.403 71.403 0 0 0 5.291-.073c.607-.031 1.134-.332 1.409-.82.385-.685.86-1.69 1.147-2.873.268-1.103.39-2.01.446-2.649.025-.296-.21-.568-.573-.568h-3.322a.5.5 0 0 1-.462-.69v-.001l.003-.007.01-.027a7.863 7.863 0 0 0 .178-.49 6.62 6.62 0 0 0 .269-1.047c.078-.522.059-.94-.146-1.329-.22-.416-.469-.526-.634-.546Zm1.493 3.137h2.61c.883 0 1.651.708 1.57 1.654a18.718 18.718 0 0 1-.47 2.799 12.521 12.521 0 0 1-1.248 3.127c-.465.828-1.328 1.282-2.228 1.329a72.39 72.39 0 0 1-3.677.092c-1.47 0-2.815-.045-3.768-.088-1.072-.05-1.971-.845-2.086-1.936a25.492 25.492 0 0 1-.146-2.642c0-.913.059-1.74.127-2.397.12-1.148 1.104-1.938 2.212-1.938h1.495c.212 0 .542-.104.975-.483.375-.329.674-.668 1.017-1.274.186-.33.272-.577.358-.825l.032-.092c.104-.294.225-.599.52-.944a1.531 1.531 0 0 1 1.33-.512c.55.064 1.059.421 1.403 1.073.347.658.342 1.326.25 1.942a7.313 7.313 0 0 1-.276 1.115Zm-6.11 7.956V6.667h-.994c-.642 0-1.156.448-1.217 1.041-.066.63-.122 1.423-.122 2.294 0 .952.067 1.843.14 2.537.061.575.535 1.014 1.138 1.042.312.014.668.029 1.056.042Z",fill:"currentColor"},null,-1),_hoisted_3$2B=[_hoisted_2$2O];function render$Q(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2Z,_hoisted_3$2B)}var IcoLike$1={render:render$Q};const _hoisted_1$2Y={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2N=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 3.833c0-.92-.746-1.666-1.667-1.666H6.667C5.747 2.167 5 2.913 5 3.833v.334H1.833a.5.5 0 0 0 0 1h12.334a.5.5 0 0 0 0-1H11v-.334Zm-1 .334H6v-.334c0-.368.298-.666.667-.666h2.666c.369 0 .667.298.667.666v.334Zm-6.333 2.5a.5.5 0 0 0-1 0v5.436c0 1.333.99 2.479 2.344 2.592.872.073 1.944.138 2.989.138s2.117-.065 2.989-.138c1.354-.113 2.344-1.26 2.344-2.592V6.667a.5.5 0 1 0-1 0v5.436c0 .84-.618 1.528-1.428 1.596-.856.071-1.898.134-2.905.134s-2.05-.063-2.905-.134c-.81-.068-1.428-.757-1.428-1.596V6.667Zm2.666.833a.5.5 0 0 1 .5.5v2.333a.5.5 0 1 1-1 0V8a.5.5 0 0 1 .5-.5Zm3.834.5a.5.5 0 0 0-1 0v2.333a.5.5 0 1 0 1 0V8Z",fill:"currentColor"},null,-1),_hoisted_3$2A=[_hoisted_2$2N];function render$P(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2Y,_hoisted_3$2A)}var IcoDelete={render:render$P},NotificationReplyItem_vue_vue_type_style_index_0_lang="";const _hoisted_1$2X=["onClick"],_hoisted_2$2M=createTextVNode("\u56DE\u590D"),_hoisted_3$2z=["onClick"],_hoisted_4$1Q=["onClick"],_hoisted_5$1q=createTextVNode("\u5220\u9664"),_sfc_main$2e=defineComponent({__name:"NotificationReplyItem",props:{data:{type:Object,required:!0},focus:{type:Boolean,default:!1}},emits:["focus","like","delete","click"],setup(a,{emit:o}){const s=a,i=ref(!1),l=ref(""),c=computed(()=>{let y="";const B=s.data.item.business,C=s.data.counts,S=s.data.is_multi;return!B||B==="\u8BC4\u8BBA"?y="\u56DE\u590D\u4E86\u6211\u7684\u8BC4\u8BBA":B==="\u5F39\u5E55"?y=s.data.item.target_id>0?"\u56DE\u590D\u4E86\u6211\u7684\u5F39\u5E55":"\u5BF9\u6211\u7684\u5F39\u5E55\u53D1\u8868\u4E86\u8BC4\u8BBA":S?y=`\u7B49\u4EBA\u5BF9\u6211\u7684${B}\u53D1\u8868\u4E86${C}\u6761\u8BC4\u8BBA`:C>1?y=`\u5BF9\u6211\u7684${B}\u53D1\u8868\u4E86${C}\u6761\u8BC4\u8BBA`:y=`\u5BF9\u6211\u7684${B}\u53D1\u8868\u4E86\u8BC4\u8BBA`,y}),r=computed(()=>getRichTextNodes(s.data.item.source_content,(s.data.item.at_details||[]).map(y=>({name:y.nickname,mid:y.mid})))),u=computed(()=>`\u56DE\u590D @${s.data.user.nickname}`),d=computed(()=>!s.data.item.title&&!s.data.item.image&&!s.data.item.desc),_=computed(()=>d.value?{type:"img",img:""}:s.data.item.image?{type:"img",img:s.data.item.image}:{type:"text",text:s.data.item.title||s.data.item.desc}),f=computed(()=>!d.value&&!s.data.item.hide_reply_button),m=computed(()=>f.value||!s.data.item.hide_like_button);watch(()=>s.focus,y=>{y?i.value=!0:(l.value="",i.value=!1)});function p(){o("focus",!i.value)}function v(){o("like")}function g(){o("delete")}function $(){o("click")}return(y,B)=>(openBlock(),createBlock(_sfc_main$2g,{users:[{face:a.data.user.avatar,name:a.data.user.nickname,mid:a.data.user.mid}],"pub-text":unref(c),"pub-ts":a.data.reply_time,"content-nodes":unref(r),reference:unref(_),class:normalizeClass(a.focus?"is-focus":""),onClick:withModifiers($,["stop"])},{actions:withCtx(()=>[unref(f)?(openBlock(),createElementBlock("span",{key:0,class:"message_notification_item--action",onClick:withModifiers(p,["stop"])},[createVNode(unref(IcoReply)),_hoisted_2$2M],8,_hoisted_1$2X)):createCommentVNode("",!0),unref(m)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(["message_notification_item--action",{"is-active":!!a.data.item.like_state}]),onClick:withModifiers(v,["stop"])},[createVNode(unref(IcoLike$1)),createTextVNode(toDisplayString(a.data.item.like_state?"\u5DF2\u8D5E":"\u70B9\u8D5E"),1)],10,_hoisted_3$2z)):createCommentVNode("",!0),createBaseVNode("span",{class:"message_notification_item--action hover_visible",onClick:withModifiers(g,["stop"])},[createVNode(unref(IcoDelete)),_hoisted_5$1q],8,_hoisted_4$1Q)]),extension:withCtx(()=>[i.value?(openBlock(),createBlock(_sfc_main$2f,{key:0,placeholder:unref(u),oid:a.data.item.subject_id,type:a.data.item.business_id,root:a.data.item.root_id||a.data.item.source_id,parent:a.data.item.source_id,"reply-nickname":a.data.item.target_id?a.data.user.nickname:"",onDone:p},null,8,["placeholder","oid","type","root","parent","reply-nickname"])):createCommentVNode("",!0)]),_:1},8,["users","pub-text","pub-ts","content-nodes","reference","class","onClick"]))}});var LoadMoreTriggerShim_vue_vue_type_style_index_0_lang="";const _sfc_main$2d=defineComponent({__name:"LoadMoreTriggerShim",props:{height:{type:Number,default:0},block:{type:Boolean,default:!1}},emits:["trigger"],setup(a,{emit:o}){const s=ref(null),i=useElementVisible(s);return watch(i,()=>{i.value&&o("trigger")}),(l,c)=>(openBlock(),createElementBlock("div",{ref_key:"elRef",ref:s,class:normalizeClass(["load_more_trigger_shim",{block:a.block}]),style:normalizeStyle({height:a.height?`${a.height}px`:""})},null,6))}});var DataEmpty_vue_vue_type_style_index_0_lang="";const _sfc_main$2c={},_hoisted_1$2W={class:"datastatus--empty"},_hoisted_2$2L=createBaseVNode("img",{src:_imports_0$3},null,-1),_hoisted_3$2y=createBaseVNode("p",null,"\u6CA1\u6709\u4F60\u60F3\u8981\u7684\u5185\u5BB9~",-1),_hoisted_4$1P=[_hoisted_2$2L,_hoisted_3$2y];function _sfc_render$5(a,o){return openBlock(),createElementBlock("div",_hoisted_1$2W,_hoisted_4$1P)}var DataEmpty=_export_sfc(_sfc_main$2c,[["render",_sfc_render$5]]),Loading_vue_vue_type_style_index_0_lang="";const _sfc_main$2b={},_hoisted_1$2V={class:"loading_wrapper p_relative"},_hoisted_2$2K=createBaseVNode("img",{class:"loading-gif p_center",src:_imports_0$4,alt:""},null,-1),_hoisted_3$2x=[_hoisted_2$2K];function _sfc_render$4(a,o){return openBlock(),createElementBlock("div",_hoisted_1$2V,_hoisted_3$2x)}var Loading=_export_sfc(_sfc_main$2b,[["render",_sfc_render$4]]),vueVirtualScroller="",MessageReply_vue_vue_type_style_index_0_lang="";const _hoisted_1$2U={class:"message_reply h_100"},_hoisted_2$2J={key:1,class:"message_mention_item_wrap"},_sfc_main$2a=defineComponent({__name:"MessageReply",setup(a){const o={id:0,time:0},{list:s,status:i}=useFeedState([]),l=ref(-1);async function c(){if(i.value!=="noMore"&&i.value!=="loading")try{i.value="loading";const _=await getMsgfeedReply(o.id,o.time);if(s.value.push(..._.items||[]),console.log(_.cursor),_.cursor.is_end){s.value.length?i.value="noMore":i.value="empty";return}o.id=_.cursor.id,o.time=_.cursor.time,s.value.length?i.value="loaded":i.value="empty"}catch(_){console.log(_),s.value.length||(i.value="error")}}async function r(_){try{if(!await alertAsync({content:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",message:"\u5220\u9664\u8BE5\u6761\u901A\u77E5\u540E\u5C06\u65E0\u6CD5\u6062\u590D",cancelText:"\u53D6\u6D88",confirmText:"\u786E\u5B9A"}))return;const m=s.value[_];await postMsgfeedDel(m.id,1),s.value.splice(_,1)}catch(f){toastAsync({content:f.message})}}async function u(_){var f,m,p,v,g,$;try{const y=s.value[_],B=String((f=y.item)==null?void 0:f.subject_id),C=(m=y.item)==null?void 0:m.like_state;((p=y.item)==null?void 0:p.type)==="danma"?await dmThumbupAdd({oid:B,dmid:(v=y.item)==null?void 0:v.source_id,op:C===1?2:1,scene:"msg",from:"im-reply"}):await replyAction({oid:B,type:(g=y.item)==null?void 0:g.business_id,rpid:($=y.item)==null?void 0:$.source_id,action:C===1?0:1,from:"im-reply",scene:"msg"}),C!==1?(toastAsync({content:"\u70B9\u8D5E\u6210\u529F"}),y.item.like_state=1):y.item.like_state=0}catch(y){toastAsync({content:y.message})}}function d(_){const f=s.value[_],m=getNotificationItemOpenState(f);handleNotificationItemOpenState(m)}return c(),(_,f)=>(openBlock(),createElementBlock("div",_hoisted_1$2U,[unref(s).length?(openBlock(),createElementBlock("div",_hoisted_2$2J,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),(m,p)=>(openBlock(),createBlock(_sfc_main$2e,{key:m.id,data:m,focus:l.value===p,onFocus:v=>l.value=v?p:-1,onLike:()=>u(p),onDelete:()=>r(p),onClick:()=>d(p)},null,8,["data","focus","onFocus","onLike","onDelete","onClick"]))),128))])):(openBlock(),createElementBlock(Fragment,{key:0},[unref(i)==="error"?(openBlock(),createBlock(SearchNetError,{key:0,"is-small":""})):unref(i)==="empty"?(openBlock(),createBlock(DataEmpty,{key:1})):unref(i)==="loading"?(openBlock(),createBlock(Loading,{key:2})):createCommentVNode("",!0)],64)),unref(s).length&&unref(i)!=="noMore"&&unref(i)!=="loading"?(openBlock(),createBlock(_sfc_main$2d,{key:2,block:"",onTrigger:c})):createCommentVNode("",!0)]))}});var MessageMention_vue_vue_type_style_index_0_lang="";const _hoisted_1$2T={class:"message_mention h_100"},_hoisted_2$2I={key:1,class:"message_mention_item_wrap"},_hoisted_3$2w=["onClick"],_hoisted_4$1O=createTextVNode(" \u56DE\u590D "),_hoisted_5$1p=["onClick"],_hoisted_6$1c=createTextVNode(" \u5220\u9664\u8BE5\u901A\u77E5 "),_sfc_main$29=defineComponent({__name:"MessageMention",setup(a){const o={id:0,time:0},{list:s,status:i}=useFeedState([]),l=ref(-1);function c(_){const f=!_.item.title&&!_.item.image&&!_.item.desc,m={id:_.id,users:[{face:_.user.avatar,name:_.user.nickname,mid:_.user.mid}],pubTs:_.at_time,pubText:`\u5728${_.item.business}\u4E2D@\u4E86\u6211`,contentNodes:getRichTextNodes(_.item.source_content,(_.item.at_details||[]).map(p=>({name:p.nickname,mid:p.mid}))),reference:{type:f||_.item.image?"img":"text",img:"",text:""},showReplayAction:!f&&!_.item.hide_reply_button,replyBoxProps:{placeholder:`\u56DE\u590D @${_.user.nickname}`,oid:_.item.subject_id,type:_.item.business_id,root:_.item.root_id||_.item.source_id,parent:_.item.parent||0,replyNickname:_.item.target_id?_.user.nickname:""},url:_.item.uri,openState:getNotificationItemOpenState(_)};return m.reference.type==="img"?m.reference.img=_.item.image:m.reference.text=_.item.title||_.item.desc,m}async function r(){if(i.value!=="noMore"&&i.value!=="loading")try{i.value="loading";const _=await getMsgfeedAt(o.id,o.time);if(s.value.push(...(_.items||[]).map(c)),_.cursor.is_end){s.value.length?i.value="noMore":i.value="empty";return}o.id=_.cursor.id,o.time=_.cursor.time,s.value.length?i.value="loaded":i.value="empty"}catch(_){console.log(_),s.value.length||(i.value="error")}}async function u(_){try{if(!await alertAsync({content:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",message:"\u5220\u9664\u8BE5\u6761\u901A\u77E5\u540E\u5C06\u65E0\u6CD5\u6062\u590D",cancelText:"\u53D6\u6D88",confirmText:"\u786E\u5B9A"}))return;const m=s.value[_];await postMsgfeedDel(m.id,2),s.value.splice(_,1)}catch(f){toastAsync({content:f.message})}}function d(_){const f=s.value[_];handleNotificationItemOpenState(f.openState)}return r(),(_,f)=>(openBlock(),createElementBlock("div",_hoisted_1$2T,[unref(s).length?(openBlock(),createElementBlock("div",_hoisted_2$2I,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),(m,p)=>(openBlock(),createBlock(_sfc_main$2g,{key:m.id,users:m.users,"pub-text":m.pubText,"content-nodes":m.contentNodes,"pub-ts":m.pubTs,reference:m.reference,onClick:()=>d(p)},{actions:withCtx(()=>[m.showReplayAction?(openBlock(),createElementBlock("span",{key:0,class:"message_notification_item--action",onClick:withModifiers(()=>{l.value=p},["stop"])},[createVNode(unref(IcoReply)),_hoisted_4$1O],8,_hoisted_3$2w)):createCommentVNode("",!0),createBaseVNode("span",{class:"message_notification_item--action hover_visible",onClick:withModifiers(v=>u(p),["stop"])},[createVNode(unref(IcoDelete)),_hoisted_6$1c],8,_hoisted_5$1p)]),extension:withCtx(()=>[l.value===p?(openBlock(),createBlock(_sfc_main$2f,mergeProps({key:0},m.replyBoxProps,{onDone:f[0]||(f[0]=()=>{l.value=-1})}),null,16)):createCommentVNode("",!0)]),_:2},1032,["users","pub-text","content-nodes","pub-ts","reference","onClick"]))),128))])):(openBlock(),createElementBlock(Fragment,{key:0},[unref(i)==="error"?(openBlock(),createBlock(SearchNetError,{key:0,"is-small":""})):unref(i)==="empty"?(openBlock(),createBlock(DataEmpty,{key:1})):unref(i)==="loading"?(openBlock(),createBlock(Loading,{key:2})):createCommentVNode("",!0)],64)),unref(s).length&&unref(i)!=="noMore"&&unref(i)!=="loading"?(openBlock(),createBlock(_sfc_main$2d,{key:2,block:"",onTrigger:r})):createCommentVNode("",!0)]))}}),_hoisted_1$2S={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2H=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.748 2.555a.75.75 0 1 0-1.496 0A5.001 5.001 0 0 0 3 7.5v2.861a.236.236 0 0 1-.07.167l-.518.52c-.63.63-.471 1.62.188 2.056l-.87.87a.5.5 0 1 0 .706.708L13.73 3.389a.5.5 0 0 0-.707-.707l-1.386 1.386a4.99 4.99 0 0 0-2.888-1.513Zm-1.9 10.933a1.25 1.25 0 0 0 2.303 0 57.09 57.09 0 0 1-2.302 0Zm-1.051-.03-.065-.002a.297.297 0 0 1-.199-.509l.329-.328a.502.502 0 0 1 .37-.147A58.24 58.24 0 0 0 8 12.5c1.787 0 3.479-.092 4.682-.179a.326.326 0 0 0 .2-.566l-.52-.52a1.236 1.236 0 0 1-.362-.873V7.5c0-.212-.017-.42-.048-.623a.58.58 0 0 1 .153-.502c.276-.276.742-.169.813.215.054.295.082.6.082.91v2.861c0 .063.025.123.07.167l.518.52c.802.8.326 2.187-.834 2.27-.708.052-1.584.105-2.55.14a2.25 2.25 0 0 1-4.407 0Zm5.132-8.683-7.55 7.55-.061-.004a.326.326 0 0 1-.2-.566l.52-.52c.232-.231.362-.546.362-.873V7.5a4 4 0 0 1 6.929-2.725Z",fill:"currentColor"},null,-1),_hoisted_3$2v=[_hoisted_2$2H];function render$O(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2S,_hoisted_3$2v)}var IcoUnnotice={render:render$O},MessageLike_vue_vue_type_style_index_0_lang="";const _hoisted_1$2R={key:0,class:"message_like_items_tag"},_hoisted_2$2G=["onClick"],_hoisted_3$2u=createTextVNode("\u5220\u9664\u8BE5\u901A\u77E5"),_hoisted_4$1N=["onClick"],_sfc_main$28=defineComponent({__name:"MessageLike",setup(a){const o={id:0,time:0},{list:s,status:i}=useFeedState([]),l=ref(!1);function c(f){const m=!f.item.title&&!f.item.image&&!f.item.desc,p={id:f.id,users:f.users.slice(0,2).map(v=>({face:v.avatar,name:v.nickname,mid:v.mid})),pubTs:f.like_time,pubText:`${f.counts>1?`\u7B49\u603B\u8BA1${f.counts}\u4EBA`:""}\u8D5E\u4E86\u6211\u7684${f.item.business}`,contentNodes:getRichTextNodes(f.item.source_content,(f.item.at_details||[]).map(v=>({name:v.nickname,mid:v.mid}))),reference:{type:m||f.item.image?"img":"text",img:"",text:""},noticeState:f.notice_state,last:0,url:f.item.uri,openState:getNotificationItemOpenState(f)};return p.reference.type==="img"?p.reference.img=f.item.image:p.reference.text=f.item.title||f.item.desc,p}async function r(){if(i.value!=="noMore"&&i.value!=="loading")try{i.value="loading";const{latest:f,total:m}=await getMsgfeedLike(o.id,o.time),p=(f.items||[]).map(c),v=(m.items||[]).map(c);if(p.length&&(l.value=!0,p[0].tag="\u6700\u65B0",v[0].tag="\u7D2F\u8BA1",p.forEach(g=>{g.last=f.last_view_at||0})),s.value.push(...p,...v),m.cursor.is_end){s.value.length?i.value="noMore":i.value="empty";return}o.id=m.cursor.id,o.time=m.cursor.time,s.value.length?i.value="loaded":i.value="empty"}catch(f){console.log(f),s.value.length||(i.value="error")}}async function u(f){try{if(!await alertAsync({content:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",message:"\u8BE5\u6761\u901A\u77E5\u5220\u9664\u540E\uFF0C\u5F53\u6709\u65B0\u70B9\u8D5E\u65F6\u4F1A\u91CD\u65B0\u51FA\u73B0\u5728\u5217\u8868",cancelText:"\u53D6\u6D88",confirmText:"\u786E\u5B9A"}))return;const p=s.value[f];await postMsgfeedDel(p.id,0),s.value.splice(f,1)}catch(m){toastAsync({content:m.message})}}async function d(f){try{const m=s.value[f];if(!m.noticeState&&!await alertAsync({content:"\u8FD9\u6761\u5185\u5BB9\u7684\u70B9\u8D5E\u5C06\u4E0D\u518D\u901A\u77E5\uFF0C\u4F46\u4ECD\u53EF\u5728\u5217\u8868\u5185\u67E5\u770B\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F",cancelText:"\u53D6\u6D88",confirmText:"\u786E\u5B9A"}))return;await postMsgfeedNotice(m.id,0,m.noticeState),s.value[f].noticeState=m.noticeState?0:1}catch(m){toastAsync({content:m.message})}}async function _(f){const m=s.value[f];handleNotificationItemOpenState(m.openState)}return r(),(f,m)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["message_like h_100",{"no-padding-top":l.value}])},[unref(s).length?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(unref(s),(p,v)=>(openBlock(),createElementBlock("div",{class:"message_like_item_wrap",key:p.id},[p.tag?(openBlock(),createElementBlock("div",_hoisted_1$2R,toDisplayString(p.tag),1)):createCommentVNode("",!0),createVNode(_sfc_main$2g,{class:"mssage_like_item",users:p.users,"pub-text":p.pubText,"content-nodes":p.contentNodes,"pub-ts":p.pubTs,reference:p.reference,onClick:()=>_(v)},{actions:withCtx(()=>[createBaseVNode("span",{class:"message_notification_item--action hover_visible",onClick:withModifiers(g=>u(v),["stop"])},[createVNode(unref(IcoDelete)),_hoisted_3$2u],8,_hoisted_2$2G),createBaseVNode("span",{class:"message_notification_item--action hover_visible",onClick:withModifiers(g=>d(v),["stop"])},[createVNode(unref(IcoUnnotice)),createTextVNode(toDisplayString(p.noticeState?"\u63A5\u6536\u901A\u77E5":"\u4E0D\u518D\u901A\u77E5"),1)],8,_hoisted_4$1N)]),_:2},1032,["users","pub-text","content-nodes","pub-ts","reference","onClick"])]))),128)):(openBlock(),createElementBlock(Fragment,{key:0},[unref(i)==="error"?(openBlock(),createBlock(SearchNetError,{key:0,"is-small":""})):unref(i)==="empty"?(openBlock(),createBlock(DataEmpty,{key:1})):unref(i)==="loading"?(openBlock(),createBlock(Loading,{key:2})):createCommentVNode("",!0)],64)),unref(s).length&&unref(i)!=="noMore"&&unref(i)!=="loading"?(openBlock(),createBlock(_sfc_main$2d,{key:2,block:"",onTrigger:r})):createCommentVNode("",!0)],2))}});var CardSkeleton_vue_vue_type_style_index_0_lang="";const _sfc_main$27={},_hoisted_1$2Q={class:"dynamic_card_skeleton"},_hoisted_2$2F=createStaticVNode('<div class="dynamic_card_skeleton--header"><div class="dynamic_card_skeleton--avatar"></div><div class="dynamic_card_skeleton--name"></div><div class="dynamic_card_skeleton--time"></div></div><div class="dynamic_card_skeleton--content"><div class="dynamic_card_skeleton--desc"></div><div class="dynamic_card_skeleton--desc"></div><div class="dynamic_card_skeleton--desc is-mini"></div></div><div class="dynamic_card_skeleton--footer"><div class="dynamic_card_skeleton--action"></div><div class="dynamic_card_skeleton--action"></div><div class="dynamic_card_skeleton--action"></div></div>',3),_hoisted_5$1o=[_hoisted_2$2F];function _sfc_render$3(a,o){return openBlock(),createElementBlock("div",_hoisted_1$2Q,_hoisted_5$1o)}var CardSkeleton=_export_sfc(_sfc_main$27,[["render",_sfc_render$3]]),style="";const _hoisted_1$2P={width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2E=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.156.495a.2.2 0 0 0-.312 0L1.06 3.975a.2.2 0 0 0 .156.325H3v2.8c0 .11.09.2.2.2h1.6a.2.2 0 0 0 .2-.2V4.3h1.784a.2.2 0 0 0 .156-.325L4.156.495Z",fill:"currentColor"},null,-1),_hoisted_3$2t=[_hoisted_2$2E];function render$N(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2P,_hoisted_3$2t)}var IcoTopArrow={render:render$N};const _hoisted_1$2O={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2D=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.748 5.498a1.748 1.748 0 1 1-3.496 0 1.748 1.748 0 0 1 3.496 0Zm0 13a1.749 1.749 0 1 1-3.497 0 1.749 1.749 0 0 1 3.498 0ZM12 13.748a1.749 1.749 0 1 0 0-3.497 1.749 1.749 0 0 0 0 3.498Z",fill:"#61666D"},null,-1),_hoisted_3$2s=[_hoisted_2$2D];function render$M(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2O,_hoisted_3$2s)}var IcoMore$1={render:render$M},ModuleAuthor_vue_vue_type_style_index_0_lang="";const _hoisted_1$2N={class:"dynamic_card_module_author flex_row"},_hoisted_2$2C=["onClick"],_hoisted_3$2r={class:"dynamic_card_module_author--info"},_hoisted_4$1M=["textContent","onClick"],_hoisted_5$1n=["textContent"],_hoisted_6$1b={key:0,class:"dynamic_card_module_author--tag"},_hoisted_7$17=createTextVNode(" \u7F6E\u9876 "),_sfc_main$26=defineComponent({__name:"ModuleAuthor",props:{data:{type:Object,required:!0}},emits:["more-click"],setup(a,{emit:o}){var k;const s=a,i=useRouter(),l=inject("dynamicID"),{userInfo:c}=storeToRefs(useUserInfoStore()),r=useScrollTriggerInlinePlayStore(),{active:u}=storeToRefs(r),d=computed(()=>{var b;return isVipUser((b=s.data.user)==null?void 0:b.vip)}),_=computed(()=>{var b;return((b=s.data.user)==null?void 0:b.mid)||0}),f=computed(()=>{const b=[];return s.data.more.three_point_items.forEach(V=>{if(V.type===ThreePoint.THREE_POINT_AUTOPLAY){b.push({...V,label:u.value?`\u5173\u95ED${V.label}`:`\u5F00\u542F${V.label}`});return}b.push(V)}),b}),{isFollow:m}=useRelationChange(_.value,!!((k=s.data.relation)!=null&&k.following)),p=()=>{events.emit("hidePopover"),i.push({name:"Space",query:{mid:_.value}}),messageEvents.emit("close")},v=()=>{if(!c.value.isLogin){requestLogin("moduleAuthor.handleReport");return}events.emit("reportDynamic",{id:l,uid:_.value})},g=async b=>{await alertAsync({content:b.content,cancelText:b.cancel,confirmText:b.confirm})&&(await removeDynamic(String(l)),o("more-click",{type:"REMOVE"}))},$=async()=>{try{const b=m.value;if(b&&!await alertAsync({content:"\u786E\u8BA4\u53D6\u6D88\u5173\u6CE8\u5417\uFF1F",cancelText:"\u6211\u70B9\u9519\u4E86",confirmText:"\u786E\u8BA4"}))return;await modifyRelation(_.value,b),b?(o("more-click",{type:"REMOVE",data:{mid:_.value}}),toastAsync({content:`\u5DF2\u53D6\u6D88\u5BF9\u7528\u6237 ${s.data.user.name} \u7684\u5173\u6CE8`})):toastAsync({content:"\u5173\u6CE8\u6210\u529F"})}catch(b){toastAsync({content:b.message})}},y=b=>{setClipboardData(b),toastAsync({content:"\u590D\u5236\u94FE\u63A5\u6210\u529F"})},B=async b=>{try{await postSetDynamicSpaceTop(b),o("more-click",{type:"TOP"})}catch(V){toastAsync({content:V.message})}},C=async b=>{if(!c.value.isLogin){requestLogin("moduleAuthor.handleWatchLater");return}try{await watchAdd(b.aid),addWatchLater({aid:b.aid}),toastAsync({content:"\u5DF2\u6DFB\u52A0\u81F3\u7A0D\u540E\u518D\u770B"})}catch(V){toastAsync({content:V.message||"\u6DFB\u52A0\u5931\u8D25"})}},S=()=>{r.setActive(!u.value)},E=async b=>{var V;switch(b.type){case ThreePoint.THREE_POINT_REPORT:v();break;case ThreePoint.THREE_POINT_WATCH_LATER:C(b.params);break;case ThreePoint.THREE_POINT_AUTOPLAY:S();break;case ThreePoint.THREE_POINT_DELETE:g(b.modal);break;case ThreePoint.THREE_POINT_FOLLOWING:$();break;case ThreePoint.THREE_POINT_COPY:y((V=b.params)==null?void 0:V.link);break;case ThreePoint.THREE_POINT_TOP:B(b.params);break}};return(b,V)=>(openBlock(),createElementBlock("div",_hoisted_1$2N,[createBaseVNode("div",{class:"dynamic_card_module_author--avatar",onClick:withModifiers(p,["stop"])},[createVNode(Avatar,{face:a.data.user.face},null,8,["face"])],8,_hoisted_2$2C),createBaseVNode("div",_hoisted_3$2r,[createBaseVNode("div",{class:normalizeClass(["dynamic_card_module_author--info--name u_select_none cs_pointer",{"is-vip":unref(d)}]),textContent:toDisplayString(a.data.user.name),onClick:withModifiers(p,["stop"])},null,10,_hoisted_4$1M),createBaseVNode("div",{class:"dynamic_card_module_author--info--pub u_select_none",textContent:toDisplayString(a.data.pub_text)},null,8,_hoisted_5$1n)]),a.data.is_top?(openBlock(),createElementBlock("div",_hoisted_6$1b,[createVNode(unref(IcoTopArrow)),_hoisted_7$17])):createCommentVNode("",!0),createVNode(_sfc_main$2z,{class:"dynamic_card_module_author--more p_relative",items:unref(f),onSelect:E},{default:withCtx(()=>[createVNode(unref(IcoMore$1),{class:"dynamic_card_module_author--more--btn"})]),_:1},8,["items"])]))}});var ModuleDesc_vue_vue_type_style_index_0_lang="";const _hoisted_1$2M={class:"dynamic_card_module_desc"},_sfc_main$25=defineComponent({__name:"ModuleDesc",props:{data:{type:Object,required:!0},unfold:{type:Boolean,default:!0}},setup(a){return(o,s)=>(openBlock(),createElementBlock("div",_hoisted_1$2M,[createVNode(unref(RichText),{nodes:a.data.rich_text_nodes,unfold:a.unfold,"action-texts":["\u5C55\u5F00\u5168\u90E8","\u6536\u8D77"]},null,8,["nodes","unfold"])]))}});var ModuleForwardAuthor_vue_vue_type_style_index_0_lang="";const _hoisted_1$2L={class:"dynamic_card_module_forward_author flex_row"},_hoisted_2$2B=["onClick"],_hoisted_3$2q=["onClick"],_sfc_main$24=defineComponent({__name:"ModuleForwardAuthor",props:{data:{type:Object,required:!0}},setup(a){const{data:o}=a,s=useRouter(),i=computed(()=>{var d;return{name:o.user.name,mid:o.user.mid,isVip:isVipUser(o.user.vip),isFollow:!!((d=o.relation)!=null&&d.following),showFollow:!!o.show_follow}}),l=()=>{s.push({name:"Space",query:{mid:i.value.mid}}),messageEvents.emit("close")},{isFollow:c}=useRelationChange(i.value.mid,i.value.isFollow),r=ref(!1),u=async()=>{try{const d=c.value;if(d&&!await alertAsync({content:"\u786E\u8BA4\u53D6\u6D88\u5173\u6CE8\u5417\uFF1F",cancelText:"\u6211\u70B9\u9519\u4E86",confirmText:"\u786E\u8BA4"}))return;await modifyRelation(i.value.mid,d),d?(toastAsync({content:`\u5DF2\u53D6\u6D88\u5BF9\u7528\u6237 ${i.value.name} \u7684\u5173\u6CE8`}),r.value=!1):(toastAsync({content:"\u5173\u6CE8\u6210\u529F"}),r.value=!0)}catch(d){toastAsync({content:d.message})}};return(d,_)=>(openBlock(),createElementBlock("div",_hoisted_1$2L,[createBaseVNode("div",{class:normalizeClass(["dynamic_card_module_forward_author--name cs_pointer u_select_none",{"is-vip":unref(i).isVip}]),onClick:withModifiers(l,["stop"])}," @"+toDisplayString(unref(i).name),11,_hoisted_2$2B),r.value||unref(i).showFollow?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["dynamic_card_module_forward_author--follow flex_center cs_pointer",{"is-checked":unref(c)}]),onClick:withModifiers(u,["stop"])},toDisplayString(unref(c)?"\u5DF2\u5173\u6CE8":"+ \u5173\u6CE8"),11,_hoisted_3$2q)):createCommentVNode("",!0)]))}});var DynForward=defineComponent({props:{data:{type:Object,required:!0}},setup(a){const{modules:o,id_str:s}=a.data.item;provide("dynamicID",s),provide("setCardClickBehavior",r);const i=ref(null),l=inject("detailed"),c=inject("dynamicScene");function r(f){i.value=f}const u=useTextSelection(),d=f=>{if(f.stopPropagation(),!u.text.value){if(i.value)return i.value();events.emit("hidePopover"),events.emit("viewDynamicDetails",{id:s,scene:c})}},_=f=>{switch(f.module_type){case ModuleType.MODULE_TYPE_AUTHOR:return createVNode(_sfc_main$24,{data:f.module_author},null);case ModuleType.MODULE_TYPE_DESC:return createVNode(_sfc_main$25,{data:f.module_desc,unfold:l},null);case ModuleType.MODULE_TYPE_DYNAMIC:return createVNode(ModuleDynamic,{data:f.module_dynamic},null);default:return null}};return()=>createVNode("div",{class:"dynamic_card_forward b_radius",onClick:d},[o.map(_)])}}),DynArchive_vue_vue_type_style_index_0_lang="";const _hoisted_1$2K=["onClick"],_hoisted_2$2A=createBaseVNode("div",{class:"dynamic_card_archive--cover--img"},[createBaseVNode("img",{class:"p_center",src:_imports_0$5})],-1),_hoisted_3$2p=["text"],_hoisted_4$1L={class:"dynamic_card_archive--stats"},_hoisted_5$1m={class:"dynamic_card_archive--stats--duration"},_hoisted_6$1a={key:0,class:"dynamic_card_archive--stats--item"},_hoisted_7$16={class:"dynamic_card_archive--stats--text"},_hoisted_8$11={key:1,class:"dynamic_card_archive--stats--item"},_hoisted_9$V={class:"dynamic_card_archive--stats--text"},_hoisted_10$M={class:"dynamic_card_archive--stats--item"},_hoisted_11$I={class:"dynamic_card_archive--stats--text"},_hoisted_12$C=createBaseVNode("div",{class:"dynamic_card_archive--play"},null,-1),_hoisted_13$v=createBaseVNode("div",{class:"dynamic_card_archive--tips"},"\u70B9\u51FB\u8FDB\u5165\u8BE6\u60C5\u9875",-1),_sfc_main$23=defineComponent({__name:"DynArchive",props:{playerOption:{type:Object,default:()=>({guide:""})},imgCbStr:{type:String,default:""},imgLazy:{type:String,default:"lazy"},disableScale:{type:Boolean,default:!1},data:{type:Object,required:!0}},setup(a){var p;const o=a,s=ref(!1),i=inject("pageSpmId"),c=inject("detailed")?ref(null):inject("scrollContainerRef"),r=ref(null);Number(o.data.aid);const u=o.data.bvid,d=o.data.epid||0,{isPlaying:_,stopPlayer:f}=useScrollTriggerInlinePlayInjectTarget(c,r,"video",d?{episodeId:(p=o.data.open_player_params)==null?void 0:p.epid,iid:"pc_app_dynamic_all"}:{bvid:u,iid:"pc_app_dynamic_all"}),m=()=>{events.emit("hidePopover"),f();const v=i?`${i}.pv`:"",g=o.data.open_player_params||{type:"ugc",bvid:u};openPlayerWindow({...g,fromSpmid:v})};return(v,g)=>(openBlock(),createElementBlock("div",{class:"dynamic_card_archive",onClick:withModifiers(m,["stop"])},[createBaseVNode("div",{ref_key:"coverRef",ref:r,class:"dynamic_card_archive--cover"},[_hoisted_2$2A,withDirectives(createVNode(unref(VImg),{class:"dynamic_card_archive--cover--img","cb-str":a.imgCbStr,src:a.data.cover,alt:a.data.title,width:555,height:312,loading:a.imgLazy,"bfs-style":"pc-dynamic-cover",rule:"1c",onError:g[0]||(g[0]=$=>s.value=!0)},null,8,["cb-str","src","alt","loading"]),[[vShow,!s.value]])],512),createBaseVNode("div",{class:normalizeClass({"dynamic_card_archive--mask":!0,"is-hidden":unref(_)})},[createBaseVNode("div",{class:"dynamic_card_archive--title",text:a.data.title},null,8,_hoisted_3$2p),createBaseVNode("div",_hoisted_4$1L,[createBaseVNode("span",_hoisted_5$1m,toDisplayString(a.data.duration_text),1),a.data.enable_vt?(openBlock(),createElementBlock("span",_hoisted_6$1a,[createVNode(unref(PlayTime),{class:"dynamic_card_archive--stats--icon"}),createBaseVNode("span",_hoisted_7$16,toDisplayString(a.data.stat.vt),1)])):(openBlock(),createElementBlock("span",_hoisted_8$11,[createVNode(unref(IcoPlay),{class:"dynamic_card_archive--stats--icon"}),createBaseVNode("span",_hoisted_9$V,toDisplayString(a.data.stat.play),1)])),createBaseVNode("span",_hoisted_10$M,[createVNode(unref(IcoDanmaku),{class:"dynamic_card_archive--stats--icon"}),createBaseVNode("span",_hoisted_11$I,toDisplayString(a.data.stat.danmaku),1)])]),_hoisted_12$C],2),_hoisted_13$v],8,_hoisted_1$2K))}});var DynDraw_vue_vue_type_style_index_0_lang="";const _hoisted_1$2J=["onClick"],_hoisted_2$2z={key:0,class:"dynamic_card_draw--item--surplus flex_center"},_hoisted_3$2o={key:1,class:"dynamic_card_draw--item--badge"},_sfc_main$22=defineComponent({__name:"DynDraw",props:{data:{type:Object,required:!0}},setup(a){const o=a,s=computed(()=>{switch(o.data.items.length){case 1:return"one";case 2:return"grid2";case 3:return"grid3";case 4:return"grid4";case 5:case 6:return"grid6";case 8:return"grid8";case 7:case 9:default:return"grid9"}}),i=computed(()=>{const{items:_}=o.data;return s.value==="one"?getDrawOnePicPreviewSize(_[0]):{width:104,height:104,bfsStyle:"pc-dynamic-column"}}),l=inject("galleryContainer"),c=inject("galleryFixed"),r=_=>{events.emit("hidePopover"),events.emit("visitGallery",{container:l,items:o.data.items.map(f=>({src:f.src,width:f.width,height:f.height,size:f.size,tags:[]})),index:_,key:`draw_${o.data.id}`,fixed:c})},u=(_,f)=>o.data.items.length>9&&f===8?"":_.width/_.height<1/3?"\u957F\u56FE":_.src.match(/.gif$/)?"\u52A8\u56FE":"",d=_=>_.width/_.height<1/3?"!header":"1c";return(_,f)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["dynamic_card_draw",{[unref(s)]:!0}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.data.items.slice(0,9),(m,p)=>(openBlock(),createElementBlock("div",{class:"dynamic_card_draw--item",key:p,style:normalizeStyle({width:`${unref(i).width}px`,height:`${unref(i).height}px`}),onClick:withModifiers(v=>r(p),["stop"])},[createVNode(unref(VImg),{class:"dynamic_card_draw--item--img",src:m.src.replace("pre-",""),width:unref(i).width,height:unref(i).height,loading:"lazy","bfs-style":unref(i).bfsStyle,rule:d(m)},null,8,["src","width","height","bfs-style","rule"]),p===8&&a.data.items.length>9?(openBlock(),createElementBlock("div",_hoisted_2$2z," +"+toDisplayString(a.data.items.length-9),1)):createCommentVNode("",!0),u(m,p)?(openBlock(),createElementBlock("div",_hoisted_3$2o,toDisplayString(u(m,p)),1)):createCommentVNode("",!0)],12,_hoisted_1$2J))),128))],2))}}),_hoisted_1$2I={width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2y=createBaseVNode("rect",{x:"5",y:"2",width:"2",height:"9",rx:"1",fill:"#fff"},null,-1),_hoisted_3$2n=createBaseVNode("rect",{x:"1",y:"5",width:"2",height:"6",rx:"1",fill:"#fff"},null,-1),_hoisted_4$1K=createBaseVNode("rect",{x:"9",y:"7",width:"2",height:"4",rx:"1",fill:"#fff"},null,-1),_hoisted_5$1l=[_hoisted_2$2y,_hoisted_3$2n,_hoisted_4$1K];function render$L(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2I,_hoisted_5$1l)}var IcoLiving={render:render$L},DynLiveRcmd_vue_vue_type_style_index_0_lang="";const _hoisted_1$2H=["onClick"],_hoisted_2$2x=createBaseVNode("div",{class:"dynamic_card_live_rcmd--cover--img"},[createBaseVNode("img",{class:"p_center",src:_imports_0$5})],-1),_hoisted_3$2m={class:"dynamic_card_live_rcmd--mask--top flex_row"},_hoisted_4$1J=["textContent"],_hoisted_5$1k={class:"dynamic_card_live_rcmd--badge flex_row"},_hoisted_6$19=["textContent"],_hoisted_7$15={class:"dynamic_card_live_rcmd--mask--bottom"},_hoisted_8$10=["textContent"],_hoisted_9$U=createBaseVNode("div",{class:"dynamic_card_live_rcmd--tips"},"\u70B9\u51FB\u8FDB\u5165\u8BE6\u60C5\u9875",-1),_sfc_main$21=defineComponent({__name:"DynLiveRcmd",props:{disableInlinePlayer:{type:Boolean,default:!1},playerOption:{type:Object,default:()=>({guide:""})},imgCbStr:{type:String,default:""},imgLazy:{type:String,default:"lazy"},data:{type:Object,required:!0}},setup(a){var y,B;const o=a,s=ref(!1),i=inject("setCardClickBehavior"),c=inject("detailed")?ref(null):inject("scrollContainerRef"),r=ref(null),u=computed(()=>{var C,S;return(S=(C=o.data.card_info)==null?void 0:C.live_play_info)==null?void 0:S.cover}),d=computed(()=>{var C,S;return((S=(C=o.data.card_info)==null?void 0:C.live_play_info)==null?void 0:S.title)||""}),_=computed(()=>{var S;const{live_status:C}=((S=o.data.card_info)==null?void 0:S.live_play_info)||{};return C===1}),f=computed(()=>{var C,S,E;return{leftText:(E=(S=(C=o.data.card_info)==null?void 0:C.live_play_info)==null?void 0:S.watched_show)==null?void 0:E.text_large,rightText:_.value?"\u76F4\u64AD\u4E2D":"\u5DF2\u7ED3\u675F"}}),m=computed(()=>{var C,S;return((S=(C=o.data.card_info)==null?void 0:C.live_play_info)==null?void 0:S.area_name)||""}),p=(B=(y=o.data.card_info)==null?void 0:y.live_play_info)==null?void 0:B.room_id,{isPlaying:v,stopPlayer:g}=useScrollTriggerInlinePlayInjectTarget(c,r,"live",{roomId:p});function $(){events.emit("hidePopover"),g(),openLiveRoomWindow(p)}return i($),(C,S)=>(openBlock(),createElementBlock("div",{class:"dynamic_card_live_rcmd",onClick:withModifiers($,["stop"])},[createBaseVNode("div",{ref_key:"coverRef",ref:r,class:"dynamic_card_live_rcmd--cover"},[_hoisted_2$2x,withDirectives(createVNode(unref(VImg),{class:"dynamic_card_live_rcmd--cover--img","cb-str":a.imgCbStr,src:unref(u),width:555,height:312,loading:a.imgLazy,"bfs-style":"pc-dynamic-cover",rule:"1c",onError:S[0]||(S[0]=E=>s.value=!0)},null,8,["cb-str","src","loading"]),[[vShow,!s.value]])],512),createBaseVNode("div",{class:normalizeClass({"dynamic_card_live_rcmd--mask":!0,"is-hidden":unref(v)})},[createBaseVNode("div",_hoisted_3$2m,[createBaseVNode("div",{class:"dynamic_card_live_rcmd--title",textContent:toDisplayString(unref(d))},null,8,_hoisted_4$1J),createBaseVNode("div",_hoisted_5$1k,[unref(_)?(openBlock(),createElementBlock("div",{key:0,class:"dynamic_card_live_rcmd--badge--left",textContent:toDisplayString(unref(f).leftText)},null,8,_hoisted_6$19)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["dynamic_card_live_rcmd--badge--right flex_center",{"is-active":unref(_)}])},[unref(_)?(openBlock(),createBlock(unref(IcoLiving),{key:0,class:"dynamic_card_live_rcmd--badge--right--icon"})):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(unref(f).rightText),1)],2)])]),createBaseVNode("div",_hoisted_7$15,[createBaseVNode("div",{class:"dynamic_card_live_rcmd--area",textContent:toDisplayString(unref(m))},null,8,_hoisted_8$10)])],2),_hoisted_9$U],8,_hoisted_1$2H))}});var ModuleDynamic=defineComponent({props:{data:{type:Object,required:!0}},setup(a){return()=>createVNode("div",{class:"dynamic_card_content"},[(()=>{switch(a.data.type){case MdlDynType.MDL_DYN_TYPE_FORWARD:return createVNode(DynForward,{data:a.data.dyn_forward},null);case MdlDynType.MDL_DYN_TYPE_ARCHIVE:return createVNode(_sfc_main$23,{data:a.data.dyn_archive},null);case MdlDynType.MDL_DYN_TYPE_DRAW:return createVNode(_sfc_main$22,{data:a.data.dyn_draw},null);case MdlDynType.MDL_DYN_TYPE_LIVE_RCMD:return createVNode(_sfc_main$21,{data:a.data.dyn_live_rcmd},null);default:return null}})()])}});const _hoisted_1$2G={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2w=createBaseVNode("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2Zm0 15c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1Zm1-5c0 .6-.4 1-1 1s-1-.4-1-1V8c0-.6.4-1 1-1s1 .4 1 1v4Z",fill:"currentColor"},null,-1),_hoisted_3$2l=[_hoisted_2$2w];function render$K(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2G,_hoisted_3$2l)}var IcoTips={render:render$K},ModuleItemNull_vue_vue_type_style_index_0_lang="";const _hoisted_1$2F=["onClick"],_hoisted_2$2v=["textContent"],_sfc_main$20=defineComponent({__name:"ModuleItemNull",props:{data:{type:Object,default:()=>({icon:"",text:""})}},setup(a){return(o,s)=>(openBlock(),createElementBlock("div",{class:"dynamic_card_module_item_null",onClick:withModifiers(i=>{},["stop"])},[createVNode(unref(IcoTips)),createBaseVNode("span",{textContent:toDisplayString(a.data.text)},null,8,_hoisted_2$2v)],8,_hoisted_1$2F))}}),_hoisted_1$2E={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2u=createBaseVNode("path",{d:"M9.868 7.25h.6V3.308a.7.7 0 0 1 1.158-.529l6.964 6.037a.9.9 0 0 1 0 1.36l-6.964 6.036a.7.7 0 0 1-1.158-.53V12.04h-.6c-2.055 0-3.594.376-4.917 1.154-1.058.622-1.945 1.483-2.836 2.538.081-2.302.49-4.31 1.49-5.784C4.701 8.33 6.582 7.25 9.868 7.25Z",stroke:"currentColor","stroke-width":"1.2"},null,-1),_hoisted_3$2k=[_hoisted_2$2u];function render$J(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2E,_hoisted_3$2k)}var IcoForward={render:render$J};const _hoisted_1$2D={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2t=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.929 3C4.393 3 1.5 5.7 1.5 9s2.893 6 6.429 6h.505l.918 3 3.367-3h.352c3.536 0 6.429-2.7 6.429-6s-2.893-6-6.429-6H7.93Zm10.285 6c0 2.647-2.307 4.8-5.143 4.8h-.867l-.373.332-1.827 1.629-.334-1.09-.267-.871H7.93c-2.836 0-5.143-2.153-5.143-4.8s2.307-4.8 5.143-4.8h5.142c2.836 0 5.143 2.153 5.143 4.8Z",fill:"currentColor"},null,-1),_hoisted_3$2j=[_hoisted_2$2t];function render$I(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2D,_hoisted_3$2j)}var IcoComment={render:render$I};const _hoisted_1$2C={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2s=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.125 15.62H7.25V6.806H6.125v8.812Zm6.625-10h4.688c.562 0 1.125.25 1.5.75.312.437.375 1.062.25 1.562l-2 6.625c-.313 1.25-1.375 2.126-2.688 2.187H4a2.036 2.036 0 0 1-1.938-1.062c-.187-.375-.312-.75-.312-1.125V7.869c0-.812.438-1.562 1.125-1.937.375-.188.75-.25 1.125-.313h2.813l3.062-3.812c.625-.688 1.75-.75 2.438-.125.374.375.624.875.562 1.437l-.125 2.5Zm4.563 1.124H11.5l.125-1.312.188-2.313a.576.576 0 0 0-.438-.687.504.504 0 0 0-.563.187L7.938 6.307l-.375.5h-3.75c-.126 0-.25.062-.376.125a1.031 1.031 0 0 0-.562.937v6.688c0 .187.063.437.188.564.187.373.562.56.937.498h10.5c.25 0 .438-.062.625-.186.5-.251.875-.689.938-1.25l2-6.564 1.125.25-1.125-.25c.062-.187 0-.437-.063-.625-.188-.125-.438-.25-.688-.25l.125-1.125-.125 1.125Z",fill:"currentColor"},null,-1),_hoisted_3$2i=[_hoisted_2$2s];function render$H(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2C,_hoisted_3$2i)}var IcoLike={render:render$H};const _hoisted_1$2B={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2r=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.125 15.62H7.25V6.806H6.125v8.812Zm6.625-10h4.688c.562 0 1.125.25 1.5.75.312.437.375 1.062.25 1.562l-2 6.625c-.313 1.25-1.375 2.126-2.688 2.187H4a2.036 2.036 0 0 1-1.938-1.062c-.187-.375-.312-.75-.312-1.125V7.869c0-.812.438-1.562 1.125-1.937.375-.188.75-.25 1.125-.313h2.813l3.062-3.812c.625-.688 1.75-.75 2.438-.125.374.375.624.875.562 1.437l-.125 2.5Z",fill:"#F69"},null,-1),_hoisted_3$2h=[_hoisted_2$2r];function render$G(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2B,_hoisted_3$2h)}var IcoLikeActive={render:render$G},ModuleStat_vue_vue_type_style_index_0_lang="";const _hoisted_1$2A={class:"dynamic_card_module_stat flex_center"},_hoisted_2$2q={class:"dynamic_card_module_stat--action--prefix flex_center"},_hoisted_3$2g=["textContent"],_hoisted_4$1I={class:"dynamic_card_module_stat--action--prefix flex_center"},_hoisted_5$1j=["textContent"],_hoisted_6$18={class:"dynamic_card_module_stat--action--prefix flex_center"},_hoisted_7$14=["textContent"],_sfc_main$1$=defineComponent({__name:"ModuleStat",props:{data:{type:Object,required:!0},defaultForwardContent:{type:Array,default:()=>[]}},setup(a){var f,m,p,v,g;const{data:o,defaultForwardContent:s}=a,i=inject("dynamicID"),{likeState:l,likeText:c,handleLike:r}=useDynamicLike(i,{count:((f=o.like)==null?void 0:f.count)||0,active:!!o.like.like_state},"\u70B9\u8D5E"),{forwardText:u,handleForward:d}=useDynamicForward(i,((m=o.forward)==null?void 0:m.count)||0,"\u8F6C\u53D1",s,(p=o.forward)==null?void 0:p.is_forbidden,(v=o.forward)==null?void 0:v.forbidden_msg),{commentText:_}=useDynamicComment(i,((g=o.comment)==null?void 0:g.count)||0,"\u8BC4\u8BBA");return($,y)=>{var B;return openBlock(),createElementBlock("div",_hoisted_1$2A,[createBaseVNode("div",{class:"dynamic_card_module_stat--action flex_center cs_pointer is-forward",onClick:y[0]||(y[0]=withModifiers((...C)=>unref(d)&&unref(d)(...C),["stop"]))},[createBaseVNode("div",_hoisted_2$2q,[createVNode(unref(IcoForward),{class:"dynamic_card_module_stat--action--ico"})]),createBaseVNode("span",{textContent:toDisplayString(unref(u))},null,8,_hoisted_3$2g)]),createBaseVNode("div",{class:normalizeClass(["dynamic_card_module_stat--action flex_center cs_pointer is-comment",{"is-pervious":(B=a.data.comment)==null?void 0:B.is_pervious}]),"data-comment-on":1},[createBaseVNode("div",_hoisted_4$1I,[createVNode(unref(IcoComment),{class:"dynamic_card_module_stat--action--ico"})]),createBaseVNode("span",{textContent:toDisplayString(unref(_))},null,8,_hoisted_5$1j)],2),createBaseVNode("div",{class:normalizeClass(["dynamic_card_module_stat--action flex_center cs_pointer is-like",{"is-active":unref(l).active}]),onClick:y[1]||(y[1]=withModifiers((...C)=>unref(r)&&unref(r)(...C),["stop"]))},[createBaseVNode("div",_hoisted_6$18,[unref(l).active?(openBlock(),createBlock(unref(IcoLikeActive),{key:0,class:"dynamic_card_module_stat--action--ico"})):(openBlock(),createBlock(unref(IcoLike),{key:1,class:"dynamic_card_module_stat--action--ico"}))]),createBaseVNode("span",{textContent:toDisplayString(unref(c))},null,8,_hoisted_7$14)],2)])}}});var Card=defineComponent({name:"DynamicCard",props:{data:{type:Object,required:!0},detailed:{type:Boolean,default:!1}},emits:["remove","refresh"],setup(a,{emit:o}){const{modules:s,type:i,id_str:l}=a.data,c=ref(null);function r(g){c.value=g}provide("dynamicID",l),provide("detailed",a.detailed),provide("setCardClickBehavior",r);const u=inject("dynamicScene"),d=computed(()=>s.find($=>$.module_type==="MODULE_TYPE_AUTHOR").module_author),_=computed(()=>{var $,y,B,C;if(i!=="DYNAMIC_TYPE_FORWARD")return[];const g=s==null?void 0:s.find(S=>S.module_type==="MODULE_TYPE_DESC");return g!=null&&g.module_desc?getDefaultForwardContentNodes({uid:(y=($=d.value)==null?void 0:$.user)==null?void 0:y.mid,name:(C=(B=d.value)==null?void 0:B.user)==null?void 0:C.name},g.module_desc.rich_text_nodes):[]}),f=useTextSelection(),m=g=>{if(f.text.value)return;if(c.value)return c.value();events.emit("hidePopover");const $=Boolean(g.target.dataset.commentOn);events.emit("viewDynamicDetails",{id:l,commentOn:$,scene:u})},p=({type:g,data:$})=>{switch(g){case"REMOVE":o("remove",$!=null&&$.mid?getRemoveAuthorAllDynamicCardFilter($.mid):null);break;case"TOP":o("refresh");break}},v=g=>{switch(g.module_type){case ModuleType.MODULE_TYPE_AUTHOR:return createVNode(_sfc_main$26,{data:g.module_author,onMoreClick:p},null);case ModuleType.MODULE_TYPE_DESC:return createVNode(_sfc_main$25,{data:g.module_desc,unfold:a.detailed},null);case ModuleType.MODULE_TYPE_DYNAMIC:return createVNode(ModuleDynamic,{data:g.module_dynamic},null);case ModuleType.MODULE_TYPE_ITEM_NULL:return createVNode(_sfc_main$20,{data:g.module_item_null},null);case ModuleType.MODULE_TYPE_STAT:return createVNode(_sfc_main$1$,{data:g.module_stat,"default-forward-content":_.value},null);default:return null}};return()=>createVNode("div",{class:"dynamic_card",onClick:m},[s.map(v)])}});const _hoisted_1$2z={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2p=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.284 2.03a.532.532 0 0 0-.456.17c-.176.206-.248.375-.336.625l-.03.088c-.088.253-.2.576-.432.988-.4.707-.771 1.134-1.229 1.535-.375.329-.757.553-1.134.66v7.054a71.399 71.399 0 0 0 5.291-.073c.607-.031 1.134-.332 1.409-.82.385-.685.86-1.69 1.147-2.873.269-1.103.39-2.01.446-2.649.025-.296-.21-.568-.573-.568h-3.322a.5.5 0 0 1-.462-.69v-.001l.003-.007.01-.027a7.863 7.863 0 0 0 .178-.49c.105-.316.218-.706.269-1.047.078-.522.059-.94-.146-1.329-.22-.416-.469-.526-.633-.546Zm1.492 3.137h2.61c.883 0 1.651.708 1.57 1.654a18.69 18.69 0 0 1-.47 2.799 12.517 12.517 0 0 1-1.248 3.127c-.465.828-1.327 1.282-2.228 1.329-.87.044-2.158.092-3.676.092-1.472 0-2.816-.045-3.769-.088-1.072-.05-1.97-.845-2.086-1.936a25.49 25.49 0 0 1-.146-2.642c0-.913.059-1.74.127-2.397.12-1.148 1.104-1.938 2.212-1.938h1.495c.212 0 .542-.104.975-.483.375-.329.675-.668 1.017-1.274.186-.33.272-.577.358-.825l.032-.092c.104-.294.225-.599.52-.944a1.531 1.531 0 0 1 1.33-.512c.551.064 1.059.421 1.403 1.073.347.658.342 1.326.25 1.942a7.302 7.302 0 0 1-.276 1.115Zm-6.11 7.956V6.167h-.994c-.642 0-1.156.448-1.217 1.041-.066.63-.122 1.423-.122 2.294 0 .952.067 1.843.14 2.537.061.575.536 1.014 1.138 1.042.313.014.668.029 1.056.042Z",fill:"currentColor"},null,-1),_hoisted_3$2f=[_hoisted_2$2p];function render$F(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2z,_hoisted_3$2f)}var IcoSmallLike={render:render$F};const _hoisted_1$2y={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2o=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.546 5.167h-3.028c.148-.323.304-.73.363-1.123a4.02 4.02 0 0 0 .012-.963c-.033-.323-.108-.684-.258-.968-.316-.6-.753-1.022-1.277-1.125-.559-.109-1.04.175-1.327.61-.24.364-.334.668-.42.945l-.002.009a4.034 4.034 0 0 1-.372.896c-.342.606-.62.92-.996 1.249-.193.17-.392.285-.574.358v9.095a72.314 72.314 0 0 0 5.418-.079c.853-.045 1.67-.475 2.115-1.256.421-.74.96-1.858 1.286-3.195.305-1.253.432-2.271.483-2.964.064-.852-.629-1.49-1.423-1.49Zm-8.88 8.956V5.167H3.536c-1.029 0-1.943.734-2.06 1.799a23.448 23.448 0 0 0-.142 2.536c0 1.057.079 2.039.16 2.772.112 1.013.947 1.753 1.942 1.8.355.016.77.034 1.232.049Z",fill:"#F69"},null,-1),_hoisted_3$2e=[_hoisted_2$2o];function render$E(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2y,_hoisted_3$2e)}var IcoSmallLikeActive={render:render$E};const _hoisted_1$2x={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2n=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.105 2.773a.167.167 0 0 0-.272.13v2.275a.5.5 0 0 1-.444.496c-.923.105-2.083.437-3.068 1.343-.9.827-1.702 2.175-2.015 4.388.756-1.026 1.595-1.666 2.435-2.04a5.295 5.295 0 0 1 2.636-.427.5.5 0 0 1 .456.498v2.329c0 .14.163.217.272.129l5.127-4.173a.5.5 0 0 0 0-.775L8.105 2.773Zm-1.272.13c0-.984 1.141-1.526 1.903-.906l5.127 4.173a1.5 1.5 0 0 1 0 2.327l-5.127 4.172c-.762.62-1.903.078-1.903-.905V9.916c-.518.005-1.096.1-1.685.362-.765.341-1.58.978-2.321 2.134a.877.877 0 0 1-.97.368c-.327-.087-.662-.395-.617-.87.263-2.767 1.207-4.53 2.404-5.63 1.03-.946 2.205-1.363 3.19-1.535V2.902Z",fill:"currentColor"},null,-1),_hoisted_3$2d=[_hoisted_2$2n];function render$D(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2x,_hoisted_3$2d)}var IcoSmallForward={render:render$D},ForwardItem_vue_vue_type_style_index_0_lang="";const _hoisted_1$2w={class:"dynamic_forward_item"},_hoisted_2$2m=["onClick"],_hoisted_3$2c={class:"dynamic_forward_item--header"},_hoisted_4$1H=["onClick"],_hoisted_5$1i=["textContent"],_hoisted_6$17={class:"dynamic_forward_item--content"},_hoisted_7$13={class:"dynamic_forward_item--footer flex_row"},_hoisted_8$$=["textContent"],_hoisted_9$T=["textContent"],_sfc_main$1_=defineComponent({__name:"ForwardItem",props:{data:{type:Object,required:!0}},setup(a){var f,m,p,v,g;const{data:o}=a,s=computed(()=>{var $;return isVipUser(($=o.user)==null?void 0:$.vip)}),{likeState:i,likeText:l,handleLike:c}=useDynamicLike(o.id_str,{count:((f=o.stat.like)==null?void 0:f.count)||0,active:!!((m=o.stat.like)!=null&&m.state)},""),{forwardText:r,handleForward:u}=useDynamicForward(o.id_str,((p=o.stat.forward)==null?void 0:p.count)||0,"",getDefaultForwardContentNodes({uid:(v=o.user)==null?void 0:v.mid,name:(g=o.user)==null?void 0:g.name},o.content.rich_text_nodes)),d=useRouter(),_=()=>{var $;d.push({name:"Space",query:{mid:($=o.user)==null?void 0:$.mid}}),messageEvents.emit("close")};return($,y)=>(openBlock(),createElementBlock("div",_hoisted_1$2w,[createBaseVNode("div",{class:"dynamic_forward_item--avatar",onClick:withModifiers(_,["stop"])},[createVNode(Avatar,{face:a.data.user.face},null,8,["face"])],8,_hoisted_2$2m),createBaseVNode("div",_hoisted_3$2c,[createBaseVNode("div",{class:normalizeClass(["dynamic_forward_item--uname",{"is-vip":unref(s)}]),onClick:withModifiers(_,["stop"])},[createBaseVNode("span",null,toDisplayString(a.data.user.name),1)],10,_hoisted_4$1H),createBaseVNode("div",{class:"dynamic_forward_item--pub",textContent:toDisplayString(a.data.pub_time)},null,8,_hoisted_5$1i)]),createBaseVNode("div",_hoisted_6$17,[createVNode(unref(RichText),{nodes:a.data.content.rich_text_nodes,unfold:!1,lines:"4"},null,8,["nodes"])]),createBaseVNode("div",_hoisted_7$13,[createBaseVNode("div",{class:normalizeClass(["dynamic_forward_item--action",{"is-active":unref(i).active}]),onClick:y[0]||(y[0]=withModifiers((...B)=>unref(c)&&unref(c)(...B),["stop"]))},[unref(i).active?(openBlock(),createBlock(unref(IcoSmallLikeActive),{key:0})):(openBlock(),createBlock(unref(IcoSmallLike),{key:1})),unref(l)?(openBlock(),createElementBlock("span",{key:2,textContent:toDisplayString(unref(l))},null,8,_hoisted_8$$)):createCommentVNode("",!0)],2),createBaseVNode("div",{class:"dynamic_forward_item--action",onClick:y[1]||(y[1]=withModifiers((...B)=>unref(u)&&unref(u)(...B),["stop"]))},[createVNode(unref(IcoSmallForward)),unref(r)?(openBlock(),createElementBlock("span",{key:0,textContent:toDisplayString(unref(r))},null,8,_hoisted_9$T)):createCommentVNode("",!0)])])]))}});var DetailsViewer_vue_vue_type_style_index_0_lang="";const _hoisted_1$2v=["onClick"],_hoisted_2$2l={class:"dynamic_details_viewer--panel--tabs flex_start flex_inline"},_hoisted_3$2b={class:"dynamic_details_viewer--panel--tabscontent"},_hoisted_4$1G={class:"dynamic_details_viewer--forward",style:{padding:"0 20px"}},_hoisted_5$1h={key:0,class:"dynamic_details_viewer--panel--empty"},_hoisted_6$16=createTextVNode(" \u8FD8\u6CA1\u6709\u4EBA\u8F6C\u53D1"),_hoisted_7$12=createBaseVNode("br",null,null,-1),_hoisted_8$_=createTextVNode("\u5FEB\u8F6C\u53D1\u5206\u4EAB\u7ED9\u5C0F\u4F19\u4F34\u5427~ "),_hoisted_9$S=[_hoisted_6$16,_hoisted_7$12,_hoisted_8$_],_hoisted_10$L={class:"dynamic_details_viewer--comment"},_hoisted_11$H={key:1,class:"dynamic_details_viewer--error"},_hoisted_12$B=createBaseVNode("img",{src:_imports_1},null,-1),_hoisted_13$u=["onClick"],_hoisted_14$r=["onClick"],_sfc_main$1Z=defineComponent({__name:"DetailsViewer",props:{active:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1}},setup(a,{expose:o}){const s=a,i=-10,l=[{key:"1",name:"\u8F6C\u53D1"},{key:"2",name:"\u8BC4\u8BBA"}],{routePositions:c}=storeToRefs(useRoutePositionsStore()),r=ref(null),u=j=>{c.value.DynamicComment=j.target.scrollTop};onActivated(()=>{setTimeout(()=>{if(r.value){const j=c.value.DynamicComment;isNum(j)&&(r.value.scrollTop=j)}})}),provide("galleryFixed",s.fixed);const d=inject("pageSpmId"),_=inject("dynamicScene"),f=ref("2"),m=ref(null),p=ref(null),v=reactive({visible:!1,transitionStatus:"ready",toggleResolve:null,commentOn:!1,showContent:!1,showPopup:!1,showSubPage:!1,loading:!1,error:!1,errorMsg:"",id:"",rid:"",type:0,jumpReplyId:0,card:null,forward:{noMore:!1,items:reactive([]),offset:"",page:0,total:0}}),{commentInstance:g,initCommentInstance:$,clearComment:y}=useCommentModule(d,"dynamic"),B=computed(()=>{var F;const j={oid:0,type:0};if(!v.card)return j;const O=(F=v.card.modules)==null?void 0:F.find(U=>U.module_type==="MODULE_TYPE_STAT");return O&&(j.oid=O.module_stat.comment.comment_id,j.type=O.module_stat.comment.comment_type),j}),C=()=>{v.error||r.value.scrollTo({top:p.value.offsetHeight+i,behavior:"smooth"})},S={start(){if(v.toggleResolve){this.show(),v.toggleResolve=null;return}v.visible=!0,v.transitionStatus="start"},async show(){v.showContent=!0,v.transitionStatus="entering",await nextTick(),r.value.scrollTo({top:0}),v.commentOn&&setTimeout(()=>{C()},400)},hide(){v.showContent=!1,v.transitionStatus="leaving"},end(){if(v.toggleResolve){v.toggleResolve();return}v.visible=!1,v.transitionStatus="end"}};function E(){v.showSubPage=!1,setTimeout(()=>{y("dialog")},300)}function k(){v.showPopup=!1,setTimeout(()=>{y("detail")},300)}const b=(j=!1)=>{if(j){v.showPopup&&setTimeout(()=>{k(),v.showSubPage&&setTimeout(()=>{E()},150)},150),S.hide();return}if(v.transitionStatus==="entered"){if(v.showPopup){if(v.showSubPage){E();return}k();return}S.hide()}};dynamicEvents.on("closeCommentDetails",()=>b(!0));const V=()=>{events.emit("removeDynamic",{id:v.id}),b()};async function A(){if(f.value==="1"){if(v.forward.items.length)return;await N()}else{if(g.value)return;await nextTick(),await R()}}watch(f,()=>A());async function x(){!v.forward.items.length||await N()}const T=()=>{v.transitionStatus==="start"&&S.show()},I=inject("galleryContainer");async function R(){const j=getFirstParentClassName(m.value);$(`.${j} .dynamic_details_viewer--comment`,{oid:B.value.oid,type:B.value.type,jumpReplyId:v.jumpReplyId,detailContainerSelector:`.${j} .dynamic_details_viewer--comment--detail`,dialogContainerSelector:`.${j} .dynamic_details_viewer--comment--dialog`,scrollContainer:r.value,onViewDetailReply:()=>{v.showPopup=!0},onBackToNormalReply:()=>{k()},onViewDialogReply:()=>{v.showSubPage=!0},onBackToDetailReply:()=>{E()},onChangeReplyCount:O=>{events.emit("syncDynamicState",{id:v.id,module:"stat",key:"commentState",state:{count:O}})},onPreviewImage:(O,F)=>{events.emit("hidePopover"),events.emit("visitGallery",{container:I,downloadable:!1,items:O.map(U=>({src:U.url,width:U.width,height:U.height,size:U.size,tags:[]})),index:F,fixed:s.fixed})}})}async function N(){if(!v.forward.noMore){v.forward.page++;try{const{has_more:j,items:O,offset:F,total:U}=await getDynamicDetailForward({id:v.id,offset:v.forward.offset,page:v.forward.page});if(typeof O=="undefined"&&typeof j=="undefined"){v.forward.page--;return}v.forward.offset=F,O!=null&&O.length&&v.forward.items.push(...O),j?O!=null&&O.length||N():v.forward.noMore=!0,v.forward.total=U}catch(j){console.log(j)}}}const w=async()=>{if(!v.loading){v.loading=!0;try{const j=await getDynamicDetail(v.type?v.rid:v.id,!1,v.type);if(!j.item){v.error=!0,v.loading=!1;return}v.card=j.item,await A()}catch(j){console.log(j),v.error=!0,v.errorMsg=j.message||""}v.loading=!1}};function D(){v.card=null,v.error=!1,v.errorMsg="",clearArray(v.forward.items),v.forward.offset="",v.forward.page=0,v.forward.total=0,v.forward.noMore=!1,y(),f.value="2"}const L=async({id:j,commentOn:O,rid:F,type:U,scene:W,jumpReplyId:ne})=>{if(_===W&&!!s.active&&!(!j&&!(F&&U))){if(v.commentOn=O,j!==v.id||F!==v.rid&&U!==v.type)v.visible&&await new Promise(H=>{v.toggleResolve=H,b()}),v.id=j,v.rid=F,v.type=U,v.jumpReplyId=ne||0;else if(v.visible){v.commentOn&&C();return}D(),await w(),S.start()}};events.on("viewDynamicDetails",L),document.addEventListener("keyup",P);function P(j){if(!!v.showContent)switch(j.keyCode){case 27:b();break}}return onBeforeUnmount(()=>{events.off("viewDynamicDetails",L),dynamicEvents.off("closeCommentDetails")}),o({close:()=>b(!0)}),(j,O)=>{const F=resolveComponent("v-tab-item"),U=resolveComponent("v-tabs");return openBlock(),createElementBlock("div",{class:normalizeClass(["dynamic_details_viewer flex_col",{"is-transparent":!v.visible,"is-fixed":a.fixed,hidden:!v.showContent}]),ref_key:"rootEl",ref:m,onTransitionend:T,onClick:O[4]||(O[4]=withModifiers(()=>b(),["stop"]))},[withDirectives(createBaseVNode("div",{onClick:O[0]||(O[0]=withModifiers(()=>b(),["stop"])),class:"dynamic_details_viewer--btn p_absolute bd_radius_50 flex_center cs_pointer"},[createVNode(unref(IcoClose$1),{class:"dynamic_details_viewer--btn--close"})],512),[[vShow,v.visible]]),createVNode(Transition,{name:"dynamic_details_viewer--transition",onAfterEnter:O[2]||(O[2]=W=>v.transitionStatus="entered"),onAfterLeave:O[3]||(O[3]=W=>S.end())},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{ref_key:"pageScrollRef",ref:r,class:normalizeClass(["dynamic_details_viewer--content ov_auto_y",{"is-fade":v.showPopup}]),onClick:withModifiers(W=>{},["stop"]),onScrollPassive:u},[v.card?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",{class:"dynamic_details_viewer--card",ref_key:"cardRef",ref:p},[(openBlock(),createBlock(unref(Card),{key:v.card.id_str,data:v.card,detailed:"",onRemove:V},null,8,["data"]))],512),createBaseVNode("div",{class:"dynamic_details_viewer--panel",style:normalizeStyle({marginTop:i+"px"})},[createBaseVNode("div",_hoisted_2$2l,[createVNode(U,{class:"mt_xs no_drag","auto-adjustment":"","active-key":f.value,"onUpdate:active-key":O[1]||(O[1]=W=>f.value=W),"slide-to-hover":!1,"active-pink":!0,"no-padding-left":!1,"tabs-gutter":32,"slider-width":18},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(l,W=>createVNode(F,{key:W.key,tab:W.name},null,8,["tab"])),64))]),_:1},8,["active-key"])]),createBaseVNode("div",_hoisted_3$2b,[withDirectives(createBaseVNode("div",_hoisted_4$1G,[(openBlock(!0),createElementBlock(Fragment,null,renderList(v.forward.items,W=>(openBlock(),createBlock(_sfc_main$1_,{key:W.id_str,data:W},null,8,["data"]))),128)),v.forward.items.length===0&&v.forward.noMore?(openBlock(),createElementBlock("div",_hoisted_5$1h,_hoisted_9$S)):createCommentVNode("",!0),createVNode(_sfc_main$2d,{onTrigger:x})],512),[[vShow,f.value==="1"]]),withDirectives(createBaseVNode("div",_hoisted_10$L,null,512),[[vShow,f.value==="2"]])])],4)],64)):v.error?(openBlock(),createElementBlock("div",_hoisted_11$H,[_hoisted_12$B,createBaseVNode("p",null,toDisplayString(v.errorMsg||"\u539F\u52A8\u6001\u4E0D\u89C1\u60F9~"),1)])):(openBlock(),createBlock(CardSkeleton,{key:2}))],42,_hoisted_1$2v),[[vShow,v.showContent]])]),_:1}),createVNode(Transition,{name:"dynamic_details_viewer--popup--transition"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:"dynamic_details_viewer--popup",onClick:withModifiers(W=>{},["stop"])},[createBaseVNode("div",{class:normalizeClass(["dynamic_details_viewer--comment--detail",{"is-left":v.showSubPage}])},null,2),createVNode(Transition,{name:"dynamic_details_viewer--slide--transition"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:"dynamic_details_viewer--comment--dialog",onClick:withModifiers(W=>{},["stop"])},null,8,_hoisted_14$r),[[vShow,v.showSubPage]])]),_:1})],8,_hoisted_13$u),[[vShow,v.showPopup]])]),_:1})],34)}}}),_hoisted_1$2u={width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2k=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.43 3.51c.17.17.17.446 0 .617L5.025 9.53a.679.679 0 0 1-.96 0l-2.98-2.98a.436.436 0 1 1 .617-.617l2.843 2.843L9.813 3.51c.17-.17.446-.17.617 0Z",fill:"#fff"},null,-1),_hoisted_3$2a=[_hoisted_2$2k];function render$C(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2u,_hoisted_3$2a)}var IcoCorrectBold={render:render$C},Radio_vue_vue_type_style_index_0_lang="";const _hoisted_1$2t={class:"base_radio--input"},_hoisted_2$2j={class:"base_radio--inner"},_hoisted_3$29=["value"],_hoisted_4$1F={class:"base_radio--label"},_sfc_main$1Y=defineComponent({__name:"Radio",props:{active:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1}},emits:["update:active"],setup(a,{emit:o}){const s=a;function i(){o("update:active",s.value)}return(l,c)=>(openBlock(),createElementBlock("label",{class:normalizeClass(["base_radio",{"is-checked":a.active===a.value}]),role:"radio",onClick:i},[createBaseVNode("span",_hoisted_1$2t,[createBaseVNode("span",_hoisted_2$2j,[createVNode(unref(IcoCorrectBold))]),createBaseVNode("input",{class:"base_radio--original",type:"radio","aria-hidden":"true",value:a.value},null,8,_hoisted_3$29)]),createBaseVNode("span",_hoisted_4$1F,[renderSlot(l.$slots,"default")])],2))}});var ReportPopup_vue_vue_type_style_index_0_lang="";const _hoisted_1$2s={class:"dynamic_report_popup--header"},_hoisted_2$2i=createBaseVNode("div",{class:"dynamic_report_popup--title"},"\u4E3E\u62A5",-1),_hoisted_3$28=["onClick"],_hoisted_4$1E={class:"dynamic_report_popup--content"},_hoisted_5$1g={class:"dynamic_report_popup--section--title"},_hoisted_6$15={class:"dynamic_report_popup--section--content"},_hoisted_7$11={class:"dynamic_report_popup--section"},_hoisted_8$Z=createTextVNode("\u5176\u4ED6"),_hoisted_9$R={class:"dynamic_report_popup--footer flex_between"},_hoisted_10$K=createTextVNode("\u53D6\u6D88"),_hoisted_11$G=createTextVNode("\u786E\u5B9A"),_sfc_main$1X=defineComponent({__name:"ReportPopup",props:{active:{type:Boolean,default:!1}},emits:["done"],setup(a,{expose:o,emit:s}){const i=a,{userInfo:l}=storeToRefs(useUserInfoStore()),c=ref(null),r=ref(-1),u=ref(""),d=reactive([{title:"\u8FDD\u53CD\u6CD5\u5F8B\u6CD5\u89C4",options:[{label:"\u8272\u60C5",value:1},{label:"\u8FDD\u6CD5\u4FE1\u606F",value:3}]},{title:"\u4FB5\u72AF\u4E2A\u4EBA\u6743\u76CA",options:[{label:"\u4EBA\u8EAB\u653B\u51FB",value:5}]},{title:"\u6709\u5BB3\u793E\u533A\u73AF\u5883",options:[{label:"\u5783\u573E\u5E7F\u544A",value:4},{label:"\u8BDD\u9898\u4E0D\u76F8\u5173",value:7},{label:"\u5F15\u6218",value:8}]}]),_={id:"",uid:0};function f(){g()}async function m(){if(r.value===-1)return toastAsync({content:"\u8BF7\u9009\u62E9\u4E3E\u62A5\u539F\u56E0"});if(r.value===0&&!u.value)return toastAsync({content:"\u8BF7\u586B\u5199\u4E3E\u62A5\u7406\u7531"});try{await postDynamicReport({id:_.id,uid:_.uid,type:r.value,desc:u.value}),toastAsync({content:"\u60A8\u7684\u4E3E\u62A5\u5DF2\u63D0\u4EA4\u6210\u529F"}),g()}catch{toastAsync({content:"\u63D0\u4EA4\u5931\u8D25"})}}function p(){r.value=-1,u.value="",_.id="",_.uid=0}const v=y=>{c.value.show(),_.id=y.id,_.uid=y.uid},g=async()=>{p(),c.value.hide()},$=({id:y,uid:B})=>{if(!!i.active){if(!l.value.isLogin){requestLogin("reportPopup.onReportDynamic");return}v({id:y,uid:B})}};return events.on("reportDynamic",$),onBeforeUnmount(()=>{events.off("reportDynamic",$)}),o({show:v,hide:g}),(y,B)=>{const C=resolveComponent("VButton");return openBlock(),createBlock(VPopup,{"custom-class":"dynamic_report_popup",ref_key:"popupRef",ref:c,onWrapClick:g},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2s,[_hoisted_2$2i,createBaseVNode("div",{class:"dynamic_report_popup--close",onClick:withModifiers(g,["stop"])},[createVNode(unref(IcoClose))],8,_hoisted_3$28)]),createBaseVNode("div",_hoisted_4$1E,[(openBlock(!0),createElementBlock(Fragment,null,renderList(d,(S,E)=>(openBlock(),createElementBlock("div",{class:"dynamic_report_popup--section",key:E},[createBaseVNode("div",_hoisted_5$1g,toDisplayString(S.title),1),createBaseVNode("div",_hoisted_6$15,[(openBlock(!0),createElementBlock(Fragment,null,renderList(S.options,(k,b)=>(openBlock(),createElementBlock("div",{key:b,class:"dynamic_report_popup--section--option"},[createVNode(_sfc_main$1Y,{value:k.value,active:r.value,"onUpdate:active":B[0]||(B[0]=V=>r.value=V)},{default:withCtx(()=>[createTextVNode(toDisplayString(k.label),1)]),_:2},1032,["value","active"])]))),128))])]))),128)),createBaseVNode("div",_hoisted_7$11,[createVNode(_sfc_main$1Y,{value:0,active:r.value,"onUpdate:active":B[1]||(B[1]=S=>r.value=S)},{default:withCtx(()=>[_hoisted_8$Z]),_:1},8,["active"]),withDirectives(createBaseVNode("textarea",{class:"dynamic_report_popup--desc","onUpdate:modelValue":B[2]||(B[2]=S=>u.value=S),type:"text",maxlength:"60",placeholder:"\u8BF7\u586B\u5199\u4E3E\u62A5\u7406\u7531"},null,512),[[vShow,r.value===0],[vModelText,u.value]])])]),createBaseVNode("div",_hoisted_9$R,[createVNode(C,{class:"dynamic_report_popup--btn",onClick:f},{default:withCtx(()=>[_hoisted_10$K]),_:1}),createVNode(C,{class:"dynamic_report_popup--btn",onClick:m,type:"pink"},{default:withCtx(()=>[_hoisted_11$G]),_:1})])]),_:1},512)}}}),_sfc_main$1W=defineComponent({__name:"AllSupplements",props:{active:{type:Boolean,default:!1},detailsViewerFixed:{type:Boolean,default:!1}},setup(a,{expose:o}){const s=ref(null);function i(){events.emit("leaveGallery"),s.value&&s.value.close()}return onBeforeUnmount(()=>{i()}),o({close:i}),(l,c)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(_sfc_main$1Z,{ref_key:"detailsViewer",ref:s,active:a.active,fixed:a.detailsViewerFixed},null,8,["active","fixed"]),createVNode(_sfc_main$2A,{active:a.active},null,8,["active"]),createVNode(_sfc_main$1X,{active:a.active},null,8,["active"])],64))}});var Message_vue_vue_type_style_index_0_scoped_true_lang="",Message_vue_vue_type_style_index_1_lang="";const _withScopeId$k=a=>(pushScopeId("data-v-5c063ba6"),a=a(),popScopeId(),a),_hoisted_1$2r={class:"message-panel-container"},_hoisted_2$2h={class:"header"},_hoisted_3$27=_withScopeId$k(()=>createBaseVNode("span",{class:"title"},"\u6D88\u606F",-1)),_hoisted_4$1D={class:"nav-tabs"},_hoisted_5$1f={class:"num-wrap"},_hoisted_6$14=["textContent","onClick"],_hoisted_7$10={class:"content"},_hoisted_8$Y=_withScopeId$k(()=>createBaseVNode("div",{id:"message-pages-container"},null,-1)),_hoisted_9$Q={class:"message-panel-supplements"},_hoisted_10$J=_withScopeId$k(()=>createBaseVNode("div",{class:"message-panel-gallery"},null,-1)),_sfc_main$1V=defineComponent({__name:"Message",props:{visible:{type:Boolean,default:!1}},emits:["change"],setup(a,{emit:o}){const s=a;provide("pageSpmId",""),provide("dynamicScene","message"),provide("galleryContainer",".message-panel-gallery");const i=[{key:"chat",name:"\u804A\u5929\u5217\u8868",component:MessageIM},{key:"reply",name:"\u56DE\u590D\u6211\u7684",component:_sfc_main$2a},{key:"at",name:"@\u6211\u7684",component:_sfc_main$29},{key:"like",name:"\u6536\u5230\u7684\u8D5E",component:_sfc_main$28}],l=[52,148,228,324],c=ref(null),r=ref(null),u=ref(null),d=ref(!1),_=ref("chat"),f=useMessageStore(),{notifyType:m,unreadCount:p,activeSession:v,activeComment:g,activeLikeDetails:$,messagePanelVisibleLock:y}=storeToRefs(f),B=computed(()=>({chat:p.value.chat+p.value.sys_msg,reply:p.value.reply,at:p.value.at,like:p.value.like})),C=()=>{var N;return(N=u.value)==null?void 0:N.close()},S=()=>f.closeSubPage(),E=()=>C(),k=N=>{if(!s.visible)return;const w=document.querySelector(".app_sidebar .settings-item.message"),D=document.querySelector(".app_sidebar .settings-item.theme"),L=document.querySelector(".app_space .message-btn"),P=document.querySelector(".base_alert"),j=document.querySelector(".message-panel-supplements > *"),O=document.querySelector(".message-panel-gallery > .v_gallery");y.value||N.composedPath().some(F=>[c==null?void 0:c.value,w,D,L,P,j,O].includes(F))||(o("change",!1),setTimeout(()=>{S()},300))};onMounted(()=>{d.value=!0,messageEvents.on("close",()=>{o("change",!1)}),messageEvents.on("openMessage",()=>{_.value="chat"}),document.body.addEventListener("contextmenu",k,{passive:!0,capture:!0}),document.body.addEventListener("click",k,{passive:!0,capture:!0})}),onBeforeUnmount(()=>{document.body.removeEventListener("contextmenu",k,{capture:!0}),document.body.removeEventListener("click",k,{capture:!0}),messageEvents.off("close")});const b=ref(s.visible);watch(()=>s.visible,async()=>{s.visible?(b.value=!1,await nextTick(),b.value=!0):C()});const V=computed(()=>i.find(N=>N.key===_.value)),A=N=>{_.value=N,N!=="chat"&&(p.value[N]=0)},x=computed(()=>v.value||g.value||$.value),T=f.init();onBeforeUnmount(T),provide("viewComment",N=>{r.value.view(N)});let I=Date.now();const R=N=>{allCustomReport({type:"pv",spm_info:`main.${N}.0.0`},{appPageViewInfo:{duration:Date.now()-I,pvstart:I,pvend:Date.now()}})};return watch(()=>s.visible,N=>{N?I=Date.now():R(_.value)}),watch(_,(N,w)=>{const D=Date.now();D-I>1e3&&R(w),I=D}),(N,w)=>{const D=resolveComponent("v-tab-item"),L=resolveComponent("v-tabs");return openBlock(),createBlock(Teleport,{to:"body"},[createBaseVNode("div",_hoisted_1$2r,[createVNode(Transition,{name:"message-drawer"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:"message-panel",ref_key:"messagePanel",ref:c,onClickCapture:E},[d.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["message-home",{"is-back":unref(x)}])},[createBaseVNode("div",_hoisted_2$2h,[_hoisted_3$27,createVNode(unref(IcoSetting),{class:"setting",onClick:unref(f).toSettingsPage},null,8,["onClick"])]),createBaseVNode("div",_hoisted_4$1D,[b.value?(openBlock(),createBlock(L,{key:0,class:"no_drag","auto-adjustment":"",activeKey:_.value,"onUpdate:activeKey":w[0]||(w[0]=P=>_.value=P),"slide-to-hover":!1,"active-pink":!0,"no-padding-left":!0,"tabs-gutter":36,"slider-width":18,onTabChange:A},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(i,P=>createVNode(D,{key:P.key,tab:P.name,showZero:!1},null,8,["tab"])),64))]),_:1},8,["activeKey"])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_5$1f,[(openBlock(),createElementBlock(Fragment,null,renderList(i,(P,j)=>withDirectives(createBaseVNode("span",{class:"num",key:P.key,style:normalizeStyle({left:l[j]+"px"}),textContent:toDisplayString(unref(B)[P.key]>99?"99+":unref(B)[P.key]),onClick:O=>A(P.key)},null,12,_hoisted_6$14),[[vShow,[0,1].includes(unref(m))&&unref(B)[P.key]>0]])),64))])]),createBaseVNode("div",_hoisted_7$10,[(openBlock(),createBlock(resolveDynamicComponent(unref(V).component)))])],2)):createCommentVNode("",!0),_hoisted_8$Y],544),[[vShow,a.visible]])]),_:1})]),withDirectives(createBaseVNode("div",_hoisted_9$Q,[createVNode(_sfc_main$1W,{ref_key:"dynamicAllSupplements",ref:u,active:a.visible},null,8,["active"])],512),[[vShow,a.visible]]),_hoisted_10$J])}}});var MessagePanel=_export_sfc(_sfc_main$1V,[["__scopeId","data-v-5c063ba6"]]),AppSidebar_vue_vue_type_style_index_0_lang="";const _hoisted_1$2q={class:"app_sidebar draggable flex_col_between py_xl text_center"},_hoisted_2$2g={class:"app_sidebar--pages"},_hoisted_3$26={class:"app_sidebar--pages-wrap"},_hoisted_4$1C=createBaseVNode("p",{class:"b_text text3"},"\u9996\u9875",-1),_hoisted_5$1e=createBaseVNode("p",{class:"b_text text3"},"\u7CBE\u9009",-1),_hoisted_6$13={class:"pages-item"},_hoisted_7$$=createBaseVNode("p",{class:"b_text text3"},"\u52A8\u6001",-1),_hoisted_8$X=createBaseVNode("p",{class:"b_text text3"},"\u6211\u7684",-1),_hoisted_9$P={class:"app_sidebar--settings"},_hoisted_10$I={class:"settings-item pb_xs",title:"\u7A7A\u95F4"},_hoisted_11$F={key:0},_hoisted_12$A=["src"],_hoisted_13$t=["src"],_hoisted_14$q={key:1},_hoisted_15$o=["src"],_hoisted_16$n={key:0,class:"msg-dot"},_hoisted_17$l=["textContent"],_hoisted_18$l={class:"settings-item",title:"\u8BBE\u7F6E"},_sfc_main$1U=defineComponent({__name:"AppSidebar",setup(a){const{appTheme:o}=storeToRefs(useAppInfoStore()),s=useRoute(),i=useRouter(),l=ref(!1),c=ref(""),r=ref(""),u=ref(""),d=ref(null),_=computed(()=>!!s.meta.isSubPage||!!s.query.allowGoBack),f=computed(()=>s.path.startsWith("/page/home")&&!_.value),m=computed(()=>s.path.startsWith("/page/dynamic")),p=computed(()=>s.path.startsWith("/page/mine")),v=computed(()=>s.name==="Settings"),g=computed(()=>s.name==="Space"),$=ref(Math.random()),y=ref(!1);let B=!1,C="",S=null,E=null;const{abTestInfo:k}=storeToRefs(useAbTestStore()),{userInfo:b}=storeToRefs(useUserInfoStore()),{lastRootRouteName:V,isOnHistoryGoBack:A,subRoutesStack:x}=storeToRefs(useConfigStore()),T=useMessageStore(),{notifyType:I,totalUnreadCount:R,settingFromMessage:N,spaceFromMessage:w}=storeToRefs(T),{localSpmId:D}=storeToRefs(useSearchStore()),L=computed(()=>b.value.face?getBmgSrc(b.value.face,{w:30*window.devicePixelRatio|0,h:30*window.devicePixelRatio|0,s:!0,ext:"webp",style:"pc-avatar"}):_imports_0$2),P=()=>{clearTimeout(S),y.value=!1;const oe=new Image;oe.onload=()=>{y.value=!0},oe.onerror=()=>{S=setTimeout(()=>P(),1e4)},oe.src=L.value},j=()=>clearTimeout(S),O=()=>{A.value=!0,clearTimeout(E),E=setTimeout(()=>A.value=!1,500)},F=()=>{allCustomReport({type:"click",spm_info:"main.main.main-page.page-back"},{msg:JSON.stringify({page:D.value})}),_.value&&(N.value&&v.value?(N.value=!1,l.value=!0):w.value&&g.value&&(w.value=!1,l.value=!0),B=!0,C=location.href,i.back(),O(),setTimeout(()=>{location.href===C?(i.back(),setTimeout(()=>{location.href===C?i.replace({name:V.value||"Home"}):U()},200)):U()},200))},U=()=>{!x.value.length&&_.value&&(B=!0,i.back(),setTimeout(()=>U()))},W=()=>{_.value?(B?x.value.pop():(x.value.push(s.name),x.value.length>2&&x.value.shift()),B=!1):(x.value=[],B=!1,V.value=s.name)},ne=oe=>{oe.preventDefault(),!f.value&&c.value?i.push({path:c.value}):i.push({name:"HomeRecommends"})},H=()=>{s.name==="Selected"&&selectedEvents.emit("refreshSelectedPage")},M=oe=>{oe.preventDefault(),!p.value&&u.value&&u.value!=="/page/mine-download-collection"?i.push({path:u.value}):i.push({name:"MineHistory"})},ee=()=>{requestLogin("appSidebar.handleAvatarClick")},G=()=>{k.value.sidebar_upload_toweb?openInBrowser$1("https://member.bilibili.com/platform/upload/video/frame","sidebar.UploadVideo"):openUploadWindow()},Q=()=>{b.value.isLogin?(l.value=!l.value,l.value&&(w.value=!1,N.value=!1,T.updateNewSessionList())):requestLogin("appSidebar.handleMessageClick")};messageEvents.on("openMessagePanel",()=>{l.value||(l.value=!0)}),messageEvents.on("closeMessagePanel",()=>{l.value&&(l.value=!1,w.value=!1,N.value=!1)});const te=()=>{i.push({name:"Space",query:{mid:""}})};let ce=null;const $e=async oe=>{preloadThemeTransition(),ce=(await captureWindow()).data},we=()=>{ce&&(ce=null)};let _e=!1;const ke=async oe=>{if(_e)return;_e=!0;let ie=!1;try{const ye=ce?await ce:(await captureWindow()).data;ce=null,setMainWindowTheme(oe),ie=!0;const Te=d.value.getBoundingClientRect();await themeTransition(ye,Te,oe)}catch(ye){console.info(ye),ie||setMainWindowTheme(oe)}finally{_e=!1}};return useIpcListener("window/updateMainWindowTheme",({data:oe})=>{setMainWindowTheme(oe)}),watch(_,oe=>{oe||events.emit("quitSearch")}),watch(b,oe=>{oe.isLogin&&P(),$.value=Math.random()},{immediate:!0}),watch(s,()=>{W(),f.value?c.value=s.path:m.value?r.value=s.path:p.value&&(u.value=s.path)},{immediate:!0}),(oe,ie)=>{const ye=resolveComponent("v-button");return openBlock(),createElementBlock("div",_hoisted_1$2q,[createBaseVNode("div",_hoisted_2$2g,[createVNode(ye,{class:normalizeClass(["app_sidebar--pages-back no_drag",{mt_xs:unref(IS_MAC),deactive:!unref(_)}]),active:unref(_),"active-shrink":unref(_),onClick:F},{default:withCtx(()=>[createVNode(unref(IcoArrowLeft))]),_:1},8,["active","active-shrink","class"]),createBaseVNode("ul",_hoisted_3$26,[createBaseVNode("li",{class:"pages-item",onClickCapture:ne},[createVNode(unref(RouterLink),{class:"router-link",to:"/page/home"},{default:withCtx(()=>[createVNode(unref(IcoHome)),_hoisted_4$1C]),_:1})],32),unref(k).sidebar_selected_hide2_r?createCommentVNode("",!0):(openBlock(),createElementBlock("li",{key:0,class:"pages-item",onClickCapture:H},[createVNode(unref(RouterLink),{class:"router-link",to:"/page/selected"},{default:withCtx(()=>[createVNode(unref(IcoSelected)),_hoisted_5$1e]),_:1})],32)),createBaseVNode("li",_hoisted_6$13,[createVNode(unref(RouterLink),{class:"router-link",to:"/page/dynamic"},{default:withCtx(()=>[createVNode(unref(IcoDynamic)),_hoisted_7$$]),_:1})]),createBaseVNode("li",{class:"pages-item",onClickCapture:M},[createVNode(unref(RouterLink),{class:"router-link",to:"/page/mine"},{default:withCtx(()=>[createVNode(unref(IcoMine)),_hoisted_8$X]),_:1})],32)])]),createBaseVNode("ul",_hoisted_9$P,[createBaseVNode("li",_hoisted_10$I,[unref(b).isLogin?(openBlock(),createElementBlock("div",_hoisted_11$F,[y.value?(openBlock(),createElementBlock("img",{class:"avatar u_drag_none",src:unref(L),key:$.value,onError:P,onLoad:j,onClick:te},null,40,_hoisted_12$A)):(openBlock(),createElementBlock("img",{key:1,class:"avatar u_drag_none",src:unref(_imports_0$2),onClick:te},null,8,_hoisted_13$t))])):(openBlock(),createElementBlock("div",_hoisted_14$q,[createBaseVNode("img",{class:"avatar u_drag_none",src:unref(_imports_0$2),onLoad:j,onClick:ee},null,40,_hoisted_15$o)]))]),unref(k).sidebar_upload_hide_r?createCommentVNode("",!0):(openBlock(),createElementBlock("li",{key:0,class:"settings-item",title:"\u6295\u7A3F",onClick:G},[createVNode(unref(IcoUpload),{class:"ico-upload"})])),createBaseVNode("li",{class:"settings-item message",title:"\u6D88\u606F\uFF08X\uFF09",onClick:Q},[createVNode(unref(IcoMessage),{class:normalizeClass({active:l.value})},null,8,["class"]),unref(I)===2&&unref(R)>0?(openBlock(),createElementBlock("span",_hoisted_16$n)):createCommentVNode("",!0),[0,1].includes(unref(I))&&unref(R)>0?(openBlock(),createElementBlock("span",{key:1,class:"msg-num",textContent:toDisplayString(unref(R)>99?"99+":unref(R))},null,8,_hoisted_17$l)):createCommentVNode("",!0),unref(b).isLogin?(openBlock(),createBlock(MessagePanel,{key:2,visible:l.value,onChange:ie[0]||(ie[0]=Te=>l.value=Te)},null,8,["visible"])):createCommentVNode("",!0)]),createBaseVNode("li",{ref_key:"themeBtn",ref:d,class:"settings-item theme",title:"\u4E3B\u9898",onMouseenter:ie[1]||(ie[1]=Te=>$e(unref(o)!=="dark"?"dark":"light")),onMouseleave:we,onClick:ie[2]||(ie[2]=Te=>ke(unref(o)!=="dark"?"dark":"light"))},[withDirectives(createVNode(unref(IcoDark),null,null,512),[[vShow,unref(o)!=="dark"]]),withDirectives(createVNode(unref(IcoLight),null,null,512),[[vShow,unref(o)==="dark"]])],544),createBaseVNode("li",_hoisted_18$l,[createVNode(unref(RouterLink),{class:"router-link",to:"/page/settings"},{default:withCtx(()=>[createVNode(unref(IcoSetting),{class:normalizeClass({brand_pink:unref(v)})},null,8,["class"])]),_:1})])])])}}}),_hoisted_1$2p={class:"icon mini-header__logo",viewBox:"0 0 2240 1024",xmlns:"http://www.w3.org/2000/svg",width:"140",height:"64"},_hoisted_2$2f=createBaseVNode("path",{d:"M2079.81 913.566c-10.013 0-18.555.8-26.936-.16-16.987-1.951-33.974-1.567-50.993-2.08-10.973-.287-10.653-.287-11.58-10.908-2.72-32.407-5.695-64.781-8.606-97.156-2.528-28.44-4.927-56.911-7.71-85.319-2.527-26.04-5.567-52.017-8.318-78.025-2.623-24.441-5.054-48.914-7.774-73.323a12681.115 12681.115 0 0 0-10.684-92.133c-3.295-27.128-6.559-54.32-10.205-81.417a20559.273 20559.273 0 0 0-17.531-125.979c-6.398-44.723-14.076-89.222-22.106-133.657-1.44-7.966-1.248-8.254 6.366-9.533 31.671-5.407 63.502-10.013 95.716-9.31 3.487.096 7.006.16 10.461.608 5.663.704 8.606 3.455 8.926 10.045 1.12 22.97 2.719 45.939 4.414 68.876 2.72 37.59 5.663 75.178 8.478 112.736 1.792 24.184 3.327 48.305 5.15 72.426 2.912 38.773 5.983 77.514 8.926 116.287 1.791 23.705 3.359 47.474 5.182 71.179 2.784 34.806 5.823 69.58 8.638 104.354 1.791 22.137 3.39 44.307 5.278 66.444 2.784 32.79 5.79 65.581 8.638 98.372 2.143 25.592 4.095 51.249 6.27 77.673zM853.67 114.918c4.639 0 11.645-.512 18.555.128 8.797.8 10.493 3.071 11.037 11.9 2.527 40.373 4.894 80.777 7.582 121.182 2.943 43.57 6.174 87.078 9.405 130.586 2.975 39.956 5.95 79.912 9.15 119.869 3.486 43.891 7.357 87.718 10.876 131.61 2.655 33.622 4.927 67.244 7.678 100.898 2.623 31.223 5.694 62.382 8.51 93.573 2.399 26.84 4.83 53.712 7.165 80.585.736 8.51.128 9.053-9.053 8.829-24.025-.576-47.922-3.391-71.947-2.72-5.503.16-7.102-2.366-8.03-7.581-1.983-11.357-1.663-22.905-2.879-34.39-3.295-30.36-5.183-60.846-7.966-91.27-2.495-27.64-5.502-55.215-8.35-82.823-2.527-25.241-5.022-50.482-7.71-75.754-2.686-24.793-5.533-49.618-8.349-74.443-2.59-22.841-5.118-45.682-7.87-68.524-4.062-33.462-8.093-66.924-12.508-100.323-4.063-30.647-8.67-61.198-12.988-91.813a3619.188 3619.188 0 0 0-19.834-124.412 1393.963 1393.963 0 0 0-5.31-28.024c-.96-4.702-.097-7.422 5.278-8.157 14.14-1.888 28.248-4.83 42.452-6.207 14.203-1.311 28.407-3.966 45.106-2.719zm1006.076 403.34c27.064 0 27.704.191 32.055 24.536 5.342 30.04 9.085 60.334 12.636 90.63 3.743 32.278 7.518 64.557 10.973 96.867 2.783 26.009 5.118 52.081 7.742 78.09 2.75 27.256 5.662 54.416 8.51 81.64 1.567 15.388 3.038 30.775 4.798 46.13.512 4.447-.832 6.815-5.215 7.326-9.245 1.056-18.426 2.272-27.64 3.264-16.89 1.823-33.814 3.614-50.737 5.182-8.733.8-9.31.32-10.94-8.126-14.845-76.617-29.72-153.171-44.436-229.82-9.79-50.962-19.322-101.955-28.92-152.916a805.526 805.526 0 0 1-3.582-21.082c-.64-4.031.447-6.622 5.022-7.71 30.487-7.134 61.294-12.636 89.734-14.012zm-1137.078 0c28.952 0 28.824.095 33.303 26.36 6.91 40.66 11.804 81.544 16.187 122.556 4.287 39.796 8.957 79.56 13.148 119.357 2.847 27.224 5.087 54.512 7.742 81.704 1.887 19.355 4.127 38.645 6.174 57.968.256 2.367.384 4.734.544 7.133.416 9.47 0 10.237-9.117 11.165-18.075 1.888-36.182 3.455-54.257 5.247-6.558.64-13.084 1.6-19.578 2.239-8.637.8-8.925.768-10.62-7.966-6.079-30.679-11.965-61.422-17.916-92.1-14.267-73.9-28.695-147.734-42.867-221.632-5.662-29.56-10.525-59.247-16.091-88.839-1.024-5.406-.256-7.933 5.342-9.245 30.2-7.038 60.59-12.54 88.006-13.948zm382.13 309.861v124.028c0 1.184-.129 2.4.031 3.583.608 6.014-1.6 8.67-7.805 8.413-8.158-.351-16.252-.127-24.41.064-17.018.32-34.07-.351-51.056 1.6-9.406 1.088-9.214.512-10.141-9.405-2.784-31.223-5.823-62.414-8.67-93.637-2.623-28.824-4.99-57.711-7.678-86.535-2.719-29.655-5.758-59.215-8.51-88.838-1.887-19.77-3.55-39.509-5.214-59.279-2.175-25.72-4.19-51.409-6.462-77.13-.96-10.844-.16-12.38 10.59-13.5a531.877 531.877 0 0 1 83.527-2.59c6.942.383 13.852 1.727 20.57 3.358 8.477 2.016 9.405 3.263 9.853 12.125.928 17.85 1.855 35.701 2.335 53.584.544 19.866.096 39.765.832 59.63 1.856 54.8 1.568 109.665 2.207 164.529zm1134.806 5.63v117.438c0 1.984-.064 3.967.032 5.983.415 5.15-1.984 6.973-6.878 6.941-12.029-.095-24.025 0-36.022.16-13.564.128-27.096.064-40.628 1.536-8.926 1.024-8.99.352-9.79-8.51-3.678-40.66-7.55-81.32-11.26-122.044-3.391-37.525-6.526-75.082-9.981-112.64-3.551-38.74-7.422-77.385-10.909-116.094-1.727-19.386-3.167-38.772-4.607-58.159-.575-8.445.352-9.949 9.886-10.717 16.57-1.311 33.078-3.55 49.777-3.263 16.635.32 33.302-.607 49.842 2.56 14.012 2.687 14.715 3.487 15.547 18.458 2.4 44.051 1.664 88.23 3.231 132.282 1.6 46.898.48 93.797 1.76 146.07zm-408.106-528.614c9.79.576 17.5.096 25.177 1.791 4.894 1.12 7.358 3.328 7.838 8.574 2.303 25.24 4.798 50.513 7.325 75.786 2.016 20.506 4.16 41.012 6.239 61.518l.192 1.184c1.663 12.924 1.28 13.276-11.293 13.98-11.197.607-22.362 1.6-33.558 2.271-7.358.448-9.694 1.696-10.91-9.021-4.19-37.813-9.053-75.53-13.691-113.311a1185.032 1185.032 0 0 0-4.287-31.8c-.928-5.981 1.408-9.276 7.006-9.756 7.358-.672 14.716-.864 19.962-1.216zm-1133.398.16c7.55.416 15.323-.16 22.937 1.6 4.35.991 6.558 2.815 6.974 7.773.928 11.837 2.751 23.641 3.87 35.478 3.552 36.31 6.91 72.65 10.238 108.992.704 7.902.544 8.062-6.846 8.606-13.116.96-26.265 1.92-39.413 2.463-7.646.352-8.605-.576-9.565-8.382-3.327-26.744-6.462-53.52-9.661-80.296-2.591-22.074-4.767-44.147-7.902-66.157-.864-6.078 1.12-7.742 5.982-8.733 7.71-1.568 15.452-1.056 23.386-1.344zm399.148 100.003c0 23.001.064 45.97-.032 69.004 0 10.333-.128 10.397-10.397 10.269a324.29 324.29 0 0 1-36.982-1.92c-7.933-.991-8.093-.735-8.317-9.149-.8-28.12-1.632-56.24-2.208-84.36-.415-19.034-.64-38.004-1.791-57.039-.608-9.821-.064-9.917 9.373-10.045 13.916-.16 27.8.48 41.62 2.591 8.318 1.28 8.702 1.28 8.734 10.493.064 23.385.064 46.77.064 70.188h-.064zm1135.382.608c0 23.033.064 46.034-.032 69.036 0 9.66-.16 9.725-9.853 9.66a505.325 505.325 0 0 1-38.133-1.79c-6.303-.48-8.158-3.136-7.742-8.862.064-.8 0-1.6 0-2.4-.96-44.402-1.92-88.774-2.815-133.177-.032-2.367-.16-4.734-.064-7.134.128-8.957.16-9.18 9.149-9.117 12.38.064 24.665.704 37.013 1.92 15.068 1.503 12.413 3.359 12.477 15.26.064 22.169.032 44.402 0 66.604zm-1565.593 54c.288 12.636.288 12.604-11.805 15.548-8.222 2.015-16.443 4.222-24.729 6.046-7.07 1.6-8.317.704-9.533-6.238-8.446-47.09-16.86-94.213-25.24-141.335-1.696-9.758-1.248-10.365 8.349-12.06 11.805-2.08 23.577-4.128 35.382-5.951 7.517-1.184 8.477-.768 9.98 7.518 2.976 16.73 5.791 33.526 7.998 50.385 3.423 26.68 6.239 53.457 9.31 80.169.256 1.951.192 3.967.288 5.918zM1731.175 323.21c15.452-2.528 31.031-5.087 46.61-7.55 5.6-.864 7.295 2.655 8.03 7.646 2.656 18.426 5.983 36.725 8.158 55.184 3.2 26.744 7.582 53.36 8.414 80.328.064 2.752.032 5.567.096 8.318.16 4.287-1.984 6.494-5.95 7.422-10.558 2.367-21.114 4.734-31.64 7.262-5.054 1.215-6.75-.928-7.581-5.855-3.167-18.746-6.814-37.397-10.045-56.08-5.47-30.774-10.781-61.581-16.092-92.388-.128-1.12 0-2.304 0-4.287zm-710.641 108.032c-.448 16.38.544 30.647-1.696 44.915-.671 4.511-1.983 7.422-6.846 7.838-10.429.864-20.826 1.696-31.19 2.751-5.023.544-6.43-1.631-7.262-6.558-2.336-14.556-1.92-29.303-3.327-43.923-2.656-27.608-3.775-55.408-5.567-83.112-.448-6.75-1.12-13.436-1.663-20.186-.288-3.775 1.215-5.886 5.246-6.046 13.5-.544 26.936-3.007 40.5-2.528 7.934.288 8.606.8 9.182 8.798.352 5.534.256 11.133.384 16.699l2.239 81.352zm1134.902-15.867c0 19.066.224 38.133-.032 57.2-.16 9.916-1.28 10.78-10.653 11.644-9.277.864-18.49 1.567-27.736 2.56-5.214.543-7.646-.993-7.965-6.975-1.344-25.336-3.168-50.673-4.927-75.978-1.376-20.986-2.943-41.94-4.415-62.893-.16-2.4-.032-4.799-.192-7.166-.224-4.191 1.056-6.654 5.759-6.814 13.116-.448 26.136-2.975 39.348-2.496 8.062.288 8.19.416 8.798 8.798 1.951 27.32 2.143 54.704 2.015 82.12zM628.296 756.172c16.571 18.235 17.403 39.828 11.932 62.414-5.502 22.585-18.042 41.204-33.238 57.903-25.497 27.896-56.304 48.498-89.062 65.997-56.4 30.135-116.19 50.161-178.572 61.998-44.883 8.477-90.054 15.003-135.705 17.499-13.916.767-27.8 1.407-41.716 1.311-10.077 0-20.186.288-30.23-.064-8.542-.32-9.79-1.791-10.494-10.717-2.591-32.022-4.798-64.077-7.646-96.1-3.327-37.109-7.23-74.186-10.812-111.295-2.624-26.84-4.895-53.745-7.774-80.52-3.327-31.544-7.07-63.023-10.717-94.565-3.327-29.112-6.526-58.287-10.045-87.431-3.935-32.279-7.998-64.493-12.316-96.708a8228.968 8228.968 0 0 0-13.213-92.997A5984.5 5984.5 0 0 0 24.375 200.27 3243.825 3243.825 0 0 0 .702 76.53c-1.151-5.502.512-7.71 5.343-9.725 46.29-19.194 92.42-38.74 138.68-58.03 8.605-3.584 17.434-6.591 26.584-8.286 6.334-1.184 7.965.128 7.773 6.494-.48 16.283.192 32.63-1.407 48.85a161.393 161.393 0 0 0-.64 13.084c-.736 58.383-1.44 116.798.096 175.213 1.344 51.185 4.03 102.338 7.006 153.491 2.335 40.372 5.694 80.745 9.15 121.053 3.39 39.508 7.517 78.953 11.388 118.462.736 7.517 1.408 8.221 9.95 7.07a381.33 381.33 0 0 1 50.832-4.191c52.881-.128 104.898 7.134 156.339 19.322 45.01 10.685 88.806 24.92 130.778 44.819 20.794 9.853 40.692 21.242 58.83 35.702 6.175 4.862 11.677 10.46 16.892 16.315zm1126.84-9.597c20.474 17.946 27.928 39.924 22.106 67.116-4.83 22.426-15.771 41.268-30.36 58.127-23.416 27.096-51.856 47.698-82.631 64.91-60.335 33.782-124.604 55.727-192.168 68.396a1151.09 1151.09 0 0 1-111.456 15.547c-21.178 1.824-42.452 4.095-66.22 2.623h-27.769c-5.406 0-8.477-1.695-8.925-8.125-2.047-28.088-4.415-56.144-6.942-84.2-2.687-29.623-5.662-59.247-8.478-88.87-2.559-27.224-4.926-54.512-7.71-81.736-2.559-25.657-5.502-51.25-8.285-76.874-2.591-24.057-5.086-48.114-7.934-72.139-3.423-29.112-7.038-58.223-10.652-87.335-3.392-27.16-6.75-54.288-10.365-81.416a6133.577 6133.577 0 0 0-12.157-87.143c-5.694-37.653-11.805-75.178-17.819-112.767a3259.149 3259.149 0 0 0-29.111-158.994c-.448-2.335-.672-4.734-1.376-7.006-1.663-5.118-.064-7.837 4.959-9.82 49.17-19.227 96.772-42.42 146.39-60.72 6.493-2.43 13.051-5.15 20.057-5.853 6.302-.64 7.902.383 7.294 7.102-3.327 36.437-1.407 73.066-3.135 109.536-1.408 29.751-1.248 59.598.256 89.382.352 7.55.64 15.131.576 22.65-.384 35.765 1.503 71.498 3.327 107.2 2.335 47.186 5.758 94.277 9.245 141.399 2.527 34.006 5.822 67.948 9.022 101.922 1.695 18.587 3.519 37.141 5.822 55.632 1.247 10.205 1.76 10.301 11.772 8.957 17.66-2.399 35.35-4.35 53.201-4.094 62.638.8 124.028 10.685 184.266 27.864 40.789 11.58 80.489 26.04 117.982 46.29a253.558 253.558 0 0 1 47.218 32.439zM308.676 922.81c23.162-11.068 135.61-98.947 144.535-113.279-54.576-23.513-109.344-45.362-168.24-63.245l23.706 176.524zm1277.198-107.52c2.879-3.103 2.559-5.503-1.344-7.23-7.774-3.551-15.484-7.326-23.353-10.557-42.004-17.18-84.2-33.814-127.483-47.378-3.775-1.152-7.646-3.775-12.477-1.536l23.322 173.454c3.455.767 4.798-.832 6.334-1.92 39.316-28.855 78.889-57.36 116.638-88.39 6.366-5.183 12.668-10.397 18.363-16.443z",fill:"var(--brand_pink)"},null,-1),_hoisted_3$25=[_hoisted_2$2f];function render$B(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2p,_hoisted_3$25)}var BiliLogo={render:render$B};const _hoisted_1$2o={width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2e=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 20.281A9.281 9.281 0 1 0 11 1.72a9.281 9.281 0 0 0 0 18.562ZM13.269 7.76a.688.688 0 0 1 .972.972l-2.269 2.27 2.269 2.268a.688.688 0 1 1-.972.972L11 11.972l-2.269 2.269a.687.687 0 1 1-.972-.972L10.028 11 7.759 8.731a.688.688 0 0 1 .972-.972l2.27 2.269 2.268-2.269Z",fill:"currentColor"},null,-1),_hoisted_3$24=[_hoisted_2$2e];function render$A(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2o,_hoisted_3$24)}var SvgClose={render:render$A};const _hoisted_1$2n={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2d=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.845 14.7c.293.292.13.572-.152.863-.043.065-.097.119-.14.162-.282.248-.607.399-.868.14l-3.5-3.483a6.938 6.938 0 0 1-4.238 1.445C3.121 13.827 0 10.73 0 6.913 0 3.106 3.11 0 6.947 0c3.826 0 6.947 3.095 6.947 6.913a6.908 6.908 0 0 1-1.528 4.325l3.48 3.462ZM1.636 6.903c0 2.912 2.385 5.274 5.3 5.274 2.916 0 5.3-2.362 5.3-5.274s-2.384-5.274-5.3-5.274c-2.926 0-5.3 2.372-5.3 5.274Z",fill:"currentColor"},null,-1),_hoisted_3$23=[_hoisted_2$2d];function render$z(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2n,_hoisted_3$23)}var IcoSearch={render:render$z},SearchPanel_vue_vue_type_style_index_0_lang="";const _sfc_main$1T=defineComponent({props:{visible:{type:Boolean,default:!1},keyword:{type:String,default:""},suggestIndex:{type:Number,default:-1}},emits:["searchTrending","searchSuggest","searchHistory","updateSuggest"],setup(a,{emit:o}){const s=ref(null),i=ref(null),l=ref(0),c=ref(!1),r=ref(!0),u=ref([]),d=ref([]),_=ref({}),f=ref("init"),m=ref(!1),{localSpmId:p}=storeToRefs(useSearchStore()),v=computed(()=>!a.keyword&&u.value.length),g=computed(()=>!a.keyword&&f.value==="done"&&_.value&&(_.value.list||[]).length);let $=null;const y=async()=>{u.value=JSON.parse(localStorage.getItem("search_history")||"[]"),setTimeout(()=>{var x,T;l.value=((x=s.value)==null?void 0:x.clientWidth)||0;const A=((T=i.value)==null?void 0:T.clientHeight)||0;c.value=A>80})},B=async()=>{if(f.value!=="loading"){f.value="loading";try{const A=await getSearchTrending({limit:10});_.value=A.trending,f.value="done"}catch{f.value="error"}}},C=async()=>{var T,I;const A=(I=(T=document.querySelector("meta[name=spm_prefix]"))==null?void 0:T.content)!=null?I:"0",x={func:"suggest",suggest_type:"accurate",sub_type:"tag",main_ver:"v1",highlight:"",userid:cookie.get("DedeUserID")||"",bangumi_acc_num:1,special_acc_num:1,topic_acc_num:1,upuser_acc_num:3,tag_num:10,special_num:10,bangumi_num:10,upuser_num:3,term:a.keyword,rnd:Math.random(),buvid:cookie.get("buvid3")||"",spmid:A};try{const R=await getSearchSuggest(x);R.code===0&&(d.value=R.result.tag||[],o("updateSuggest",d.value))}catch(R){console.error(R)}},S=A=>{u.value.splice(A,1),localStorage.setItem("search_history",JSON.stringify(u.value)),nextTick(()=>{var T;const x=((T=i.value)==null?void 0:T.clientHeight)||0;c.value=x>80})},E=()=>{u.value=[],c.value=!1,localStorage.setItem("search_history","[]")},k=()=>{r.value=!r.value},b=(A,x,T,I,...R)=>{u.value=u.value.filter(N=>N.value!==x),u.value.unshift({value:x,timestamp:Date.now()}),nextTick(()=>{var w;const N=((w=i.value)==null?void 0:w.clientHeight)||0;c.value=N>80}),o(A,x,T,I,...R)};watch([()=>a.visible,()=>v.value],([A,x])=>{A&&x&&allCustomReport({type:"show",spm_info:"main.search-box.search_window.search_history"},{msg:JSON.stringify({showlist:u.value.map((T,I)=>({content:T,location:I+1})),local_spmid:p.value})})}),watch([()=>a.visible,()=>c.value,()=>r.value],([A,x,T])=>{A&&x&&(T?allCustomReport({type:"show",spm_info:"main.search-box.search_window.search_history_more"},{msg:JSON.stringify({local_spmid:p.value})}):allCustomReport({type:"show",spm_info:"main.search-box.search_window.search_history_put_away"},{msg:JSON.stringify({local_spmid:p.value})}))}),watch([()=>a.visible,()=>g.value],([A,x])=>{A&&x&&_.value.list.forEach((T,I)=>{allCustomReport({type:"show",spm_info:"main.search-box.search_window.hot_search"},{msg:JSON.stringify({show_content:T.show_name,tag_type:"",search_content:T.keyword,location:I+1,local_spmid:p.value})})})});let V=null;return watch([()=>a.visible,()=>a.keyword,()=>d.value.length],([A,x,T])=>{A&&x&&T?(clearTimeout(V),V=setTimeout(()=>{d.value.forEach((I,R)=>{allCustomReport({type:"show",spm_info:"main.search-box.search_window.sug"},{msg:JSON.stringify({input_content:a.keyword,search_content:I.value,location:R+1,local_spmid:p.value})})})},300)):clearTimeout(V)}),watch(()=>a.visible,A=>{if(!A){clearTimeout($),$=null,m.value=!1;return}$||($=setTimeout(()=>m.value=!0,200),B())}),watch(()=>a.keyword,A=>{A?C():y()},{immediate:!0}),onMounted(()=>{const A=()=>{var I,R;const x=((I=s.value)==null?void 0:I.offsetWidth)||0;if(!a.visible||l.value===x)return;l.value=x;const T=((R=i.value)==null?void 0:R.clientHeight)||0;c.value=T>80};window.ResizeObserver&&s.value&&new ResizeObserver(()=>A()).observe(s.value)}),{panelElRef:s,historiesElRef:i,clientWidth:l,foldVisible:c,isFold:r,localSpmId:p,histories:u,suggestions:d,trending:_,loadState:f,isShowPanel:m,isShowHistory:v,isShowTrending:g,handleRemoveHistoryRecord:S,handleClearHistory:E,toggleFold:k,emitSearch:b,trimHttp}}}),_hoisted_1$2m={key:0,class:"history"},_hoisted_2$2c={class:"header"},_hoisted_3$22=createBaseVNode("div",{class:"title"},"\u641C\u7D22\u5386\u53F2",-1),_hoisted_4$1B=createTextVNode(" \u6E05\u7A7A "),_hoisted_5$1d=[_hoisted_4$1B],_hoisted_6$12={ref:"historiesElRef",class:"histories"},_hoisted_7$_=["onClick","onKeydown"],_hoisted_8$W=["textContent"],_hoisted_9$O=["onClick"],_hoisted_10$H=createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[createBaseVNode("path",{d:`M512 64.303538c-247.25636 0-447.696462 200.440102-447.696462 447.696462\r
                0 247.254314 200.440102 447.696462 447.696462 447.696462s447.696462-200.440102\r
                447.696462-447.696462S759.25636 64.303538 512 64.303538zM710.491727 665.266709c12.491499\r
                12.491499 12.489452 32.729425-0.002047 45.220924-6.246261 6.246261-14.429641 9.370415-22.611997\r
                9.370415s-16.363689-3.121084-22.60995-9.366322L512 557.222971 358.730221 710.491727\r
                c-6.246261 6.246261-14.429641 9.366322-22.611997 9.366322s-16.365736-3.125177-22.611997-9.370415\r
                c-12.491499-12.491499-12.491499-32.729425 0-45.220924l153.268756-153.266709L313.50725 358.730221\r
                c-12.491499-12.491499-12.489452-32.729425 0.002047-45.220924s32.729425-12.495592 45.220924-0.004093\r
                l153.268756 153.268756 153.268756-153.268756c12.491499-12.491499 32.729425-12.487406 45.220924\r
                0.004093s12.493545 32.729425 0.002047 45.220924L557.225017 512 710.491727 665.266709z`})],-1),_hoisted_11$E=[_hoisted_10$H],_hoisted_12$z=["textContent"],_hoisted_13$s=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:`M5.46967 9.17678C5.76256 9.46967 6.23744 9.46967 6.53033 9.17678L10.7286 4.97855\r
              C10.9238 4.78329 10.9238 4.46671 10.7286 4.27145C10.5333 4.07618 10.2167 4.07618 10.0214 4.27145L6 8.29289\r
              L1.97855 4.27145C1.78329 4.07618 1.46671 4.07618 1.27145 4.27145\r
              C1.07618 4.46671 1.07618 4.78329 1.27145 4.97855L5.46967 9.17678Z`},null,-1),_hoisted_14$p=[_hoisted_13$s],_hoisted_15$n={key:1,class:"trending"},_hoisted_16$m=createBaseVNode("div",{class:"header"},[createBaseVNode("div",{class:"title"},"\u70ED\u641C")],-1),_hoisted_17$k={key:0,class:"trendings-single"},_hoisted_18$k=["onClick","onKeydown"],_hoisted_19$g=["textContent"],_hoisted_20$e=["textContent"],_hoisted_21$e=["src"],_hoisted_22$d={key:1,class:"trendings-double"},_hoisted_23$c=["onClick","onKeydown"],_hoisted_24$c=["textContent"],_hoisted_25$b=["textContent"],_hoisted_26$a=["src"],_hoisted_27$8=["onClick","onKeydown"],_hoisted_28$7=["textContent"],_hoisted_29$5=["textContent"],_hoisted_30$4=["src"],_hoisted_31$4={key:2,class:"suggestions"},_hoisted_32$4=["onClick","innerHTML"];function _sfc_render$2(a,o,s,i,l,c){const r=resolveDirective("report");return withDirectives((openBlock(),createElementBlock("div",{ref:"panelElRef",class:normalizeClass(["search-panel",{visible:a.isShowPanel}])},[a.isShowHistory?(openBlock(),createElementBlock("div",_hoisted_1$2m,[createBaseVNode("div",_hoisted_2$2c,[_hoisted_3$22,withDirectives((openBlock(),createElementBlock("div",{class:"clear",onClick:o[0]||(o[0]=(...u)=>a.handleClearHistory&&a.handleClearHistory(...u))},_hoisted_5$1d)),[[r,{spm_info:"main.search-box.search_window.search_history_delete_all",msg:{local_spmid:a.localSpmId}},"click"]])]),createBaseVNode("div",{class:"histories-wrap",style:normalizeStyle({maxHeight:a.foldVisible&&a.isFold?"92px":"172px"})},[createBaseVNode("div",_hoisted_6$12,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.histories,(u,d)=>(openBlock(),createElementBlock("div",{key:u.value,class:"history-item",tabindex:"0",onClick:_=>a.emitSearch("searchHistory",u.value,d),onKeydown:withKeys(_=>a.emitSearch("searchHistory",u.value,d),["enter"])},[createBaseVNode("div",{class:"history-text",textContent:toDisplayString(u.value)},null,8,_hoisted_8$W),withDirectives((openBlock(),createElementBlock("div",{class:"close",onClick:withModifiers(_=>a.handleRemoveHistoryRecord(d),["stop"])},_hoisted_11$E,8,_hoisted_9$O)),[[r,{spm_info:"main.search-box.search_window.search_history_delete",msg:{location:d+1,content:u.value,local_spmid:a.localSpmId}},"click"]])],40,_hoisted_7$_))),128))],512)],4),a.foldVisible?withDirectives((openBlock(),createElementBlock("div",{key:0,class:"history-fold-wrap",onClick:o[1]||(o[1]=(...u)=>a.toggleFold&&a.toggleFold(...u))},[createBaseVNode("div",{class:"fold-text",textContent:toDisplayString(a.isFold?"\u5C55\u5F00\u66F4\u591A":"\u6536\u8D77")},null,8,_hoisted_12$z),(openBlock(),createElementBlock("svg",{class:normalizeClass(["fold-icon",a.isFold?"fold":""]),viewBox:"0 0 12 12"},_hoisted_14$p,2))])),[[r,{spm_info:`main.search-box.search_window.${a.isFold?"search_history_more":"search_history_put_away"}`,msg:{local_spmid:a.localSpmId}},"click"]]):createCommentVNode("",!0)])):createCommentVNode("",!0),a.isShowTrending?(openBlock(),createElementBlock("div",_hoisted_15$n,[_hoisted_16$m,a.clientWidth<422?(openBlock(),createElementBlock("div",_hoisted_17$k,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.trending.list||[],(u,d)=>(openBlock(),createElementBlock("div",{key:u.keyword,class:"trending-item",tabindex:"0",onClick:_=>a.emitSearch("searchTrending",u.keyword,d,a.trending.trackid),onKeydown:withKeys(_=>a.emitSearch("searchTrending",u.keyword,d,a.trending.trackid),["enter"])},[createBaseVNode("div",{class:normalizeClass(["trendings-rank",d<3?"search-rank-top":""]),textContent:toDisplayString(d+1)},null,10,_hoisted_19$g),createBaseVNode("div",{class:"trending-text",textContent:toDisplayString(u.show_name)},null,8,_hoisted_20$e),u.icon?(openBlock(),createElementBlock("img",{key:0,class:"trending-mark",src:`${a.trimHttp(u.icon)}@28h`},null,8,_hoisted_21$e)):createCommentVNode("",!0)],40,_hoisted_18$k))),128))])):createCommentVNode("",!0),a.clientWidth>=422?(openBlock(),createElementBlock("div",_hoisted_22$d,[createBaseVNode("div",{class:"trendings-col",style:normalizeStyle({maxWidth:`${(a.clientWidth-10)/2}px`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList((a.trending.list||[]).slice(0,5),(u,d)=>(openBlock(),createElementBlock("div",{key:u.keyword,class:"trending-item",tabindex:"0",onClick:_=>a.emitSearch("searchTrending",u.keyword,d,a.trending.trackid),onKeydown:withKeys(_=>a.emitSearch("searchTrending",u.keyword,d,a.trending.trackid),["enter"])},[createBaseVNode("div",{class:normalizeClass(["trendings-rank",d<3?"search-rank-top":""]),textContent:toDisplayString(d+1)},null,10,_hoisted_24$c),createBaseVNode("div",{class:"trending-text",textContent:toDisplayString(u.show_name)},null,8,_hoisted_25$b),u.icon?(openBlock(),createElementBlock("img",{key:0,class:"trending-mark",src:`${a.trimHttp(u.icon)}@28h`},null,8,_hoisted_26$a)):createCommentVNode("",!0)],40,_hoisted_23$c))),128))],4),createBaseVNode("div",{class:"trendings-col",style:normalizeStyle({maxWidth:`${(a.clientWidth-10)/2}px`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList((a.trending.list||[]).slice(5,10),(u,d)=>(openBlock(),createElementBlock("div",{key:u.keyword,class:"trending-item",tabindex:"0",onClick:_=>a.emitSearch("searchTrending",u.keyword,d+5,a.trending.trackid),onKeydown:withKeys(_=>a.emitSearch("searchTrending",u.keyword,d+5,a.trending.trackid),["enter"])},[createBaseVNode("div",{class:"trendings-rank",textContent:toDisplayString(d+6)},null,8,_hoisted_28$7),createBaseVNode("div",{class:"trending-text",textContent:toDisplayString(u.show_name)},null,8,_hoisted_29$5),u.icon?(openBlock(),createElementBlock("img",{key:0,class:"trending-mark",src:`${a.trimHttp(u.icon)}@28h`},null,8,_hoisted_30$4)):createCommentVNode("",!0)],40,_hoisted_27$8))),128))],4)])):createCommentVNode("",!0)])):createCommentVNode("",!0),a.keyword?(openBlock(),createElementBlock("div",_hoisted_31$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.suggestions,(u,d)=>(openBlock(),createElementBlock("div",{key:u.value,class:normalizeClass([a.suggestIndex===d?"active":"","suggest-item"]),tabindex:"0",onClick:_=>a.emitSearch("searchSuggest",u.value,d),innerHTML:u.name},null,10,_hoisted_32$4))),128))])):createCommentVNode("",!0)],2)),[[vShow,a.visible&&(!a.keyword||a.suggestions.length)]])}var SearchPanel=_export_sfc(_sfc_main$1T,[["render",_sfc_render$2]]),SearchInput_vue_vue_type_style_index_0_lang="";const _sfc_main$1S=defineComponent({__name:"SearchInput",setup(a){let o=null,s=!1;const i=useRoute(),l=useRouter(),c=ref(null),r=ref(null),u=ref([]),d=ref(-1),_=ref(!1),f=ref(!1),m=ref(callNativeSync("window/isFocused")),p=computed(()=>_.value||f.value),v=computed(()=>g.value?S.value:{}),{isSearchPage:g,isSearchActive:$,isFromHeaderSearch:y,keyword:B,searchKeyword:C,searchReportParams:S,localSpmId:E}=storeToRefs(useSearchStore()),k=L=>{IS_MAC&&g.value&&toggleWindowMaximize()},b=()=>{var P;if(s)return;s=!0;const L=C.value.trim();L?(B.value||(B.value=L),setTimeout(()=>{var U;(U=r.value)==null||U.blur(),f.value=!1;const j=C.value.trim(),F=JSON.parse(localStorage.getItem("search_history")||"[]").filter(W=>W.value!==j);F.unshift({value:j,timestamp:Date.now()}),localStorage.setItem("search_history",JSON.stringify(F.slice(0,20))),s=!1,events.emit("confirmSearch"),g.value||(y.value=!0,l.push({name:"SearchPage"}))},100)):((P=r.value)==null||P.focus(),s=!1)},V=L=>{_.value=!0,setCursorPosition(L.target),clearTimeout(o)},A=()=>{clearTimeout(o),o=setTimeout(()=>{m.value&&(_.value=!1)},200)},x=()=>{C.value="",r.value.focus(),clearTimeout(o)},T=()=>{C.value||r.value.focus()},I=()=>{_.value&&(f.value=!0)},R=()=>f.value=!1,N=L=>{u.value=L||[]},w=(L,P,j,O)=>{C.value=L;const F={history:SearchContentReport.HISTORY_LIST,suggest:SearchContentReport.SEARCH_LIST,trending:SearchContentReport.SUGGESTION};allCustomReport({type:"click",spm_info:"main.search-box.search.content"},{msg:JSON.stringify({local_spmid:E.value,type:F[P],location:j+1,Input_content:C.value,search_content:L,...v==null?void 0:v.value})}),b()},D=L=>{var P,j;if(["ArrowUp","ArrowDown","Enter"].includes(L.key))return L.key==="ArrowUp"?d.value>-1?d.value--:d.value=u.value.length-1:L.key==="ArrowDown"?d.value<u.value.length-1?d.value++:d.value=-1:L.key==="Enter"&&(d.value>-1&&((P=u.value[d.value])==null?void 0:P.value)&&(C.value=(j=u.value[d.value])==null?void 0:j.value),b()),L.preventDefault(),!1};return events.on("search",L=>{C.value=L.trim(),b()}),watch([p,u],()=>d.value=-1),watch(p,L=>{L&&allCustomReport({type:"show",spm_info:"main.search-box.search_window.0"},{msg:JSON.stringify({local_spmid:E.value})})}),watchEffect(()=>{$.value=!!(p.value||C.value||g.value)}),watchEffect(()=>{g.value=i.name==="SearchPage",g.value||(B.value="",C.value="",f.value=!1,_.value=!1)}),useIpcListener("window/focusChange",({data:L})=>{m.value=L,L&&_.value&&r.value.focus()}),(L,P)=>{const j=resolveDirective("report");return openBlock(),createElementBlock("div",{class:normalizeClass(["header_search pe_none",{search_active:unref($)}])},[createBaseVNode("div",{class:normalizeClass(["header_search--bg bg_bg1",{no_drag:unref(p)}]),onDblclick:k},null,34),createBaseVNode("div",{class:"header_search--input no_drag pe_auto",ref_key:"inputWrapper",ref:c,onKeydown:D,onMouseover:I,onMouseleave:R},[withDirectives(createBaseVNode("input",{type:"text",class:normalizeClass(["text1",{u_select_none:!_.value}]),ref_key:"searchInput",ref:r,placeholder:"\u641C\u7D22\u4F60\u611F\u5174\u8DA3\u7684\u89C6\u9891","onUpdate:modelValue":P[0]||(P[0]=O=>isRef(C)?C.value=O:null),onBlur:A,onFocus:V},null,34),[[vModelText,unref(C)]]),withDirectives(createVNode(unref(SvgClose),{class:"search-clear p_center_y",onClick:x},null,512),[[vShow,unref(C)]]),withDirectives(createVNode(unref(IcoSearch),{class:"search-icon cs_pointer p_center_y r_md u_select_none",onClick:b},null,512),[[j,{spm_info:"main.search-box.search.content",msg:{local_spmid:unref(E),type:unref(SearchContentReport).DEFAULT,Input_content:unref(C),search_content:unref(C),...unref(v)}},"click"]]),createVNode(SearchPanel,{visible:unref(p),keyword:unref(C),"suggest-index":d.value,class:"search-panel-popover",onClick:T,onUpdateSuggest:N,onSearchHistory:P[1]||(P[1]=(O,F)=>w(O,"history",F)),onSearchSuggest:P[2]||(P[2]=(O,F)=>w(O,"suggest",F)),onSearchTrending:P[3]||(P[3]=(O,F,U)=>w(O,"trending",F))},null,8,["visible","keyword","suggest-index"])],544)],2)}}});var AppHeader_vue_vue_type_style_index_0_lang="";const _hoisted_1$2l={class:"app_header p_relative"},_hoisted_2$2b=createBaseVNode("div",{class:"app_header--dragbar draggable p_cover"},null,-1),_hoisted_3$21={class:"app_header--left mr_xl mt_1"},_hoisted_4$1A=createBaseVNode("div",{class:"app_header--center"},null,-1),_hoisted_5$1c={class:"app_header--right flex_end flex_inline"},_hoisted_6$11=createBaseVNode("div",{class:"app_header--right-divider mt_1"},null,-1),_hoisted_7$Z={class:"app_header--right-btns flex_between no_drag"},_sfc_main$1R=defineComponent({__name:"AppHeader",props:{isSelectedPage:Boolean},setup(a){const o=ref(getIsMaximized());useIpcListener("window/maximizeChange",({data:_})=>o.value=_);const s=()=>{allCustomReport({type:"click",spm_info:"main.main.main-page.maximize"},{msg:JSON.stringify({is_enter:!o.value,is_shortcut:!1,win_name:"main"})}),toggleWindowMaximize()};let i=!1;const l=_=>{IS_MAC&&!i&&["app_header--wrapper","app_header--left","app_header--left-logo","app_header--center","app_header--right","header_search--bg"].some(f=>{var m,p;return(p=(m=_.target)==null?void 0:m.classList)==null?void 0:p.contains(f)})&&s()};let c=null;const r=_=>{i=!0,clearTimeout(c),c=setTimeout(()=>i=!1,500)},u=async()=>{await callNative("window/catchClose"),await callNative("window/close")},d=()=>{selectedEvents.emit("miniSelectedPlayer"),allCustomReport({type:"click",spm_info:"main.play-detail.header.mini-enter"},{msg:JSON.stringify({win_name:"main",is_shortcut:!1})})};return(_,f)=>(openBlock(),createElementBlock("header",_hoisted_1$2l,[_hoisted_2$2b,createBaseVNode("div",{class:normalizeClass(["app_header--wrapper flex_between p_relative",{"app_header--selected":a.isSelectedPage}]),onDblclick:l},[createBaseVNode("div",_hoisted_3$21,[createVNode(unref(BiliLogo),{class:"app_header--left-logo"})]),_hoisted_4$1A,createBaseVNode("div",_hoisted_5$1c,[createVNode(_sfc_main$1S,{class:"app_header--right-search",onMousedown:r}),a.isSelectedPage?(openBlock(),createElementBlock("span",{key:0,title:"\u5C0F\u7A97\u6A21\u5F0F\uFF08S\uFF09",class:"right-mini right-btn-item no_drag",onClick:d},[createVNode(unref(IcoMini),{class:"window-btn icon-mini mt_1"})])):createCommentVNode("",!0),unref(IS_MAC)?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[_hoisted_6$11,createBaseVNode("div",_hoisted_7$Z,[createBaseVNode("span",{class:"right-btn-item",onClick:f[0]||(f[0]=(...m)=>unref(minimizeWindow)&&unref(minimizeWindow)(...m))},[createVNode(unref(IcoMin),{class:"window-btn mt_1"})]),createBaseVNode("span",{class:"right-btn-item",onClick:s},[o.value?(openBlock(),createBlock(unref(IcoMaxExit),{key:1,class:"window-btn mt_1"})):(openBlock(),createBlock(unref(IcoMax),{key:0,class:"window-btn mt_1"}))]),createBaseVNode("span",{class:"right-btn-item",onClick:u},[createVNode(unref(IcoClose),{class:"window-btn mt_1"})])])],64))])],34)]))}}),_hoisted_1$2k={key:0,class:"video-list row gutter_md"},_sfc_main$1Q=defineComponent({__name:"VideosSkeleton",props:{withWrapper:{type:Boolean,default:!0},itemNum:{type:Number,default:36},showAvatar:{type:Boolean,default:!1},showLoadingAnimation:{type:Boolean,default:!0}},setup(a){return(o,s)=>a.withWrapper?(openBlock(),createElementBlock("div",_hoisted_1$2k,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.itemNum,i=>(openBlock(),createElementBlock("div",{key:i,class:normalizeClass([{to_hide_xs:i>23,to_hide_md:i>29,to_hide_xl:i>35},"col_3 col_sm_1_5 mb_x40"])},[createVNode(unref(BiliVideoCard),{showAvatar:a.showAvatar,"disable-frame":"","disable-scale":"",showLoadingAnimation:a.showLoadingAnimation,skeleton:!0},null,8,["showAvatar","showLoadingAnimation"])],2))),128))])):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(a.itemNum,i=>(openBlock(),createElementBlock("div",{key:i,class:"col_3 col_sm_1_5 mb_x40"},[createVNode(unref(BiliVideoCard),{showAvatar:a.showAvatar,"disable-frame":"","disable-scale":"",showLoadingAnimation:a.showLoadingAnimation,skeleton:!0},null,8,["showAvatar","showLoadingAnimation"])]))),128))}}),_hoisted_1$2j={class:"app_search i_page_wrapper"},_hoisted_2$2a={class:"app_search--content i_page_content ov_hidden p_relative"},_hoisted_3$20={key:0,class:"i_wrapper"},_hoisted_4$1z={class:"row gutter_md mt_xxl ov_overlay_y"},_hoisted_5$1b=["src"],_sfc_main$1P=defineComponent({__name:"Search",setup(a){const{initEnterTime:o,reportPv:s,logOpenAppPage:i}=useReportPv({spm_id:"main.search-result.0.0",pageName:"SearchPage",routeName:"SearchPage",isCustom:!0}),l=computed(()=>`${location.origin}/search.html`),c=ref(null),r=storeToRefs(useSearchStore()),{searchKeyword:u,storeKeyword:d,isSearchPage:_,isFromHeaderSearch:f,searchReportParams:m}=r,p=ref(!1),v=()=>{var E,k;return(k=(E=c.value.contentWindow).handleInitSearch)==null?void 0:k.call(E)},g=()=>{var E,k;return(k=(E=c.value.contentWindow).handleQuitSearch)==null?void 0:k.call(E)},$=()=>{var E,k;return(k=(E=c.value.contentWindow).handleConfirmSearch)==null?void 0:k.call(E)},y=()=>{var E,k;return(k=(E=c.value.contentWindow).handleReloadSearch)==null?void 0:k.call(E)};window.handleRestoreKeyword=()=>u.value=d.value,window.handleSetSearchParams=E=>m.value=E,window.handleWatchLaterChange=E=>events.emit("watchLaterSync",E),window.handleSearchPageReady=()=>p.value=!0,events.on("watchLaterChange",E=>{var k,b,V;return(V=(k=c.value)==null?void 0:(b=k.contentWindow).handleWatchLaterChange)==null?void 0:V.call(b,E)});let B=null;const C=E=>{c.value.contentWindow.updateSearchParams({searchKeyword:E}),p.value||(p.value=!0,v(),$())},S=E=>{clearTimeout(B),c.value.contentWindow.isSearchReady?C(E):B=setTimeout(()=>S(E),200)};return watch(u,E=>{E&&(d.value=u.value),S(E)}),watch(_,E=>{E?(o(),i(),f.value?(f.value=!1,v()):(u.value=d.value,setTimeout(()=>y()))):(clearTimeout(B),s())}),useIpcListener("window/focusChange",({data:E})=>{_.value&&(E?o():s())}),onMounted(()=>{events.on("initSearch",v),events.on("quitSearch",g),events.on("confirmSearch",$)}),onBeforeUnmount(()=>{events.off("initSearch",v),events.off("quitSearch",g),events.off("confirmSearch",$)}),(E,k)=>(openBlock(),createElementBlock("div",_hoisted_1$2j,[createBaseVNode("div",_hoisted_2$2a,[p.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_3$20,[createBaseVNode("div",_hoisted_4$1z,[createVNode(_sfc_main$1Q,{"with-wrapper":!1,"item-num":20})])])),withDirectives(createBaseVNode("iframe",{ref_key:"searchFrame",ref:c,class:"w_100 h_100",src:unref(l),frameborder:"0"},null,8,_hoisted_5$1b),[[vShow,p.value]])])]))}}),_hoisted_1$2i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},_hoisted_2$29=createBaseVNode("path",{d:"M11.823 8.948a.25.25 0 0 0 .354 0L4.81 16.314a1.5 1.5 0 1 1-2.122-2.121l7.366-7.367a2.75 2.75 0 0 1 3.89 0l7.366 7.367a1.5 1.5 0 0 1-2.122 2.12l-7.366-7.365z",fill:"currentColor"},null,-1),_hoisted_3$1$=[_hoisted_2$29];function render$y(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2i,_hoisted_3$1$)}var ArrowUp={render:render$y};const _hoisted_1$2h={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},_hoisted_2$28=createBaseVNode("path",{d:"M11.823 15.055a.25.25 0 0 1 .354 0L4.81 7.69A1.5 1.5 0 0 0 2.689 9.81l7.366 7.366a2.75 2.75 0 0 0 3.89 0L21.31 9.81a1.5 1.5 0 0 0-2.122-2.121l-7.366 7.366z",fill:"currentColor"},null,-1),_hoisted_3$1_=[_hoisted_2$28];function render$x(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2h,_hoisted_3$1_)}var ArrowDown={render:render$x};const _hoisted_1$2g={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},_hoisted_2$27=createBaseVNode("path",{d:"M11.998 2.75a1.5 1.5 0 0 1 1.5 1.5v6.25h6.252a1.5 1.5 0 1 1 0 3h-6.252v6.25a1.5 1.5 0 0 1-3 0V13.5H4.25a1.5 1.5 0 1 1 0-3h6.248V4.25a1.5 1.5 0 0 1 1.5-1.5z",fill:"currentColor"},null,-1),_hoisted_3$1Z=[_hoisted_2$27];function render$w(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2g,_hoisted_3$1Z)}var IcoAdd={render:render$w},UserAvatar_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$j=a=>(pushScopeId("data-v-0d803fd6"),a=a(),popScopeId(),a),_hoisted_1$2f={class:"avatar-image"},_hoisted_2$26=_withScopeId$j(()=>createBaseVNode("div",{class:"a-cycle a-cycle-1"},null,-1)),_hoisted_3$1Y=_withScopeId$j(()=>createBaseVNode("div",{class:"a-cycle a-cycle-2"},null,-1)),_hoisted_4$1y=_withScopeId$j(()=>createBaseVNode("div",{class:"a-cycle a-cycle-3"},null,-1)),_hoisted_5$1a={key:0,class:"live-tab p_center_x text_white bg_brand_pink bd_radius_md fs_6 flex_center text_nowrap"},_hoisted_6$10=_withScopeId$j(()=>createBaseVNode("img",{class:"live-gif w_md mr_xs",src:_imports_0$6,alt:"live"},null,-1)),_hoisted_7$Y=createTextVNode(" \u76F4\u64AD\u4E2D "),_hoisted_8$V=[_hoisted_6$10,_hoisted_7$Y],_sfc_main$1O=defineComponent({__name:"UserAvatar",props:{isShowLive:Boolean,isSmall:Boolean,isMini:Boolean,isShowLiveAni:Boolean,isOnLine:Boolean,info:{type:Object,default:()=>({})}},setup(a){const o=a,s=computed(()=>o.isShowLive&&(o.info.is_live||!!o.isOnLine)),i=computed(()=>{var r,u;if(!s.value){if(((r=o.info.official_verify)==null?void 0:r.type)===1)return"business";if(((u=o.info.official_verify)==null?void 0:u.type)===0)return"personal"}}),l=new UserAvatar$1({}),c=ref(null);return watch(()=>o.info,async()=>{(o.info.upic||o.info.face)&&(await nextTick(),l.resetConfig(c.value,{avatar:o.info.upic||o.info.face,avatarWidth:86,renderWidth:86,isNFT:!!o.info.face_nft,isCenterScale:!0,iconType:i.value}))}),onMounted(()=>{l.append({avatar:o.info.upic||o.info.face,avatarWidth:86,renderWidth:86,isNFT:!!o.info.face_nft,isCenterScale:!0,iconType:i.value},c.value,"avatar")}),(r,u)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["search-user-avatar p_relative",{"avatar-small":a.isSmall,"avatar-mini":a.isMini}])},[createBaseVNode("div",{class:normalizeClass(["avatar-wrap p_relative",{"live-ani":unref(s)&&a.isShowLiveAni}])},[createBaseVNode("div",_hoisted_1$2f,[createBaseVNode("div",{class:"avatar-inner",ref_key:"avatarRef",ref:c},null,512)]),unref(s)&&a.isShowLiveAni?(openBlock(),createElementBlock(Fragment,{key:0},[_hoisted_2$26,_hoisted_3$1Y,_hoisted_4$1y],64)):createCommentVNode("",!0)],2),unref(s)?(openBlock(),createElementBlock("div",_hoisted_5$1a,_hoisted_8$V)):createCommentVNode("",!0)],2))}});var UserAvatar=_export_sfc(_sfc_main$1O,[["__scopeId","data-v-0d803fd6"]]),StaffItem_vue_vue_type_style_index_0_lang="";const _hoisted_1$2e={class:"selected-staff-item flex_col"},_hoisted_2$25={class:"staff-avatar p_relative"},_hoisted_3$1X={key:0,class:"up-bedge p_absolute t_0 r_nsm text_nowrap brand_pink"},_hoisted_4$1x=["title"],_sfc_main$1N=defineComponent({__name:"StaffItem",props:{staff:{type:Object,default:()=>({})},relations:{type:Object,default:()=>({})}},emits:["openUser","followUser"],setup(a,{emit:o}){const{userInfo:s}=storeToRefs(useUserInfoStore());return(i,l)=>(openBlock(),createElementBlock("div",_hoisted_1$2e,[createBaseVNode("div",_hoisted_2$25,[createVNode(UserAvatar,{class:"cs_pointer","is-mini":"",info:a.staff,onClick:l[0]||(l[0]=c=>o("openUser"))},null,8,["info"]),a.staff.title?(openBlock(),createElementBlock("span",_hoisted_3$1X,toDisplayString(a.staff.title),1)):createCommentVNode("",!0),a.relations[a.staff.mid]&&!a.relations[a.staff.mid].followed||!unref(s).isLogin?(openBlock(),createElementBlock("span",{key:1,class:"up-add p_absolute r_n2 b_n2 cs_pointer",onClick:l[1]||(l[1]=c=>o("followUser"))}," + ")):createCommentVNode("",!0)]),createBaseVNode("p",{class:"staff-name fs_6 text_center text_ellipsis px_xs mt_xs hover_pink ts_all_fast cs_pointer",title:a.staff.name,onClick:l[2]||(l[2]=c=>o("openUser"))},toDisplayString(a.staff.name),9,_hoisted_4$1x)]))}});var StaffGroup_vue_vue_type_style_index_0_lang="";const _hoisted_1$2d={class:"selected-staff-group"},_hoisted_2$24={class:"group-avatars mg_0_auto"},_hoisted_3$1W={key:0,class:"cops-three cs_pointer flex_start"},_hoisted_4$1w={key:1,class:"cops-four cs_pointer flex_col"},_hoisted_5$19={class:"flex_start mt_nlg"},_hoisted_6$$={key:2,class:"cops-more cs_pointer flex_col"},_hoisted_7$X={class:"flex_start"},_hoisted_8$U={class:"flex_start mt_nlg"},_hoisted_9$N={class:"group-num mt_xs fs_6"},_sfc_main$1M=defineComponent({__name:"StaffGroup",props:{staffList:{type:Array,default:()=>[]},isShowAllStaff:Boolean},setup(a){const o=a,s=computed(()=>o.staffList[1]||{}),i=computed(()=>o.staffList[2]||{}),l=computed(()=>o.staffList[3]||{}),c=computed(()=>o.staffList[4]||{});return(r,u)=>{const d=resolveComponent("WidgetArrow");return openBlock(),createElementBlock("div",_hoisted_1$2d,[createBaseVNode("div",_hoisted_2$24,[a.staffList.length===3?(openBlock(),createElementBlock("div",_hoisted_3$1W,[createVNode(UserAvatar,{class:"z_index_1","is-mini":"",info:unref(s)},null,8,["info"]),createVNode(UserAvatar,{class:"ml_nlg","is-mini":"",info:unref(i)},null,8,["info"])])):createCommentVNode("",!0),a.staffList.length===4?(openBlock(),createElementBlock("div",_hoisted_4$1w,[createVNode(UserAvatar,{class:"cops1","is-mini":"",info:unref(s)},null,8,["info"]),createBaseVNode("div",_hoisted_5$19,[createVNode(UserAvatar,{class:"cops2","is-mini":"",info:unref(i)},null,8,["info"]),createVNode(UserAvatar,{class:"cops3 ml_nlg","is-mini":"",info:unref(l)},null,8,["info"])])])):createCommentVNode("",!0),a.staffList.length>4?(openBlock(),createElementBlock("div",_hoisted_6$$,[createBaseVNode("div",_hoisted_7$X,[createVNode(UserAvatar,{class:"cops1","is-mini":"",info:unref(s)},null,8,["info"]),createVNode(UserAvatar,{class:"cops2 ml_nlg","is-mini":"",info:unref(i)},null,8,["info"])]),createBaseVNode("div",_hoisted_8$U,[createVNode(UserAvatar,{class:"cops3","is-mini":"",info:unref(l)},null,8,["info"]),createVNode(UserAvatar,{class:"cops4 ml_nlg","is-mini":"",info:unref(c)},null,8,["info"])])])):createCommentVNode("",!0)]),createBaseVNode("p",_hoisted_9$N,[createTextVNode(" \u7B49"+toDisplayString(a.staffList.length)+"\u4EBA\u8054\u5408\u521B\u4F5C ",1),createVNode(d,{class:normalizeClass(["i_icon_more ts_all_fast rotate_90 mt_0",{rotate_n90:a.isShowAllStaff}])},null,8,["class"])])])}}});var VideoDesc_vue_vue_type_style_index_0_lang="";const _hoisted_1$2c={class:"selected-video-desc"},_hoisted_2$23={class:"desc-video mb_sm lh_xs flex_start"},_hoisted_3$1V={key:0,class:"desc-vd-item"},_hoisted_4$1v={key:1,class:"desc-vd-item"},_hoisted_5$18={class:"desc-vd-item"},_hoisted_6$_={class:"pudate item ml_lg"},_hoisted_7$W={class:"desc-info desc-v2 text_break"},_hoisted_8$T=["textContent","onClick"],_hoisted_9$M=["innerHTML"],_sfc_main$1L=defineComponent({__name:"VideoDesc",props:{formats:{type:Object,default:()=>({})}},emits:["openUser"],setup(a,{emit:o}){return(s,i)=>(openBlock(),createElementBlock("div",_hoisted_1$2c,[createBaseVNode("div",_hoisted_2$23,[a.formats.enableVt?(openBlock(),createElementBlock("span",_hoisted_3$1V,[createVNode(unref(PlayTime)),createTextVNode(" "+toDisplayString(a.formats.vtDisplay||a.formats.vt),1)])):(openBlock(),createElementBlock("span",_hoisted_4$1v,[createVNode(unref(VdPlay)),createTextVNode(" "+toDisplayString(a.formats.view),1)])),createBaseVNode("span",_hoisted_5$18,[createVNode(unref(VdDm)),createTextVNode(" "+toDisplayString(a.formats.danmaku),1)]),createBaseVNode("span",_hoisted_6$_,toDisplayString(a.formats.pubdate),1)]),createBaseVNode("div",_hoisted_7$W,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.formats.descMoreV2Array,l=>(openBlock(),createElementBlock(Fragment,{key:l.biz_id},[l.type===2?(openBlock(),createElementBlock("span",{key:0,class:"desc-info--user",textContent:toDisplayString("@"+l.raw_text),onClick:c=>o("openUser",l.biz_id)},null,8,_hoisted_8$T)):(openBlock(),createElementBlock("span",{key:1,class:"desc-info--text",innerHTML:unref(videoLink)(unref(unhtml)(l.raw_text).replaceAll(/\n/gi,"<br/>"),"333.788.video.desc.click")},null,8,_hoisted_9$M))],64))),128))])]))}}),_hoisted_1$2b={width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$22=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21.21 9.822c0 4.99-4.572 9.036-10.214 9.036-.323 0-.643-.014-.959-.04-.508.386-1.396 1.02-2.362 1.527-.396.208-.797.402-1.174.575-.869.4-1.808-.302-1.747-1.256l.054-.916c.041-.779.022-1.355-.008-1.743C2.358 15.355.782 12.751.782 9.822c0-4.99 4.573-9.036 10.214-9.036 5.642 0 10.215 4.046 10.215 9.036Zm-14.14 0a1.179 1.179 0 1 1-2.357 0 1.179 1.179 0 0 1 2.357 0Zm10.213 0a1.179 1.179 0 1 1-2.357 0 1.179 1.179 0 0 1 2.357 0Zm-6.285 1.179a1.179 1.179 0 1 0 0-2.357 1.179 1.179 0 0 0 0 2.357Z",fill:"#fff"},null,-1),_hoisted_3$1U=[_hoisted_2$22];function render$v(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$2b,_hoisted_3$1U)}var VdComment={render:render$v},VideoToolBar_vue_vue_type_style_index_0_lang="";const _hoisted_1$2a={ref:"toolbarWrap",class:"app_toolbar"},_hoisted_2$21={class:"toolbar-item"},_hoisted_3$1T={class:"info-text"},_hoisted_4$1u=createBaseVNode("span",{class:"toolbar-item-title"},"\u70B9\u8D5E\uFF08Q\uFF09",-1),_hoisted_5$17={class:"toolbar-item"},_hoisted_6$Z={class:"info-text"},_hoisted_7$V=createBaseVNode("span",{class:"toolbar-item-title"},"\u6295\u5E01\uFF08W\uFF09",-1),_hoisted_8$S={class:"toolbar-item"},_hoisted_9$L={class:"info-text"},_hoisted_10$G=createBaseVNode("span",{class:"toolbar-item-title"},"\u6536\u85CF\uFF08E\uFF09",-1),_hoisted_11$D={class:"toolbar-item"},_hoisted_12$y={class:"info-text"},_hoisted_13$r=createBaseVNode("span",{class:"toolbar-item-title"},"\u5206\u4EAB\uFF08V\uFF09",-1),_hoisted_14$o={class:"toolbar-item"},_hoisted_15$m={class:"info-text"},_hoisted_16$l=createBaseVNode("span",{class:"toolbar-item-title"},"\u8BC4\u8BBA\uFF08C\uFF09",-1),_sfc_main$1K=defineComponent({__name:"VideoToolBar",props:{from:String,info:{type:Object,default:()=>({})},formats:{type:Object,default:()=>({})},tripleData:{type:Object,default:()=>({})}},setup(a){const o=a,s=o.from==="UgcSeason"?ugcSeasonEvents:selectedEvents,i=o.from==="UgcSeason"?useUgcSeasonToolStore():useSelectedToolStore(),l=computed(()=>o.info.cid),{aid:c,cid:r,hasCoined:u,faved:d,liked:_,shareNum:f,likeNum:m,coinNum:p,faveNum:v,replyNum:g,likeIo:$,likeAnim:y,coinAnim:B,favAnim:C,showLikeCombo:S,showCoinCombo:E,showFavCombo:k}=storeToRefs(i),{userInfo:b}=storeToRefs(useUserInfoStore()),V="./assets/lib/svga/fire.svga",A="./assets/lib/svga/like_heart.svga",x="./assets/lib/svga/like_thumb.svga",T=ref(!1),I=ref(!1),R=ref(!1),N=()=>{if(y.value)return y.value=""},w=()=>{y.value="",S.value=!1},D=()=>{B.value="",E.value=!1},L=()=>{C.value="",k.value=!1},P=ee=>{T.value||i.setLike(c.value,ee)},j=()=>{i.setFav("collection")},O=ee=>{i.setCoin("coinOperated",ee)},F=()=>{if(!b.value.isLogin){requestLogin("toolBar.startCombo");return}T.value||_.value&&d.value&&u.value||(N(),y.value="shake",T.value=!0,I.value=!0)},U=()=>{y.value==="shake"&&(R.value=!1,y.value=""),i.setTriple(c.value)},W=()=>{setTimeout(()=>{T.value=!1},500),y.value==="shake"&&(y.value="",R.value=!1),I.value=!1},ne=()=>{s.emit("showActionDialog","dialogShare"),allCustomReport({type:"click",spm_info:"main.play-detail.tools.share"},{msg:JSON.stringify({win_name:"main"})})};events.on("playerTriple",ee=>{const{type:G,action:Q}=ee;if(G==="ugc")switch(Q){case"start":F();break;case"cancel":W();break}});const H=inject("updateVideoData");watch(m,()=>{r.value===l.value&&(H==null||H(r.value,"like",m.value))}),watch(p,()=>{r.value===l.value&&(H==null||H(r.value,"coin",p.value))}),watch(v,()=>{r.value===l.value&&(H==null||H(r.value,"favorite",v.value))}),watch(f,()=>{r.value===l.value&&(H==null||H(r.value,"share",f.value))}),watch(g,()=>{r.value===l.value&&(H==null||H(r.value,"reply",g.value))});const M=inject("updateTripleData");return watch(_,()=>{r.value===l.value&&(M==null||M(r.value,"liked",_.value))}),watch(d,()=>{r.value===l.value&&(M==null||M(r.value,"faved",d.value))}),watch(u,()=>{r.value===l.value&&(M==null||M(r.value,"hasCoined",u.value))}),(ee,G)=>{const Q=resolveDirective("longClick"),te=resolveDirective("longClickLeave");return openBlock(),createElementBlock("div",_hoisted_1$2a,[createBaseVNode("div",_hoisted_2$21,[withDirectives((openBlock(),createElementBlock("div",{ref:"like",class:normalizeClass(["toolbar-item-icon like",{on:a.tripleData.liked,liking:unref($)}]),onClick:G[2]||(G[2]=ce=>P(ce))},[unref(S)||unref(y)==="base"?(openBlock(),createBlock(_sfc_main$2B,{key:0,class:"svga-center",onFinish:w,file:V})):createCommentVNode("",!0),unref(y)==="heart"?(openBlock(),createBlock(_sfc_main$2B,{key:1,class:"svga-top",onFinish:G[0]||(G[0]=ce=>y.value=""),file:A})):createCommentVNode("",!0),unref(y)==="thumb"?(openBlock(),createBlock(_sfc_main$2B,{key:2,class:"svga-top",onFinish:G[1]||(G[1]=ce=>y.value=""),file:x})):createCommentVNode("",!0),createVNode(unref(BarLike),{class:normalizeClass(["icon",{shake:unref(y)==="shake"}])},null,8,["class"]),createBaseVNode("span",_hoisted_3$1T,toDisplayString(a.formats.like),1)],2)),[[Q,F,"800"],[te,W]]),_hoisted_4$1u]),createBaseVNode("div",_hoisted_5$17,[createBaseVNode("div",{ref:"coin",class:normalizeClass(["toolbar-item-icon coin",{on:a.tripleData.hasCoined}]),onClick:G[4]||(G[4]=ce=>O(ce))},[createVNode(_sfc_main$2C,{ref:"progessCoin",size:34,left:8,top:6,start:I.value,onAnimFinish:U},null,8,["start"]),unref(E)?(openBlock(),createBlock(_sfc_main$2B,{key:0,class:"svga-center",file:V,onStart:G[3]||(G[3]=ce=>B.value="combo"),onFinish:D})):createCommentVNode("",!0),createVNode(unref(BarCoin),{class:"icon"}),createBaseVNode("span",_hoisted_6$Z,toDisplayString(a.formats.coin),1)],2),_hoisted_7$V]),createBaseVNode("div",_hoisted_8$S,[createBaseVNode("div",{ref:"collect",class:normalizeClass(["toolbar-item-icon collect",{on:a.tripleData.faved}]),onClick:G[7]||(G[7]=ce=>j())},[createVNode(_sfc_main$2C,{ref:"progessShare",size:34,left:8,top:6,start:I.value,onFinish:G[5]||(G[5]=()=>{})},null,8,["start"]),unref(k)?(openBlock(),createBlock(_sfc_main$2B,{key:0,class:"svga-center",file:V,onStart:G[6]||(G[6]=ce=>C.value="combo"),onFinish:L})):createCommentVNode("",!0),createVNode(unref(BarFav),{class:"icon"}),createBaseVNode("span",_hoisted_9$L,toDisplayString(a.formats.favorite),1)],2),_hoisted_10$G]),createBaseVNode("div",_hoisted_11$D,[a.formats.noShare?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:"toolbar-item-icon share",onClick:G[8]||(G[8]=ce=>ne())},[createVNode(unref(BarShare),{class:"icon"}),createBaseVNode("span",_hoisted_12$y,toDisplayString(a.formats.share||"\u5206\u4EAB"),1)])),_hoisted_13$r]),createBaseVNode("div",_hoisted_14$o,[createBaseVNode("div",{class:"toolbar-item-icon comment",onClick:G[9]||(G[9]=ce=>unref(s).emit("toggleComment",!0))},[createVNode(unref(VdComment),{class:"icon"}),createBaseVNode("span",_hoisted_15$m,toDisplayString(a.formats.reply||"\u8BC4\u8BBA"),1)]),_hoisted_16$l])],512)}}});var SelectedVideoInfo_vue_vue_type_style_index_0_lang="";const _hoisted_1$29={class:"selected_video pd_md pb_sm pr_sm flex_start pe_none p_relative"},_hoisted_2$20=createBaseVNode("div",{class:"selected_video--bg pe_none p_cover z_index_0"},null,-1),_hoisted_3$1S={class:"video-info-wrapper pe_none p_relative z_index_1 flex_between items_end w_100"},_hoisted_4$1t={class:"video-basic pe_auto"},_hoisted_5$16={class:"up-wrapper"},_hoisted_6$Y={key:0,class:"up-info"},_hoisted_7$U={key:0,class:"flex_start"},_hoisted_8$R={class:"up-details"},_hoisted_9$K={class:"flex_start fs_4"},_hoisted_10$F={key:0,class:"up-follow"},_hoisted_11$C=createTextVNode(" \u5173\u6CE8 "),_hoisted_12$x=createTextVNode(" \u5DF2\u5173\u6CE8 "),_hoisted_13$q=createTextVNode(" \u5DF2\u5173\u6CE8 "),_hoisted_14$n={class:"dropdown_select--content cs_pointer"},_hoisted_15$l={class:"mt_xs"},_hoisted_16$k={key:1,class:"up-staff p_relative"},_hoisted_17$j=createBaseVNode("h4",{class:"mb_sm fs_4"},"\u521B\u4F5C\u56E2\u961F",-1),_hoisted_18$j={class:"staff-ups flex_start u_select_none"},_hoisted_19$f={class:"up-cops"},_hoisted_20$d={class:"video-wrapper mt_sm u_select_none"},_hoisted_21$d={class:"video-tt fw_bold text_ellipsis_2l fs_3 mr_2 mb_xs"},_hoisted_22$c={class:"ov_hidden pb_xs"},_hoisted_23$b={key:0,class:"video-collect"},_hoisted_24$b={class:"collect-title lh_sm"},_hoisted_25$a={class:"collect-index lh_sm"},_hoisted_26$9={class:"video-actions mb_xs pe_auto"},_sfc_main$1J=defineComponent({__name:"SelectedVideoInfo",props:{from:String,info:{type:Object,default:()=>({})},video:{type:Object,default:()=>({})},tripleData:{type:Object,default:()=>({})},relations:{type:Object,default:()=>({})},isActive:Boolean,isShowComment:Boolean},emits:["updateRelations"],setup(a,{emit:o}){const s=a,i=s.from==="UgcSeason"?ugcSeasonEvents:selectedEvents,l=ref(!1),c=ref(!1),r=ref(null),u=ref(null),d=computed(()=>s.video.View||{}),_=computed(()=>d.value.staff||[]),f=computed(()=>_.value[0]||{}),m=computed(()=>_.value[1]||{}),p=computed(()=>s.video.Card||{}),v=computed(()=>{var F,U,W;return{face:(F=s.info.owner)==null?void 0:F.face,official_verify:(U=p.value.card)==null?void 0:U.official_verify,fans:formatNum(((W=p.value.card)==null?void 0:W.fans)||0),likes:formatNum(p.value.like_num||0)}}),g=ref({}),$=ref(!0),y=computed(()=>d.value.pages||[]),B=computed(()=>{const F=y.value.findIndex(U=>U.cid===s.info.cid);return F>-1?F+1:1}),C=computed(()=>d.value.ugc_season||{}),S=computed(()=>{const F=[];(C.value.sections||[]).forEach(W=>F.push(...W.episodes));const U=F.findIndex(W=>d.value.aid===W.aid);return U>-1?U+1:1}),E=computed(()=>{const F=y.value.length>1||C.value.ep_count>0;let U="",W="";return y.value.length>1?(U="\u89C6\u9891\u9009\u96C6",W=`${B.value}/${y.value.length}`):C.value.ep_count>0&&(U=`\u5408\u96C6 \xB7 ${C.value.title}`,W=`${S.value}/${C.value.ep_count}`),{isShow:F,title:U,index:W}}),{userInfo:k}=storeToRefs(useUserInfoStore()),{reportSlideDetails:b,reportAvatarClick:V,reportFollow:A,activeItem:x}=useSelectedStore(),T=computed(()=>{var _e,ke;const{desc_v2:F,pubdate:U,stat:W,rights:ne,title:H,desc:M,enable_vt:ee,vt_display:G,subtitle:Q}=d.value;let te=[];const ce=((_e=g.value)==null?void 0:_e.desc)||M,$e=((ke=g.value)==null?void 0:ke.desc_v2)||F;if($e!=null&&$e.length)for(const oe of $e)te.push(oe);else te.push({raw_text:ce,type:1});let we=(Q==null?void 0:Q.list)||[];return{descMoreV2Array:te,subtitle:we.filter(oe=>oe.author.name),title:H,pubdate:isNaN(Number(U))?U:formatDate("YYYY-MM-DD",U*1e3),view:formatNum(W==null?void 0:W.view),danmaku:formatNum(W==null?void 0:W.danmaku),isInteractive:ne==null?void 0:ne.is_stein_gate,reprint:ne==null?void 0:ne.no_reprint,argue_msg:W==null?void 0:W.argue_msg,vt:formatNum(W==null?void 0:W.vt),enableVt:ee,vtDisplay:G,like:String(W==null?void 0:W.like)==="--"?W.like:formatNum(W.like||0),coin:String(W==null?void 0:W.coin)==="--"?W.coin:formatNum(W.coin||0),favorite:String(W==null?void 0:W.favorite)==="--"?W.favorite:formatNum(W.favorite||0),share:String(W==null?void 0:W.share)==="--"?W.share:formatNum(W.share||0),reply:String(W==null?void 0:W.reply)==="--"?W.reply:formatNum(W.reply||0),isSteinGate:(ne==null?void 0:ne.is_stein_gate)===1,noShare:(ne==null?void 0:ne.no_share)===1,needBuy:ne==null?void 0:ne.arc_pay}});let I=!1;const R=async(F,U=!1)=>{if(!k.value.isLogin){callNative("auth/requestLogin");return}if(!I){I=!0;try{await Upinfo.followChange({fid:F,act:1,re_src:U?229:1}),I=!1,$.value=!1,o("updateRelations",F,!0),A({up_mid:F,re_src:U?229:1})}catch{I=!1,toastAsync({content:"\u5173\u6CE8\u5931\u8D25"})}}};let N=!1;const w=async()=>{var U;if(N)return;N=!0;const F=s.info.owner.mid;try{await Upinfo.followChange({fid:F,act:((U=s.relations[F])==null?void 0:U.attribute)===1?4:2,re_src:14}),o("updateRelations",F,!1),N=!1}catch(W){console.error(W),N=!1,toastAsync({content:"\u53D6\u6D88\u5173\u6CE8\u5931\u8D25"})}},D=F=>{!F||(document.fullscreenElement&&document.exitFullscreen(),V({up_mid:F}),callNative("window/openMainWindowPage",{page:"SpacePage",meta:{mid:F}}))};watch(l,F=>b(F));const{rightPanelTab:L,isShowComment:P}=storeToRefs(useUgcSeasonStore()),j=()=>{s.from==="UgcSeason"&&L.value!=="1"?(L.value="1",P.value=!0):i.emit("toggleUgcSeason"),s.from==="UgcSeason"&&allCustomReport({type:"click",spm_info:"main.play-story.ugc-season.entrance"},{msg:JSON.stringify({})})},O=()=>{s.isActive&&(l.value=!l.value)};return i.on("toggleSelectedInfo",O),onBeforeUnmount(()=>{i.off("toggleSelectedInfo",O)}),(F,U)=>{var M,ee,G;const W=resolveComponent("v-button"),ne=resolveComponent("VDropdown"),H=resolveComponent("WidgetArrow");return openBlock(),createElementBlock("div",_hoisted_1$29,[_hoisted_2$20,createBaseVNode("div",_hoisted_3$1S,[createBaseVNode("div",_hoisted_4$1t,[createBaseVNode("div",_hoisted_5$16,[unref(_).length?(openBlock(),createElementBlock("div",_hoisted_16$k,[_hoisted_17$j,createBaseVNode("div",_hoisted_18$j,[createBaseVNode("div",{class:normalizeClass(["up-self",{mr_md:unref(_).length<=2,mr_xxl:unref(_).length>2}])},[createVNode(_sfc_main$1N,{staff:unref(f),relations:a.relations,onOpenUser:U[6]||(U[6]=Q=>D(unref(f).mid)),onFollowUser:U[7]||(U[7]=Q=>R(unref(f).mid,!0))},null,8,["staff","relations"])],2),createBaseVNode("div",_hoisted_19$f,[unref(_).length===2?(openBlock(),createBlock(_sfc_main$1N,{key:0,staff:unref(m),relations:a.relations,onOpenUser:U[8]||(U[8]=Q=>D(unref(m).mid)),onFollowUser:U[9]||(U[9]=Q=>R(unref(m).mid,!0))},null,8,["staff","relations"])):createCommentVNode("",!0),unref(_).length>2?(openBlock(),createBlock(_sfc_main$1M,{key:1,staffList:unref(_),isShowAllStaff:c.value,onMouseenter:U[10]||(U[10]=Q=>c.value=!0)},null,8,["staffList","isShowAllStaff"])):createCommentVNode("",!0)])]),createVNode(Transition,{name:"fade"},{default:withCtx(()=>{var Q,te;return[c.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["all-staff p_absolute l_0 pd_sm u_select_none flex_start flex_wrap z_index_999",{t_0:((Q=r.value)==null?void 0:Q.offsetHeight)>300,b_0:((te=r.value)==null?void 0:te.offsetHeight)<=300,"staff-3":unref(_).length===3,"staff-4":unref(_).length===4,"staff-max":unref(_).length>=5}]),onMouseleave:U[11]||(U[11]=ce=>c.value=!1)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(_),ce=>(openBlock(),createElementBlock("div",{class:"staff-item my_sm",key:ce.mid},[createVNode(_sfc_main$1N,{staff:ce,relations:a.relations,onOpenUser:$e=>D(ce.mid),onFollowUser:$e=>R(ce.mid,!0)},null,8,["staff","relations","onOpenUser","onFollowUser"])]))),128))],34)):createCommentVNode("",!0)]}),_:1})])):(openBlock(),createElementBlock("div",_hoisted_6$Y,[a.info.owner?(openBlock(),createElementBlock("div",_hoisted_7$U,[createVNode(UserAvatar,{class:"flex_shrink_0 u_select_none mr_xs cs_pointer","is-mini":"",info:unref(v),onClick:U[0]||(U[0]=Q=>D(a.info.owner.mid))},null,8,["info"]),createBaseVNode("div",_hoisted_8$R,[createBaseVNode("h4",_hoisted_9$K,[createBaseVNode("div",{class:"up-name fw_bold mr_sm hover_pink cs_pointer text_ellipsis ts_all_fast",onClick:U[1]||(U[1]=Q=>D(a.info.owner.mid))},toDisplayString(a.info.owner.name),1),a.relations[a.info.owner.mid]||!unref(k).isLogin?(openBlock(),createElementBlock("div",_hoisted_10$F,[!((M=a.relations[a.info.owner.mid])!=null&&M.followed)||!unref(k).isLogin?(openBlock(),createBlock(W,{key:0,class:"up-add flex_start",type:"pink",size:"small",onClick:U[2]||(U[2]=Q=>R(a.info.owner.mid))},{default:withCtx(()=>[createVNode(unref(IcoAdd),{class:"mr_xs"}),_hoisted_11$C]),_:1})):createCommentVNode("",!0),(ee=a.relations[a.info.owner.mid])!=null&&ee.followed?(openBlock(),createElementBlock(Fragment,{key:1},[$.value?(openBlock(),createBlock(ne,{key:1,trigger:"hover",placement:"bottom-start",classname:"selected_video--upmenu",target:".app_selected--content","click-hide":""},{content:withCtx(()=>[createBaseVNode("div",_hoisted_14$n,[createBaseVNode("div",{class:"dropdown_select--option",onClick:U[4]||(U[4]=Q=>unref(selectedEvents).emit("showActionDialog","dialogFollowed"))}," \u8BBE\u7F6E\u5206\u7EC4 "),createBaseVNode("div",{class:"dropdown_select--option",onClick:U[5]||(U[5]=Q=>w())},"\u53D6\u6D88\u5173\u6CE8")])]),default:withCtx(()=>[createVNode(W,{class:"up-menu flex_start",size:"small"},{default:withCtx(()=>[createVNode(unref(VdMenu),{class:"mr_xs"}),_hoisted_13$q]),_:1})]),_:1})):(openBlock(),createBlock(W,{key:0,class:"up-menu flex_start",size:"small",onMouseleave:U[3]||(U[3]=Q=>$.value=!0)},{default:withCtx(()=>[createVNode(unref(VdMenu),{class:"mr_xs"}),_hoisted_12$x]),_:1}))],64)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createBaseVNode("p",_hoisted_15$l,toDisplayString(unref(v).fans)+"\u7C89\u4E1D \xB7 "+toDisplayString(unref(v).likes)+"\u70B9\u8D5E",1)])])):createCommentVNode("",!0)]))]),createBaseVNode("div",_hoisted_20$d,[createBaseVNode("div",{class:"video-title cs_pointer",onClick:U[12]||(U[12]=Q=>l.value=!l.value)},[createBaseVNode("p",_hoisted_21$d,[createTextVNode(toDisplayString(a.info.title)+" ",1),createVNode(H,{class:normalizeClass(["i_icon_more ts_all_fast rotate_90",{rotate_n90:l.value}])},null,8,["class"])])]),createBaseVNode("div",_hoisted_22$c,[createBaseVNode("div",{class:normalizeClass(["video-desc-wrap ts_all_fast auto_hide_scrollbar scrollbar_thin pr_md",{ov_hidden:!l.value,ov_overlay_y:l.value&&((G=u.value)==null?void 0:G.offsetHeight)>340}]),ref_key:"videoDescWrapRef",ref:r,style:normalizeStyle({height:l.value?u.value.offsetHeight+"px":0}),onWheel:U[13]||(U[13]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",{class:"video-desc",ref_key:"videoDescInnerRef",ref:u},[createVNode(_sfc_main$1L,{formats:unref(T),onOpenUser:D},null,8,["formats"])],512)],38)]),unref(E).isShow?(openBlock(),createElementBlock("div",_hoisted_23$b,[createBaseVNode("div",{class:"collect-content flex_start cs_pointer",onClick:j},[createBaseVNode("div",_hoisted_24$b,toDisplayString(unref(E).title),1),createBaseVNode("span",_hoisted_25$a,toDisplayString(unref(E).index),1),createVNode(H,{class:"i_icon_more"})])])):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_26$9,[createVNode(_sfc_main$1K,{from:a.from,info:a.info,formats:unref(T),tripleData:a.tripleData},null,8,["from","info","formats","tripleData"])])])])}}});var SelectedComment_vue_vue_type_style_index_0_lang="";const _hoisted_1$28={class:"app_selected--comment"},_hoisted_2$1$={class:"app_selected--comment-num"},_hoisted_3$1R={class:"b_text fs_3 px_lg py_md mg_0 lh_xs p_relative bb_1 bc_line_light"},_hoisted_4$1s=createTextVNode(" \u8BC4\u8BBA "),_hoisted_5$15={class:"cmt-num fw_400 fs_6 text2"},_hoisted_6$X={class:"app_selected--comment-wrap"},_hoisted_7$T={class:"app_selected--comment-dialog"},_sfc_main$1I=defineComponent({__name:"SelectedComment",props:{aid:Number,cid:Number,videoItemDom:String,isShowComment:Boolean},emits:["closeComment"],setup(a,{emit:o}){const s=a,i=ref(null),l=reactive({showContent:!1,showPopup:!1,showSubPage:!1}),{commentInstance:c,initCommentInstance:r,clearComment:u}=useCommentModule(SPM_PV.selected),{replyNum:d}=storeToRefs(useSelectedToolStore()),{activeItem:_}=storeToRefs(useSelectedStore()),f=()=>{c.value||r(`${s.videoItemDom} .app_selected--comment-dom`,{oid:s.aid,type:1,scrollContainer:i.value,detailContainerSelector:`${s.videoItemDom} .app_selected--comment-detail`,dialogContainerSelector:`${s.videoItemDom} .app_selected--comment-dialog`,onViewDetailReply:()=>{selectedEvents.emit("showCommentPopup",s.cid)},onBackToNormalReply:()=>{l.showPopup=!1,selectedEvents.emit("hideCommentPopup")},onViewDialogReply:()=>{selectedEvents.emit("showCommentSubPage",s.cid)},onBackToDetailReply:()=>{l.showSubPage=!1,selectedEvents.emit("hideCommentSubPage")},onChangeReplyCount:p=>{d.value=p},onPreviewImage:(p,v)=>{events.emit("hidePopover"),events.emit("visitGallery",{container:".app_selected--wrapper",downloadable:!1,items:p.map(g=>({src:g.url,width:g.width,height:g.height,size:g.size,tags:[]})),index:v})}})},m=()=>{o("closeComment")};return onMounted(()=>{watch(()=>s.isShowComment,p=>{var v,g,$,y;p?(f(),(g=(v=c.value)==null?void 0:v.reset)==null||g.call(v,{showBackTopIcon:!0})):(events.emit("leaveGallery"),selectedEvents.emit("hideCommentPopup"),selectedEvents.emit("hideCommentSubPage"),(y=($=c.value)==null?void 0:$.reset)==null||y.call($,{showBackTopIcon:!1}))}),watch([()=>s.cid,_],([p,v])=>{p!==v.cid&&setTimeout(()=>u(),300)},{deep:!0}),selectedEvents.on("showCommentPopup",p=>{p===s.cid&&(l.showPopup=!0)}),selectedEvents.on("showCommentSubPage",p=>{p===s.cid&&(l.showSubPage=!0)}),selectedEvents.on("hideCommentPopup",()=>{l.showPopup=!1,setTimeout(()=>u("detail"),300)}),selectedEvents.on("hideCommentSubPage",()=>{l.showSubPage=!1,setTimeout(()=>u("dialog"),300)})}),onBeforeUnmount(()=>{selectedEvents.off("showCommentPopup"),selectedEvents.off("showCommentSubPage"),selectedEvents.off("hideCommentPopup"),selectedEvents.off("hideCommentSubPage")}),(p,v)=>(openBlock(),createElementBlock("div",_hoisted_1$28,[createBaseVNode("div",_hoisted_2$1$,[createBaseVNode("h3",_hoisted_3$1R,[_hoisted_4$1s,createBaseVNode("span",_hoisted_5$15,toDisplayString(unref(d)),1),createBaseVNode("span",{class:"app_selected--comment-close p_center_y r_md",onClick:m},[createVNode(unref(IcoClose))])])]),createBaseVNode("div",{class:"app_selected--comment-dom",ref_key:"commentDom",ref:i},null,512),withDirectives(createBaseVNode("div",_hoisted_6$X,[createBaseVNode("div",{class:normalizeClass(["app_selected--comment-detail",{"is-left":l.showSubPage}])},null,2),withDirectives(createBaseVNode("div",_hoisted_7$T,null,512),[[vShow,l.showSubPage]])],512),[[vShow,l.showPopup]])]))}});var SelectedItem_vue_vue_type_style_index_0_lang="";const _hoisted_1$27=["data-cid"],_hoisted_2$1_=createBaseVNode("span",null,"\u8BE6\u60C5\u9875",-1),_hoisted_3$1Q=createTextVNode(" \xA0 "),_hoisted_4$1r=createBaseVNode("span",null,"\u8BE6\u60C5\u9875",-1),_hoisted_5$14=["onClick"],_sfc_main$1H=defineComponent({__name:"SelectedItem",props:{info:{type:Object,default:()=>({})},playingList:{type:Array,default:()=>[]},index:Number,width:Number,height:Number,activeId:Number,isOnSliding:Boolean,isWinVisiable:Boolean,isSelectedPage:Boolean,isUgcSeasonPage:Boolean},emits:["playerInited","playerEnded"],setup(a,{emit:o}){const s=a,i=useRouter(),l=ref(),c=ref({}),r=ref({}),u=ref({}),d=ref(!1),_=ref(!1),f=ref(!1),m=ref(!1),p=ref(!1),v=ref(!1),g=ref(!1),$=ref(!1),y=computed(()=>s.activeId&&s.activeId===s.info.cid),B=computed(()=>y.value&&s.isSelectedPage),C=computed(()=>B.value&&!s.isOnSliding),S=computed(()=>(s.isSelectedPage||s.isUgcSeasonPage)&&$.value&&p.value&&s.info.cid),E=computed(()=>`.app_selected--item[data-cid="${s.info.cid}"]`),k=computed(()=>`${E.value} .cpx-player-summary-wrap`),b=window,V=b.nano,A=ref(!0),x=ref(!1),T=[0,1,2],I=inject("hasActiveDialog"),{userInfo:R}=storeToRefs(useUserInfoStore()),N=useSelectedStore(),{reportGoToDetails:w,reportToggleDetails:D,reportSwitchVideo:L}=N,{activeItem:P,activeVideo:j,fromItem:O,isMainMini:F,isShowMiniBtns:U,isMiniPanelHover:W,isPlayerControlHover:ne}=storeToRefs(N);watchEffect(()=>{P.value.cid===s.info.cid&&(j.value=c.value)});const{player:H,itemInfo:M,fromSpmid:ee,firstInfo:G,firstPlay:Q,restartPlay:te,heartbeat:ce}=useSelectedTrack();watchEffect(()=>{M.value=s.info,ee.value=`main.play-story.video.${O.value._location||0}.click`});const $e=useSelectedToolStore(),{resetToolStore:we,initToolStore:_e,initTriple:ke,initFollowed:oe,setLike:ie,setCoin:ye,setFav:Te}=$e,{cid:Ee}=storeToRefs($e),Ve=ref(!1);watch([()=>s.width,_],([J,z])=>{Ve.value=z?J<1360:J<980},{immediate:!0}),watch(()=>s.info.cid,J=>{J&&($.value=!1,g.value=!1,p.value=!1,x.value=!1,Xe(),Ge(),setTimeout(()=>{const z=document.querySelector(`${E.value} .video-backdrop-bg`),Y=document.querySelector(`${E.value} .video-backdrop-blur`);z&&(z.style.background="#000"),Y&&(Y.style.background="#000")}))},{immediate:!0}),watch(B,J=>{J&&Ee.value!==s.info.cid&&we()}),watch([B,S],([J,z])=>{J&&z&&_e(H.value,s.info,c.value)}),watch([B,r],([J,z])=>{J&&z.init&&ke(z)}),watch([B,u],([J,z])=>{var Y,de,ve;J&&((Y=z[0])==null?void 0:Y.followed)&&oe((ve=z[(de=s.info.owner)==null?void 0:de.mid])==null?void 0:ve.followed)}),provide("updateVideoData",(J,z,Y)=>{J===s.info.cid&&(c.value.View.stat[z]=Y)}),provide("updateTripleData",(J,z,Y)=>{J===s.info.cid&&(r.value[z]=Y)});let We=null;const Ge=async()=>{if(!!s.info.bvid)try{c.value=await loadVideoData({bvid:s.info.bvid}),p.value=!0,Ye(),Ke(),clearTimeout(We)}catch(J){console.error(J),We=setTimeout(()=>Ge(),1e3)}},Ye=async()=>{if(!!s.info.bvid)try{const z=(await Upinfo.getVideoState(s.info.bvid)).data||{};r.value={init:!0,liked:z.like,faved:z.favorite,hasCoined:z.coin,orderState:z.season_fav}}catch(J){console.error(J)}},Ke=async()=>{var J;if(!!R.value.isLogin)try{const z=(((J=c.value.View)==null?void 0:J.staff)||[]).map(Y=>Y.mid);z.includes(s.info.owner.mid)||z.unshift(s.info.owner.mid),u.value=await getRelations(z)||{}}catch(z){console.error(z)}};watchEffect(()=>{s.isSelectedPage&&v.value&&s.info.cid&&!g.value&&Xe()});const Xe=async()=>{var z,Y;g.value=!0;const J={element:l.value,fullWrap:document.querySelector(".app_selected--content"),aid:s.info.id,cid:s.info.cid,channelKind:7,pcSpecialMode:!0,controlsList:new Set(["noPlaybackClue","noPBP"]),featureList:new Set(["noToast"]),storageKey:"Pc-Special",autoplay:!1,enableHEVC:!0,enableAV1:!0,hideBoxShadow:!0,iid:"pc_app_selected"};try{H.value.reload?(await H.value.reload(J),B.value&&H.value.play()):(H.value=V.createPlayer(J,{"bpx-primary-color":"#f69","bpx-fn-color":"#f69","bpx-fn-hover-color":"#f69"}),Z(),await H.value.connect(),document.fullscreenElement&&H.value.setSideScreen(V.ScreenKind.Full),y.value||(Y=(z=H.value).toggleFeature)==null||Y.call(z,{shortcut:!0})),b.selectedPlayers[s.info.cid]=H.value,$.value=!0}catch(de){console.error(de)}},He=()=>{if(H.value.disconnect)try{B.value&&ce(),H.value.disconnect(),b.selectedPlayers[s.info.cid]=null,delete b.selectedPlayers[s.info.cid]}catch(J){console.error(J)}},Z=()=>{H.value.on(V.EventType.Player_Virtual_Action,K),H.value.on(V.EventType.Player_Play,ae),H.value.on(V.EventType.Player_Pause,me),H.value.on(V.EventType.Player_Ended,ge),H.value.on(V.EventType.Player_Danmaku_Change,Ce),H.value.on(V.EventType.Player_Quality_Requested,Fe),H.value.on(V.EventType.Player_RateChange,Le),H.value.on(V.EventType.Player_VolumeChange,Be),H.value.on(V.EventType.Player_Summary_Change,pe),H.value.on(V.EventType.Player_Aspect_Change,he),H.value.on(V.EventType.Player_Initialized,Se)},K=({detail:J})=>{var z;if(!!J){switch(J.kind){case V.InternalKind.OpenUrl:openInBrowser$1(toHttps(J.data),"selected.JumpEvent");return;case V.InternalKind.First_playtime:G.value||(G.value=J.data,Q(),(z=O.value)!=null&&z.cid||L("auto",0));return}if(!R.value.isLogin&&J.kind<11){requestLogin("ugcPlayer.videoEvents"+J.kind);return}switch(J.kind){case V.InternalKind.Like:ie(s.info.id);break;case V.InternalKind.Coin:ye();break;case V.InternalKind.Collect:Te();break;case V.InternalKind.Triple:events.emit("playerTriple",{type:"ugc",action:J.data.action});break;case V.InternalKind.Super_Quality_Guide:requestBigVip("qnPay");break}}},X=()=>{var J,z,Y,de;A.value?(z=(J=H.value).play)==null||z.call(J):(de=(Y=H.value).pause)==null||de.call(Y)},ae=()=>{var J,z,Y,de;B.value?A.value=(z=(J=H.value).isPaused)==null?void 0:z.call(J):(de=(Y=H.value).pause)==null||de.call(Y)},me=()=>{var J,z;A.value=(z=(J=H.value).isPaused)==null?void 0:z.call(J)},ge=()=>{B.value&&(I!=null&&I()?H.value.pause():o("playerEnded"))},Ce=J=>{if(m.value){const z=H.value.danmaku.isOpen();setData(KEY_DM_SWITCH,{isDmOpen:z,idxs:Qe(T)})}},Fe=J=>{const z=H.value.getQuality();setData(KEY_QN_CONFIG,{qn:z,idxs:Qe(T)})},Le=J=>{if(y.value){const z=H.value.getPlaybackRate();z<3&&setData(KEY_RATE_CONFIG,{rate:z})}},Be=debounce$1(()=>{const J=H.value.getVolume();setData(KEY_VOLUME_CONFIG,{volume:J,idxs:Qe(T)})},200),pe=J=>{D(!J.detail)},he=J=>{var de;const z=(de=H.value)==null?void 0:de.mediaElement(),Y=!!(J.detail&&z);if(Y){const{videoWidth:ve,videoHeight:xe}=z;setMainVideoSize({width:ve,height:xe})}else setMainVideoSize(null);allCustomReport({type:"click",spm_info:"main.play-detail.player.aspect-ratio"},{msg:JSON.stringify({win_name:"main",is_set_aspect:Y})})},Se=()=>{var Y,de;if(IS_GPU_DISABLED||!H.value.mediaElement)return;const J=(de=(Y=H.value).mediaElement)==null?void 0:de.call(Y),z=J==null?void 0:J.parentElement;if(z){x.value&&(x.value=!0);let ve=z.querySelector(".video-backdrop-bg"),xe=z.querySelector(".video-backdrop-blur");xe||(xe=document.createElement("div"),xe.classList.add("video-backdrop","video-backdrop-blur"),z.prepend(xe)),ve||(ve=document.createElement("div"),ve.classList.add("video-backdrop","video-backdrop-bg"),z.prepend(ve));const{videoWidth:Me,videoHeight:Ie}=J;let Ae=document.createElement("canvas");Ae.width=Me,Ae.height=Ie,Ae.getContext("2d").drawImage(J,0,0,Me,Ie),Ae.toBlob(Re=>{if(Re){const Ue=URL.createObjectURL(Re);ve.style.background=`url(${Ue})`,xe.style.background=`url(${Ue})`}Ae=null},"image/jpeg",.6)}},be=J=>{var z;((z=J.key)==null?void 0:z.toLowerCase())==="d"&&Je()},Pe=J=>{var z;(z=J.target)!=null&&z.classList.contains("bui-switchdm-input")&&Je()};let ze=null;const Je=()=>{m.value=!0,clearTimeout(ze),ze=setTimeout(()=>m.value=!1,200)},Ze=(J,z)=>{u.value[J]&&(u.value[J].followed=z)},ot=()=>{var J,z,Y,de;(z=(J=H.value).pause)==null||z.call(J),openPlayerWindow({type:"ugc",bvid:s.info.bvid,cid:s.info.cid,t:((de=(Y=H.value).getCurrentTime)==null?void 0:de.call(Y))||0,fromSpmid:SPM_PV.selected,exitMini:!0}),w()},nt=()=>{var J,z;if(B.value){document.fullscreenElement&&document.exitFullscreen();const{cid:Y,bvid:de}=s.info,ve=((z=(J=H.value).getCurrentTime)==null?void 0:z.call(J))||0;i.push({name:"UgcSeason",query:{cid:Y,bvid:de,t:ve}})}};selectedEvents.on("toggleUgcSeason",nt);const rt=()=>{d.value=!1,clearTimeout(at)};let at=null;const qe=throttle$2(()=>{d.value=!0,clearTimeout(at),at=setTimeout(()=>d.value=!1,1e3)},200),Qe=J=>J.filter(z=>T.includes(z)&&z!==s.index),et=J=>[J.includes(s.index),Qe(J)];let st=null;watch(B,J=>{var z,Y,de,ve,xe,Me,Ie,Ae,je,Re,Ue,it,yt,$t,Bt,Ct;if(clearTimeout(st),J){const{isDmOpen:mt,idxs:vt}=getData(KEY_DM_SWITCH)||{};if(isBol(mt)&&vt){const[_t,tt]=et(vt);_t&&(mt?(z=H.value.danmaku)==null||z.open():(Y=H.value.danmaku)==null||Y.close()),setData(KEY_DM_SWITCH,tt.length?{isDmOpen:mt,idxs:tt}:null)}const{qn:ct,idxs:ut}=getData(KEY_QN_CONFIG)||{};if(isNum(ct==null?void 0:ct.newQ)&&ut){const[_t,tt]=et(ut);_t&&(((ve=(de=H.value).getQuality)==null?void 0:ve.call(de))||{}).newQ!==ct.newQ&&((Me=(xe=H.value).requestQuality)==null||Me.call(xe,ct.newQ)),setData(KEY_QN_CONFIG,tt.length?{qn:ct,idxs:tt}:null)}const{rate:pt}=getData(KEY_RATE_CONFIG)||{};pt&&isNum(pt)&&((Ae=(Ie=H.value).setPlaybackRate)==null||Ae.call(Ie,pt));const{volume:ft,idxs:ht}=getData(KEY_VOLUME_CONFIG)||{};if(isNum(ft)&&ht){const[_t,tt]=et(ht);_t&&((Re=(je=H.value).setVolume)==null||Re.call(je,ft)),setData(KEY_VOLUME_CONFIG,tt.length?{volume:ft,idxs:tt}:null)}(it=(Ue=H.value).setDmSetting)==null||it.call(Ue),($t=(yt=H.value).toggleFeature)==null||$t.call(yt,{shortcut:!1})}else(Ct=(Bt=H.value).toggleFeature)==null||Ct.call(Bt,{shortcut:!0}),events.emit("leaveGallery"),st=setTimeout(()=>_.value=!1,300)}),watch([B,H],([J])=>{var z,Y;J?H.value.play&&(s.isWinVisiable?(H.value.play(),G.value&&te()):f.value=!0,b.selectedPlayers.activePlayer!==H.value&&(b.selectedPlayers.activePlayer=H.value),o("playerInited")):((Y=(z=H.value).pause)==null||Y.call(z),ce())});const le=()=>{!B.value||C.value&&(_.value=!0,allCustomReport({type:"click",spm_info:"main.play-detail.player.comment"},{msg:JSON.stringify({win_name:"main",type:"selected"})}))};selectedEvents.on("showComment",le);const fe=()=>{!B.value||_.value&&(_.value=!1)};selectedEvents.on("hideComment",fe);const De=()=>{!B.value||(_.value?fe():le())};selectedEvents.on("toggleComment",De),watch(()=>s.isWinVisiable,J=>{var z,Y;J?(B.value&&f.value&&((Y=(z=H.value).play)==null||Y.call(z),G.value&&te(),L("auto",0)),f.value=!1):B.value&&H.value.isPaused&&!H.value.isPaused()&&(H.value.pause(),ce(),f.value=!0)});let q=null;const se=()=>{ne.value=!0},Ne=()=>{ne.value=!1};return watch(S,J=>{var z;J&&!q&&(q=(z=l.value)==null?void 0:z.querySelector(".cpx-player-control-wrap"),q&&(q.addEventListener("mouseenter",se,!1),q.addEventListener("mouseleave",Ne,!1)))}),watch(()=>s.isSelectedPage,J=>{J&&B.value&&L("auto",0)}),onMounted(()=>{v.value=!0,document.addEventListener("keydown",be),document.addEventListener("mousedown",Pe)}),onBeforeUnmount(()=>{He(),clearTimeout(We),selectedEvents.off("showComment",le),selectedEvents.off("hideComment",fe),selectedEvents.off("toggleComment",De),selectedEvents.off("toggleUgcSeason",nt),document.removeEventListener("keydown",be),document.removeEventListener("mousedown",Pe),q==null||q.removeEventListener("mouseenter",se,!1),q==null||q.removeEventListener("mouseleave",Ne,!1)}),(J,z)=>{const Y=resolveComponent("WidgetArrow");return openBlock(),createElementBlock("div",{class:normalizeClass(["app_selected--item app_selected--flow p_relative",{"app_selected--mini":unref(F),"app_selected--item-active":d.value,"app_selected--item-deactive":!d.value,"app_selected--item-showcmt":_.value,"app_selected--item-narrow":Ve.value}]),"data-cid":a.info.cid,style:normalizeStyle({height:a.height+"px"}),onMouseleave:rt,onMousemove:z[5]||(z[5]=(...de)=>unref(qe)&&unref(qe)(...de))},[createBaseVNode("div",{class:normalizeClass(["app_selected--player w_100 h_100",{"app_selected--shown":unref(B)}]),ref_key:"selectedPlayerRef",ref:l},null,2),withDirectives(createBaseVNode("div",{class:normalizeClass(["app_selected--cmtwrap bg_bg1 p_absolute r_0 t_0 b_0",{deactive:!unref(y)}])},[createVNode(_sfc_main$1I,{aid:a.info.id,cid:a.info.cid,videoItemDom:unref(E),isShowComment:_.value,onCloseComment:z[0]||(z[0]=de=>_.value=!1)},null,8,["aid","cid","videoItemDom","isShowComment"])],2),[[vShow,_.value]]),createVNode(_sfc_main$2D,{loading:!$.value},null,8,["loading"]),createBaseVNode("div",{class:"app_selected--todetail flex_between u_select_none cs_pointer",onClick:ot},[_hoisted_2$1_,createVNode(Y,{class:"i_icon_more"}),_hoisted_3$1Q]),createVNode(Transition,{name:"fade"},{default:withCtx(()=>[unref(S)&&unref(U)?(openBlock(),createElementBlock("div",{key:0,class:"app_selected--todetail-mini flex_between u_select_none cs_pointer",onClick:ot,onMouseenter:z[1]||(z[1]=de=>W.value=!0),onMouseleave:z[2]||(z[2]=de=>W.value=!1)},[_hoisted_4$1r,createVNode(Y,{class:"i_icon_more"})],32)):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{name:"fade"},{default:withCtx(()=>[unref(S)&&unref(U)?(openBlock(),createElementBlock("div",{key:0,class:"app_selected--pause p_center",onClick:withModifiers(X,["stop"]),onMouseenter:z[3]||(z[3]=de=>W.value=!0),onMouseleave:z[4]||(z[4]=de=>W.value=!1)},[withDirectives(createVNode(unref(VdPauseS),{class:"pause-icon"},null,512),[[vShow,!A.value]]),withDirectives(createVNode(unref(VdPlays),{class:"pause-icon"},null,512),[[vShow,A.value]])],40,_hoisted_5$14)):createCommentVNode("",!0)]),_:1}),unref(S)?(openBlock(),createBlock(Teleport,{key:0,to:unref(k)},[createVNode(_sfc_main$1J,{ref:"selectedVideoInfoRef",info:a.info,video:c.value,tripleData:r.value,relations:u.value,isActive:unref(B),onUpdateRelations:Ze},null,8,["info","video","tripleData","relations","isActive"])],8,["to"])):createCommentVNode("",!0)],46,_hoisted_1$27)}}});var DialogFollowed_vue_vue_type_style_index_0_lang="";const _sfc_main$1G=defineComponent({__name:"DialogFollowed",props:{from:String},setup(a,{expose:o}){const s=a,i=ref(!1);o({isShowDialog:i,showDialog:()=>i.value=!0,closeDialog:()=>i.value=!1});const r=s.from==="UgcSeason"?useUgcSeasonStore():useSelectedStore(),{activeVideo:u}=storeToRefs(r),d=computed(()=>{let{card:_}=u.value.Card||{};return{id:+(_==null?void 0:_.mid),name:_==null?void 0:_.name}});return(_,f)=>(openBlock(),createBlock(_sfc_main$2F,{show:i.value,onClose:f[2]||(f[2]=m=>i.value=!1)},{default:withCtx(()=>[i.value?(openBlock(),createBlock(_sfc_main$2E,{key:0,upName:unref(d).name,upid:unref(d).id,onClose:f[0]||(f[0]=m=>i.value=!1),onSave:f[1]||(f[1]=m=>i.value=!1)},null,8,["upName","upid"])):createCommentVNode("",!0)]),_:1},8,["show"]))}});var DialogCoinOperated_vue_vue_type_style_index_0_lang="";const _hoisted_1$26={class:"app-cionpanel bg_bg1_float"},_hoisted_2$1Z=createBaseVNode("div",{class:"app-cionpanel--title"},"\u6295\u5E01",-1),_hoisted_3$1P={class:"app-cionpanel--desc"},_hoisted_4$1q=createTextVNode(" \u9009\u62E9\u4F60\u7684\u6295\u5E01\u6570\u91CF "),_hoisted_5$13={class:"app-cionpanel--select"},_hoisted_6$W={class:"app-cionpanel--coin"},_hoisted_7$S={class:"app-cionpanel--coin-all"},_hoisted_8$Q=createTextVNode(" \u786C\u5E01\u4F59\u989D\uFF1A"),_hoisted_9$J={class:"app-cionpanel--coin-desc"},_hoisted_10$E=createTextVNode("\u540C\u65F6\u70B9\u8D5E "),_hoisted_11$B={class:"app-cionpanel--btn"},_sfc_main$1F=defineComponent({__name:"DialogCoinOperated",props:{from:String},setup(a,{expose:o}){const i=a.from==="UgcSeason"?useUgcSeasonToolStore():useSelectedToolStore(),{biliMsg:l}=i,{hasCoined:c,canCoined:r,coinNum:u,liked:d,likeNum:_,aid:f}=storeToRefs(i),{userInfo:m}=storeToRefs(useUserInfoStore()),p=ref(null),v=ref(0),g=ref(!0),$=ref(null),y=ref(null),B=ref(),C=ref();let S=!1;const E=ref(!1);o({isShowDialog:E,showDialog:()=>E.value=!0,closeDialog:()=>E.value=!1}),watch(E,w=>{var D,L,P,j;w?(g.value=!0,v.value=0,Upinfo.getExp().then(O=>{(O==null?void 0:O.code)===0&&(v.value=O.data.data)}),(D=B.value)==null||D.start(),(L=C.value)==null||L.start()):((P=B.value)==null||P.stop(),(j=C.value)==null||j.stop())});const V=computed(()=>m.value.money||0),A=computed(()=>p.value?p.value:r.value&&c.value===0?2:1),x=computed(()=>A.value>V.value?"\u786C\u5E01\u4F59\u989D\u4E0D\u8DB3":"\u4F59\u989D\u5145\u8DB3\uFF0C\u53EF\u4EE5\u6295\u5E01");watch(c,()=>{p.value=null});const T=w=>{p.value=w},I=()=>{E.value=!1},R=async w=>{var j,O;if(S)return;S=!0;const D=A.value,L=F=>{var U;l({msg:"\u6295\u5E01\u6210\u529F\uFF0C\u611F\u8C22\u60A8\u7684\u652F\u6301",cd:1500}),c.value+=D,u.value+=D,((U=F.data)==null?void 0:U.like)&&!d.value&&(d.value=!0,_.value++),setTimeout(()=>reloadUserInfo(),400),I()},P=F=>{l({el:w.target,msg:(F==null?void 0:F.message)||"\u6295\u5E01\u5931\u8D25",cd:1e3,type:"error"})};try{const F={eab_x:(j=window.biliPlayer)!=null&&j.isPaused()?2:1,ramval:(O=window.biliPlayer)==null?void 0:O.getMediaInfo().absoluteAltPlayTime,referer:"",source:"pc_client_normal",aid:f.value,multiply:D,select_like:g.value?1:0,cross_domain:!0},U=await Upinfo.addCoin({...F,ga:1},{handleResCode:!1});if(U.code===0)L(U);else if(U.code===-401){const W=window.CaptchaLoader;if(W){const H=await(await W.load())(U.data.ga_data),M=await Upinfo.addCoin({...F,tk:H},{handleResCode:!1});M.code===0?(L(M),allCustomReport({type:"click",spm_info:"main.play-detail.tools.coin"},{msg:JSON.stringify({win_name:"main"})})):P()}else P()}else P()}catch(F){console.error("add coin err:",F),F.name!=="cancel"&&P(F)}finally{S=!1}},N=w=>{(w.key==="w"||w.key==="W")&&E.value&&R({})};return watch($,w=>{!w||(B.value=new FrameAnimation(w),E.value&&B.value.start())}),watch(y,w=>{!w||(C.value=new FrameAnimation(w),E.value&&C.value.start())}),onMounted(()=>{document.addEventListener("keydown",N)}),onBeforeUnmount(()=>{document.removeEventListener("keydown",N)}),(w,D)=>(openBlock(),createBlock(_sfc_main$2F,{show:E.value,onClose:D[4]||(D[4]=L=>E.value=!1)},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$26,[createBaseVNode("span",{class:"close",onClick:I},[createVNode(unref(IcoClose))]),_hoisted_2$1Z,createBaseVNode("div",_hoisted_3$1P,[_hoisted_4$1q,createBaseVNode("span",null,toDisplayString(unref(A))+"\u4E2A",1)]),createBaseVNode("div",_hoisted_5$13,[createBaseVNode("div",{class:normalizeClass(unref(A)===1?"on":""),onClick:D[0]||(D[0]=L=>T(1))},[createBaseVNode("div",{class:"coin-num-ani coin-one",ref_key:"coinOneRef",ref:$},null,512)],2),unref(r)&&unref(c)===0?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["app-cionpanel--select-right",unref(A)===2?"on":""]),onClick:D[1]||(D[1]=L=>T(2))},[createBaseVNode("div",{class:"coin-num-ani coin-two",ref_key:"coinTwoRef",ref:y},null,512)],2)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_6$W,[createBaseVNode("div",_hoisted_7$S,[_hoisted_8$Q,createBaseVNode("span",null,toDisplayString(unref(V)),1)]),createBaseVNode("div",_hoisted_9$J,toDisplayString(unref(x)),1)]),createBaseVNode("div",{class:"app-cionpanel--like",onClick:D[2]||(D[2]=L=>g.value=!g.value)},[withDirectives(createVNode(unref(CheckboxDefault),null,null,512),[[vShow,!g.value]]),withDirectives(createVNode(unref(CheckboxSelected),{class:"app-cionpanel--like-selected"},null,512),[[vShow,g.value]]),_hoisted_10$E]),createBaseVNode("div",_hoisted_11$B,[createBaseVNode("div",{class:"app-cionpanel--btn-cel text1 bd_1",onClick:I},"\u53D6\u6D88"),createBaseVNode("div",{class:normalizeClass(["app-cionpanel--btn-sure text_white",{disabled:unref(A)>unref(V)}]),onClick:D[3]||(D[3]=L=>R(L))}," \u786E\u8BA4\u6295\u5E01\uFF08 W \uFF09 ",2)])])]),_:1},8,["show"]))}});var _imports_0$1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAC5JREFUKBVjYMABZi5a9R+EcUgzMOGSICQ+EjQy4gs5fAFEduDgNHQ0HhnIT6sAudAOjNLnY/wAAAAASUVORK5CYII=",DialogCollection_vue_vue_type_style_index_0_lang="";const _hoisted_1$25={class:"app-collection--title"},_hoisted_2$1Y=createTextVNode("\u9009\u62E9\u6536\u85CF\u5939"),_hoisted_3$1O=["onClick"],_hoisted_4$1p={class:"app-collection--list-item-name"},_hoisted_5$12=["title","textContent"],_hoisted_6$V={class:"app-collection--list-item-right"},_hoisted_7$R={key:0},_hoisted_8$P={key:1},_hoisted_9$I={class:"app-collection--list-item-count"},_hoisted_10$D=createBaseVNode("img",{class:"p_center_y l_md",src:_imports_0$1,alt:""},null,-1),_hoisted_11$A=createTextVNode(" \u65B0\u5EFA\u6536\u85CF\u5939 "),_hoisted_12$w=[_hoisted_10$D,_hoisted_11$A],_hoisted_13$p={key:0,class:"fav-add-tip"},_hoisted_14$m=createTextVNode(" \u70B9\u51FB\u5F39\u7A97\u5185\u5176\u4ED6\u533A\u57DF\u6216ESC\u952E\uFF0C\u53D6\u6D88 "),_hoisted_15$k=["value"],_hoisted_16$j={type:"submit",class:"submit"},_hoisted_17$i={class:"bottom"},_hoisted_18$i=["disabled"],_sfc_main$1E=defineComponent({__name:"DialogCollection",props:{from:String},setup(a,{expose:o}){const i=a.from==="UgcSeason"?useUgcSeasonToolStore():useSelectedToolStore(),{biliMsg:l}=i,{aid:c,faved:r,faveNum:u}=storeToRefs(i),{userInfo:d}=storeToRefs(useUserInfoStore()),_=ref([]),f=ref(!1),m=ref(null),p=ref(null),v=ref(""),g=localStorage.getItem("favCreateFolderTip"),$=ref(g),y=ref(!1),B=()=>y.value=!0,C=()=>y.value=!1;o({isShowDialog:y,showDialog:B,closeDialog:C});const S=D=>{var L,P;["INPUT","TEXTAREA"].includes((L=D.target)==null?void 0:L.tagName)||((P=D.target)==null?void 0:P.getAttribute("contenteditable"))!=="true"&&(D.key==="e"||D.key==="E")&&y.value&&(E.value&&!f.value?R({}):setTimeout(()=>y.value=!1,300))};watch(y,D=>{D&&(f.value=!1,v.value="",w())}),onMounted(()=>{document.addEventListener("keydown",S)}),onBeforeUnmount(()=>{document.removeEventListener("keydown",S)}),watch(f,()=>{f.value&&nextTick(()=>{p.value.focus()})});const E=computed(()=>_.value.length?_.value.some(D=>D.checked!==!!D.favoured):!1),k=computed(()=>_.value.filter(D=>D.checked&&!D.favoured).map(D=>D.id)),b=computed(()=>_.value.filter(D=>!D.checked&&D.favoured).map(D=>D.id)),V=computed(()=>_.value.filter(D=>D.favoured).map(D=>D.id)),A=()=>{var D;if(((D=_.value)==null?void 0:D.length)>=100){l({el:m.value,msg:"\u6536\u85CF\u5939\u4E2A\u6570\u5DF2\u8FBE\u5230\u4E0A\u9650",cd:1e3,type:"error"});return}f.value=!0},x=()=>{$.value="1",localStorage.setItem("favCreateFolderTip","1")},T=()=>{v.value="",f.value=!1},I=D=>{(!m.value||!m.value.contains(D.target))&&T()},R=async D=>{var L,P;try{const j={eab_x:(L=window.biliPlayer)!=null&&L.isPaused()?2:1,ramval:(P=window.biliPlayer)==null?void 0:P.getMediaInfo().absoluteAltPlayTime,referer:"",gaia_source:"pc_client_normal",rid:c.value,type:2,add_media_ids:k.value.join(","),del_media_ids:b.value.join(","),platform:"web"};let O=await Upinfo.moveFavFold({...j,ga:1},{handleResCode:!1});if(O.code===-401){const W=window.CaptchaLoader;if(W){const H=await(await W.load())(O.data.ga_data);O=await Upinfo.moveFavFold({...j,gaia_token:H},{handleResCode:!1})}}if(O.code!==0){l({el:D.target,msg:O.message||"\u6536\u85CF\u5931\u8D25",cd:1e3,type:"error"});return}y.value=!1;const F=k.value.length>0||b.value.length!==V.value.length;let U="";r.value?F||(u.value--,U="\u53D6\u6D88\u6536\u85CF"):F&&(u.value++,U="\u6536\u85CF"),r.value=F,U&&(l({msg:U+"\u6210\u529F",cd:1500}),U==="\u6536\u85CF"&&allCustomReport({type:"click",spm_info:"main.play-detail.tools.collect"},{msg:JSON.stringify({win_name:"main"})})),C()}catch(j){j.name!=="cancel"&&l({el:D.target,msg:j.message||"\u6536\u85CF\u5931\u8D25",cd:1e3,type:"error"})}},N=D=>{if(D.preventDefault(),!v.value){l({el:D.target,msg:"\u8BF7\u586B\u5199\u6536\u85CF\u5939\u540D\u79F0",cd:1e3,type:"error"});return}Upinfo.addFavFold({privacy:0,title:v.value}).then(L=>{if(L.code!==0){if(L.code===61001||L.code===61002)return;l({el:D.target,msg:L.message,cd:1e3,type:"error"});return}L.data.checked=!0,L.data.favoured=!1,_.value.push(L.data),v.value="",f.value=!1}).catch(L=>{l({el:D.target,msg:L.message||"\u521B\u5EFA\u6536\u85CF\u5939\u5931\u8D25",cd:1e3,type:"error"})})};function w(){Upinfo.getFavList({type:2,rid:c.value,up_mid:d.value.mid}).then(D=>{if(D.code!==0){l({el:m.value,msg:D.message,cd:1e3,type:"error"});return}let L=D.data.list;!(L!=null&&L.length)||(L.forEach(P=>{P.checked=P.fav_state===1,P.favoured=P.fav_state===1,P.isPrivate=P.attr%2,P.attr>>=1,P.isDefault=P.attr%2===0}),_.value=[],L.forEach(P=>{P.fav_state===1&&_.value.push(P)}),L.forEach(P=>{P.fav_state!==1&&_.value.push(P)}),_.value[0].checked=!0)}).catch(D=>{l({msg:D.message||"\u52A0\u8F7D\u6536\u85CF\u5939\u5217\u8868\u5931\u8D25",cd:1e3,type:"error"})})}return(D,L)=>(openBlock(),createBlock(_sfc_main$2F,{show:y.value,onClose:L[6]||(L[6]=P=>y.value=!1)},{default:withCtx(()=>[createBaseVNode("div",{class:"app-collection",onClick:L[5]||(L[5]=P=>I(P))},[createBaseVNode("div",_hoisted_1$25,[_hoisted_2$1Y,createVNode(unref(IcoClose),{class:"app-collection--close",onClick:C})]),createBaseVNode("div",{class:normalizeClass(["app-collection--list",{adding:f.value}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(_.value,(P,j)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["app-collection--list-item",{disable:P.media_count>=(P.isDefault?5e4:1e3),active:P.checked}]),key:j,onClick:O=>P.checked=!P.checked},[createBaseVNode("div",_hoisted_4$1p,[withDirectives(createVNode(unref(CheckboxDefault),null,null,512),[[vShow,!P.checked]]),withDirectives(createVNode(unref(CheckboxSelected),{class:"app-collection--selected"},null,512),[[vShow,P.checked]]),createBaseVNode("span",{class:"app-collection--list-item-title",title:P.title,textContent:toDisplayString(P.title)},null,8,_hoisted_5$12)]),createBaseVNode("div",_hoisted_6$V,[P.isPrivate?(openBlock(),createElementBlock("span",_hoisted_7$R,"\u79C1\u5BC6")):(openBlock(),createElementBlock("span",_hoisted_8$P,"\u516C\u5F00")),createBaseVNode("span",_hoisted_9$I,toDisplayString(P.media_count+(P.checked?1:0)-(P.favoured?1:0))+"\u4E2A\u5185\u5BB9",1)])],10,_hoisted_3$1O))),128))],2),createBaseVNode("div",{class:"add-group",ref_key:"addGroup",ref:m},[withDirectives(createBaseVNode("div",{class:"add-btn p_relative ts_all_fast",onClick:L[0]||(L[0]=withModifiers(P=>A(),["stop"]))},_hoisted_12$w,512),[[vShow,!f.value]]),withDirectives(createBaseVNode("form",{class:"input-group",onSubmit:L[3]||(L[3]=P=>N(P))},[$.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_13$p,[_hoisted_14$m,createVNode(unref(IcoClose),{onClick:withModifiers(x,["stop"])},null,8,["onClick"])])),createBaseVNode("input",{ref_key:"favInput",ref:p,type:"text",maxLength:"20",placeholder:"\u6700\u591A\u53EF\u8F93\u516520\u4E2A\u5B57",value:v.value,onInput:L[1]||(L[1]=P=>v.value=P.target.value),onKeydown:L[2]||(L[2]=withKeys(P=>T(),["esc"]))},null,40,_hoisted_15$k),createBaseVNode("button",_hoisted_16$j,[createVNode(unref(IcoAdd$1))])],544),[[vShow,f.value]])],512),createBaseVNode("div",_hoisted_17$i,[createBaseVNode("button",{class:normalizeClass(["btn submit-move",{disable:!unref(E)||f.value}]),disabled:!unref(E)||f.value,onClick:L[4]||(L[4]=P=>R(P))}," \u4FDD\u5B58\uFF08 E \uFF09 ",10,_hoisted_18$i)])])]),_:1},8,["show"]))}});var DialogShare_vue_vue_type_style_index_0_lang="";const _hoisted_1$24=createBaseVNode("div",{class:"app_share--title"},"\u5206\u4EAB\u81F3",-1),_hoisted_2$1X={class:"app_share--area"},_hoisted_3$1N={class:"app_share--area-left"},_hoisted_4$1o=["src"],_hoisted_5$11=createBaseVNode("p",null,"\u624B\u673A\u626B\u7801\u89C2\u770B/\u5206\u4EAB",-1),_hoisted_6$U={class:"app_share--area-right"},_hoisted_7$Q={class:"share-btn-icon"},_hoisted_8$O=createBaseVNode("span",{class:"share-btn-text"},"QQ\u7A7A\u95F4",-1),_hoisted_9$H={class:"share-btn-icon"},_hoisted_10$C=createBaseVNode("span",{class:"share-btn-text"},"\u5FAE\u535A",-1),_hoisted_11$z={class:"share-btn-icon"},_hoisted_12$v=createBaseVNode("span",{class:"share-btn-text"},"\u52A8\u6001",-1),_hoisted_13$o={class:"share-btn-icon"},_hoisted_14$l=createBaseVNode("span",{class:"share-btn-text"},"\u5FAE\u4FE1",-1),_hoisted_15$j={class:"share-btn-icon"},_hoisted_16$i=createBaseVNode("span",{class:"share-btn-text"},"QQ",-1),_hoisted_17$h={class:"share-btn-icon"},_hoisted_18$h=createBaseVNode("span",{class:"share-btn-text"},"\u590D\u5236\u94FE\u63A5\uFF08V\uFF09",-1),_sfc_main$1D=defineComponent({__name:"DialogShare",props:{from:String},setup(a,{expose:o}){const s=a,i=s.from==="UgcSeason"?ugcSeasonEvents:selectedEvents,l=s.from==="UgcSeason"?useUgcSeasonToolStore():useSelectedToolStore(),{aid:c,cid:r,bvid:u,page:d,videoData:_,shareNum:f,msgParent:m}=storeToRefs(l),{userInfo:p}=storeToRefs(useUserInfoStore()),v=ref(!1),g=()=>v.value=!0,$=()=>v.value=!1;o({isShowDialog:v,showDialog:g,closeDialog:$,copyShareLink:()=>T()});const B=computed(()=>{let N=`https://www.bilibili.com/video/${u.value||"av"+c.value}`+(d.value>1?"?p="+d.value:"");if(p.value.mid){const w=md5(String(p.value.mid));N=N+(N.indexOf("?")===-1?"?":"&")+`vd_source=${w}`}return N}),C=computed(()=>{const{title:N}=_.value.View;return`\u3010${N}\u3011${B.value}`}),S=ref(""),E=ref(null),k=ref(!1),b=N=>B.value+(B.value.indexOf("?")===-1?"?":"&")+`share_source=${N}`,V=N=>{const{View:w}=_.value,D=(w.desc||"").substr(0,120).replace(/http(s)?:\/\//gi,"");return{url:b(N),title:w.title,desc:w.title+" UP\u4E3B\uFF1A"+(w.owner&&w.owner.name),summary:D,shortTitle:w.title,pic:w.pic,aid:w.aid}},A=async()=>{if(!p.value.isLogin){requestLogin("share.shareDynmic");return}try{await x()}catch{}v.value=!1,i.emit("showActionDialog","dialogDynShare")},x=async()=>{var N,w;if(k.value)return!1;k.value=!0;try{const D={eab_x:(N=window.biliPlayer)!=null&&N.isPaused()?2:1,ramval:(w=window.biliPlayer)==null?void 0:w.getMediaInfo().absoluteAltPlayTime,referer:"",source:"pc_client_normal",aid:c.value};let L=await shareAdd({...D,ga:1},{handleResCode:!1});if(L.code===-401){const P=window.CaptchaLoader;if(P){const O=await(await P.load())(L.data.ga_data);L=await shareAdd({...D,tk:O},{handleResCode:!1})}}if((L==null?void 0:L.code)==0)return f.value=L.data,!0}catch{}finally{k.value=!1}return!1},T=async(N,w)=>{const D=document.querySelector(".app_selected--content");copyText(C.value,D);try{await x()}catch{}return toastAsync({content:"\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",style:"top:calc(50% + 10px);left:calc(50% + 10px)",parent:m.value}),!1},I=async(N,w)=>{try{await x()}catch{}share(N,w),$()},R=()=>(browser.toDataURL(b("weixin_pc"),{margin:2,width:125}).then(N=>{S.value=N}).catch(N=>{}),!1);return onMounted(()=>{watch(r,()=>{R()},{immediate:!0})}),(N,w)=>(openBlock(),createBlock(_sfc_main$2F,{show:v.value,onClose:w[6]||(w[6]=D=>v.value=!1)},{default:withCtx(()=>[createBaseVNode("div",{ref:"shareDialogRef",class:"app_share bg_bg1_float",onClick:w[5]||(w[5]=withModifiers(()=>{},["stop"]))},[createBaseVNode("span",{class:"close",onClick:$},[createVNode(unref(IcoClose))]),_hoisted_1$24,createBaseVNode("div",_hoisted_2$1X,[createBaseVNode("div",_hoisted_3$1N,[createBaseVNode("div",{ref_key:"qrcodeDom",ref:E,class:"qrcode-box"},[createBaseVNode("img",{class:"qrcode-box-url",src:S.value,alt:""},null,8,_hoisted_4$1o)],512),_hoisted_5$11]),createBaseVNode("div",_hoisted_6$U,[createBaseVNode("div",{onClick:w[0]||(w[0]=D=>I("qzone",V("qzone_pc"))),class:"share-btn"},[createBaseVNode("span",_hoisted_7$Q,[createVNode(unref(ShareQzone))]),_hoisted_8$O]),createBaseVNode("div",{onClick:w[1]||(w[1]=D=>I("weibo",V("weibo_pc"))),class:"share-btn"},[createBaseVNode("span",_hoisted_9$H,[createVNode(unref(ShareWeibo))]),_hoisted_10$C]),createBaseVNode("div",{onClick:A,class:"share-btn"},[createBaseVNode("span",_hoisted_11$z,[createVNode(unref(ShareDynmic))]),_hoisted_12$v]),createBaseVNode("div",{class:"share-btn",onClick:w[2]||(w[2]=D=>T())},[createBaseVNode("span",_hoisted_13$o,[createVNode(unref(ShareWeixin))]),_hoisted_14$l]),createBaseVNode("div",{class:"share-btn",onClick:w[3]||(w[3]=D=>I("qq",V("qq")))},[createBaseVNode("span",_hoisted_15$j,[createVNode(unref(ShareQQ))]),_hoisted_16$i]),createBaseVNode("div",{class:"share-link share-btn",onClick:w[4]||(w[4]=D=>T())},[createBaseVNode("span",_hoisted_17$h,[createVNode(unref(ShareVideo))]),_hoisted_18$h])])])],512)]),_:1},8,["show"]))}});var MiniMainHeader_vue_vue_type_style_index_0_lang="";const _hoisted_1$23=createBaseVNode("div",{class:"app_mini--dragbar-left mt_nxs no_drag pe_auto"},null,-1),_hoisted_2$1W={key:0,class:"title-slider"},_hoisted_3$1M={class:"app_mini--dragbar-right mt_nxs no_drag pe_auto flex_start"},_hoisted_4$1n=createBaseVNode("div",{class:"app_mini--divider"},null,-1),_sfc_main$1C=defineComponent({__name:"MiniMainHeader",props:{from:String},setup(a){const o=a,s=o.from==="UgcSeason"?ugcSeasonEvents:selectedEvents,i=o.from==="UgcSeason"?useUgcSeasonStore():useSelectedStore(),{activeItem:l,isMainPined:c,isMainMini:r,isMiniHeaderHover:u,isShowMiniBtns:d}=storeToRefs(i),_=ref(1e3);let f;const m=ref(0),p=ref(null),v=ref(null),g=ref(null),$=ref(!1),y=computed(()=>{var b;return m.value>0&&m.value<((b=v.value)==null?void 0:b.offsetWidth)-30}),B=()=>{var b,V;$.value=((b=v.value)==null?void 0:b.offsetWidth)>((V=p.value)==null?void 0:V.offsetWidth)};watch([v,l],B,{flush:"post"});const C=()=>{const b=c.value;b?callNative("window/unpin"):callNative("window/pin"),allCustomReport({type:"click",spm_info:"main.main.main-page.toggle-pin"},{msg:JSON.stringify({win_name:"main",is_mini:r.value,is_enter:!b})})};useIpcListener("window/pinChange",()=>c.value=callNativeSync("window/isPined"));class S{constructor(){this.isStoped=!0,this.isRunning=!1,this.moveTimer=null,this.waitTimer=null,this.startTimer=null,this.waitDelay=2e3,this.startDelay=2e3}move(){g.value.style.marginLeft=`${-m.value}px`,m.value++,this.moveTimer=setTimeout(()=>this.step(),20)}step(){if(this.isStoped){this.isRunning=!1;return}m.value>=v.value.offsetWidth?(m.value=0,this.waitTimer=setTimeout(()=>this.move(),this.waitDelay)):this.move()}start(){this.isRunning||(this.isRunning=!0,this.isStoped=!1,m.value=0,this.startTimer=setTimeout(()=>this.step(),this.startDelay))}stop(){clearTimeout(this.moveTimer),clearTimeout(this.waitTimer),clearTimeout(this.startTimer),this.isStoped=!0,m.value=0,g.value&&(g.value.style.marginLeft=`${-m.value}px`)}}let E=new S;watch([$,l],([b])=>{b?(E.stop(),E=new S,E.start()):E.stop()},{flush:"post"});const k=()=>{s.emit("unminiSelectedPlayer"),allCustomReport({type:"click",spm_info:"main.play-detail.header.mini-eixt"},{msg:JSON.stringify({win_name:"main",is_shortcut:!1})})};return onMounted(()=>{f=onWindowResize(({width:b})=>{_.value=b,B()},!0)}),onBeforeUnmount(()=>{offWindowResize(f)}),(b,V)=>(openBlock(),createBlock(Transition,{name:"fade"},{default:withCtx(()=>[unref(d)?(openBlock(),createElementBlock("div",{key:0,class:"app_mini--dragbar draggable flex_between",onMouseenter:V[0]||(V[0]=A=>u.value=!0),onMouseleave:V[1]||(V[1]=A=>u.value=!1)},[_hoisted_1$23,createBaseVNode("div",{ref_key:"titleWrapRef",ref:p,class:normalizeClass(["app_mini--dragbar-center mt_nxs mx_sm flex_start",{"text-gradient":$.value,"text-gradient-left":unref(y)}])},[createBaseVNode("div",{ref_key:"titleSliderRef",ref:g,class:"flex_start"},[createBaseVNode("div",{ref_key:"titleTextRef",ref:v,class:"title-slider pr_xxl"},toDisplayString(unref(l).title),513),$.value?(openBlock(),createElementBlock("div",_hoisted_2$1W,toDisplayString(unref(l).title),1)):createCommentVNode("",!0)],512)],2),createBaseVNode("div",_hoisted_3$1M,[createVNode(unref(IcoPin),{class:normalizeClass(["app_mini_ico ico_pin mr_sm",{rotate_n45:unref(c)}]),onClick:C},null,8,["class"]),createVNode(unref(IcoMiniEx),{class:"app_mini_ico ico_full",onClick:k}),unref(IS_MAC)?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:0},[_hoisted_4$1n,createVNode(unref(IcoClose),{class:"app_mini_ico ico_close",onClick:unref(closeWindow)},null,8,["onClick"])],64))])],32)):createCommentVNode("",!0)]),_:1}))}});var Selected_vue_vue_type_style_index_0_lang="";const _hoisted_1$22={key:0,class:"load-error p_center"},_hoisted_2$1V=createBaseVNode("img",{class:"error-img",src:_imports_1,alt:""},null,-1),_hoisted_3$1L=createBaseVNode("p",{class:"text_center mt_lg"},"\u54CE\u5440\uFF01\u597D\u50CF\u52A0\u8F7D\u5931\u8D25\u4E86>.<",-1),_hoisted_4$1m=[_hoisted_2$1V,_hoisted_3$1L],_sfc_main$1B=defineComponent({__name:"Selected",props:{isSelectedPage:Boolean,isUgcSeasonPage:Boolean},setup(a){const o=a,s=ref(null),i=ref(null),l=ref(null),c=ref(null),r=ref(null),u=300,d=500,_=ref(!1),f=ref(!1),m=ref(null),p=ref(0),v=ref(0),g=ref(getIsVisible()),$=ref([]),y=ref([]),B=ref([]),C=ref(null),S=ref(0),E=ref(0),k=computed(()=>-E.value*v.value),b=ref([0,1,2]),V=computed(()=>{const[le,fe,De]=b.value;return{[le]:0,[fe]:1,[De]:2}}),A=ref(1),x=ref(10),T=ref(!1),I={INIT:0,REFRESH:3,LOAD_MORE:4},{msgParent:R}=storeToRefs(useSelectedToolStore()),{handlePageFadeIn:N}=useRoutePageFadeIn(".app_selected--content",!0),{initEnterTime:w,reportPv:D,logOpenAppPage:L}=useReportPv({spm_id:SPM_PV.selected,pageName:"Selected",routeName:"Selected",isCustom:!0}),P=useSelectedStore(),{reportSwitchVideo:j,reportRefresh:O}=P,{activeItem:F,fromItem:U,isMainMini:W,isMainMouseOver:ne,isMainHeaderOver:H,isMouseActive:M,isShowMiniBtns:ee,isMiniPanelHover:G}=storeToRefs(P);watch([y,E],([le,fe])=>{F.value=le[fe]||{}},{deep:!0}),watch(F,(le,fe)=>{setMainVideoSize(null),Q.dispatchEvent(new CustomEvent("setAspect",{detail:"unaspect"})),le&&(U.value=fe)}),watchEffect(()=>{window.isMiniPlayer=W.value});const Q=window,te=Q.nano;Q.selectedPlayers={},watch(y,le=>{Object.keys(Q.selectedPlayers).forEach(fe=>{fe!=="activePlayer"&&le.every(De=>String(De.cid)!==String(fe))&&delete Q.selectedPlayers[fe]})},{deep:!0}),Q.appRequestLogin=()=>requestLogin("videoPlayer"),Q.appRequestFullScreen=le=>{setPlayerFullscreen().then(()=>le())},setData(KEY_RATE_CONFIG,null);let ce=!1;const $e=()=>{T.value||ce||(ce=!0,setTimeout(()=>ce=!1,1e3),events.emit("leaveGallery"),U.value={},_.value=!1,y.value=[],$.value=[],B.value=[],E.value=0,A.value=1,Ye(I.REFRESH),O())};selectedEvents.on("refreshSelectedPage",$e);const we=()=>{window.localStorage.setItem(LOGIN_KEEP_VIDEO,JSON.stringify(F.value))};selectedEvents.on("beforeLoginRefresh",we);const _e=JSON.parse(window.localStorage.getItem(LOGIN_KEEP_VIDEO)||"{}");_e.cid&&(y.value.push(_e),window.localStorage.removeItem(LOGIN_KEEP_VIDEO));let ke=null,oe=null;const ie=()=>{clearTimeout(ke),clearTimeout(oe)},ye=()=>{W.value=!0,events.emit("leaveGallery"),messageEvents.emit("closeMessagePanel"),Qe(),ie(),ke=setTimeout(()=>{callNative("window/miniMainWindow"),IS_MAC&&W.value&&(setMiniMainBtnsVisible(ee.value),oe=setTimeout(()=>{ee.value&&ue()},1200))},50)},Te=()=>{ie(),callNative("window/unminiMainWindow")};selectedEvents.on("miniSelectedPlayer",ye),selectedEvents.on("unminiSelectedPlayer",Te);const Ee=()=>{setTimeout(()=>{W.value?(Te(),allCustomReport({type:"click",spm_info:"main.play-detail.header.mini-eixt"},{msg:JSON.stringify({win_name:"main",is_shortcut:!0})})):(ye(),allCustomReport({type:"click",spm_info:"main.play-detail.header.mini-enter"},{msg:JSON.stringify({win_name:"main",is_shortcut:!0})}))})};watch(W,()=>{var le,fe,De;Q.dispatchEvent(new CustomEvent("setAspect",{detail:"unaspect"})),(De=(fe=(le=Q.selectedPlayers)==null?void 0:le.activePlayer)==null?void 0:fe.setState)==null||De.call(fe,{[te.InternalKind.DmSetting]:{noDmHover:W.value}})},{immediate:!0}),watch(ee,()=>{IS_MAC&&W.value&&setMiniMainBtnsVisible(ee.value)},{immediate:!0}),useIpcListener("window/mainWindowMiniChange",({data:le})=>{W.value=le,setTimeout(()=>He())}),useIpcListener("window/mainWindowMouseLeave",()=>ne.value=!1),useIpcListener("window/playerWindowMiniChange",({data:le})=>{le&&W.value&&Te()});const Ve=ref(!1),ue=()=>{mainWindowMouseEnter(),Ve.value=!0,ne.value=!0},Oe=()=>Ve.value=!1;watch([Ve,ne],([le,fe])=>{H.value=!le&&fe});let We=null;const Ge=()=>{M.value=!0,W.value&&!ne.value&&ue(),clearTimeout(We),We=setTimeout(()=>M.value=!1,1e3)},Ye=async le=>{if(!T.value){T.value=!0;try{const De=((await getHomeRecommands(A.value,x.value,"CLIENT_SELECTED",le)).item||[]).filter(q=>!!q.cid).map((q,se)=>(q._location=(A.value-1)*x.value+se+1,q));$.value=$.value.concat(De),A.value++,T.value=!1}catch{T.value=!1}if(_.value=!0,y.value.length<3){const fe=$.value.splice(0,3-y.value.length);y.value=y.value.concat(fe)}}},Ke=debounce$1(async(le,fe)=>{if(!f.value&&($.value.length<3&&Ye(A.value>1?I.LOAD_MORE:I.INIT),!!$.value.length)){if(f.value=!0,F.value=y.value[E.value+1],S.value=-v.value,await sleep(u),j(le,fe),f.value=!1,await sleep(),E.value>0){const De=$.value.shift();if(y.value.push(De),y.value.length>3){const q=y.value.shift();B.value.push(q)}b.value.push(b.value.shift()),C.value.append(C.value.firstElementChild)}else E.value=1;S.value=0}},d),Xe=debounce$1(async(le,fe)=>{if(!f.value&&E.value!==0){if(f.value=!0,F.value=y.value[E.value-1],S.value=v.value,await sleep(u),j(le,fe),f.value=!1,await sleep(),B.value.length>0){const De=B.value.pop();y.value.unshift(De);const q=y.value.pop();$.value.unshift(q),b.value.unshift(b.value.pop()),C.value.prepend(C.value.lastElementChild)}else E.value=0;S.value=0}},d),He=()=>{if(p.value=m.value.offsetWidth,v.value=m.value.offsetHeight,!v.value){const le=document.querySelector(".app_container");le&&(p.value=le.offsetWidth,v.value=le.offsetHeight)}},Z=200;let K=!0,X=0,ae=0,me=0;const ge=le=>{const fe=Date.now();if(K=fe-X>Z,X=fe,IS_MAC){const De=le.deltaY>0,q=ae>0,se=De!==q,Ne=Math.abs(le.deltaY)>Math.abs(ae);ae=le.deltaY,K||se||Ne?(me++,me>100&&(me=100),me>2&&Ce(le.deltaY)):me=0}else K&&Ce(le.deltaY)},Ce=debounce$1(le=>{le<0?Xe("roll",2):Ke("roll",1)},300,!0,!1),Fe=le=>{if(!!o.isSelectedPage&&getClosestElement(le.target,".app_selected--item")){const fe=getClosestElement(le.target,".cpx-player-hotkey-panel");if(!getClosestElement(le.target,".all-staff")&&!getClosestElement(le.target,".bili-dialog-m")&&!getClosestElement(le.target,".app_selected--cmtwrap")&&!getClosestElement(le.target,".video-desc-wrap.ov_overlay_y")&&!fe&&ge(le),!fe)return le.stopPropagation(),!1}},Le=le=>{var De;const fe=m.value.querySelector(".app_selected--shown .cpx-player-video-area");if(fe){const q=(De=Q.selectedPlayers)==null?void 0:De.activePlayer;q.tooltip.remove("shortcut"),setTimeout(()=>{var se;(se=q.tooltip)==null||se.create({name:"shortcut",target:fe,title:le,position:5,duration:1500})})}},Be=()=>{document.fullscreenElement||(W.value&&Te(),setTimeout(()=>{allCustomReport({type:"click",spm_info:"main.main.main-page.maximize"},{msg:JSON.stringify({is_enter:!getIsMaximized(),is_shortcut:!0,win_name:"main"})}),toggleWindowMaximize()}))};Q.toggleWinMaximize=Be;let pe=!1,he=!1,Se=!1,be=!1,Pe=!1,ze=!1;const Je=le=>{var z,Y,de,ve;const{target:fe,key:De,ctrlKey:q,shiftKey:se,altKey:Ne,metaKey:J}=le||{};if((fe==null?void 0:fe.getAttribute("contenteditable"))!=="true"&&!(["INPUT","TEXTAREA"].includes(fe==null?void 0:fe.tagName)&&fe.getAttribute("type")!=="checkbox")&&!(q||Ne||J)){if(/^g$/i.test(De)&&!se){he||(he=!0,Be());return}if(!!o.isSelectedPage){if(["ArrowLeft","ArrowRight"].includes(De)&&se){const xe=(z=Q.selectedPlayers)==null?void 0:z.activePlayer,Me=(Y=xe==null?void 0:xe.getPlaybackRate)==null?void 0:Y.call(xe);if(Me){const Ie=["0.5","0.75","1.0","1.25","1.5","1.75","2.0"];let Ae=Ie.findIndex(je=>Me===+je);Ae===-1&&(Ae=2),De==="ArrowLeft"?Ae=Ae>0?Ae-1:0:Ae=Ae<Ie.length-1?Ae+1:Ie.length-1,xe.setPlaybackRate(+Ie[Ae]),Le(`${Ie[Ae]}x\u64AD\u653E`)}return}if(["ArrowUp","ArrowDown"].includes(De)){if(se){const xe=(de=Q.selectedPlayers)==null?void 0:de.activePlayer,Me=(ve=xe==null?void 0:xe.getVolume)==null?void 0:ve.call(xe);if(isNum(Me)){let Ie=Me;De==="ArrowUp"?(Ie<.1?Ie+=.02:Ie+=.1,Ie>1&&(Ie=1)):(Ie<=.1?Ie-=.02:Ie<.2?Ie-=.05:Ie-=.1,Ie<0&&(Ie=0)),xe.setVolume(Ie),Le(Ie?`\u97F3\u91CF\uFF1A${Math.round(Ie*100)}%`:"\u9759\u97F3")}return}return pe||(pe=!0,De==="ArrowUp"?Xe("keyboard",2):Ke("keyboard",1)),le.stopPropagation(),le.preventDefault(),!1}if(!se){if(De==="Escape"){Qe(),selectedEvents.emit("hideComment");return}if(/^[wec]$/i.test(De)&&W.value)return le.stopPropagation(),le.preventDefault(),!1;if(/^x$/i.test(De)){!W.value&&!Se&&(Se=!0,selectedEvents.emit("toggleSelectedInfo"));return}if(/^c$/i.test(De)){!W.value&&!be&&(be=!0,selectedEvents.emit("toggleComment"));return}if(/^v$/i.test(De)){!W.value&&!Pe&&(Pe=!0,et());return}if(/^s$/i.test(De)){if(document.fullscreenElement)return;if(!ze){ze=!0,Ee();return}}}}}},Ze=le=>{if(["ArrowUp","ArrowDown"].includes(le.key)){pe=!1;return}if(/^g$/i.test(le.key)){he=!1;return}if(/^x$/i.test(le.key)){Se=!1;return}if(/^c$/i.test(le.key)){be=!1;return}if(/^v$/i.test(le.key)){Pe=!1;return}if(/^s$/i.test(le.key)){ze=!1;return}};useIpcListener("window/focusChange",()=>{pe=he=Se=be=Pe=ze=!1}),watch(()=>o.isSelectedPage,le=>{le?(w(),L(),$.value.length<3&&Ye(A.value>1?I.LOAD_MORE:I.INIT),setTimeout(()=>He())):W.value&&setTimeout(()=>Te())},{immediate:!0}),watch(()=>o.isSelectedPage,le=>{le?N():D()}),useIpcListener("window/focusChange",({data:le})=>{o.isSelectedPage&&(le?w():D())});let ot=null;useIpcListener("window/fullScreenChange",({data:le})=>{clearInterval(ot),ot=setInterval(()=>{(le&&document.fullscreenElement||!le&&!document.fullscreenElement)&&(clearInterval(ot),He())})}),useIpcListener("window/visibleChange",({data:le})=>{IS_MAC&&callNativeSync("window/isMinimized")||(g.value=le,!le&&W.value&&(callNativeSync("config/getBossShortcutHide")||setTimeout(()=>Te(),200)))});const nt={dialogFollowed:s,dialogCoinOperated:i,dialogCollection:l,dialogShare:c,dialogDynShare:r},rt=Object.keys(nt),at=()=>rt.some(le=>{var fe;return(fe=nt[le])==null?void 0:fe.value.isShowDialog}),qe=le=>{var fe;at()||(le==="dialogDynShare"?r.value.show({rid:F.value.id,type:8}):(fe=nt[le])==null||fe.value.showDialog())},Qe=()=>{rt.forEach(le=>{var fe;return(fe=nt[le])==null?void 0:fe.value.closeDialog()})};selectedEvents.on("showActionDialog",qe),selectedEvents.on("closeActionDialog",Qe),watch(F,()=>Qe()),provide("hasActiveDialog",at);const et=()=>{at()?c.value.isShowDialog&&(c.value.copyShareLink(),c.value.closeDialog(),allCustomReport({type:"click",spm_info:"main.play-detail.share.shortcut"},{msg:JSON.stringify({win_name:"main",is_open:!1})})):(qe("dialogShare"),allCustomReport({type:"click",spm_info:"main.play-detail.share.shortcut"},{msg:JSON.stringify({win_name:"main",is_open:!0})}))},st=le=>{if(W.value)return le.preventDefault(),le.stopPropagation(),!1};return onMounted(()=>{He(),window.addEventListener("resize",He),document.addEventListener("wheel",Fe,!0),document.addEventListener("keydown",Je,!0),document.addEventListener("keyup",Ze,!0),document.addEventListener("contextmenu",st,!0),setTimeout(()=>R.value=m.value)}),onBeforeUnmount(()=>{selectedEvents.off("refreshSelectedPage",$e),selectedEvents.off("beforeLoginRefresh",we),selectedEvents.off("miniSelectedPlayer",ye),selectedEvents.off("unminiSelectedPlayer",Te),selectedEvents.off("showActionDialog",qe),selectedEvents.off("closeActionDialog",Qe),window.removeEventListener("resize",He),document.removeEventListener("wheel",Fe,!0),document.removeEventListener("keydown",Je,!0),document.removeEventListener("keyup",Ze,!0),document.removeEventListener("contextmenu",st,!0)}),(le,fe)=>{const De=resolveComponent("v-button");return withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(["app_selected i_page_wrapper",{"app_selected--active":unref(ee),"app_selected--deactive":!unref(ee)}])},[createBaseVNode("div",{class:"app_selected--content i_page_content ov_hidden p_relative",onMouseenter:ue,onMousemove:Ge,onMouseleave:Oe},[createVNode(_sfc_main$1C),createVNode(Transition,{name:"fade"},{default:withCtx(()=>[!unref(W)||unref(ee)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["app_selected--btns p_center_y flex_col",{r_md:unref(ee),btns_mini:unref(W)}])},[createVNode(De,{"active-shrink":"",class:"mb_sm",title:"\u5207\u6362\u89C6\u9891\uFF08\u9F20\u6807\u6EDA\u8F6E\u5411\u4E0A/\u952E\u76D8\u2191\uFF09",disabled:E.value===0,onClick:fe[0]||(fe[0]=q=>unref(Xe)("click",2)),onMouseenter:fe[1]||(fe[1]=q=>G.value=!0),onMouseleave:fe[2]||(fe[2]=q=>G.value=!1)},{default:withCtx(()=>[createVNode(unref(ArrowUp))]),_:1},8,["disabled"]),createVNode(De,{"active-shrink":"",title:"\u5207\u6362\u89C6\u9891\uFF08\u9F20\u6807\u6EDA\u8F6E\u5411\u4E0B/\u952E\u76D8\u2193\uFF09",onClick:fe[3]||(fe[3]=q=>unref(Ke)("click",1)),onMouseenter:fe[4]||(fe[4]=q=>G.value=!0),onMouseleave:fe[5]||(fe[5]=q=>G.value=!1)},{default:withCtx(()=>[createVNode(unref(ArrowDown))]),_:1})],2)):createCommentVNode("",!0)]),_:1}),createBaseVNode("div",{ref_key:"selderWrapperRef",ref:m,class:normalizeClass(["app_selected--wrapper ov_hidden bd_1 bc_line_light",{no_drag:!unref(W)}])},[createBaseVNode("div",{class:normalizeClass(["app_selected--slider min_h_100",{is_transition:f.value}]),style:normalizeStyle({marginTop:unref(k)+"px",transform:S.value?`translateY(${S.value}px)`:""})},[createVNode(_sfc_main$2D,{loading:T.value&&!y.value.length||!_.value},null,8,["loading"]),!T.value&&!y.value.length?(openBlock(),createElementBlock("div",_hoisted_1$22,_hoisted_4$1m)):createCommentVNode("",!0),createBaseVNode("div",{class:"app_selected--items-wrap",ref_key:"selectedItemWrapRef",ref:C},[(openBlock(),createElementBlock(Fragment,null,renderList([0,1,2],q=>createVNode(_sfc_main$1H,{key:q,index:q,info:y.value[unref(V)[q]],playingList:y.value,isOnSliding:f.value,width:p.value,height:v.value,activeId:unref(F).cid,isWinVisiable:g.value,isSelectedPage:a.isSelectedPage,isUgcSeasonPage:a.isUgcSeasonPage,onPlayerEnded:fe[6]||(fe[6]=se=>unref(Ke)("auto",1))},null,8,["index","info","playingList","isOnSliding","width","height","activeId","isWinVisiable","isSelectedPage","isUgcSeasonPage"])),64))],512)],6)],2),createVNode(_sfc_main$1G,{ref_key:"dialogFollowedRef",ref:s},null,512),createVNode(_sfc_main$1F,{ref_key:"dialogCoinOperatedRef",ref:i},null,512),createVNode(_sfc_main$1E,{ref_key:"dialogCollectionRef",ref:l},null,512),createVNode(_sfc_main$1D,{ref_key:"dialogShareRef",ref:c},null,512),createVNode(_sfc_main$2A,{ref_key:"dialogDynShareRef",ref:r},null,512)],32)],2)),[[vShow,a.isSelectedPage]])}}});var re$5={exports:{}};const SEMVER_SPEC_VERSION="2.0.0",MAX_LENGTH$2=256,MAX_SAFE_INTEGER$1=Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH=16;var constants={SEMVER_SPEC_VERSION,MAX_LENGTH:MAX_LENGTH$2,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$1,MAX_SAFE_COMPONENT_LENGTH};const debug$3=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...a)=>console.error("SEMVER",...a):()=>{};var debug_1=debug$3;(function(a,o){const{MAX_SAFE_COMPONENT_LENGTH:s}=constants,i=debug_1;o=a.exports={};const l=o.re=[],c=o.src=[],r=o.t={};let u=0;const d=(_,f,m)=>{const p=u++;i(_,p,f),r[_]=p,c[p]=f,l[p]=new RegExp(f,m?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","[0-9]+"),d("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),d("MAINVERSION",`(${c[r.NUMERICIDENTIFIER]})\\.(${c[r.NUMERICIDENTIFIER]})\\.(${c[r.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${c[r.NUMERICIDENTIFIERLOOSE]})\\.(${c[r.NUMERICIDENTIFIERLOOSE]})\\.(${c[r.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${c[r.NUMERICIDENTIFIER]}|${c[r.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${c[r.NUMERICIDENTIFIERLOOSE]}|${c[r.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${c[r.PRERELEASEIDENTIFIER]}(?:\\.${c[r.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${c[r.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[r.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER","[0-9A-Za-z-]+"),d("BUILD",`(?:\\+(${c[r.BUILDIDENTIFIER]}(?:\\.${c[r.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${c[r.MAINVERSION]}${c[r.PRERELEASE]}?${c[r.BUILD]}?`),d("FULL",`^${c[r.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${c[r.MAINVERSIONLOOSE]}${c[r.PRERELEASELOOSE]}?${c[r.BUILD]}?`),d("LOOSE",`^${c[r.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${c[r.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${c[r.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${c[r.XRANGEIDENTIFIER]})(?:\\.(${c[r.XRANGEIDENTIFIER]})(?:\\.(${c[r.XRANGEIDENTIFIER]})(?:${c[r.PRERELEASE]})?${c[r.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${c[r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[r.XRANGEIDENTIFIERLOOSE]})(?:${c[r.PRERELEASELOOSE]})?${c[r.BUILD]}?)?)?`),d("XRANGE",`^${c[r.GTLT]}\\s*${c[r.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${c[r.GTLT]}\\s*${c[r.XRANGEPLAINLOOSE]}$`),d("COERCE",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?(?:$|[^\\d])`),d("COERCERTL",c[r.COERCE],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${c[r.LONETILDE]}\\s+`,!0),o.tildeTrimReplace="$1~",d("TILDE",`^${c[r.LONETILDE]}${c[r.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${c[r.LONETILDE]}${c[r.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${c[r.LONECARET]}\\s+`,!0),o.caretTrimReplace="$1^",d("CARET",`^${c[r.LONECARET]}${c[r.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${c[r.LONECARET]}${c[r.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${c[r.GTLT]}\\s*(${c[r.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${c[r.GTLT]}\\s*(${c[r.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${c[r.GTLT]}\\s*(${c[r.LOOSEPLAIN]}|${c[r.XRANGEPLAIN]})`,!0),o.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${c[r.XRANGEPLAIN]})\\s+-\\s+(${c[r.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${c[r.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[r.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re$5,re$5.exports);const opts=["includePrerelease","loose","rtl"],parseOptions$4=a=>a?typeof a!="object"?{loose:!0}:opts.filter(o=>a[o]).reduce((o,s)=>(o[s]=!0,o),{}):{};var parseOptions_1=parseOptions$4;const numeric=/^[0-9]+$/,compareIdentifiers$1=(a,o)=>{const s=numeric.test(a),i=numeric.test(o);return s&&i&&(a=+a,o=+o),a===o?0:s&&!i?-1:i&&!s?1:a<o?-1:1},rcompareIdentifiers=(a,o)=>compareIdentifiers$1(o,a);var identifiers={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers};const debug$2=debug_1,{MAX_LENGTH:MAX_LENGTH$1,MAX_SAFE_INTEGER}=constants,{re:re$4,t:t$4}=re$5.exports,parseOptions$3=parseOptions_1,{compareIdentifiers}=identifiers;class SemVer$e{constructor(o,s){if(s=parseOptions$3(s),o instanceof SemVer$e){if(o.loose===!!s.loose&&o.includePrerelease===!!s.includePrerelease)return o;o=o.version}else if(typeof o!="string")throw new TypeError(`Invalid Version: ${o}`);if(o.length>MAX_LENGTH$1)throw new TypeError(`version is longer than ${MAX_LENGTH$1} characters`);debug$2("SemVer",o,s),this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease;const i=o.trim().match(s.loose?re$4[t$4.LOOSE]:re$4[t$4.FULL]);if(!i)throw new TypeError(`Invalid Version: ${o}`);if(this.raw=o,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(l=>{if(/^[0-9]+$/.test(l)){const c=+l;if(c>=0&&c<MAX_SAFE_INTEGER)return c}return l}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(o){if(debug$2("SemVer.compare",this.version,this.options,o),!(o instanceof SemVer$e)){if(typeof o=="string"&&o===this.version)return 0;o=new SemVer$e(o,this.options)}return o.version===this.version?0:this.compareMain(o)||this.comparePre(o)}compareMain(o){return o instanceof SemVer$e||(o=new SemVer$e(o,this.options)),compareIdentifiers(this.major,o.major)||compareIdentifiers(this.minor,o.minor)||compareIdentifiers(this.patch,o.patch)}comparePre(o){if(o instanceof SemVer$e||(o=new SemVer$e(o,this.options)),this.prerelease.length&&!o.prerelease.length)return-1;if(!this.prerelease.length&&o.prerelease.length)return 1;if(!this.prerelease.length&&!o.prerelease.length)return 0;let s=0;do{const i=this.prerelease[s],l=o.prerelease[s];if(debug$2("prerelease compare",s,i,l),i===void 0&&l===void 0)return 0;if(l===void 0)return 1;if(i===void 0)return-1;if(i===l)continue;return compareIdentifiers(i,l)}while(++s)}compareBuild(o){o instanceof SemVer$e||(o=new SemVer$e(o,this.options));let s=0;do{const i=this.build[s],l=o.build[s];if(debug$2("prerelease compare",s,i,l),i===void 0&&l===void 0)return 0;if(l===void 0)return 1;if(i===void 0)return-1;if(i===l)continue;return compareIdentifiers(i,l)}while(++s)}inc(o,s){switch(o){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",s),this.inc("pre",s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",s),this.inc("pre",s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);i===-1&&this.prerelease.push(0)}s&&(compareIdentifiers(this.prerelease[0],s)===0?isNaN(this.prerelease[1])&&(this.prerelease=[s,0]):this.prerelease=[s,0]);break;default:throw new Error(`invalid increment argument: ${o}`)}return this.format(),this.raw=this.version,this}}var semver$1=SemVer$e;const{MAX_LENGTH}=constants,{re:re$3,t:t$3}=re$5.exports,SemVer$d=semver$1,parseOptions$2=parseOptions_1,parse$5=(a,o)=>{if(o=parseOptions$2(o),a instanceof SemVer$d)return a;if(typeof a!="string"||a.length>MAX_LENGTH||!(o.loose?re$3[t$3.LOOSE]:re$3[t$3.FULL]).test(a))return null;try{return new SemVer$d(a,o)}catch{return null}};var parse_1=parse$5;const parse$4=parse_1,valid$1=(a,o)=>{const s=parse$4(a,o);return s?s.version:null};var valid_1=valid$1;const parse$3=parse_1,clean=(a,o)=>{const s=parse$3(a.trim().replace(/^[=v]+/,""),o);return s?s.version:null};var clean_1=clean;const SemVer$c=semver$1,inc=(a,o,s,i)=>{typeof s=="string"&&(i=s,s=void 0);try{return new SemVer$c(a instanceof SemVer$c?a.version:a,s).inc(o,i).version}catch{return null}};var inc_1=inc;const SemVer$b=semver$1,compare$a=(a,o,s)=>new SemVer$b(a,s).compare(new SemVer$b(o,s));var compare_1=compare$a;const compare$9=compare_1,eq$2=(a,o,s)=>compare$9(a,o,s)===0;var eq_1=eq$2;const parse$2=parse_1,eq$1=eq_1,diff=(a,o)=>{if(eq$1(a,o))return null;{const s=parse$2(a),i=parse$2(o),l=s.prerelease.length||i.prerelease.length,c=l?"pre":"",r=l?"prerelease":"";for(const u in s)if((u==="major"||u==="minor"||u==="patch")&&s[u]!==i[u])return c+u;return r}};var diff_1=diff;const SemVer$a=semver$1,major=(a,o)=>new SemVer$a(a,o).major;var major_1=major;const SemVer$9=semver$1,minor=(a,o)=>new SemVer$9(a,o).minor;var minor_1=minor;const SemVer$8=semver$1,patch=(a,o)=>new SemVer$8(a,o).patch;var patch_1=patch;const parse$1=parse_1,prerelease=(a,o)=>{const s=parse$1(a,o);return s&&s.prerelease.length?s.prerelease:null};var prerelease_1=prerelease;const compare$8=compare_1,rcompare=(a,o,s)=>compare$8(o,a,s);var rcompare_1=rcompare;const compare$7=compare_1,compareLoose=(a,o)=>compare$7(a,o,!0);var compareLoose_1=compareLoose;const SemVer$7=semver$1,compareBuild$2=(a,o,s)=>{const i=new SemVer$7(a,s),l=new SemVer$7(o,s);return i.compare(l)||i.compareBuild(l)};var compareBuild_1=compareBuild$2;const compareBuild$1=compareBuild_1,sort=(a,o)=>a.sort((s,i)=>compareBuild$1(s,i,o));var sort_1=sort;const compareBuild=compareBuild_1,rsort=(a,o)=>a.sort((s,i)=>compareBuild(i,s,o));var rsort_1=rsort;const compare$6=compare_1,gt$3=(a,o,s)=>compare$6(a,o,s)>0;var gt_1=gt$3;const compare$5=compare_1,lt$2=(a,o,s)=>compare$5(a,o,s)<0;var lt_1=lt$2;const compare$4=compare_1,neq$1=(a,o,s)=>compare$4(a,o,s)!==0;var neq_1=neq$1;const compare$3=compare_1,gte$2=(a,o,s)=>compare$3(a,o,s)>=0;var gte_1=gte$2;const compare$2=compare_1,lte$2=(a,o,s)=>compare$2(a,o,s)<=0;var lte_1=lte$2;const eq=eq_1,neq=neq_1,gt$2=gt_1,gte$1=gte_1,lt$1=lt_1,lte$1=lte_1,cmp$1=(a,o,s,i)=>{switch(o){case"===":return typeof a=="object"&&(a=a.version),typeof s=="object"&&(s=s.version),a===s;case"!==":return typeof a=="object"&&(a=a.version),typeof s=="object"&&(s=s.version),a!==s;case"":case"=":case"==":return eq(a,s,i);case"!=":return neq(a,s,i);case">":return gt$2(a,s,i);case">=":return gte$1(a,s,i);case"<":return lt$1(a,s,i);case"<=":return lte$1(a,s,i);default:throw new TypeError(`Invalid operator: ${o}`)}};var cmp_1=cmp$1;const SemVer$6=semver$1,parse=parse_1,{re:re$2,t:t$2}=re$5.exports,coerce=(a,o)=>{if(a instanceof SemVer$6)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;o=o||{};let s=null;if(!o.rtl)s=a.match(re$2[t$2.COERCE]);else{let i;for(;(i=re$2[t$2.COERCERTL].exec(a))&&(!s||s.index+s[0].length!==a.length);)(!s||i.index+i[0].length!==s.index+s[0].length)&&(s=i),re$2[t$2.COERCERTL].lastIndex=i.index+i[1].length+i[2].length;re$2[t$2.COERCERTL].lastIndex=-1}return s===null?null:parse(`${s[2]}.${s[3]||"0"}.${s[4]||"0"}`,o)};var coerce_1=coerce,yallist=Yallist$1;Yallist$1.Node=Node;Yallist$1.create=Yallist$1;function Yallist$1(a){var o=this;if(o instanceof Yallist$1||(o=new Yallist$1),o.tail=null,o.head=null,o.length=0,a&&typeof a.forEach=="function")a.forEach(function(l){o.push(l)});else if(arguments.length>0)for(var s=0,i=arguments.length;s<i;s++)o.push(arguments[s]);return o}Yallist$1.prototype.removeNode=function(a){if(a.list!==this)throw new Error("removing node which does not belong to this list");var o=a.next,s=a.prev;return o&&(o.prev=s),s&&(s.next=o),a===this.head&&(this.head=o),a===this.tail&&(this.tail=s),a.list.length--,a.next=null,a.prev=null,a.list=null,o};Yallist$1.prototype.unshiftNode=function(a){if(a!==this.head){a.list&&a.list.removeNode(a);var o=this.head;a.list=this,a.next=o,o&&(o.prev=a),this.head=a,this.tail||(this.tail=a),this.length++}};Yallist$1.prototype.pushNode=function(a){if(a!==this.tail){a.list&&a.list.removeNode(a);var o=this.tail;a.list=this,a.prev=o,o&&(o.next=a),this.tail=a,this.head||(this.head=a),this.length++}};Yallist$1.prototype.push=function(){for(var a=0,o=arguments.length;a<o;a++)push(this,arguments[a]);return this.length};Yallist$1.prototype.unshift=function(){for(var a=0,o=arguments.length;a<o;a++)unshift(this,arguments[a]);return this.length};Yallist$1.prototype.pop=function(){if(!!this.tail){var a=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,a}};Yallist$1.prototype.shift=function(){if(!!this.head){var a=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,a}};Yallist$1.prototype.forEach=function(a,o){o=o||this;for(var s=this.head,i=0;s!==null;i++)a.call(o,s.value,i,this),s=s.next};Yallist$1.prototype.forEachReverse=function(a,o){o=o||this;for(var s=this.tail,i=this.length-1;s!==null;i--)a.call(o,s.value,i,this),s=s.prev};Yallist$1.prototype.get=function(a){for(var o=0,s=this.head;s!==null&&o<a;o++)s=s.next;if(o===a&&s!==null)return s.value};Yallist$1.prototype.getReverse=function(a){for(var o=0,s=this.tail;s!==null&&o<a;o++)s=s.prev;if(o===a&&s!==null)return s.value};Yallist$1.prototype.map=function(a,o){o=o||this;for(var s=new Yallist$1,i=this.head;i!==null;)s.push(a.call(o,i.value,this)),i=i.next;return s};Yallist$1.prototype.mapReverse=function(a,o){o=o||this;for(var s=new Yallist$1,i=this.tail;i!==null;)s.push(a.call(o,i.value,this)),i=i.prev;return s};Yallist$1.prototype.reduce=function(a,o){var s,i=this.head;if(arguments.length>1)s=o;else if(this.head)i=this.head.next,s=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var l=0;i!==null;l++)s=a(s,i.value,l),i=i.next;return s};Yallist$1.prototype.reduceReverse=function(a,o){var s,i=this.tail;if(arguments.length>1)s=o;else if(this.tail)i=this.tail.prev,s=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var l=this.length-1;i!==null;l--)s=a(s,i.value,l),i=i.prev;return s};Yallist$1.prototype.toArray=function(){for(var a=new Array(this.length),o=0,s=this.head;s!==null;o++)a[o]=s.value,s=s.next;return a};Yallist$1.prototype.toArrayReverse=function(){for(var a=new Array(this.length),o=0,s=this.tail;s!==null;o++)a[o]=s.value,s=s.prev;return a};Yallist$1.prototype.slice=function(a,o){o=o||this.length,o<0&&(o+=this.length),a=a||0,a<0&&(a+=this.length);var s=new Yallist$1;if(o<a||o<0)return s;a<0&&(a=0),o>this.length&&(o=this.length);for(var i=0,l=this.head;l!==null&&i<a;i++)l=l.next;for(;l!==null&&i<o;i++,l=l.next)s.push(l.value);return s};Yallist$1.prototype.sliceReverse=function(a,o){o=o||this.length,o<0&&(o+=this.length),a=a||0,a<0&&(a+=this.length);var s=new Yallist$1;if(o<a||o<0)return s;a<0&&(a=0),o>this.length&&(o=this.length);for(var i=this.length,l=this.tail;l!==null&&i>o;i--)l=l.prev;for(;l!==null&&i>a;i--,l=l.prev)s.push(l.value);return s};Yallist$1.prototype.splice=function(a,o,...s){a>this.length&&(a=this.length-1),a<0&&(a=this.length+a);for(var i=0,l=this.head;l!==null&&i<a;i++)l=l.next;for(var c=[],i=0;l&&i<o;i++)c.push(l.value),l=this.removeNode(l);l===null&&(l=this.tail),l!==this.head&&l!==this.tail&&(l=l.prev);for(var i=0;i<s.length;i++)l=insert(this,l,s[i]);return c};Yallist$1.prototype.reverse=function(){for(var a=this.head,o=this.tail,s=a;s!==null;s=s.prev){var i=s.prev;s.prev=s.next,s.next=i}return this.head=o,this.tail=a,this};function insert(a,o,s){var i=o===a.head?new Node(s,null,o,a):new Node(s,o,o.next,a);return i.next===null&&(a.tail=i),i.prev===null&&(a.head=i),a.length++,i}function push(a,o){a.tail=new Node(o,a.tail,null,a),a.head||(a.head=a.tail),a.length++}function unshift(a,o){a.head=new Node(o,null,a.head,a),a.tail||(a.tail=a.head),a.length++}function Node(a,o,s,i){if(!(this instanceof Node))return new Node(a,o,s,i);this.list=i,this.value=a,o?(o.next=this,this.prev=o):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}try{require("./iterator.js")(Yallist$1)}catch{}const Yallist=yallist,MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(o){if(typeof o=="number"&&(o={max:o}),o||(o={}),o.max&&(typeof o.max!="number"||o.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=o.max||1/0;const s=o.length||naiveLength;if(this[LENGTH_CALCULATOR]=typeof s!="function"?naiveLength:s,this[ALLOW_STALE]=o.stale||!1,o.maxAge&&typeof o.maxAge!="number")throw new TypeError("maxAge must be a number");this[MAX_AGE]=o.maxAge||0,this[DISPOSE]=o.dispose,this[NO_DISPOSE_ON_SET]=o.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=o.updateAgeOnGet||!1,this.reset()}set max(o){if(typeof o!="number"||o<0)throw new TypeError("max must be a non-negative number");this[MAX]=o||1/0,trim(this)}get max(){return this[MAX]}set allowStale(o){this[ALLOW_STALE]=!!o}get allowStale(){return this[ALLOW_STALE]}set maxAge(o){if(typeof o!="number")throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=o,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(o){typeof o!="function"&&(o=naiveLength),o!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=o,this[LENGTH]=0,this[LRU_LIST].forEach(s=>{s.length=this[LENGTH_CALCULATOR](s.value,s.key),this[LENGTH]+=s.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(o,s){s=s||this;for(let i=this[LRU_LIST].tail;i!==null;){const l=i.prev;forEachStep(this,o,i,s),i=l}}forEach(o,s){s=s||this;for(let i=this[LRU_LIST].head;i!==null;){const l=i.next;forEachStep(this,o,i,s),i=l}}keys(){return this[LRU_LIST].toArray().map(o=>o.key)}values(){return this[LRU_LIST].toArray().map(o=>o.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(o=>this[DISPOSE](o.key,o.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(o=>isStale(this,o)?!1:{k:o.key,v:o.value,e:o.now+(o.maxAge||0)}).toArray().filter(o=>o)}dumpLru(){return this[LRU_LIST]}set(o,s,i){if(i=i||this[MAX_AGE],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const l=i?Date.now():0,c=this[LENGTH_CALCULATOR](s,o);if(this[CACHE].has(o)){if(c>this[MAX])return del(this,this[CACHE].get(o)),!1;const d=this[CACHE].get(o).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](o,d.value)),d.now=l,d.maxAge=i,d.value=s,this[LENGTH]+=c-d.length,d.length=c,this.get(o),trim(this),!0}const r=new Entry(o,s,c,l,i);return r.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](o,s),!1):(this[LENGTH]+=r.length,this[LRU_LIST].unshift(r),this[CACHE].set(o,this[LRU_LIST].head),trim(this),!0)}has(o){if(!this[CACHE].has(o))return!1;const s=this[CACHE].get(o).value;return!isStale(this,s)}get(o){return get$1(this,o,!0)}peek(o){return get$1(this,o,!1)}pop(){const o=this[LRU_LIST].tail;return o?(del(this,o),o.value):null}del(o){del(this,this[CACHE].get(o))}load(o){this.reset();const s=Date.now();for(let i=o.length-1;i>=0;i--){const l=o[i],c=l.e||0;if(c===0)this.set(l.k,l.v);else{const r=c-s;r>0&&this.set(l.k,l.v,r)}}}prune(){this[CACHE].forEach((o,s)=>get$1(this,s,!1))}}const get$1=(a,o,s)=>{const i=a[CACHE].get(o);if(i){const l=i.value;if(isStale(a,l)){if(del(a,i),!a[ALLOW_STALE])return}else s&&(a[UPDATE_AGE_ON_GET]&&(i.value.now=Date.now()),a[LRU_LIST].unshiftNode(i));return l.value}},isStale=(a,o)=>{if(!o||!o.maxAge&&!a[MAX_AGE])return!1;const s=Date.now()-o.now;return o.maxAge?s>o.maxAge:a[MAX_AGE]&&s>a[MAX_AGE]},trim=a=>{if(a[LENGTH]>a[MAX])for(let o=a[LRU_LIST].tail;a[LENGTH]>a[MAX]&&o!==null;){const s=o.prev;del(a,o),o=s}},del=(a,o)=>{if(o){const s=o.value;a[DISPOSE]&&a[DISPOSE](s.key,s.value),a[LENGTH]-=s.length,a[CACHE].delete(s.key),a[LRU_LIST].removeNode(o)}};class Entry{constructor(o,s,i,l,c){this.key=o,this.value=s,this.length=i,this.now=l,this.maxAge=c||0}}const forEachStep=(a,o,s,i)=>{let l=s.value;isStale(a,l)&&(del(a,s),a[ALLOW_STALE]||(l=void 0)),l&&o.call(i,l.value,l.key,a)};var lruCache=LRUCache;class Range$a{constructor(o,s){if(s=parseOptions$1(s),o instanceof Range$a)return o.loose===!!s.loose&&o.includePrerelease===!!s.includePrerelease?o:new Range$a(o.raw,s);if(o instanceof Comparator$3)return this.raw=o.value,this.set=[[o]],this.format(),this;if(this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease,this.raw=o,this.set=o.split("||").map(i=>this.parseRange(i.trim())).filter(i=>i.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${o}`);if(this.set.length>1){const i=this.set[0];if(this.set=this.set.filter(l=>!isNullSet(l[0])),this.set.length===0)this.set=[i];else if(this.set.length>1){for(const l of this.set)if(l.length===1&&isAny(l[0])){this.set=[l];break}}}this.format()}format(){return this.range=this.set.map(o=>o.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(o){o=o.trim();const i=`parseRange:${Object.keys(this.options).join(",")}:${o}`,l=cache.get(i);if(l)return l;const c=this.options.loose,r=c?re$1[t$1.HYPHENRANGELOOSE]:re$1[t$1.HYPHENRANGE];o=o.replace(r,hyphenReplace(this.options.includePrerelease)),debug$1("hyphen replace",o),o=o.replace(re$1[t$1.COMPARATORTRIM],comparatorTrimReplace),debug$1("comparator trim",o),o=o.replace(re$1[t$1.TILDETRIM],tildeTrimReplace),o=o.replace(re$1[t$1.CARETTRIM],caretTrimReplace),o=o.split(/\s+/).join(" ");let u=o.split(" ").map(m=>parseComparator(m,this.options)).join(" ").split(/\s+/).map(m=>replaceGTE0(m,this.options));c&&(u=u.filter(m=>(debug$1("loose invalid filter",m,this.options),!!m.match(re$1[t$1.COMPARATORLOOSE])))),debug$1("range list",u);const d=new Map,_=u.map(m=>new Comparator$3(m,this.options));for(const m of _){if(isNullSet(m))return[m];d.set(m.value,m)}d.size>1&&d.has("")&&d.delete("");const f=[...d.values()];return cache.set(i,f),f}intersects(o,s){if(!(o instanceof Range$a))throw new TypeError("a Range is required");return this.set.some(i=>isSatisfiable(i,s)&&o.set.some(l=>isSatisfiable(l,s)&&i.every(c=>l.every(r=>c.intersects(r,s)))))}test(o){if(!o)return!1;if(typeof o=="string")try{o=new SemVer$5(o,this.options)}catch{return!1}for(let s=0;s<this.set.length;s++)if(testSet(this.set[s],o,this.options))return!0;return!1}}var range=Range$a;const LRU=lruCache,cache=new LRU({max:1e3}),parseOptions$1=parseOptions_1,Comparator$3=comparator,debug$1=debug_1,SemVer$5=semver$1,{re:re$1,t:t$1,comparatorTrimReplace,tildeTrimReplace,caretTrimReplace}=re$5.exports,isNullSet=a=>a.value==="<0.0.0-0",isAny=a=>a.value==="",isSatisfiable=(a,o)=>{let s=!0;const i=a.slice();let l=i.pop();for(;s&&i.length;)s=i.every(c=>l.intersects(c,o)),l=i.pop();return s},parseComparator=(a,o)=>(debug$1("comp",a,o),a=replaceCarets(a,o),debug$1("caret",a),a=replaceTildes(a,o),debug$1("tildes",a),a=replaceXRanges(a,o),debug$1("xrange",a),a=replaceStars(a,o),debug$1("stars",a),a),isX=a=>!a||a.toLowerCase()==="x"||a==="*",replaceTildes=(a,o)=>a.trim().split(/\s+/).map(s=>replaceTilde(s,o)).join(" "),replaceTilde=(a,o)=>{const s=o.loose?re$1[t$1.TILDELOOSE]:re$1[t$1.TILDE];return a.replace(s,(i,l,c,r,u)=>{debug$1("tilde",a,i,l,c,r,u);let d;return isX(l)?d="":isX(c)?d=`>=${l}.0.0 <${+l+1}.0.0-0`:isX(r)?d=`>=${l}.${c}.0 <${l}.${+c+1}.0-0`:u?(debug$1("replaceTilde pr",u),d=`>=${l}.${c}.${r}-${u} <${l}.${+c+1}.0-0`):d=`>=${l}.${c}.${r} <${l}.${+c+1}.0-0`,debug$1("tilde return",d),d})},replaceCarets=(a,o)=>a.trim().split(/\s+/).map(s=>replaceCaret(s,o)).join(" "),replaceCaret=(a,o)=>{debug$1("caret",a,o);const s=o.loose?re$1[t$1.CARETLOOSE]:re$1[t$1.CARET],i=o.includePrerelease?"-0":"";return a.replace(s,(l,c,r,u,d)=>{debug$1("caret",a,l,c,r,u,d);let _;return isX(c)?_="":isX(r)?_=`>=${c}.0.0${i} <${+c+1}.0.0-0`:isX(u)?c==="0"?_=`>=${c}.${r}.0${i} <${c}.${+r+1}.0-0`:_=`>=${c}.${r}.0${i} <${+c+1}.0.0-0`:d?(debug$1("replaceCaret pr",d),c==="0"?r==="0"?_=`>=${c}.${r}.${u}-${d} <${c}.${r}.${+u+1}-0`:_=`>=${c}.${r}.${u}-${d} <${c}.${+r+1}.0-0`:_=`>=${c}.${r}.${u}-${d} <${+c+1}.0.0-0`):(debug$1("no pr"),c==="0"?r==="0"?_=`>=${c}.${r}.${u}${i} <${c}.${r}.${+u+1}-0`:_=`>=${c}.${r}.${u}${i} <${c}.${+r+1}.0-0`:_=`>=${c}.${r}.${u} <${+c+1}.0.0-0`),debug$1("caret return",_),_})},replaceXRanges=(a,o)=>(debug$1("replaceXRanges",a,o),a.split(/\s+/).map(s=>replaceXRange(s,o)).join(" ")),replaceXRange=(a,o)=>{a=a.trim();const s=o.loose?re$1[t$1.XRANGELOOSE]:re$1[t$1.XRANGE];return a.replace(s,(i,l,c,r,u,d)=>{debug$1("xRange",a,i,l,c,r,u,d);const _=isX(c),f=_||isX(r),m=f||isX(u),p=m;return l==="="&&p&&(l=""),d=o.includePrerelease?"-0":"",_?l===">"||l==="<"?i="<0.0.0-0":i="*":l&&p?(f&&(r=0),u=0,l===">"?(l=">=",f?(c=+c+1,r=0,u=0):(r=+r+1,u=0)):l==="<="&&(l="<",f?c=+c+1:r=+r+1),l==="<"&&(d="-0"),i=`${l+c}.${r}.${u}${d}`):f?i=`>=${c}.0.0${d} <${+c+1}.0.0-0`:m&&(i=`>=${c}.${r}.0${d} <${c}.${+r+1}.0-0`),debug$1("xRange return",i),i})},replaceStars=(a,o)=>(debug$1("replaceStars",a,o),a.trim().replace(re$1[t$1.STAR],"")),replaceGTE0=(a,o)=>(debug$1("replaceGTE0",a,o),a.trim().replace(re$1[o.includePrerelease?t$1.GTE0PRE:t$1.GTE0],"")),hyphenReplace=a=>(o,s,i,l,c,r,u,d,_,f,m,p,v)=>(isX(i)?s="":isX(l)?s=`>=${i}.0.0${a?"-0":""}`:isX(c)?s=`>=${i}.${l}.0${a?"-0":""}`:r?s=`>=${s}`:s=`>=${s}${a?"-0":""}`,isX(_)?d="":isX(f)?d=`<${+_+1}.0.0-0`:isX(m)?d=`<${_}.${+f+1}.0-0`:p?d=`<=${_}.${f}.${m}-${p}`:a?d=`<${_}.${f}.${+m+1}-0`:d=`<=${d}`,`${s} ${d}`.trim()),testSet=(a,o,s)=>{for(let i=0;i<a.length;i++)if(!a[i].test(o))return!1;if(o.prerelease.length&&!s.includePrerelease){for(let i=0;i<a.length;i++)if(debug$1(a[i].semver),a[i].semver!==Comparator$3.ANY&&a[i].semver.prerelease.length>0){const l=a[i].semver;if(l.major===o.major&&l.minor===o.minor&&l.patch===o.patch)return!0}return!1}return!0},ANY$2=Symbol("SemVer ANY");class Comparator$2{static get ANY(){return ANY$2}constructor(o,s){if(s=parseOptions(s),o instanceof Comparator$2){if(o.loose===!!s.loose)return o;o=o.value}debug("comparator",o,s),this.options=s,this.loose=!!s.loose,this.parse(o),this.semver===ANY$2?this.value="":this.value=this.operator+this.semver.version,debug("comp",this)}parse(o){const s=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR],i=o.match(s);if(!i)throw new TypeError(`Invalid comparator: ${o}`);this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new SemVer$4(i[2],this.options.loose):this.semver=ANY$2}toString(){return this.value}test(o){if(debug("Comparator.test",o,this.options.loose),this.semver===ANY$2||o===ANY$2)return!0;if(typeof o=="string")try{o=new SemVer$4(o,this.options)}catch{return!1}return cmp(o,this.operator,this.semver,this.options)}intersects(o,s){if(!(o instanceof Comparator$2))throw new TypeError("a Comparator is required");if((!s||typeof s!="object")&&(s={loose:!!s,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Range$9(o.value,s).test(this.value);if(o.operator==="")return o.value===""?!0:new Range$9(this.value,s).test(o.semver);const i=(this.operator===">="||this.operator===">")&&(o.operator===">="||o.operator===">"),l=(this.operator==="<="||this.operator==="<")&&(o.operator==="<="||o.operator==="<"),c=this.semver.version===o.semver.version,r=(this.operator===">="||this.operator==="<=")&&(o.operator===">="||o.operator==="<="),u=cmp(this.semver,"<",o.semver,s)&&(this.operator===">="||this.operator===">")&&(o.operator==="<="||o.operator==="<"),d=cmp(this.semver,">",o.semver,s)&&(this.operator==="<="||this.operator==="<")&&(o.operator===">="||o.operator===">");return i||l||c&&r||u||d}}var comparator=Comparator$2;const parseOptions=parseOptions_1,{re,t}=re$5.exports,cmp=cmp_1,debug=debug_1,SemVer$4=semver$1,Range$9=range,Range$8=range,satisfies$3=(a,o,s)=>{try{o=new Range$8(o,s)}catch{return!1}return o.test(a)};var satisfies_1=satisfies$3;const Range$7=range,toComparators=(a,o)=>new Range$7(a,o).set.map(s=>s.map(i=>i.value).join(" ").trim().split(" "));var toComparators_1=toComparators;const SemVer$3=semver$1,Range$6=range,maxSatisfying=(a,o,s)=>{let i=null,l=null,c=null;try{c=new Range$6(o,s)}catch{return null}return a.forEach(r=>{c.test(r)&&(!i||l.compare(r)===-1)&&(i=r,l=new SemVer$3(i,s))}),i};var maxSatisfying_1=maxSatisfying;const SemVer$2=semver$1,Range$5=range,minSatisfying=(a,o,s)=>{let i=null,l=null,c=null;try{c=new Range$5(o,s)}catch{return null}return a.forEach(r=>{c.test(r)&&(!i||l.compare(r)===1)&&(i=r,l=new SemVer$2(i,s))}),i};var minSatisfying_1=minSatisfying;const SemVer$1=semver$1,Range$4=range,gt$1=gt_1,minVersion=(a,o)=>{a=new Range$4(a,o);let s=new SemVer$1("0.0.0");if(a.test(s)||(s=new SemVer$1("0.0.0-0"),a.test(s)))return s;s=null;for(let i=0;i<a.set.length;++i){const l=a.set[i];let c=null;l.forEach(r=>{const u=new SemVer$1(r.semver.version);switch(r.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!c||gt$1(u,c))&&(c=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${r.operator}`)}}),c&&(!s||gt$1(s,c))&&(s=c)}return s&&a.test(s)?s:null};var minVersion_1=minVersion;const Range$3=range,validRange=(a,o)=>{try{return new Range$3(a,o).range||"*"}catch{return null}};var valid=validRange;const SemVer=semver$1,Comparator$1=comparator,{ANY:ANY$1}=Comparator$1,Range$2=range,satisfies$2=satisfies_1,gt=gt_1,lt=lt_1,lte=lte_1,gte=gte_1,outside$2=(a,o,s,i)=>{a=new SemVer(a,i),o=new Range$2(o,i);let l,c,r,u,d;switch(s){case">":l=gt,c=lte,r=lt,u=">",d=">=";break;case"<":l=lt,c=gte,r=gt,u="<",d="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies$2(a,o,i))return!1;for(let _=0;_<o.set.length;++_){const f=o.set[_];let m=null,p=null;if(f.forEach(v=>{v.semver===ANY$1&&(v=new Comparator$1(">=0.0.0")),m=m||v,p=p||v,l(v.semver,m.semver,i)?m=v:r(v.semver,p.semver,i)&&(p=v)}),m.operator===u||m.operator===d||(!p.operator||p.operator===u)&&c(a,p.semver))return!1;if(p.operator===d&&r(a,p.semver))return!1}return!0};var outside_1=outside$2;const outside$1=outside_1,gtr=(a,o,s)=>outside$1(a,o,">",s);var gtr_1=gtr;const outside=outside_1,ltr=(a,o,s)=>outside(a,o,"<",s);var ltr_1=ltr;const Range$1=range,intersects=(a,o,s)=>(a=new Range$1(a,s),o=new Range$1(o,s),a.intersects(o));var intersects_1=intersects;const satisfies$1=satisfies_1,compare$1=compare_1;var simplify=(a,o,s)=>{const i=[];let l=null,c=null;const r=a.sort((f,m)=>compare$1(f,m,s));for(const f of r)satisfies$1(f,o,s)?(c=f,l||(l=f)):(c&&i.push([l,c]),c=null,l=null);l&&i.push([l,null]);const u=[];for(const[f,m]of i)f===m?u.push(f):!m&&f===r[0]?u.push("*"):m?f===r[0]?u.push(`<=${m}`):u.push(`${f} - ${m}`):u.push(`>=${f}`);const d=u.join(" || "),_=typeof o.raw=="string"?o.raw:String(o);return d.length<_.length?d:o};const Range=range,Comparator=comparator,{ANY}=Comparator,satisfies=satisfies_1,compare=compare_1,subset=(a,o,s={})=>{if(a===o)return!0;a=new Range(a,s),o=new Range(o,s);let i=!1;e:for(const l of a.set){for(const c of o.set){const r=simpleSubset(l,c,s);if(i=i||r!==null,r)continue e}if(i)return!1}return!0},simpleSubset=(a,o,s)=>{if(a===o)return!0;if(a.length===1&&a[0].semver===ANY){if(o.length===1&&o[0].semver===ANY)return!0;s.includePrerelease?a=[new Comparator(">=0.0.0-0")]:a=[new Comparator(">=0.0.0")]}if(o.length===1&&o[0].semver===ANY){if(s.includePrerelease)return!0;o=[new Comparator(">=0.0.0")]}const i=new Set;let l,c;for(const v of a)v.operator===">"||v.operator===">="?l=higherGT(l,v,s):v.operator==="<"||v.operator==="<="?c=lowerLT(c,v,s):i.add(v.semver);if(i.size>1)return null;let r;if(l&&c){if(r=compare(l.semver,c.semver,s),r>0)return null;if(r===0&&(l.operator!==">="||c.operator!=="<="))return null}for(const v of i){if(l&&!satisfies(v,String(l),s)||c&&!satisfies(v,String(c),s))return null;for(const g of o)if(!satisfies(v,String(g),s))return!1;return!0}let u,d,_,f,m=c&&!s.includePrerelease&&c.semver.prerelease.length?c.semver:!1,p=l&&!s.includePrerelease&&l.semver.prerelease.length?l.semver:!1;m&&m.prerelease.length===1&&c.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(const v of o){if(f=f||v.operator===">"||v.operator===">=",_=_||v.operator==="<"||v.operator==="<=",l){if(p&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===p.major&&v.semver.minor===p.minor&&v.semver.patch===p.patch&&(p=!1),v.operator===">"||v.operator===">="){if(u=higherGT(l,v,s),u===v&&u!==l)return!1}else if(l.operator===">="&&!satisfies(l.semver,String(v),s))return!1}if(c){if(m&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===m.major&&v.semver.minor===m.minor&&v.semver.patch===m.patch&&(m=!1),v.operator==="<"||v.operator==="<="){if(d=lowerLT(c,v,s),d===v&&d!==c)return!1}else if(c.operator==="<="&&!satisfies(c.semver,String(v),s))return!1}if(!v.operator&&(c||l)&&r!==0)return!1}return!(l&&_&&!c&&r!==0||c&&f&&!l&&r!==0||p||m)},higherGT=(a,o,s)=>{if(!a)return o;const i=compare(a.semver,o.semver,s);return i>0?a:i<0||o.operator===">"&&a.operator===">="?o:a},lowerLT=(a,o,s)=>{if(!a)return o;const i=compare(a.semver,o.semver,s);return i<0?a:i>0||o.operator==="<"&&a.operator==="<="?o:a};var subset_1=subset;const internalRe=re$5.exports;var semver={re:internalRe.re,src:internalRe.src,tokens:internalRe.t,SEMVER_SPEC_VERSION:constants.SEMVER_SPEC_VERSION,SemVer:semver$1,compareIdentifiers:identifiers.compareIdentifiers,rcompareIdentifiers:identifiers.rcompareIdentifiers,parse:parse_1,valid:valid_1,clean:clean_1,inc:inc_1,diff:diff_1,major:major_1,minor:minor_1,patch:patch_1,prerelease:prerelease_1,compare:compare_1,rcompare:rcompare_1,compareLoose:compareLoose_1,compareBuild:compareBuild_1,sort:sort_1,rsort:rsort_1,gt:gt_1,lt:lt_1,eq:eq_1,neq:neq_1,gte:gte_1,lte:lte_1,cmp:cmp_1,coerce:coerce_1,Comparator:comparator,Range:range,satisfies:satisfies_1,toComparators:toComparators_1,maxSatisfying:maxSatisfying_1,minSatisfying:minSatisfying_1,minVersion:minVersion_1,validRange:valid,outside:outside_1,gtr:gtr_1,ltr:ltr_1,intersects:intersects_1,simplifyRange:simplify,subset:subset_1},UpdateDialog_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$i=a=>(pushScopeId("data-v-29008f05"),a=a(),popScopeId(),a),_hoisted_1$21={class:"root_container"},_hoisted_2$1U={class:"update_container"},_hoisted_3$1K={class:"win_btn"},_hoisted_4$1l={key:0,class:"update_dialog"},_hoisted_5$10=_withScopeId$i(()=>createBaseVNode("p",{class:"update_dialog_title"},"\u65B0\u7248\u672C\u66F4\u65B0\u63D0\u793A",-1)),_hoisted_6$T=["textContent"],_hoisted_7$P=createTextVNode("\u6682\u4E0D\u66F4\u65B0"),_hoisted_8$N=createTextVNode("\u7ACB\u5373\u66F4\u65B0"),_hoisted_9$G={key:1,class:"already_new"},_hoisted_10$B=_withScopeId$i(()=>createBaseVNode("p",{class:"already_new_title"},"\u68C0\u67E5\u66F4\u65B0",-1)),_hoisted_11$y=_withScopeId$i(()=>createBaseVNode("div",{class:"already_new_info"},"\u4F60\u5F53\u524D\u4F7F\u7528\u7684\u54D4\u54E9\u54D4\u54E9\u662F\u6700\u65B0\u7248\u672C",-1)),_hoisted_12$u={class:"already_new_btn confirm"},_hoisted_13$n=createTextVNode("\u77E5\u9053\u4E86"),_hoisted_14$k={key:2,class:"downloading_progress"},_hoisted_15$i={class:"downloading_progress_info"},_hoisted_16$h=_withScopeId$i(()=>createBaseVNode("span",{class:"downloading_progress_tips"},"\u6B63\u5728\u4E3A\u60A8\u4E0B\u8F7D\u6700\u65B0\u7248\u54D4\u54E9\u54D4\u54E9\uFF0C\u8BF7\u7A0D\u540E...",-1)),_hoisted_17$g={class:"downloading_progress_bar"},_hoisted_18$g={class:"downloading_progress_btn"},_hoisted_19$e=createTextVNode("\u53D6\u6D88\u66F4\u65B0"),_hoisted_20$c=createTextVNode("\u540E\u53F0\u4E0B\u8F7D"),_hoisted_21$c={key:3,class:"downLoaded_dialog"},_hoisted_22$b=_withScopeId$i(()=>createBaseVNode("p",{class:"downLoaded_dialog_title"},"\u4E0B\u8F7D\u6210\u529F",-1)),_hoisted_23$a=_withScopeId$i(()=>createBaseVNode("div",{class:"downLoaded_dialog_info"},"\u91CD\u542F\u5B89\u88C5\u4EE5\u66F4\u65B0\u5230\u6700\u65B0\u7248\u672C\u54D4\u54E9\u54D4\u54E9",-1)),_hoisted_24$a={class:"downLoaded_dialog_btn confirm"},_hoisted_25$9=createTextVNode("\u7ACB\u5373\u5B89\u88C5"),_hoisted_26$8={key:4,class:"already_new"},_hoisted_27$7=_withScopeId$i(()=>createBaseVNode("p",{class:"already_new_title"},"\u66F4\u65B0\u5931\u8D25",-1)),_hoisted_28$6=_withScopeId$i(()=>createBaseVNode("div",{class:"already_new_info"},"\u8BF7\u5230\u54D4\u54E9\u54D4\u54E9\u5B98\u7F51\u4E0B\u8F7D\u6700\u65B0\u7248\u672C",-1)),_hoisted_29$4={class:"already_new_btn confirm"},_hoisted_30$3=createTextVNode(" \u524D\u5F80\u5B98\u7F51\u4E0B\u8F7D "),_hoisted_31$3={key:0,class:"update_cancellation_dialog"},_hoisted_32$3={class:"win_btn"},_hoisted_33$3=_withScopeId$i(()=>createBaseVNode("p",{class:"update_cancellation_dialog_title"},"\u54D4\u54E9\u54D4\u54E9\u5B89\u88C5",-1)),_hoisted_34$2=_withScopeId$i(()=>createBaseVNode("div",{class:"update_cancellation_dialog_info"},"\u54D4\u54E9\u54D4\u54E9\u6B63\u5728\u66F4\u65B0\uFF0C\u70B9\u51FB\u201C\u786E\u8BA4\u201D\u53D6\u6D88\u66F4\u65B0",-1)),_hoisted_35$2={class:"update_cancellation_dialog_btn"},_hoisted_36$2=createTextVNode("\u53D6\u6D88"),_hoisted_37$2=createTextVNode("\u786E\u8BA4"),_sfc_main$1A=defineComponent({__name:"UpdateDialog",emits:["close"],setup(a,{emit:o}){const s=ref("tipNew"),i=ref(!1),l=ref(""),c=ref(!1),r=ref(0),u=ref(!1),d=()=>{callNative("update/downloadUpdate")},_=()=>{callNative("update/quitAndInstall")},f=()=>i.value=!1,m=()=>{u.value=!0},p=()=>{u.value=!1},v=()=>{u.value=!1,i.value=!1,callNative("update/cancelUpdate")},g=y=>{var B,C,S,E;(B=y==null?void 0:y.data)!=null&&B.isAvailable?(s.value="tipNew",l.value=(C=y==null?void 0:y.data)==null?void 0:C.news):((S=y==null?void 0:y.data)==null?void 0:S.isAvailable)==!1?s.value="alreadyNew":(E=y==null?void 0:y.data)!=null&&E.iserror&&(s.value="updateError"),getVersion().then(k=>{var b,V;i.value=!0,typeof((b=y==null?void 0:y.data)==null?void 0:b.forceUpdate)=="string"&&(semver.lte(k,(V=y==null?void 0:y.data)==null?void 0:V.forceUpdate)?(c.value=!0,callNative("config/setIsForceUpdate",!0)):callNative("config/setIsForceUpdate",!1))})},$=y=>{var B,C,S;(B=y==null?void 0:y.data)!=null&&B.isShowModal&&(i.value=!0),r.value=((C=y==null?void 0:y.data)==null?void 0:C.percent)||10,s.value="downloading",(S=y==null?void 0:y.data)!=null&&S.isDownloaded&&(s.value="downloaded")};return useIpcListener("update/updateInfo",g),useIpcListener("update/downloadProgress",$),(y,B)=>{const C=resolveComponent("v-button");return openBlock(),createBlock(_sfc_main$2F,{show:i.value,zIndex:999},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$21,[withDirectives(createBaseVNode("div",_hoisted_2$1U,[createBaseVNode("div",_hoisted_3$1K,[c.value?createCommentVNode("",!0):(openBlock(),createBlock(unref(IcoClose),{key:0,class:"close_btn",onClick:f}))]),s.value=="tipNew"?(openBlock(),createElementBlock("div",_hoisted_4$1l,[_hoisted_5$10,createBaseVNode("div",{class:"update_dialog_info",style:{"text-align":"left",margin:"0px 50px 24px 50px"},textContent:toDisplayString(l.value)},null,8,_hoisted_6$T),createBaseVNode("div",{class:normalizeClass(["update_dialog_btn",{force_update_btn:c.value}])},[c.value?createCommentVNode("",!0):(openBlock(),createBlock(C,{key:0,class:"normal_vbtn",onClick:f},{default:withCtx(()=>[_hoisted_7$P]),_:1})),createVNode(C,{class:"accent_vbtn",onClick:d},{default:withCtx(()=>[_hoisted_8$N]),_:1})],2)])):createCommentVNode("",!0),s.value=="alreadyNew"?(openBlock(),createElementBlock("div",_hoisted_9$G,[_hoisted_10$B,_hoisted_11$y,createBaseVNode("div",_hoisted_12$u,[createVNode(C,{class:"accent_vbtn",onClick:f},{default:withCtx(()=>[_hoisted_13$n]),_:1})])])):createCommentVNode("",!0),s.value=="downloading"?(openBlock(),createElementBlock("div",_hoisted_14$k,[createBaseVNode("div",_hoisted_15$i,[_hoisted_16$h,createBaseVNode("div",_hoisted_17$g,[createBaseVNode("div",{class:"downloading_progress_cent",style:normalizeStyle({width:`${Math.floor(r.value)}%`})},null,4)])]),createBaseVNode("div",_hoisted_18$g,[createVNode(C,{class:"normal_vbtn",onClick:m},{default:withCtx(()=>[_hoisted_19$e]),_:1}),createVNode(C,{class:"accent_vbtn",onClick:f},{default:withCtx(()=>[_hoisted_20$c]),_:1})])])):createCommentVNode("",!0),s.value=="downloaded"?(openBlock(),createElementBlock("div",_hoisted_21$c,[_hoisted_22$b,_hoisted_23$a,createBaseVNode("div",_hoisted_24$a,[createVNode(C,{class:"accent_vbtn",onClick:_},{default:withCtx(()=>[_hoisted_25$9]),_:1})])])):createCommentVNode("",!0),s.value=="updateError"?(openBlock(),createElementBlock("div",_hoisted_26$8,[_hoisted_27$7,_hoisted_28$6,createBaseVNode("div",_hoisted_29$4,[createVNode(C,{class:"accent_vbtn",onClick:B[0]||(B[0]=S=>unref(openInBrowser$1)("https://app.bilibili.com?spm_id_from=pc_desktop_app","settings.Update"))},{default:withCtx(()=>[_hoisted_30$3]),_:1})])])):createCommentVNode("",!0)],512),[[vShow,!u.value]]),u.value?(openBlock(),createElementBlock("div",_hoisted_31$3,[createBaseVNode("div",_hoisted_32$3,[createVNode(unref(IcoClose),{class:"close_btn",onClick:p})]),_hoisted_33$3,_hoisted_34$2,createBaseVNode("div",_hoisted_35$2,[createVNode(C,{class:"normal_vbtn",onClick:p},{default:withCtx(()=>[_hoisted_36$2]),_:1}),createVNode(C,{class:"accent_vbtn",onClick:v},{default:withCtx(()=>[_hoisted_37$2]),_:1})])])):createCommentVNode("",!0)])]),_:1},8,["show"])}}});var UpdateDialog=_export_sfc(_sfc_main$1A,[["__scopeId","data-v-29008f05"]]),Link_vue_vue_type_style_index_0_lang="";const _hoisted_1$20=["href"],_sfc_main$1z=defineComponent({__name:"Link",props:{href:{type:String,default:""}},setup(a){const o=a;function s(i){i.preventDefault(),openInBrowser(o.href)}return(i,l)=>(openBlock(),createElementBlock("a",{href:a.href,class:"base_link",onClick:s},[renderSlot(i.$slots,"default")],8,_hoisted_1$20))}});var PrivacyPolicyDialog_vue_vue_type_style_index_0_lang="";const _hoisted_1$1$=createBaseVNode("div",{class:"privacy_policy_dialog--header flex_center"},[createBaseVNode("div",{class:"privacy_policy_dialog--title"},"\u54D4\u54E9\u54D4\u54E9\u7528\u6237\u534F\u8BAE\u4E0E\u9690\u79C1\u4FDD\u62A4")],-1),_hoisted_2$1T={class:"privacy_policy_dialog--content ov_y_auto"},_hoisted_3$1J=createTextVNode(" \u611F\u8C22\u60A8\u4FE1\u4EFB\u5E76\u4F7F\u7528\u54D4\u54E9\u54D4\u54E9PC\u5BA2\u6237\u7AEF\u3002"),_hoisted_4$1k=createBaseVNode("br",null,null,-1),_hoisted_5$$=createTextVNode(" \u6211\u4EEC\u5C06\u6839\u636E"),_hoisted_6$S=createTextVNode("\u53CA"),_hoisted_7$O=createTextVNode("\u6765\u5E2E\u52A9\u60A8\u4E86\u89E3\u6211\u4EEC\u5728\u6536\u96C6\u3001\u4F7F\u7528\u3001\u5B58\u50A8\u3001\u548C\u5171\u4EAB\u60A8\u4E2A\u4EBA\u4FE1\u606F\u7684\u60C5\u51B5\u4EE5\u53CA\u60A8\u4EAB\u6709\u7684\u76F8\u5173\u6743\u5229\u3002 "),_hoisted_8$M=createBaseVNode("br",null,null,-1),_hoisted_9$F=createBaseVNode("p",null,"\u5728\u60A8\u4F7F\u7528\u54D4\u54E9\u54D4\u54E9PC\u5BA2\u6237\u7AEF\u89C6\u9891\u89C2\u770B\u670D\u52A1\u65F6\uFF0C\u6211\u4EEC\u5C06\u6536\u96C6\u60A8\u7684\u8BBE\u5907\u4FE1\u606F\u3001\u64CD\u4F5C\u65E5\u5FD7\u53CA\u6D4F\u89C8\u8BB0\u5F55\u7B49\u4FE1\u606F\u3002",-1),_hoisted_10$A=createBaseVNode("p",null,"\u5728\u60A8\u4F7F\u7528\u54D4\u54E9\u54D4\u54E9PC\u5BA2\u6237\u7AEF\u56FE\u6587\u52A8\u6001\u3001\u5206\u4EAB\u3001\u8BC4\u8BBA\u3001\u6536\u85CF\u7B49\u670D\u52A1\u65F6\uFF0C\u6211\u4EEC\u9700\u8981\u83B7\u53D6\u60A8\u7684\u8BBE\u5907\u5B58\u50A8\u7B49\u4FE1\u606F\u3002",-1),_hoisted_11$x=createBaseVNode("br",null,null,-1),_hoisted_12$t=createBaseVNode("p",null,"\u60A8\u53EF\u4EE5\u5728\u76F8\u5173\u9875\u9762\u8BBF\u95EE\u3001\u4FEE\u6539\u3001\u5220\u9664\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\u6216\u7BA1\u7406\u60A8\u7684\u6388\u6743\u3002",-1),_hoisted_13$m=createBaseVNode("br",null,null,-1),_hoisted_14$j=createBaseVNode("p",null,"\u6211\u4EEC\u4F1A\u91C7\u7528\u884C\u4E1A\u5185\u9886\u5148\u7684\u5B89\u5168\u6280\u672F\u4FDD\u62A4\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\u3002",-1),_hoisted_15$h=createBaseVNode("br",null,null,-1),_hoisted_16$g=createTextVNode(" \u60A8\u53EF\u4EE5\u901A\u8FC7\u9605\u8BFB\u5B8C\u6574\u7684"),_hoisted_17$f=createTextVNode("\u548C"),_hoisted_18$f=createTextVNode("\u6765\u4E86\u89E3\u8BE6\u7EC6\u4FE1\u606F\u3002 "),_sfc_main$1y=defineComponent({__name:"PrivacyPolicyDialog",setup(a){const o=[{href:"https://www.bilibili.com/protocal/licence.html",text:"\u300A\u54D4\u54E9\u54D4\u54E9\u5F39\u5E55\u7F51\u7528\u6237\u4F7F\u7528\u534F\u8BAE\u300B"},{href:"https://www.bilibili.com/blackboard/protocal/privacy-pc-desktop.html",text:"\u300A\u54D4\u54E9\u54D4\u54E9PC\u5BA2\u6237\u7AEF\u9690\u79C1\u653F\u7B56\u300B"}],s=ref(null);async function i(){await alertAsync({content:"\u786E\u8BA4\u9000\u51FA\u54D4\u54E9\u54D4\u54E9",cancelText:"\u9000\u51FA",confirmText:"\u53D6\u6D88"})||(await callNative("auth/disagreePrivacyPolicy"),callNative("app/quitApp"))}async function l(){await callNative("store/setData",PRIVACY_POLICY_HIDDEN_KEY,!0),callNative("auth/acceptPrivacyPolicy"),s.value.hide()}return onMounted(()=>{let c=callNativeSync("store/getData",PRIVACY_POLICY_HIDDEN_KEY);typeof c!="boolean"&&(c=!1),c||s.value.show()}),(c,r)=>(openBlock(),createBlock(VPopup,{ref_key:"popupRef",ref:s,"custom-class":"privacy_policy_dialog",mask:!1,"fade-opacity":.95},{default:withCtx(()=>[_hoisted_1$1$,createBaseVNode("div",_hoisted_2$1T,[createBaseVNode("p",null,[_hoisted_3$1J,_hoisted_4$1k,_hoisted_5$$,createVNode(_sfc_main$1z,{href:o[0].href},{default:withCtx(()=>[createTextVNode(toDisplayString(o[0].text),1)]),_:1},8,["href"]),_hoisted_6$S,createVNode(_sfc_main$1z,{href:o[1].href},{default:withCtx(()=>[createTextVNode(toDisplayString(o[1].text),1)]),_:1},8,["href"]),_hoisted_7$O]),_hoisted_8$M,_hoisted_9$F,_hoisted_10$A,_hoisted_11$x,_hoisted_12$t,_hoisted_13$m,_hoisted_14$j,_hoisted_15$h,createBaseVNode("p",null,[_hoisted_16$g,createVNode(_sfc_main$1z,{href:o[0].href},{default:withCtx(()=>[createTextVNode(toDisplayString(o[0].text),1)]),_:1},8,["href"]),_hoisted_17$f,createVNode(_sfc_main$1z,{href:o[1].href},{default:withCtx(()=>[createTextVNode(toDisplayString(o[1].text),1)]),_:1},8,["href"]),_hoisted_18$f])]),createBaseVNode("div",{class:"privacy_policy_dialog--footer"},[createBaseVNode("div",{class:"privacy_policy_dialog--cancel",onClick:i},"\u4E0D\u540C\u610F"),createBaseVNode("div",{class:"privacy_policy_dialog--confirm",onClick:l},"\u540C\u610F\u5E76\u7EE7\u7EED")])]),_:1},8,["fade-opacity"]))}}),_hoisted_1$1_=createBaseVNode("p",{class:"b_text text2"},"\u91CD\u542F\u54D4\u54E9\u54D4\u54E9\u53EF\u4EE5\u5347\u7EA7\u5230\u65B0\u7248\u672C~",-1),_hoisted_2$1S={class:"float_right mt_sm"},_hoisted_3$1I=createTextVNode("\u73B0\u5728\u5347\u7EA7"),_hoisted_4$1j=createTextVNode("\u7A0D\u540E\u518D\u8BF4"),_sfc_main$1x=defineComponent({__name:"Notification",emits:["action"],setup(a,{emit:o}){const s=()=>{callNative("update/updatePatchNow"),o("action")},i=()=>{callNative("update/updatePatchLater"),o("action")};return(l,c)=>(openBlock(),createElementBlock(Fragment,null,[_hoisted_1$1_,createBaseVNode("div",_hoisted_2$1S,[createVNode(unref(Button),{size:"small",type:"pink",class:"mr_sm",onClick:s},{default:withCtx(()=>[_hoisted_3$1I]),_:1}),createVNode(unref(Button),{size:"small",onClick:i},{default:withCtx(()=>[_hoisted_4$1j]),_:1})])],64))}});var Layout_vue_vue_type_style_index_0_lang="";const _hoisted_1$1Z={class:"app_layout--sidebar u_select_none"},_hoisted_2$1R={class:"app_layout--content flex_col"},_hoisted_3$1H={class:"app_container p_relative"},_hoisted_4$1i=createBaseVNode("iframe",{class:"hide",src:"https://www.bilibili.com/blackboard/fe/activity-qpCzT2eJZD.html",frameborder:"0"},null,-1),_hoisted_5$_={class:"content-wrapper"},_hoisted_6$R=createBaseVNode("h4",{class:"b_text text1 text_center mt_sm"},"\u70B9\u51FB\u5173\u95ED\u6309\u94AE\u4EE5\u540E\uFF1A",-1),_hoisted_7$N={class:"close-main-dialog mt_md"},_hoisted_8$L=createBaseVNode("span",{class:"text2 text_nowrap"},"\u6700\u5C0F\u5316\u5230\u7CFB\u7EDF\u6258\u76D8",-1),_hoisted_9$E=createBaseVNode("br",null,null,-1),_hoisted_10$z=createBaseVNode("span",{class:"text2 text_nowrap"},"\u9000\u51FA\u5E94\u7528",-1),_hoisted_11$w={class:"close-main-dialog mt_md"},_hoisted_12$s={class:"mt_lg text_center dialog_btns"},_hoisted_13$l=createTextVNode("\u53D6\u6D88"),_hoisted_14$i=createTextVNode("\u786E\u5B9A"),_hoisted_15$g={class:"content-wrapper"},_hoisted_16$f=createBaseVNode("h4",{class:"b_text text1 text_center mt_md"},"\u6709\u5176\u5B83\u7A97\u53E3\u6B63\u5728\u4F7F\u7528\uFF0C\u662F\u5426\u9000\u51FA\u5E94\u7528\uFF1F",-1),_hoisted_17$e={class:"mt_xl text_center dialog_btns"},_hoisted_18$e=createTextVNode("\u4F9D\u7136\u9000\u51FA"),_hoisted_19$d=createTextVNode("\u9690\u85CF\u5230\u6258\u76D8"),_sfc_main$1w=defineComponent({__name:"Layout",setup(a){const o=useRoute(),s=useRouter(),i=ref(!1),l=ref(!1),c=ref(getIsQuitByCloseMain()),r=ref(c.value),u=ref(callNativeSync("config/getIsQuitDialogPoped")),d=ref(u.value),{isSearchPage:_,localSpmId:f}=storeToRefs(useSearchStore()),{isForceRestart:m,lastRootRouteName:p,subRoutesStack:v}=storeToRefs(useConfigStore()),{userInfo:g}=storeToRefs(useUserInfoStore()),$=computed(()=>o.name==="Selected"),y=computed(()=>o.name==="UgcSeason"),{showVersion:B}=storeToRefs(useAppInfoStore()),{isMainMini:C}=storeToRefs(useSelectedStore()),S=useNotificationStore(),E=computed(()=>v.value.includes("UgcSeason")?"":"UgcSeason");let k=null,b=!1;const V=()=>{k||(k=Notify({offset:20,titleText:"\u66F4\u65B0\u63D0\u793A",duration:0,position:"bottom-right",default:h(_sfc_main$1x,{onAction:()=>{b=!0,k.close()}}),showCloseIcon:!0,onClose:()=>{b||callNative("update/updatePatchLater")}}))};useIpcListener("update/incrementPatchReady",()=>V()),useIpcListener("config/quitDialogPopedChange",({data:R})=>{u.value=R,d.value=R}),useIpcListener("config/quitByCloseMainChange",({data:R})=>{c.value=R,r.value=R});const A=()=>{r.value=c.value,i.value=!1,d.value=u.value},x=()=>{i.value=!1,setIsQuitByCloseMain(r.value),d.value&&callNative("config/setIsQuitDialogPoped",d.value),forceCloseWindow(),r.value&&quitBiliApp()},T=()=>{l.value=!1,forceCloseWindow()},I=()=>{l.value=!1,forceCloseWindow(),quitBiliApp()};return events.on("pageSpmIdChange",R=>f.value=R),IS_MAC&&(callNative("window/catchClose"),useIpcListener("window/show",()=>callNative("window/catchClose"))),useIpcListener("window/willClose",({data:R})=>{if(IS_MAC||callNative("window/uncatchClose"),R||m.value||C.value){forceCloseWindow();return}if(!u.value){i.value=!0,callNative("window/focus");return}if(!c.value){forceCloseWindow();return}callNativeSync("window/getVisibleWinNum")>1?(l.value=!0,callNative("window/focus")):(forceCloseWindow(),quitBiliApp())}),useIpcListener("window/visibleChange",({data:R})=>{R||(i.value=!1,l.value=!1)}),useIpcListener("events/goToPage",({data:R})=>{var N,w,D,L;switch(R==null?void 0:R.page){case"RecommendPage":s.push({name:"HomeRecommends"});return;case"DynamicPage":(g.value.isLogin||((N=R==null?void 0:R.meta)==null?void 0:N.tab)!=="video")&&s.push({name:"Dynamic",query:{...R==null?void 0:R.meta}});return;case"SpacePage":(g.value.isLogin||((w=R==null?void 0:R.meta)==null?void 0:w.mid))&&s.push({name:"Space",query:{...R==null?void 0:R.meta}});return;case"SettingsPage":s.push({name:"Settings"});return;case"SearchPage":(D=R==null?void 0:R.meta)!=null&&D.keyword&&events.emit("search",R.meta.keyword);return;case"DownloadPage":o.name!=="MineDownload"&&s.push({name:"MineDownload",query:{...R==null?void 0:R.meta}});return;case"HomeHotsPage":(L=R==null?void 0:R.meta)!=null&&L.playSeries&&S.setWillPlaySeries(!0),s.push({name:"HomeHots",query:{...R==null?void 0:R.meta}});return;case"HomeLivePage":g.value.isLogin&&s.push({name:"HomeLive",query:{...R==null?void 0:R.meta}});return}}),useIpcListener("auth/userLoginChange",({data:R})=>{["Selected","UgcSeason"].includes(o.name)&&R&&selectedEvents.emit("beforeLoginRefresh"),["HomeRecommends","Selected","Settings"].every(N=>o.name!==N)&&s.replace({name:p.value||"Home"}),setTimeout(()=>{var N,w;location.reload(),(w=(N=window.parent).showBiliSkeleton)==null||w.call(N)})}),useIpcListener("update/newVersionUpdated",()=>{toastAsync({content:`\u54D4\u54E9\u54D4\u54E9\u5DF2\u5347\u7EA7\u5230\u7248\u672C\uFF1Av${B.value}`,duration:3e3,style:"bottom: 80px;"})}),useIpcListener("download/reportDownloadSize",({data:R})=>{http.get(R).then().catch(()=>{})}),useIpcListener("events/beforeAppQuit",()=>{callNative("config/setIsSelectedExit",o.name==="Selected")}),watch(y,R=>{R?document.body.classList.add("ugc_season"):document.body.classList.remove("ugc_season")}),watch(C,R=>{R?document.body.classList.add("bili_mini"):document.body.classList.remove("bili_mini")}),onMounted(()=>{var R,N;return(N=(R=window.parent).handleMainWindowReady)==null?void 0:N.call(R)}),(R,N)=>{const w=resolveComponent("router-view"),D=resolveComponent("v-radio"),L=resolveComponent("v-radio-group"),P=resolveComponent("v-checkbox"),j=resolveComponent("v-button"),O=resolveComponent("v-dialog");return openBlock(),createElementBlock("div",{class:normalizeClass(["app_layout ov_hidden flex_start bg_bg1",{"gpu-enabled":!unref(IS_GPU_DISABLED)}])},[createBaseVNode("div",_hoisted_1$1Z,[createVNode(_sfc_main$1U)]),createBaseVNode("div",_hoisted_2$1R,[createVNode(_sfc_main$1R,{isSelectedPage:unref($)||unref(y)},null,8,["isSelectedPage"]),createBaseVNode("div",_hoisted_3$1H,[createVNode(w,null,{default:withCtx(({Component:F})=>[(openBlock(),createBlock(KeepAlive,{exclude:unref(E)},[(openBlock(),createBlock(resolveDynamicComponent(F)))],1032,["exclude"]))]),_:1}),createVNode(FixedButtons,{isSelectedPage:unref($),"scroll-container":".app_home--content"},null,8,["isSelectedPage"]),withDirectives(createVNode(_sfc_main$1P,{class:"app_container--search p_cover"},null,512),[[vShow,unref(_)]]),createVNode(_sfc_main$1B,{isSelectedPage:unref($),isUgcSeasonPage:unref(y),class:"app_container--selected p_cover"},null,8,["isSelectedPage","isUgcSeasonPage"]),createVNode(_sfc_main$2G),createVNode(_sfc_main$2H),createVNode(UpdateDialog),createVNode(_sfc_main$1y),_hoisted_4$1i])]),createVNode(O,{visible:i.value,"onUpdate:visible":N[2]||(N[2]=F=>i.value=F),width:320,"class-name":"i_dialog py_lg",onCancel:A,"is-show-default-footer":!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_5$_,[_hoisted_6$R,createBaseVNode("div",_hoisted_7$N,[createVNode(L,{modelValue:r.value,"onUpdate:modelValue":N[0]||(N[0]=F=>r.value=F),theme:"pink"},{default:withCtx(()=>[createVNode(D,{value:!1},{default:withCtx(()=>[_hoisted_8$L]),_:1}),_hoisted_9$E,createVNode(D,{class:"mt_xs",value:!0},{default:withCtx(()=>[_hoisted_10$z]),_:1})]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_11$w,[createVNode(P,{modelValue:d.value,"onUpdate:modelValue":N[1]||(N[1]=F=>d.value=F),class:"mt_sm text2",theme:"pink",label:"\u4E0D\u518D\u63D0\u793A"},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_12$s,[createVNode(j,{class:"mr_sm",onClick:A},{default:withCtx(()=>[_hoisted_13$l]),_:1}),createVNode(j,{type:"pink",onClick:x},{default:withCtx(()=>[_hoisted_14$i]),_:1})])])]),_:1},8,["visible"]),createVNode(O,{visible:l.value,"onUpdate:visible":N[3]||(N[3]=F=>l.value=F),width:320,"class-name":"i_dialog py_lg",onCancel:N[4]||(N[4]=F=>l.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_15$g,[_hoisted_16$f,createBaseVNode("div",_hoisted_17$e,[createVNode(j,{class:"mr_sm",onClick:I},{default:withCtx(()=>[_hoisted_18$e]),_:1}),createVNode(j,{type:"pink",onClick:T},{default:withCtx(()=>[_hoisted_19$d]),_:1})])])]),_:1},8,["visible"])],2)}}});var Home_vue_vue_type_style_index_0_lang="";const _hoisted_1$1Y={class:"app_home i_page_wrapper"},_hoisted_2$1Q={class:"flex_start flex_inline"},_hoisted_3$1G={class:"app_home--content i_page_content"},_sfc_main$1v=defineComponent({__name:"Home",setup(a){const o=[{key:"1",name:"\u76F4\u64AD",router:"HomeLive"},{key:"2",name:"\u63A8\u8350",router:"HomeRecommends"},{key:"3",name:"\u70ED\u95E8",router:"HomeHots"},{key:"4",name:"\u8FFD\u756A",router:"HomeBangumi"},{key:"5",name:"\u5F71\u89C6",router:"HomePgc"}],s=ref("2"),i=useRoute(),l=useRouter(),c=ref({}),r=u=>{const d=o.find(_=>_.key===u);d&&(l.push({name:d.router,query:c.value}),c.value&&(c.value={}))};return r(s.value),watch(i,()=>{const u=o.find(d=>i.name.startsWith(d.router));u&&(c.value=i.query,s.value=u.key)}),(u,d)=>{const _=resolveComponent("v-tab-item"),f=resolveComponent("v-tabs"),m=resolveComponent("HeaderSlot"),p=resolveComponent("router-view");return openBlock(),createElementBlock("div",_hoisted_1$1Y,[createVNode(m,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$1Q,[createVNode(f,{class:"mt_xs","auto-adjustment":"",activeKey:s.value,"onUpdate:activeKey":d[0]||(d[0]=v=>s.value=v),"slide-to-hover":!1,"active-pink":!0,"no-padding-left":!1,"tabs-gutter":32,"slider-width":18,onTabChange:r},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(o),v=>(openBlock(),createBlock(_,{key:v.key,tab:v.name},null,8,["tab"]))),128))]),_:1},8,["activeKey"])])]),_:1}),createBaseVNode("div",_hoisted_3$1G,[createVNode(p,null,{default:withCtx(({Component:v})=>[(openBlock(),createBlock(KeepAlive,null,[(openBlock(),createBlock(resolveDynamicComponent(v)))],1024))]),_:1})])])}}});var HomeLive_vue_vue_type_style_index_0_lang="";const _hoisted_1$1X={class:"i_wrapper scroll-content"},_hoisted_2$1P={key:0,class:"home_live--users"},_hoisted_3$1F={class:"b_text text1 flex_start"},_hoisted_4$1h=createTextVNode(" \u6211\u5173\u6CE8\u7684\u4E3B\u64AD "),_hoisted_5$Z={key:0,class:"b_text text3 ml_sm"},_hoisted_6$Q={class:"brand_pink"},_hoisted_7$M=createTextVNode("\u4EBA\u6B63\u5728\u76F4\u64AD "),_hoisted_8$K={class:"home_live--users-area p_relative"},_hoisted_9$D={class:"users-wrap flex_start flex_inline flex_nowrap items_stretch"},_hoisted_10$y=["onClick"],_hoisted_11$v={class:"users-name-wrap flex_start"},_hoisted_12$r={class:"users-name b_text text2 fs_6 mt_xs text_center text_ellipsis_2l"},_hoisted_13$k={class:"users-more more-left"},_hoisted_14$h={class:"users-more more-right"},_hoisted_15$f={key:0,class:"home_live--rooms-tabs mb_xl"},_hoisted_16$e={class:"rooms-tabs-parent"},_hoisted_17$d={class:"rooms-tabs-second flex_between items_start"},_hoisted_18$d=["onClick"],_hoisted_19$c={key:0},_hoisted_20$b=createTextVNode(" \u5C55\u5F00\u66F4\u591A "),_hoisted_21$b={key:1,class:"home_live--rooms-cards mt_sm"},_hoisted_22$a={class:"row"},_sfc_main$1u=defineComponent({__name:"HomeLive",setup(a){const o=useRoute(),s=ref([]),i=ref(0),l=ref([]),c=ref(1),r=ref(20),u=ref(!0),d=ref(!1),_=ref(!1),f=ref(!1),m=ref(!1),p=ref(Math.random()),v=ref(),g=ref(!1),{isShowLiveNow:$}=storeToRefs(useConfigStore()),y=ref({}),B=ref({}),C=ref([]),S=computed(()=>y.value.area_list||[]),E=ref(null),k=ref(null),b=ref(null),V=ref(!1),A=ref(!1),x=computed(()=>_.value&&!s.value.length&&!C.value.length&&!l.value.length);let T,I=null,R=null,N=Date.now();useReportPv({spm_id:"main.home-page-live.0.0",pageName:"HomeLive"}),useScrollToTop(".home_live"),useRoutePageFadeIn(".home_live");const w=()=>{c.value=1,u.value=!0,l.value=[]},D=async()=>{var G,Q;if(!d.value){d.value=!0;try{const{list:te}=await getLiveAreaList({platform:"web"});C.value=te,te[0].id===0&&((G=te[0].area_list)==null||G.unshift({id:0,name:"\u5168\u90E8"})),te.every(ce=>ce.id!==y.value.id)&&(y.value=te[0],B.value=((Q=te[0])==null?void 0:Q.area_list[0])||{},L()),setTimeout(()=>ee())}catch(te){console.error(te)}finally{d.value=!1}}};D();const L=debounce$1(()=>{_.value||(f.value=!1,_.value=!0,y.value.id||B.value.id?P():j())},500),P=async()=>{try{const G=await signQueryParams({parent_area_id:B.value.parent_id||0,area_id:B.value.id||0,page:c.value,page_size:r.value,platform:"web",device:IS_MAC?"mac":IS_WIN?"win":IS_LINUX?"linux":""}),{list:Q=[]}=await getLiveRoomList(G),te=Q.map(ce=>transformRecToLiveInfo(ce,!0));l.value=l.value.concat(te),u.value=Q.length>=r.value,Q.length&&c.value++}catch(G){console.error(G),f.value=!0}finally{_.value=!1}},j=async()=>{try{const G=await signQueryParams({parent_area_id:0,area_id:0,device:IS_MAC?"mac":IS_WIN?"win":IS_LINUX?"linux":"",page:c.value,platform:"web",scale:"xxhdpi",source_name:"pc",mobi_app:"pc_electron"}),{card_list:Q=[],has_more:te}=await getHomeLiveData(G),$e=Q.filter(we=>["small_card_v1","second_card_v1"].includes(we.card_type)).map(we=>{var ke;const _e=we.card_data.small_card_v1||we.card_data.second_card_v1||{};return _e.roomid||(_e.roomid=_e.id||""),_e.uname||(_e.uname=((ke=_e.cover_left_style)==null?void 0:ke.text)||""),transformRecToLiveInfo(_e,!0)});u.value=!!te&&$e.every(we=>l.value.every(_e=>_e.roomId!==we.roomId)),l.value=unique(l.value.concat($e),["roomid"]),$e.length&&c.value++}catch(G){console.error(G),f.value=!0}finally{_.value=!1}},O=async(G=!1)=>{var Q,te;if(!m.value){m.value=!0;try{const ce=await signQueryParams({parent_area_id:0,area_id:0,device:IS_MAC?"mac":IS_WIN?"win":IS_LINUX?"linux":"",page:1,platform:"web",scale:"xxhdpi",source_name:"pc_my_idol_v1",mobi_app:"pc_electron"}),{card_list:$e=[]}=await getHomeLiveData(ce),we=($e||[]).find(_e=>_e.card_type==="my_idol_v1");if(we){const _e=((te=(Q=we.card_data)==null?void 0:Q.my_idol_v1)==null?void 0:te.list)||[];_e.forEach(ke=>{ke.face_nft=ke.is_nft,ke.upic=ke.face}),s.value=_e,i.value=_e.length}G&&(p.value=Math.random())}catch(ce){console.error(ce)}finally{m.value=!1}}},F=async()=>{var G,Q;try{const{kv_list:te}=await getHomeLiveNowEntry();$.value=!!+((Q=JSON.parse(((G=te==null?void 0:te[0])==null?void 0:G.value)||"{}"))==null?void 0:Q.is_show)}catch(te){console.error(te),$.value=!1}},U=()=>{!f.value&&u.value&&L()},W=G=>{V.value=!1,y.value=G,B.value=G.area_list[0]||{},w(),L(),setTimeout(()=>ee())},ne=G=>{B.value=G,w(),L()},H=G=>{const Q=v.value,te=Q.offsetWidth,ce=Q.scrollLeft;if(G==="L"){const $e=ce-te/2;Q.scrollLeft=$e>=0?$e:0}else Q.scrollLeft=ce+te/2},M=()=>{const G=v.value;G?g.value=G.scrollWidth>G.offsetWidth:g.value=!1},ee=()=>{var G,Q;A.value=((G=E.value)==null?void 0:G.offsetHeight)>((Q=k.value)==null?void 0:Q.offsetHeight)+5};return watchEffect(()=>{b.value&&(b.value.style.height=V.value?E.value.offsetHeight+"px":k.value.offsetHeight+"px")}),watch([E,k,S],()=>{setTimeout(()=>ee(),200)}),watch([v,s],()=>{setTimeout(()=>M(),200)}),useIpcListener("events/followUsersChange",()=>{o.name==="HomeLive"&&O()}),useRefresh("HomeLive",()=>{D(),w(),L(),O(!0)}),onActivated(()=>{o.name==="HomeLive"&&((!l.value.length||Date.now()-N>12e4)&&(D(),w(),L()),C.value.length||D(),O(),clearInterval(I),I=setInterval(()=>O(),2e4),F(),clearInterval(R),R=setInterval(()=>F(),2e4),T=onWindowResize(()=>{ee(),M()},!0))}),onDeactivated(()=>{c.value=1,u.value=!0,s.value=s.value.slice(0,20),l.value=l.value.slice(0,20),N=Date.now(),clearInterval(I),clearInterval(R),offWindowResize(T)}),(G,Q)=>{const te=resolveComponent("v-button"),ce=resolveComponent("WidgetArrow"),$e=resolveComponent("bili-live-card"),we=resolveComponent("Scroller");return openBlock(),createBlock(we,{class:"home_live page_scroller pt_lg w_100 u_select_none",onLoadMore:U},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1X,[unref(x)?(openBlock(),createBlock(_sfc_main$1Q,{key:0})):(openBlock(),createElementBlock(Fragment,{key:1},[s.value.length?(openBlock(),createElementBlock("div",_hoisted_2$1P,[createBaseVNode("h3",_hoisted_3$1F,[_hoisted_4$1h,i.value?(openBlock(),createElementBlock("span",_hoisted_5$Z,[createBaseVNode("span",_hoisted_6$Q,toDisplayString(i.value),1),_hoisted_7$M])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_8$K,[(openBlock(),createElementBlock("div",{class:"ov_scroll_x",ref_key:"liveUserScrollerRef",ref:v,key:p.value},[createBaseVNode("div",_hoisted_9$D,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,_e=>(openBlock(),createElementBlock("div",{class:"users-item flex_col flex_inline mr_sm cs_pointer",key:_e.uid,onClick:ke=>unref(openLiveRoomWindow)(_e.roomid)},[createVNode(UserAvatar,{class:"users-avatar online_border_pink",info:_e,isSmall:"",isShowLive:"",isOnLine:""},null,8,["info"]),createBaseVNode("div",_hoisted_11$v,[createBaseVNode("p",_hoisted_12$r,toDisplayString(_e.uname),1)])],8,_hoisted_10$y))),128))])])),g.value?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_13$k,[createVNode(te,{class:"more-btn",type:"grey","active-shrink":"",onClick:Q[0]||(Q[0]=_e=>H("L"))},{default:withCtx(()=>[createVNode(unref(IcoArrowLeft))]),_:1})]),createBaseVNode("div",_hoisted_14$h,[createVNode(te,{class:"more-btn",type:"grey","active-shrink":"",onClick:Q[1]||(Q[1]=_e=>H("R"))},{default:withCtx(()=>[createVNode(unref(IcoArrowRight))]),_:1})])],64)):createCommentVNode("",!0)])])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["home_live--rooms",{mt_lg:s.value.length}])},[C.value.length?(openBlock(),createElementBlock("div",_hoisted_15$f,[createBaseVNode("div",_hoisted_16$e,[(openBlock(!0),createElementBlock(Fragment,null,renderList(C.value,_e=>(openBlock(),createBlock(te,{class:"mr_sm mb_sm",type:"tab","active-pink":"",key:_e.id,active:_e.id===y.value.id,onClick:ke=>W(_e)},{default:withCtx(()=>[createTextVNode(toDisplayString(_e.name),1)]),_:2},1032,["active","onClick"]))),128))]),createBaseVNode("div",_hoisted_17$d,[createBaseVNode("div",{class:"tabs-second-content ml_1 ov_hidden ts_all_fast",ref_key:"areasContentRef",ref:b},[createBaseVNode("div",{class:"tabs-second-wrap flex_start flex_wrap",ref_key:"areasWrapRef",ref:E},[createBaseVNode("div",{class:"second-item py_xs mb_xs w_0",ref_key:"areasItemRef",ref:k},"\xA0",512),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(S),_e=>(openBlock(),createElementBlock("div",{class:normalizeClass(["second-item py_xs mb_xs text2 fs_5 hover_pink ts_all_fast cs_pointer mr_xl",{brand_pink:_e.id===B.value.id}]),key:_e.id,onClick:ke=>ne(_e)},toDisplayString(_e.name),11,_hoisted_18$d))),128))],512)],512),createBaseVNode("div",{class:normalizeClass(["tabs-second-more py_xs flex_shrink_0 text3 text_right cs_pointer",{invisible:!A.value}]),onClick:Q[2]||(Q[2]=_e=>V.value=!V.value)},[A.value?(openBlock(),createElementBlock("span",_hoisted_19$c,[_hoisted_20$b,createVNode(ce,{class:normalizeClass(["i_icon_more ts_all_fast rotate_90",{rotate_n90:V.value}])},null,8,["class"])])):createCommentVNode("",!0)],2)])])):createCommentVNode("",!0),_.value||l.value.length?(openBlock(),createElementBlock("div",_hoisted_21$b,[createBaseVNode("div",_hoisted_22$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.value,_e=>(openBlock(),createElementBlock("div",{key:_e.roomId,class:"col_3 col_sm_1_5 mb_xxl"},[createVNode($e,{info:_e,"disable-scale":!0,concise:""},null,8,["info"])]))),128)),_.value?(openBlock(),createBlock(_sfc_main$1Q,{key:0,"with-wrapper":!1,"item-num":20})):createCommentVNode("",!0)])])):createCommentVNode("",!0),!_.value&&!l.value.length&&!f.value?(openBlock(),createBlock(SearchNoData,{key:2})):createCommentVNode("",!0),!_.value&&!l.value.length&&f.value?(openBlock(),createBlock(SearchNetError,{key:3})):createCommentVNode("",!0)],2)],64))])]),_:1})}}}),_hoisted_1$1W={class:"select_favdir"},_hoisted_2$1O={class:"content-wrapper"},_hoisted_3$1E={class:"b_text text2 mt_sm text_center text_ellipsis_2l"},_hoisted_4$1g=createTextVNode(" \u89C6\u9891\uFF1A"),_hoisted_5$Y=["title"],_hoisted_6$P={class:"modal_select_dir text_left mt_md"},_hoisted_7$L={class:"b_text text3 ml_lg"},_hoisted_8$J={class:"mt_xl text_center"},_hoisted_9$C={class:"select_dir_add--btns p_center_y r_sm"},_hoisted_10$x=["onClick"],_hoisted_11$u=createTextVNode(" + \u521B\u5EFA\u6536\u85CF\u5939 "),_hoisted_12$q=createTextVNode(" \u4FDD\u5B58 "),_sfc_main$1t=defineComponent({__name:"SelectFavoriteFolder",emits:["favSuccess"],setup(a,{expose:o,emit:s}){const{userInfo:i}=storeToRefs(useUserInfoStore()),{isFavFolderChanged:l}=storeToRefs(useMineStore()),c=ref(),r=ref([]),u=ref(!1),d=ref(!1),_=ref([]),f=ref([]),m=ref(""),p=ref(!1),v=ref(!1),g=ref(null);let $=[],y=[];o({showFavDialog:V=>{c.value=V,r.value=[],d.value=!1,u.value=!0,p.value=!0,getFolderListAll(V.id,i.value.mid,V.type).then(A=>{r.value=A.list||[],r.value.forEach(x=>{x.isPrivate=b(x.attr,0),x.isSelected=!!x.fav_state}),$=r.value.filter(x=>x.isSelected).map(x=>x.id),u.value=!1}).catch(()=>{toastAsync({content:"\u83B7\u53D6\u6536\u85CF\u5939\u5931\u8D25"}),d.value=!0,u.value=!1})}});const C=debounce$1(()=>{y=r.value.filter(V=>V.isSelected).map(V=>V.id),_.value=y.filter(V=>!$.includes(V)),f.value=$.filter(V=>!y.includes(V))},200,!1),S=()=>{m.value="",v.value=!0,setTimeout(()=>{var V;(V=g.value.querySelector(".select_dir_add--ipt"))==null||V.focus()})},E=()=>{!m.value||(v.value=!1,postCreateFolder({title:m.value}).then(V=>{V.isPrivate=b(V.attr,0),V.isSelected=!0,r.value.push(V),C(),toastAsync({content:"\u6536\u85CF\u5939\u521B\u5EFA\u6210\u529F\uFF01"})}).catch(V=>{console.error(V),toastAsync({content:"\u521B\u5EFA\u6536\u85CF\u5939\u5931\u8D25\uFF01"})}))},k=()=>{p.value=!1;const V={rid:c.value.id,add_media_ids:_.value.join(","),del_media_ids:f.value.join(","),type:c.value.type||2};postSaveSelectDir(V).then(()=>{s("favSuccess"),l.value=!0,toastAsync({content:"\u8BBE\u7F6E\u6536\u85CF\u5939\u6210\u529F\uFF01"})}).catch(()=>{toastAsync({content:"\u8BBE\u7F6E\u6536\u85CF\u5939\u5931\u8D25\uFF01"})})};function b(V,A){const x=+V.toString(2);return parseInt(("000000"+x).substr(-7).split("").reverse().join("").charAt(A))}return watch(m,V=>{V.length>20&&nextTick(()=>m.value=V.substr(0,20))}),watch(p,V=>{V||(v.value=!1)}),(V,A)=>{const x=resolveComponent("v-checkbox"),T=resolveComponent("v-input"),I=resolveComponent("v-button"),R=resolveComponent("v-dialog");return openBlock(),createElementBlock("div",_hoisted_1$1W,[createVNode(R,{visible:p.value,"onUpdate:visible":A[2]||(A[2]=N=>p.value=N),width:380,"class-name":"i_dialog py_lg",title:"\u9009\u62E9\u6536\u85CF\u5939",center:!0,"is-show-default-footer":!1,onCancel:A[3]||(A[3]=N=>p.value=!1)},{default:withCtx(()=>{var N,w;return[createBaseVNode("div",_hoisted_2$1O,[createBaseVNode("p",_hoisted_3$1E,[_hoisted_4$1g,createBaseVNode("strong",{title:(N=c.value.info)==null?void 0:N.title},toDisplayString((w=c.value.info)==null?void 0:w.title),9,_hoisted_5$Y)]),createBaseVNode("div",_hoisted_6$P,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,D=>(openBlock(),createElementBlock("div",{class:"modal_select_dir--item",key:D.id},[createVNode(x,{theme:"pink",modelValue:D.isSelected,"onUpdate:modelValue":L=>D.isSelected=L,label:D.title,onChange:unref(C)},null,8,["modelValue","onUpdate:modelValue","label","onChange"]),createBaseVNode("p",_hoisted_7$L,toDisplayString(D.isPrivate?"\u79C1\u5BC6":"\u516C\u5F00")+"."+toDisplayString(D.media_count)+"\u4E2A\u5185\u5BB9",1)]))),128))]),createBaseVNode("div",_hoisted_8$J,[v.value?(openBlock(),createElementBlock("div",{key:0,ref_key:"newFolderInput",ref:g,class:"select_dir_add p_relative"},[createVNode(T,{class:"select_dir_add--ipt",modelValue:m.value,"onUpdate:modelValue":A[0]||(A[0]=D=>m.value=D),placeholder:"\u6700\u591A\u53EF\u8F93\u516520\u4E2A\u5B57"},null,8,["modelValue"]),createBaseVNode("div",_hoisted_9$C,[createBaseVNode("span",{class:"mr_xs",onClick:withModifiers(E,["stop"]),style:normalizeStyle(m.value?"":"opacity:.6;cursor:not-allowed;")}," + ",12,_hoisted_10$x),createBaseVNode("span",{onClick:A[1]||(A[1]=withModifiers(D=>v.value=!1,["stop"]))},"x")])],512)):(openBlock(),createBlock(I,{key:1,class:"text_left",block:"",onClick:withModifiers(S,["stop"])},{default:withCtx(()=>[_hoisted_11$u]),_:1},8,["onClick"])),createVNode(I,{class:"mt_sm",type:"pink",block:"",disabled:!_.value.length&&!f.value.length,onClick:k},{default:withCtx(()=>[_hoisted_12$q]),_:1},8,["disabled"])])])]}),_:1},8,["visible"])])}}});var HomeRecommends_vue_vue_type_style_index_0_lang="";const _hoisted_1$1V={class:"i_wrapper scroll-content"},_hoisted_2$1N={class:"p_relative invisible w_100"},_hoisted_3$1D={class:"app_home--video row gutter_md p_absolute w_100"},_hoisted_4$1f={key:0,class:"app_home--video row gutter_md"},_sfc_main$1s=defineComponent({__name:"HomeRecommends",setup(a){const{rowVideos:o}=useBreakPoint(),s=useRoute(),i=ref(!1),l=ref(!1),c=ref([]),r=ref(!0),u=ref(null),d=ref(1),_=computed(()=>d.value===1?30:o.value*3),f=computed(()=>{var E;return(E=v.value)!=null&&E.offsetHeight?Math.ceil(p.value.$el.offsetHeight/v.value.offsetHeight):0}),m=ref(0),p=ref(null),v=ref(null);let g=Date.now();const $={INIT:0,REFRESH:3,LOAD_MORE:4};useReportPv({spm_id:"main.home-page-recommend.0.0",pageName:"HomeRecomand"}),useScrollToTop(".home_recommends"),useRefresh("HomeRecommends",()=>{d.value=1,c.value=[],y($.REFRESH)}),useRoutePageFadeIn(".home_recommends");const y=debounce$1(E=>{i.value||(l.value=!1,i.value=!0,getHomeRecommands(d.value,_.value,"V1",E,f.value,o.value).then(k=>{const b=(k.item||[]).filter(V=>c.value.every(A=>A.bvid!==V.bvid)).map((V,A)=>transformRcmdToVideoInfo(V,A+c.value.length));b.length?(c.value=c.value.concat(b),d.value++,r.value=!0):r.value=!1,i.value=!1}).catch(k=>{console.error(k),l.value=!0,i.value=!1}))},500),B=()=>{!l.value&&r.value&&y($.LOAD_MORE)},C=E=>{const k=E+1,b=Math.ceil(k/o.value),V=k%o.value||o.value;return`main.home-page-recommend.tianma.${b}-${V}-${k}.0`},S=E=>{const k=E+1;return{location:k,line_videos:o.value,line_locaton:Math.ceil(k/o.value),column_location:k%o.value||o.value}};return watch([f,m],([E,k])=>{E&&k&&y($.INIT)}),onActivated(()=>{s.name==="HomeRecommends"&&(!c.value.length||Date.now()-g>12e4)&&(c.value=[],m.value++)}),onDeactivated(()=>{d.value=1,r.value=!0,g=Date.now(),c.value=c.value.slice(0,_.value)}),(E,k)=>{const b=resolveComponent("bili-video-card"),V=resolveComponent("Scroller"),A=resolveDirective("report");return openBlock(),createBlock(V,{ref_key:"scrollRef",ref:p,class:"home_recommends page_scroller pt_xxl u_select_none",onLoadMore:B},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1V,[createBaseVNode("div",_hoisted_2$1N,[createBaseVNode("div",_hoisted_3$1D,[createBaseVNode("div",{ref_key:"videoCardAnchorRef",ref:v,class:"app_home--video-item col_3 col_sm_1_5 pb_x40"},[createVNode(b,{"disable-frame":"","disable-scale":"",skeleton:!0})],512)])]),!unref(f)||i.value||c.value.length?(openBlock(),createElementBlock("div",_hoisted_4$1f,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,(x,T)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["app_home--video-item col_3 col_sm_1_5 mb_x40",{hide:unref(o)<5&&c.value.length%4&&T>=c.value.length-2}]),key:x.bvid},[withDirectives((openBlock(),createBlock(b,{key:`${x.bvid}-${T}`,info:x,rowVideos:unref(o),spmInfo:C(T),"img-lazy":"eager","is-rcmd":"","disable-frame":"","disable-scale":"",iid:"pc_app_rcmd"},null,8,["info","rowVideos","spmInfo"])),[[A,{spm_info:"main.home-page-recommend.tianma.card",msg:{aid:x.aid,cid:x.cid,...S(T)}},"both"]])],2))),128)),!unref(f)||i.value?(openBlock(),createBlock(_sfc_main$1Q,{key:0,"with-wrapper":!1,"item-num":20})):createCommentVNode("",!0)])):createCommentVNode("",!0),!i.value&&!c.value.length&&!l.value?(openBlock(),createBlock(SearchNoData,{key:1})):createCommentVNode("",!0),!i.value&&!c.value.length&&l.value?(openBlock(),createBlock(SearchNetError,{key:2})):createCommentVNode("",!0),createVNode(_sfc_main$1t,{ref_key:"selectFavFolder",ref:u},null,512)])]),_:1},512)}}});var HomeHots_vue_vue_type_style_index_0_lang="";const _hoisted_1$1U={class:"i_wrapper p_relative"},_hoisted_2$1M={class:"home_hots--tabs flex_start ps p_absolute"},_hoisted_3$1C={class:"home_hots--content h_100 w_100"},_sfc_main$1r=defineComponent({__name:"HomeHots",setup(a){const o=useRoute(),s=useRouter(),i=[{key:"1",label:"\u7EFC\u5408\u70ED\u95E8",route:"HomeHotsAll",meta:{loadmore:!0}},{key:"2",label:"\u6BCF\u5468\u5FC5\u770B",route:"HomeHotsSeries"},{key:"3",label:"\u5165\u7AD9\u5FC5\u5237",route:"HomeHotsPrecious",meta:{loadmore:!0}},{key:"4",label:"\u6392\u884C\u699C",route:"HomeHotsRanking"}],l=ref(i[0].key),c=computed(()=>i.find(_=>_.key===l.value));useReportPv({spm_id:SPM_PV.homeHot,pageName:"HomeHot"}),provide("pageSpmId",SPM_PV.homeHot);const{resetScroller:r}=useScrollToTop(".home_hots");useRoutePageFadeIn(".home_hots");const u=_=>{const f=i.find(m=>m.key===_);if(f){if(o.name===f.route)return;s.push({name:f.route})}},d=()=>{var _;(_=c.value.meta)!=null&&_.loadmore&&events.emit("loadmore",c.value.route)};return onActivated(async()=>{var m;o.path.startsWith("/page/home/hots")&&(r(),u(l.value)),await nextTick();const _=(m=o.query)==null?void 0:m.key,f=i.some(p=>p.key===_);_&&f&&(l.value=_)}),watch(l,_=>{u(_)}),(_,f)=>{const m=resolveComponent("v-button"),p=resolveComponent("router-view"),v=resolveComponent("Scroller");return openBlock(),createBlock(v,{class:"home_hots page_scroller pt_lg h_100 p_relative u_select_none",onLoadMore:d},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1U,[createBaseVNode("div",_hoisted_2$1M,[(openBlock(),createElementBlock(Fragment,null,renderList(i,g=>createVNode(m,{class:"mr_sm","active-pink":"",key:g.key,type:"tab",active:l.value===g.key,onClick:$=>l.value=g.key},{default:withCtx(()=>[createTextVNode(toDisplayString(g.label),1)]),_:2},1032,["active","onClick"])),64))]),createBaseVNode("div",_hoisted_3$1C,[createVNode(p,null,{default:withCtx(({Component:g})=>[(openBlock(),createBlock(KeepAlive,null,[(openBlock(),createBlock(resolveDynamicComponent(g)))],1024))]),_:1})])])]),_:1})}}}),_hoisted_1$1T={class:"home_hots_all pt_lg"},_hoisted_2$1L=createBaseVNode("div",{class:"home_hots--tabs--shim"},null,-1),_hoisted_3$1B={key:1,class:"row gutter_md"},_hoisted_4$1e={key:2,class:"flex_center text3 lh_md fs_5 pb_xl"},_sfc_main$1q=defineComponent({__name:"All",setup(a){const o=ref(1),{noMore:s,loading:i}=useLoadmore("HomeHotsAll",()=>{++o.value,c()}),l=reactive([]);async function c(){var r;if(!(i.value||s.value)){i.value=!0;try{const u=await getHomeHotsAll({pn:o.value});if(u.no_more){i.value=!1,s.value=!0;return}const d=((r=u.list)==null?void 0:r.map((_,f)=>transformPopularAllToVideoInfo(_,f)))||[];l.push(...d),i.value=!1}catch(u){i.value=!1,console.log(u)}}}return useRefresh("HomeHotsAll",()=>{o.value===1&&i.value||(l.splice(0,l.length),s.value=!1,o.value=1,c())}),onActivated(async()=>{l.length||await c()}),(r,u)=>{const d=resolveComponent("BiliVideoCard");return openBlock(),createElementBlock("div",_hoisted_1$1T,[_hoisted_2$1L,l.length?(openBlock(),createElementBlock("div",_hoisted_3$1B,[(openBlock(!0),createElementBlock(Fragment,null,renderList(l,_=>(openBlock(),createElementBlock("div",{class:"home_hots_all--video col_3 col_sm_1_5 mb_xxl",key:_.aid},[createVNode(d,{info:_,"is-rcmd":"","img-lazy":"eager","disable-frame":"","disable-scale":"",iid:"pc_app_hots_all"},null,8,["info"])]))),128))])):(openBlock(),createElementBlock(Fragment,{key:0},[unref(i)?(openBlock(),createBlock(_sfc_main$1Q,{key:0})):(openBlock(),createBlock(SearchNetError,{key:1}))],64)),unref(s)?(openBlock(),createElementBlock("div",_hoisted_4$1e,"\u5DF2\u7ECF\u5230\u5E95\u5566~")):createCommentVNode("",!0)])}}}),_hoisted_1$1S={width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1K=createBaseVNode("path",{d:"M6 11.6c2.811 0 5.101-2.29 5.101-5.1 0-2.812-2.289-5.1-5.1-5.1C3.189 1.4.9 3.687.9 6.5c0 2.81 2.288 5.1 5.1 5.1Zm0 .9c-3.315 0-6-2.685-6-6s2.685-6 6-6c3.316 0 6 2.685 6 6s-2.684 6-6 6Z",fill:"#9499A0"},null,-1),_hoisted_3$1A=createBaseVNode("path",{d:"M6 9.5a.6.6 0 1 1 0-1.201.6.6 0 0 1 0 1.2Zm.036-1.8h-.074a.563.563 0 0 1-.562-.564V4.06a.562.562 0 0 1 .562-.561h.074a.562.562 0 0 1 .564.561v3.076a.562.562 0 0 1-.563.563Z",fill:"#9499A0"},null,-1),_hoisted_4$1d=[_hoisted_2$1K,_hoisted_3$1A];function render$u(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$1S,_hoisted_4$1d)}var IconTips={render:render$u},SeriesVideoCard_vue_vue_type_style_index_0_lang="";const _hoisted_1$1R={class:"series_video_card"},_hoisted_2$1J={class:"series_video_card--view"},_hoisted_3$1z=["title"],_sfc_main$1p=defineComponent({__name:"SeriesVideoCard",props:{info:{type:Object,default:()=>({})},mediaList:{type:Object,default:null}},setup(a){const o=a,s=()=>{o.info.bvid&&openPlayerWindow({type:"ugc",bvid:o.info.bvid})};return(i,l)=>(openBlock(),createElementBlock("div",_hoisted_1$1R,[createBaseVNode("div",_hoisted_2$1J,[createVNode(unref(BiliVideoCard),{info:a.info.info,"is-rcmd":"","img-lazy":"eager","disable-frame":"","disable-scale":"",iid:"pc_app_hots_series"},null,8,["info"])]),a.info.rcmdReason?(openBlock(),createElementBlock("div",{key:0,class:"series_video_card--rcmd_reason text_ellipsis bd_radius_sm flex_row cs_pointer",onClick:s,title:a.info.rcmdReason},toDisplayString(a.info.rcmdReason),9,_hoisted_3$1z)):createCommentVNode("",!0)]))}});var Series_vue_vue_type_style_index_0_lang="",Series_vue_vue_type_style_index_1_scoped_true_lang="";const _withScopeId$h=a=>(pushScopeId("data-v-30457cac"),a=a(),popScopeId(),a),_hoisted_1$1Q={class:"home_hots_series"},_hoisted_2$1I={class:"home_hots--tabs--shim flex_end mb_lg"},_hoisted_3$1y={key:0,class:"home_hots_series--reminder"},_hoisted_4$1c={class:"dropdown_select--content"},_hoisted_5$X=["onClick"],_hoisted_6$O={class:"dropdown_select--option-title"},_hoisted_7$K={class:"dropdown_select--option-desc"},_hoisted_8$I=_withScopeId$h(()=>createBaseVNode("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M9.3315 5.69705C10.2228 6.359 10.2228 7.641 9.33151 8.30294L2.80945 13.1465C1.66772 13.9945 0 13.221 0 11.8436V2.1564C0 0.77899 1.66772 0.00554585 2.80945 0.853451L9.3315 5.69705Z",fill:"currentColor"})],-1)),_hoisted_9$B=_withScopeId$h(()=>createBaseVNode("span",null,"\u64AD\u653E\u5168\u90E8",-1)),_hoisted_10$w={class:"row gutter_md"},_hoisted_11$t=_withScopeId$h(()=>createBaseVNode("div",{class:"flex_center text3 lh_md fs_5 pb_xl"},"\u5230\u5E95\u4E86",-1)),_sfc_main$1o=defineComponent({__name:"Series",setup(a){const o=useNotificationStore(),{willPlaySeries:s}=storeToRefs(o),i=reactive({initing:!1,inited:!1,loading:!1,showContent:!1,seriesList:[],seriesIndex:0,allSeriesDataMap:{}}),l=computed(()=>{var m;return((m=i.seriesList)==null?void 0:m.map(p=>({title:p.subject,desc:p.name,value:p.number})))||[]}),c=computed(()=>{var m,p;return((p=(m=i.seriesList)==null?void 0:m[i.seriesIndex])==null?void 0:p.number)||0}),r=computed(()=>i.allSeriesDataMap[c.value]||null),u=async()=>{var m,p;if(!i.loading){i.loading=!0;try{const v=await getHotsSeriesData({number:c.value}),g=v.list.map(($,y)=>({bvid:$.bvid,rcmdReason:$.rcmd_reason,info:transformSeriesToVideoInfo($,y)}));i.allSeriesDataMap[c.value]={items:g,reminder:v.reminder,configLabel:((m=v.config)==null?void 0:m.label)||"",mediaId:((p=v.config)==null?void 0:p.media_id)||0}}catch(v){console.log(v)}i.loading=!1}};watch(c,()=>{c.value&&u()}),watch(r,()=>{s.value&&r.value&&(o.setWillPlaySeries(!1),f())});const d=async()=>{if(!i.initing){i.initing=!0;try{const m=await getHotsSeriesList();i.seriesList=m.list,i.initing=!1,i.inited=!0}catch{i.initing=!1}}},_=computed(()=>{var m;return{bizType:4,bizId:String((m=r.value)==null?void 0:m.mediaId),bizTitle:"\u6BCF\u5468\u5FC5\u770B"}}),f=()=>{openPlayerWindow({type:"ugc",fromSpmid:"main.home-page-hot.0.0.pv",mediaList:_.value})};return useRefresh("HomeHotsSeries",async()=>{await d(),i.inited&&(i.seriesIndex!==0?i.seriesIndex=0:await u())}),onActivated(async()=>{var m;if(s.value){i.seriesList=[],i.seriesIndex=0,await d();return}(m=i.seriesList)!=null&&m.length||await d()}),onDeactivated(()=>{o.setWillPlaySeries(!1)}),(m,p)=>{var y,B,C;const v=resolveComponent("WidgetArrow"),g=resolveComponent("v-button"),$=resolveComponent("VDropdown");return openBlock(),createElementBlock("div",_hoisted_1$1Q,[createBaseVNode("div",_hoisted_2$1I,[(y=unref(r))!=null&&y.reminder?(openBlock(),createElementBlock("div",_hoisted_3$1y,[createVNode(unref(IconTips)),createTextVNode(" "+toDisplayString((B=unref(r))==null?void 0:B.reminder),1)])):createCommentVNode("",!0),unref(l).length?(openBlock(),createBlock($,{key:1,trigger:"hover",placement:"bottom-end",onShow:p[0]||(p[0]=S=>i.showContent=!0),onHide:p[1]||(p[1]=S=>i.showContent=!1)},{content:withCtx(()=>[createBaseVNode("div",_hoisted_4$1c,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(l),(S,E)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["dropdown_select--option cs_pointer",{"is-active":E===i.seriesIndex}]),key:E,onClick:k=>i.seriesIndex=E},[createBaseVNode("div",_hoisted_6$O,toDisplayString(S.title),1),createBaseVNode("div",_hoisted_7$K,toDisplayString(S.desc),1)],10,_hoisted_5$X))),128))])]),default:withCtx(()=>[createVNode(g,{class:"dropdown_select--button p_relative fs_14 text_ellipsis"},{default:withCtx(()=>{var S;return[createTextVNode(toDisplayString(((S=unref(r))==null?void 0:S.configLabel)||"\u7B2C - \u671F(----\u66F4\u65B0)")+" ",1),createVNode(v,{class:normalizeClass(["dropdown_select--button--icon rotate_90 p_absolute",{rotate_deg:i.showContent}])},null,8,["class"])]}),_:1})]),_:1})):createCommentVNode("",!0),unref(r)?(openBlock(),createBlock(g,{key:2,class:"play-all",type:"pink",onClick:f},{default:withCtx(()=>[_hoisted_8$I,_hoisted_9$B]),_:1})):createCommentVNode("",!0)]),unref(r)?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_10$w,[(openBlock(!0),createElementBlock(Fragment,null,renderList((C=unref(r))==null?void 0:C.items,S=>(openBlock(),createElementBlock("div",{class:"home_hots_series--video col_3 col_sm_1_5 mb_xxl",key:S.bvid},[createVNode(_sfc_main$1p,{info:S,mediaList:unref(_)},null,8,["info","mediaList"])]))),128))]),_hoisted_11$t],64)):(openBlock(),createElementBlock(Fragment,{key:0},[i.loading||i.initing?(openBlock(),createBlock(_sfc_main$1Q,{key:0})):(openBlock(),createBlock(SearchNetError,{key:1}))],64))])}}});var HomeHotsSeries=_export_sfc(_sfc_main$1o,[["__scopeId","data-v-30457cac"]]),PreciousVideoCard_vue_vue_type_style_index_0_lang="";const _hoisted_1$1P={class:"precious_video_card"},_hoisted_2$1H={class:"precious_video_card--view"},_hoisted_3$1x=["title"],_sfc_main$1n=defineComponent({__name:"PreciousVideoCard",props:{info:{type:Object,default:()=>({})},mediaList:{type:Object,default:null}},setup(a){const o=a,s=()=>{o.info.bvid&&openPlayerWindow({type:"ugc",bvid:o.info.bvid})};return(i,l)=>(openBlock(),createElementBlock("div",_hoisted_1$1P,[createBaseVNode("div",_hoisted_2$1H,[createVNode(unref(BiliVideoCard),{info:a.info.info,"img-lazy":"eager","is-rcmd":"","disable-frame":"","disable-scale":"",iid:"pc_app_hots_precious"},null,8,["info"])]),createBaseVNode("div",{class:"precious_video_card--achievement bd_radius_sm flex_row cs_pointer text_ellipsis",onClick:s,title:a.info.achievement},toDisplayString(a.info.achievement),9,_hoisted_3$1x)]))}});var Precious_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$g=a=>(pushScopeId("data-v-346d825e"),a=a(),popScopeId(),a),_hoisted_1$1O={class:"home_hots_precious"},_hoisted_2$1G={class:"home_hots--tabs--shim flex_end mb_lg"},_hoisted_3$1w=_withScopeId$g(()=>createBaseVNode("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M9.3315 5.69705C10.2228 6.359 10.2228 7.641 9.33151 8.30294L2.80945 13.1465C1.66772 13.9945 0 13.221 0 11.8436V2.1564C0 0.77899 1.66772 0.00554585 2.80945 0.853451L9.3315 5.69705Z",fill:"currentColor"})],-1)),_hoisted_4$1b=_withScopeId$g(()=>createBaseVNode("span",null,"\u64AD\u653E\u5168\u90E8",-1)),_hoisted_5$W={class:"row gutter_md"},_hoisted_6$N=_withScopeId$g(()=>createBaseVNode("div",{class:"flex_center text3 lh_md fs_5 pb_xl"},"\u9646\u7EED\u66F4\u65B0\u4E2D\uFF0C\u656C\u8BF7\u671F\u5F85",-1)),_sfc_main$1m=defineComponent({__name:"Precious",setup(a){const o=ref(0),s=reactive([]),i=ref(!1),l=ref(0),c=ref("");async function r(){var _;if(!i.value){i.value=!0;try{const f=await getHotsPrecious();if(!((_=f.list)!=null&&_.length)){i.value=!1;return}l.value=f.media_id,c.value=f.title;const m=f.list.map((p,v)=>({info:transformSeriesToVideoInfo(p,v),bvid:p.bvid,achievement:p.achievement}));s.push(...m),i.value=!1}catch(f){console.log(f),i.value=!1}}}useRefresh("HomeHotsPrecious",()=>{o.value===1&&i.value||(s.splice(0,s.length),o.value=0,r())});const u=computed(()=>({bizType:4,bizId:String(l.value),bizTitle:c.value})),d=()=>{openPlayerWindow({type:"ugc",fromSpmid:"main.home-page-hot.0.0.pv",mediaList:u.value})};return onActivated(()=>{s.length||r()}),(_,f)=>{const m=resolveComponent("v-button");return openBlock(),createElementBlock("div",_hoisted_1$1O,[createBaseVNode("div",_hoisted_2$1G,[s.length?(openBlock(),createBlock(m,{key:0,class:"play-all",type:"pink",onClick:d},{default:withCtx(()=>[_hoisted_3$1w,_hoisted_4$1b]),_:1})):createCommentVNode("",!0)]),s.length?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_5$W,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s,p=>(openBlock(),createElementBlock("div",{class:"home_hots_preciousl--video col_3 col_sm_1_5 mb_xxl",key:p.bvid},[createVNode(_sfc_main$1n,{info:p,mediaList:unref(u)},null,8,["info","mediaList"])]))),128))]),_hoisted_6$N],64)):(openBlock(),createElementBlock(Fragment,{key:0},[i.value?(openBlock(),createBlock(_sfc_main$1Q,{key:0})):(openBlock(),createBlock(SearchNetError,{key:1}))],64))])}}});var HomeHotsPrecious=_export_sfc(_sfc_main$1m,[["__scopeId","data-v-346d825e"]]),RankingCard_vue_vue_type_style_index_0_lang="";const _hoisted_1$1N={class:"ranking_card p_relative"},_hoisted_2$1F={key:0,class:"ranking_card--badge order_1st"},_hoisted_3$1v={key:1,class:"ranking_card--badge order_2nd"},_hoisted_4$1a={key:2,class:"ranking_card--badge order_3rd"},_hoisted_5$V=["textContent"],_sfc_main$1l=defineComponent({__name:"RankingCard",props:{info:{type:Object,default:()=>({})}},setup(a){function o(s){openPlayerWindow({type:"ogv",seasonId:s.sid,fromSpmid:`${SPM_PV.homeHot}.pv`})}return(s,i)=>(openBlock(),createElementBlock("div",_hoisted_1$1N,[a.info.order===1?(openBlock(),createElementBlock("div",_hoisted_2$1F)):a.info.order===2?(openBlock(),createElementBlock("div",_hoisted_3$1v)):a.info.order===3?(openBlock(),createElementBlock("div",_hoisted_4$1a)):(openBlock(),createElementBlock("div",{key:3,class:"ranking_card--badge order_th",textContent:toDisplayString(a.info.order)},null,8,_hoisted_5$V)),a.info.type==="video"?(openBlock(),createBlock(unref(BiliVideoCard),{key:4,info:a.info.videoInfo,"is-rcmd":"","img-lazy":"eager","disable-frame":"","disable-scale":"",iid:"pc_app_hots_ranking"},null,8,["info"])):(openBlock(),createBlock(unref(BiliBangumiCard),{key:5,onClickBangumi:o,info:a.info.bangumiInfo,"img-lazy":"eager","disable-frame":"","disable-scale":""},null,8,["info"]))]))}});var Ranking_vue_vue_type_style_index_0_lang="";const _hoisted_1$1M={class:"home_hots_ranking"},_hoisted_2$1E={class:"home_hots--tabs--shim"},_hoisted_3$1u={class:"home_hots_ranking--tips"},_hoisted_4$19=createTextVNode(" \u6392\u884C\u699C\u6839\u636E\u7A3F\u4EF6\u5185\u5BB9\u8D28\u91CF\uFF0C\u8FD1\u671F\u7684\u6570\u636E\u7EFC\u5408\u5C55\u793A\uFF0C\u52A8\u6001\u66F4\u65B0 "),_hoisted_5$U={class:"home_hots_ranking--filter flex_row flex_wrap w_100"},_hoisted_6$M=["textContent","onClick"],_hoisted_7$J={key:1,class:"home_hots_ranking--content pt_lg row gutter_md"},_sfc_main$1k=defineComponent({__name:"Ranking",setup(a){const o=RANKING_FILTER_TYPE_LIST,s=reactive({activeTypeIndex:-1,list:[]}),i=ref(!1),l=async()=>{if(!i.value){s.list=[],i.value=!0;try{s.list=await getHotsRanking(o[s.activeTypeIndex]),i.value=!1}catch(r){console.log(r),i.value=!1}}},c=r=>{r===s.activeTypeIndex&&s.list.length||(s.activeTypeIndex=r,s.list=[],l())};return useRefresh("HomeHotsRanking",async()=>{s.activeTypeIndex!==0?c(0):l()}),onActivated(()=>{c(0)}),(r,u)=>(openBlock(),createElementBlock("div",_hoisted_1$1M,[createBaseVNode("div",_hoisted_2$1E,[createBaseVNode("div",_hoisted_3$1u,[createVNode(unref(IconTips)),_hoisted_4$19])]),createBaseVNode("div",_hoisted_5$U,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(o),(d,_)=>(openBlock(),createElementBlock("div",{key:d.slug,class:normalizeClass(["home_hots_ranking--filter--type text_center cs_pointer",{"is-active":s.activeTypeIndex===_}]),textContent:toDisplayString(d.name),onClick:f=>c(_)},null,10,_hoisted_6$M))),128))]),s.list.length?(openBlock(),createElementBlock("div",_hoisted_7$J,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.list,d=>(openBlock(),createElementBlock("div",{class:"home_hots_all--video col_3 col_sm_1_5 mb_xxl",key:d.aid},[createVNode(_sfc_main$1l,{info:d},null,8,["info"])]))),128))])):(openBlock(),createElementBlock(Fragment,{key:0},[i.value?(openBlock(),createBlock(_sfc_main$1Q,{key:0})):(openBlock(),createBlock(SearchNetError,{key:1}))],64))]))}}),_sfc_main$1j={};function _sfc_render$1(a,o){const s=resolveComponent("router-view");return openBlock(),createBlock(s,null,{default:withCtx(({Component:i})=>[(openBlock(),createBlock(KeepAlive,{exclude:["HomeBangumiMore"]},[(openBlock(),createBlock(resolveDynamicComponent(i)))],1024))]),_:1})}var HomeBangumi=_export_sfc(_sfc_main$1j,[["render",_sfc_render$1]]);const GLOBAL_OPTIONS={},GLOBAL_OPTIONS_PROVIDE_KEY=Symbol("GLOBAL_OPTIONS_PROVIDE_KEY"),getGlobalOptions=()=>GLOBAL_OPTIONS;defineComponent({name:"RequestConfig",props:{config:{type:Object,required:!0}},setup(a,{slots:o}){const{config:s}=a;return provide(GLOBAL_OPTIONS_PROVIDE_KEY,s),()=>{var i;return(i=o.default)===null||i===void 0?void 0:i.call(o)}}});const objectToString=Object.prototype.toString,toTypeString=a=>objectToString.call(a),isString=a=>toTypeString(a)==="[object String]",isPlainObject=a=>toTypeString(a)==="[object Object]",isObject=a=>a!==null&&typeof a=="object",isPromise=a=>isObject(a)&&isFunction(a.then)&&isFunction(a.catch),isFunction=a=>a instanceof Function,isNil=a=>a==null,isServer=typeof window=="undefined",isDocumentVisibility=()=>{var a,o;return!isServer&&((a=window)===null||a===void 0||(o=a.document)===null||o===void 0?void 0:o.visibilityState)==="visible"},isOnline=()=>{var a,o,s;return(a=!isServer&&((o=window)===null||o===void 0||(s=o.navigator)===null||s===void 0?void 0:s.onLine))!==null&&a!==void 0?a:!0},unRefObject=a=>{const o={};return Object.keys(a).forEach(s=>{o[s]=unref(a[s])}),o},resolvedPromise=Promise.resolve(null),requestProxy=async(...a)=>{const o=await fetch(...a);if(o.ok)return o.json();throw new Error(o.statusText)},get=(a,o,s=void 0)=>{const i=o.replace(/\[(\d+)\]/g,".$1").split(".");let l=a;for(const c of i)if(l=Object(l)[c],l===void 0)return s;return l};function omit(a,o){const s=Object.assign({},a);for(const i of o)delete s[i];return s}const warning=(a,o=!1)=>{const s=`Warning: [vue-request] ${a}`;if(o)return new Error(s);console.error(s)},limitTrigger=(a,o)=>{let s=!1;return(...i)=>{s||(s=!0,a(...i),setTimeout(()=>{s=!1},o))}};var _window;const FOCUS_LISTENER=new Set,VISIBLE_LISTENER=new Set,RECONNECT_LISTENER=new Set,subscriber=(a,o)=>{let s;switch(a){case"FOCUS_LISTENER":s=FOCUS_LISTENER;break;case"RECONNECT_LISTENER":s=RECONNECT_LISTENER;break;case"VISIBLE_LISTENER":s=VISIBLE_LISTENER;break}if(!s.has(o))return s.add(o),()=>{s.delete(o)}},observer=a=>{a.forEach(o=>{o()})};!isServer&&(_window=window)!==null&&_window!==void 0&&_window.addEventListener&&(window.addEventListener("visibilitychange",()=>{isDocumentVisibility()&&observer(VISIBLE_LISTENER)},!1),window.addEventListener("focus",()=>observer(FOCUS_LISTENER),!1),window.addEventListener("online",()=>observer(RECONNECT_LISTENER),!1));function debounce(a,o,s){let i,l,c,r,u,d,_=0,f=!1,m=!1,p=!0;const v=!o&&o!==0&&typeof window.requestAnimationFrame=="function";if(typeof a!="function")throw new TypeError("Expected a function");o=+o||0,isObject(s)&&(f=!!s.leading,m="maxWait"in s,c=m?Math.max(+s.maxWait||0,o):c,p="trailing"in s?!!s.trailing:p);function g(T){const I=i,R=l;return i=l=void 0,_=T,r=a.apply(R,I),r}function $(T,I){return v?(window.cancelAnimationFrame(u),window.requestAnimationFrame(T)):setTimeout(T,I)}function y(T){if(v)return window.cancelAnimationFrame(T);clearTimeout(T)}function B(T){return _=T,u=$(E,o),f?g(T):r}function C(T){const I=T-d,R=T-_,N=o-I;return m?Math.min(N,c-R):N}function S(T){const I=T-d,R=T-_;return d===void 0||I>=o||I<0||m&&R>=c}function E(){const T=Date.now();if(S(T))return k(T);u=$(E,C(T))}function k(T){return u=void 0,p&&i?g(T):(i=l=void 0,r)}function b(){u!==void 0&&y(u),_=0,i=d=l=u=void 0}function V(){return u===void 0?r:k(Date.now())}function A(){return u!==void 0}function x(...T){const I=Date.now(),R=S(I);if(i=T,l=this,d=I,R){if(u===void 0)return B(d);if(m)return u=$(E,o),g(d)}return u===void 0&&(u=$(E,o)),r}return x.cancel=b,x.flush=V,x.pending=A,x}function throttle$1(a,o,s){let i=!0,l=!0;if(typeof a!="function")throw new TypeError("Expected a function");return isObject(s)&&(i="leading"in s?!!s.leading:i,l="trailing"in s?!!s.trailing:l),debounce(a,o,{leading:i,trailing:l,maxWait:o})}const setStateBind=(a,o)=>s=>{Object.keys(s).forEach(i=>{a[i].value=s[i]}),o.forEach(i=>i(a))},createQuery=(a,o,s)=>{var i,l,c;const{initialAutoRunFlag:r,initialData:u,loadingDelay:d,pollingInterval:_,debounceInterval:f,debounceOptions:m,throttleInterval:p,throttleOptions:v,pollingWhenHidden:g,pollingWhenOffline:$,errorRetryCount:y,errorRetryInterval:B,stopPollingWhenHiddenOrOffline:C,refreshOnWindowFocus:S,refocusTimespan:E,updateCache:k,formatResult:b,onSuccess:V,onError:A,onBefore:x,onAfter:T}=o,I=ref(0),R=ref((i=s==null?void 0:s.loading)!==null&&i!==void 0?i:!1),N=ref((l=s==null?void 0:s.data)!==null&&l!==void 0?l:u),w=ref(s==null?void 0:s.error),D=ref((c=s==null?void 0:s.params)!==null&&c!==void 0?c:[]),L=setStateBind({loading:R,data:N,error:w,params:D},[Ee=>k(Ee)]),P=()=>{I.value=0},j=ref(0),O=ref(),F=ref(),U=ref(),W=()=>{O.value&&O.value(),U.value&&U.value(),F.value&&F.value()},ne=()=>{let Ee;return d&&(Ee=setTimeout(L,d,{loading:!0})),()=>Ee&&clearTimeout(Ee)},H=Ee=>{if(w.value&&y!==0)return;let Ve;if(!isNil(_)&&_>=0)if((g||isDocumentVisibility())&&($||isOnline()))Ve=setTimeout(Ee,_);else{C.value=!0;return}return()=>Ve&&clearTimeout(Ve)},M=computed(()=>{if(B)return B;const Ee=1e3,Ve=1,ue=9,Oe=Math.floor(Math.random()*2**Math.min(I.value,ue)+Ve);return Ee*Oe}),ee=Ee=>{let Ve;const ue=y===-1,Oe=I.value<y;return w.value&&(ue||Oe)&&(ue||(I.value+=1),Ve=setTimeout(Ee,M.value)),()=>Ve&&clearTimeout(Ve)},G=(...Ee)=>{L({loading:!d,params:Ee}),U.value=ne(),j.value+=1;const Ve=j.value;return x==null||x(Ee),a(...Ee).then(ue=>{if(Ve===j.value){const Oe=b?b(ue):ue;return L({data:Oe,loading:!1,error:void 0}),V&&V(Oe,Ee),P(),Oe}return resolvedPromise}).catch(ue=>(Ve===j.value&&(L({data:void 0,loading:!1,error:ue}),A&&A(ue,Ee),console.error(ue)),resolvedPromise)).finally(()=>{Ve===j.value&&(U.value(),F.value=ee(()=>G(...Ee)),O.value=H(()=>G(...Ee)),T==null||T(Ee))})},Q=!isNil(f)&&debounce(G,f,m),te=!isNil(p)&&throttle$1(G,p,v),ce=(...Ee)=>(W(),!r.value&&Q?(Q(...Ee),resolvedPromise):te?(te(...Ee),resolvedPromise):(P(),G(...Ee))),$e=()=>{j.value+=1,L({loading:!1}),Q&&Q.cancel(),te&&te.cancel(),W()},we=()=>ce(...D.value),_e=Ee=>{const Ve=isFunction(Ee)?Ee(N.value):Ee;L({data:Ve})},ke=[],oe=Ee=>{Ee&&ke.push(Ee)},ie=()=>{C.value&&(g||isDocumentVisibility())&&($||isOnline())&&(we(),C.value=!1)};g||oe(subscriber("VISIBLE_LISTENER",ie)),$||oe(subscriber("RECONNECT_LISTENER",ie));const ye=limitTrigger(we,E);return S&&(oe(subscriber("VISIBLE_LISTENER",ye)),oe(subscriber("FOCUS_LISTENER",ye))),{loading:R,data:N,error:w,params:D,run:ce,cancel:$e,refresh:we,mutate:_e,unmount:()=>{ke.forEach(Ee=>Ee())}}},CACHE_MAP=new Map,getCache=a=>{if(isNil(a))return;const o=CACHE_MAP.get(a);if(!!o)return{data:o.data,cacheTime:o.cacheTime}},setCache=(a,o,s)=>{const i=CACHE_MAP.get(a);i!=null&&i.timer&&clearTimeout(i.timer);const l=setTimeout(()=>CACHE_MAP.delete(a),s);CACHE_MAP.set(a,{data:o,timer:l,cacheTime:new Date().getTime()})},QUERY_DEFAULT_KEY="__QUERY_DEFAULT_KEY__";function useAsyncQuery(a,o){const s=inject(GLOBAL_OPTIONS_PROVIDE_KEY,{}),{cacheKey:i,defaultParams:l=[],manual:c=!1,ready:r=ref(!0),refreshDeps:u=[],loadingDelay:d=0,pollingWhenHidden:_=!1,pollingWhenOffline:f=!1,refreshOnWindowFocus:m=!1,refocusTimespan:p=5e3,cacheTime:v=6e5,staleTime:g=0,errorRetryCount:$=0,errorRetryInterval:y=0,queryKey:B,...C}={...getGlobalOptions(),...s,...o},S=ref(!1),E=ref(!1),b={initialAutoRunFlag:E,loadingDelay:d,pollingWhenHidden:_,pollingWhenOffline:f,stopPollingWhenHiddenOrOffline:S,cacheKey:i,errorRetryCount:$,errorRetryInterval:y,refreshOnWindowFocus:m,refocusTimespan:p,updateCache:M=>{var ee,G;if(!i)return;const Q=(ee=getCache(i))===null||ee===void 0?void 0:ee.data,te=Q==null?void 0:Q.queries,ce=unRefObject(M),$e=(G=B==null?void 0:B(...M.params.value))!==null&&G!==void 0?G:QUERY_DEFAULT_KEY;setCache(i,{queries:{...te,[$e]:{...te==null?void 0:te[$e],...ce}},latestQueriesKey:$e},v)},...omit(C,["pagination","listKey"])},V=ref(!1),A=ref(),x=ref(),T=ref(),I=reactive({[QUERY_DEFAULT_KEY]:reactive(createQuery(a,b))}),R=ref(QUERY_DEFAULT_KEY),N=computed(()=>{var M;return(M=I[R.value])!==null&&M!==void 0?M:{}});if(watch(N,M=>{V.value=M.loading,A.value=M.data,x.value=M.error,T.value=M.params},{immediate:!0,deep:!0}),i){var w;const M=getCache(i);M!=null&&(w=M.data)!==null&&w!==void 0&&w.queries&&(Object.keys(M.data.queries).forEach(ee=>{const G=M.data.queries[ee];I[ee]=reactive(createQuery(a,b,{loading:G.loading,params:G.params,data:G.data,error:G.error}))}),M.data.latestQueriesKey&&(R.value=M.data.latestQueriesKey))}const D=ref(),L=ref(!1),P=(...M)=>{var ee;if(!r.value&&!L.value)return D.value=M,resolvedPromise;const G=(ee=B==null?void 0:B(...M))!==null&&ee!==void 0?ee:QUERY_DEFAULT_KEY;return I[G]||(I[G]=reactive(createQuery(a,b))),R.value=G,N.value.run(...M)},j=()=>{O(),R.value=QUERY_DEFAULT_KEY,I[QUERY_DEFAULT_KEY]=reactive(createQuery(a,b))},O=()=>{Object.keys(I).forEach(M=>{I[M].cancel(),I[M].unmount(),delete I[M]})},F=()=>N.value.cancel(),U=()=>N.value.refresh(),W=M=>N.value.mutate(M);if(!c){var ne;E.value=!0;const M=getCache(i),ee=(ne=M==null?void 0:M.data.queries)!==null&&ne!==void 0?ne:{},G=M&&(g===-1||M.cacheTime+g>new Date().getTime()),Q=Object.keys(ee).length>0;G||(Q?Object.keys(I).forEach(te=>{var ce;(ce=I[te])===null||ce===void 0||ce.refresh()}):P(...l)),E.value=!1}const H=ref();return H.value=watch(r,M=>{L.value=!0,M&&D.value&&(P(...D.value),H.value())},{flush:"sync"}),u.length&&watch(u,()=>{!c&&N.value.refresh()}),onUnmounted(()=>{O()}),{loading:V,data:A,error:x,params:T,cancel:F,refresh:U,mutate:W,run:P,reset:j,queries:I}}const generateService=a=>(...o)=>{if(isFunction(a))return generateService(a(...o))();if(isPromise(a))return a;if(isPlainObject(a)){const{url:s,...i}=a;return requestProxy(s,i)}else{if(isString(a))return requestProxy(a);throw warning("Unknown service type",!0)}};function useLoadMore(a,o){var s;isFunction(a)||warning("useLoadMore only support function service");const i=generateService(a),l=inject(GLOBAL_OPTIONS_PROVIDE_KEY,{}),{queryKey:c,isNoMore:r,listKey:u="list",...d}=Object.assign({listKey:(s=l.listKey)!==null&&s!==void 0?s:getGlobalOptions().listKey},o!=null?o:{});c&&warning("useLoadMore does not support concurrent request");const _=ref(!1),f=ref(!1),m=ref(!1),p=0,v=ref(p),{data:g,params:$,queries:y,run:B,reset:C,cancel:S,...E}=useAsyncQuery(i,{...d,onSuccess:(...N)=>{var w;f.value=!1,v.value++,d==null||(w=d.onSuccess)===null||w===void 0||w.call(d,...N)},onError:(...N)=>{var w;f.value=!1,d==null||(w=d.onError)===null||w===void 0||w.call(d,...N)},queryKey:()=>String(v.value)}),k=ref(g.value);watchEffect(()=>{g.value!==void 0&&(k.value=g.value)});const b=computed(()=>r&&isFunction(r)?r(k.value):!1),V=computed(()=>{let N=[];return Object.values(y).forEach(w=>{const D=get(w.data,u);D&&Array.isArray(D)&&(N=N.concat(D))}),N}),A=()=>{if(b.value)return;f.value=!0;const[,...N]=$.value,w=[{dataList:V.value,data:k.value},...N];B(...w)},x=()=>{Object.keys(y).forEach(N=>{N!==p.toString()&&(y[N].cancel(),y[N].unmount(),delete y[N])})};return{data:k,dataList:V,params:$,noMore:b,loadingMore:f,refreshing:_,reloading:m,run:B,reload:async()=>{m.value=!0,C(),v.value=p,k.value=void 0;const[,...N]=$.value,w=[void 0,...N];await B(...w),m.value=!1},loadMore:A,reset:C,refresh:async()=>{_.value=!0;const N=v.value-1,w=N<p?p:N;k.value=y[w].data,v.value=p;const[,...D]=$.value,L=[void 0,...D];await B(...L),x(),_.value=!1},cancel:()=>{S(),f.value=!1,_.value=!1},...omit(E,["refresh","mutate"])}}function useRequest(a,o){const s=generateService(a),{reset:i,run:l,...c}=useAsyncQuery(s,o!=null?o:{}),r=ref(!1);return{reload:async()=>{const{defaultParams:d=[],manual:_}=o;i(),_||(r.value=!0,await l(...d),r.value=!1)},run:l,reloading:r,...c}}var OgvBangumiSkeleton_vue_vue_type_style_index_0_lang="";const _hoisted_1$1L={class:"ogv_bangumi_skeleton row gutter_md"},_sfc_main$1i=defineComponent({__name:"OgvBangumiSkeleton",props:{itemNum:{type:Number,default:36},showLoadingAnimation:{type:Boolean,default:!1}},setup(a){const o=a,s=useAppInfoStore(),i=ref(new Array(o.itemNum).fill({}).map(l=>transformRegionToVideoInfo(l)));return(l,c)=>(openBlock(),createElementBlock("div",_hoisted_1$1L,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,(r,u)=>(openBlock(),createElementBlock("div",{key:u,class:normalizeClass([{to_hide_xs:u>23,to_hide_md:u>29,to_hide_xl:u>35},"video-list-item col_2 col_sm_1_7 mb_x40"])},[createVNode(unref(BiliBangumiCard),{"disable-frame":"","disable-scale":"",info:r,showLoadingAnimation:a.showLoadingAnimation,skeleton:!0,appTheme:unref(s).appTheme,mode:"vertical"},null,8,["info","showLoadingAnimation","appTheme"])],2))),128))]))}});var Tab_vue_vue_type_style_index_0_scoped_true_lang$1="";const _hoisted_1$1K={class:"i_wrapper mb_44"},_hoisted_2$1D={class:"flex_between mb_9 fs_3 text1 fw_bold fw_400 h_34"},_hoisted_3$1t={class:"text2 mr_xs"},_hoisted_4$18={class:"row gutter_md"},_hoisted_5$T={key:0},_hoisted_6$L={class:"flex_between mb_9 fs_3 text1 fw_bold fw_400 h_34"},_hoisted_7$I={class:"row gutter_md"},_hoisted_8$H={key:0,class:"flex_center text3 lh_md fs_5"},_sfc_main$1h=defineComponent({__name:"Tab",setup(a){const o=useRouter(),s=useRoute(),i=useAppInfoStore(),l=s.meta.isBangumi==null?!1:s.meta.isBangumi,c=s.meta.isPgc==null?!1:s.meta.isPgc,r=l?"main.home-page-fanju.0.0":"main.home-page-movie.0.0",u=ref(!1),d=ref(!1),_=ref(null);useReportPv({spm_id:r,pageName:"HomeBangumi"}),useScrollToTop(l?".bangumi_tab":".pgc_tab"),useRoutePageFadeIn(l?".bangumi_tab":".pgc_tab");const{data:f,run:m,loading:p}=useRequest(async()=>{d.value=!1;try{const w=await getTabResult({is_refresh:0},l);return{...w,modules:w.modules.filter(D=>D.items.length)}}catch{return d.value=!0,{modules:[],has_next:!1,next_cursor:"0"}}},{initialData:{modules:[],has_next:!0,next_cursor:"0"}}),v=computed(()=>{var w;return(w=f.value.modules.find(D=>D.style===OgvCardType.double_feed))!=null?w:{}}),g=computed(()=>v.value.title),$=computed(()=>{var w;return f?{...f.value,modules:(w=f.value.modules)==null?void 0:w.filter(D=>D.style!==OgvCardType.double_feed)}:[]}),y=w=>{var D;return((D=w[0])==null?void 0:D.mode)==="horizontal"?w.slice(0,5):w.slice(0,7)},{data:B,dataList:C,loadMore:S,loadingMore:E,reload:k,reset:b}=useLoadMore(async w=>{var P,j,O;const D=!(w!=null&&w.dataList.length),L=f.value.next_cursor;try{const F=await getTabResult({cursor:D?L:Number((P=w==null?void 0:w.data)==null?void 0:P.next_cursor),is_refresh:1},l);return{list:(O=((j=F.modules.find(W=>W.style===OgvCardType.double_feed))!=null?j:{}).items)!=null?O:[],has_next:F.has_next,next_cursor:F.next_cursor}}catch{return{list:[],has_next:!1,next_cursor:"0"}}},{manual:!0,isNoMore:w=>w?u.value:!1});watch(B,w=>{u.value=!w.has_next});const V=computed(()=>{var w,D;return[...(w=v.value.items)!=null?w:[],...(D=C.value)!=null?D:[],...E.value?Array.from(new Array(10),()=>({skeleton:!0,mode:"horizontal"})):[]]}),A=computed(()=>p.value||!f.value.modules.length&&!d.value),x=w=>{var P,j;const D=w.replace(/\?.*$/,""),L=((j=(P=w.match(/\?(.*)/))==null?void 0:P[1])!=null?j:"").split("&").reduce((O,F)=>{const[U,W]=F.split("=");return O[U]=W,O},{});L.allowGoBack="1",o.push({path:D,query:L})},T=()=>{A.value||E.value||S()},I=w=>{!w.seasonId||openPlayerWindow({type:"ogv",seasonId:w.seasonId,fromSpmid:`${r}.pv`})},R=l?"HomeBangumiTab":"HomePgcTab",N=()=>{m(),u.value=!1,b()};return useRefresh(R,()=>N()),onActivated(()=>{var w;s.name===R&&!((w=f.value.modules)!=null&&w.length)&&N()}),onDeactivated(()=>{u.value=!1,b()}),(w,D)=>{const L=resolveComponent("WidgetArrow"),P=resolveComponent("v-button"),j=resolveComponent("Scroller");return openBlock(),createBlock(j,{ref_key:"bangumiRef",ref:_,class:normalizeClass(["page_scroller pt_lg h_100 p_relative u_select_none",{bangumi_tab:unref(l),pgc_tab:unref(c)}]),onLoadMore:T},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1K,[unref(A)?(openBlock(),createBlock(_sfc_main$1i,{key:0,showLoadingAnimation:""})):d.value?(openBlock(),createBlock(SearchNetError,{key:1})):(openBlock(),createElementBlock(Fragment,{key:2},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref($).modules,O=>(openBlock(),createElementBlock("div",{class:"mb_sm",key:O.module_id},[createBaseVNode("div",_hoisted_2$1D,[createBaseVNode("span",null,toDisplayString(O.title),1),(openBlock(!0),createElementBlock(Fragment,null,renderList(O.headers,F=>(openBlock(),createElementBlock("div",{key:F.title+F.url,class:"flex_start"},[createVNode(P,{class:"i_button_more","active-shrink":"",onClick:U=>x(F.url)},{default:withCtx(()=>[createBaseVNode("span",_hoisted_3$1t,toDisplayString(F.title),1),createVNode(L,{class:"i_icon_more text2"})]),_:2},1032,["onClick"])]))),128))]),createBaseVNode("div",_hoisted_4$18,[(openBlock(!0),createElementBlock(Fragment,null,renderList(y(O.items),(F,U)=>(openBlock(),createElementBlock("div",{key:F.epid,class:normalizeClass(["mb_xxl",{col_3:F.mode==="horizontal",col_sm_1_5:F.mode==="horizontal",col_2:F.mode==="vertical",col_sm_1_7:F.mode==="vertical",to_hide_sm:F.mode==="horizontal"?U>3:U>5,to_hide_xl:F.mode==="horizontal"?U>4:U>6}])},[createVNode(unref(BiliBangumiCard),{onClickBangumi:I,info:F,mode:F.mode,appTheme:unref(i).appTheme,rootRef:_.value,"disable-inline-player":"","disable-hover":""},null,8,["info","mode","appTheme","rootRef"])],2))),128))])]))),128)),unref(V).length?(openBlock(),createElementBlock("div",_hoisted_5$T,[createBaseVNode("div",_hoisted_6$L,[createBaseVNode("span",null,toDisplayString(unref(g)),1)]),createBaseVNode("div",_hoisted_7$I,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(V),O=>(openBlock(),createElementBlock("div",{key:O.cover,class:normalizeClass(["mb_xxl",{col_3:O.mode==="horizontal",col_sm_1_5:O.mode==="horizontal",col_2:O.mode==="vertical",col_sm_1_7:O.mode==="vertical"}])},[createVNode(unref(BiliBangumiCard),{onClickBangumi:I,info:O,mode:O.mode,skeleton:O.skeleton,appTheme:unref(i).appTheme,rootRef:_.value,"disable-inline-player":"","disable-hover":"",showLoadingAnimation:""},null,8,["info","mode","skeleton","appTheme","rootRef"])],2))),128))]),u.value?(openBlock(),createElementBlock("div",_hoisted_8$H,"\u5DF2\u7ECF\u5230\u5E95\u5566~")):createCommentVNode("",!0)])):createCommentVNode("",!0)],64))])]),_:1},8,["class"])}}});var HomeBangumiTab=_export_sfc(_sfc_main$1h,[["__scopeId","data-v-c4197bec"]]),_imports_0="./assets/empty.4ce332fe.png",More_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$f=a=>(pushScopeId("data-v-b45207d0"),a=a(),popScopeId(),a),_hoisted_1$1J={class:"i_wrapper mb_44"},_hoisted_2$1C={class:"mt_lg mb_xl mb_sm"},_hoisted_3$1s={key:0,class:"mb_sm"},_hoisted_4$17={class:"flex_between mb_sm"},_hoisted_5$S=_withScopeId$f(()=>createBaseVNode("span",{class:"text2 mr_xs"},"\u66F4\u591A\u7B5B\u9009",-1)),_hoisted_6$K={key:0,class:"row gutter_md"},_hoisted_7$H={key:1,class:"flex_center text3 lh_md fs_5"},_hoisted_8$G={key:2,class:"search-nodata-container p_relative"},_hoisted_9$A=_withScopeId$f(()=>createBaseVNode("img",{class:"nodata-img p_center",src:_imports_0,alt:""},null,-1)),_hoisted_10$v=[_hoisted_9$A],__default__={name:"HomeBangumiMore"},_sfc_main$1g=defineComponent({...__default__,setup(a){const s="main.index.0.0",i=useRoute(),l=useRouter(),c=useAppInfoStore(),r=i.meta.isBangumi==null?!1:i.meta.isBangumi,u=i.meta.isPgc==null?!1:i.meta.isPgc,d=ref(null),_=ref([]),f=ref({filter:[],order:{field:"",name:"",values:[],choose:""}}),m=ref(null),p=computed(()=>r?[{name:"\u8FFD\u756A",value:"1"},{name:"\u56FD\u521B",value:"4"}]:[{name:"\u5168\u90E8",value:"102"},{name:"\u7535\u5F71",value:"2"},{name:"\u7535\u89C6\u5267",value:"5"},{name:"\u7EAA\u5F55\u7247",value:"3"},{name:"\u7EFC\u827A",value:"7"}]),v=ref(i.query.index_type||p.value[0].value),g=computed(()=>{var H,M,ee;return(ee=(M=(H=f.value)==null?void 0:H.filter)==null?void 0:M.slice(0,4))!=null?ee:[]}),$=computed(()=>{var H,M,ee;return(ee=(M=(H=f.value)==null?void 0:H.filter)==null?void 0:M.slice(4))!=null?ee:[]}),y=computed(()=>f.value.filter.reduce((H,M)=>(H[M.field]=M.choose,H),{})),B=computed(()=>{var M;return{...{...y.value,type:PC_APP,order:f.value.order.choose,index_type:v.value},...(M=i.query)!=null?M:{}}}),{data:C,loading:S}=useRequest(()=>Promise.all(p.value.map(H=>getCondition({index_type:H.value}))),{initialData:[],onSuccess(H){_.value=H,f.value=H.find(M=>M.index_type===v.value),f.value.order.choose=i.query.order||f.value.order.values[0].field,f.value.filter.forEach(M=>{M.choose=i.query[M.field]||M.values[0].keyword})}}),{dataList:E,loadMore:k,noMore:b,loading:V,reload:A,data:x,loadingMore:T}=useLoadMore(async()=>{try{return getIndexResult(new URLSearchParams(B.value))}catch{return{list:[],has_next:0,num:0,size:25,total:0}}},{ready:computed(()=>{var H;return(H=C.value)==null?void 0:H.length}),isNoMore(H){return H?!H.has_next&&!H.list.length:!0}}),I=computed(()=>[...E.value,...T.value?Array.from(new Array(10),()=>({skeleton:!0,mode:"vertical"})):[]]),R=computed(()=>{var H;return!V.value&&!((H=x.value)!=null&&H.list.length)&&!E.value.length}),N=computed(()=>R.value?!1:b.value),w=computed(()=>V.value&&!E.value.length),D=(H,M=!1)=>l.replace({name:i.name,query:M?H:{...i.query,...H}}),L=H=>{H.forEach(M=>{M.order.choose=M.order.values[0].field,M.filter.forEach(ee=>{ee.choose=ee.values[0].keyword})})},P=async H=>{L(_.value),v.value=H.value,f.value=_.value.find(M=>M.index_type===v.value),await D({index_type:H.value,page:"1"},!0),A()},j=async H=>{f.value.order.choose=H.field,await D({order:H.field,page:"1"}),A()},O=async(H,M)=>{H.choose=M.keyword,await D({[H.field]:M.keyword,page:"1"}),A()},F=async()=>{if(b.value||V.value)return;const H=Number(B.value.page)||1;await D({page:String(H+1)}),k()},U=H=>{!H.seasonId||openPlayerWindow({type:"ogv",seasonId:H.seasonId,fromSpmid:`${s}.pv`})},{isShowMoreConditions:W,toggleSlideMoreConditions:ne}=useToggleMoreConditions(m);return useScrollToTop(r?".bangumi_more":".pgc_more"),useRefresh(r?"HomeBangumiMore":"HomePgcMore",async()=>{await D({page:"1"}),A()}),useReportPv({spm_id:s,isKeepAlive:!1,pageName:r?"BangumiMore":"PgcMore"}),onDeactivated(async()=>{await D({page:"1"}),A()}),(H,M)=>{const ee=resolveComponent("v-button"),G=resolveComponent("WidgetArrow"),Q=resolveComponent("Scroller");return openBlock(),createBlock(Q,{ref_key:"bangumiRef",ref:d,class:normalizeClass(["page_scroller u_select_none",{bangumi_more:unref(r),pgc_more:unref(u)}]),onLoadMore:F},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1J,[unref(S)?(openBlock(),createBlock(_sfc_main$1i,{key:0,showLoadingAnimation:""})):(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_2$1C,[unref(u)?(openBlock(),createElementBlock("div",_hoisted_3$1s,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(p),te=>(openBlock(),createBlock(ee,{key:te.value,"active-pink":"",type:"tab",class:"mr_sm",active:te.value===v.value,onClick:ce=>P(te)},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(te.name),1)]),_:2},1032,["active","onClick"]))),128))])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_4$17,[createBaseVNode("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(f.value.order.values,te=>(openBlock(),createBlock(ee,{key:te.field,"active-pink":"",type:"tab",class:"mr_sm",active:te.field===f.value.order.choose,onClick:ce=>j(te)},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(te.name),1)]),_:2},1032,["active","onClick"]))),128))]),unref(r)&&unref($).length?(openBlock(),createBlock(ee,{key:0,class:"i_button_more","active-shrink":"",onClick:unref(ne)},{default:withCtx(()=>[_hoisted_5$S,createVNode(G,{class:normalizeClass(["i_icon_more ts_all_fast rotate_90 text2",{rotate_n90:unref(W)}])},null,8,["class"])]),_:1},8,["onClick"])):createCommentVNode("",!0)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(g),te=>(openBlock(),createElementBlock("div",{key:te.field,class:"mb_sm"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(te.values,ce=>(openBlock(),createBlock(ee,{key:ce.keyword,"active-pink":"",type:"tab",class:"mr_sm",active:ce.keyword===te.choose,onClick:$e=>O(te,ce)},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(ce.name),1)]),_:2},1032,["active","onClick"]))),128))]))),128)),createBaseVNode("div",{ref_key:"moreConditions",ref:m,class:"hide ov_hidden"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref($),te=>(openBlock(),createElementBlock("div",{key:te.field},[(openBlock(!0),createElementBlock(Fragment,null,renderList(te.values,ce=>(openBlock(),createBlock(ee,{key:ce.keyword,"active-pink":"",type:"tab",class:"mb_sm mr_sm",active:ce.keyword===te.choose,onClick:$e=>O(te,ce)},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(ce.name),1)]),_:2},1032,["active","onClick"]))),128))]))),128))],512)]),unref(w)?(openBlock(),createBlock(_sfc_main$1i,{key:0,showLoadingAnimation:""})):(openBlock(),createElementBlock(Fragment,{key:1},[unref(E).length?(openBlock(),createElementBlock("div",_hoisted_6$K,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(I),te=>(openBlock(),createElementBlock("div",{key:te.cover,class:normalizeClass(["mb_xxl",{col_3:te.mode==="horizontal",col_xs_1_5:te.mode==="horizontal",col_2:te.mode==="vertical",col_sm_1_7:te.mode==="vertical"}])},[createVNode(unref(BiliBangumiCard),{onClickBangumi:U,mode:te.mode,skeleton:te.skeleton,info:te,appTheme:unref(c).appTheme,rootRef:d.value,"disable-inline-player":"","disable-hover":"",showLoadingAnimation:""},null,8,["mode","skeleton","info","appTheme","rootRef"])],2))),128))])):createCommentVNode("",!0),unref(N)?(openBlock(),createElementBlock("div",_hoisted_7$H,"\u5DF2\u7ECF\u5230\u5E95\u5566~")):createCommentVNode("",!0),unref(R)?(openBlock(),createElementBlock("div",_hoisted_8$G,_hoisted_10$v)):createCommentVNode("",!0)],64))],64))])]),_:1},8,["class"])}}});var HomeBangumiMore=_export_sfc(_sfc_main$1g,[["__scopeId","data-v-b45207d0"]]),Tab_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$1I={class:"i_wrapper mb_44"},_hoisted_2$1B={class:"flex_between mb_9 fs_3 text1 fw_bold fw_400 h_34"},_hoisted_3$1r={class:"text2 mr_xs"},_hoisted_4$16={class:"row gutter_md"},_hoisted_5$R={key:0},_hoisted_6$J={class:"flex_between mb_9 fs_3 text1 fw_bold fw_400 h_34"},_hoisted_7$G={class:"row gutter_md"},_hoisted_8$F={key:0,class:"flex_center text3 lh_md fs_5"},_sfc_main$1f=defineComponent({__name:"Tab",setup(a){const o=useRouter(),s=useRoute(),i=useAppInfoStore(),l=s.meta.isBangumi==null?!1:s.meta.isBangumi,c=s.meta.isPgc==null?!1:s.meta.isPgc,r=l?"main.home-page-fanju.0.0":"main.home-page-movie.0.0",u=ref(!1),d=ref(!1),_=ref(null);useReportPv({spm_id:r,pageName:"HomePgc"}),useScrollToTop(l?".bangumi_tab":".pgc_tab"),useRoutePageFadeIn(l?".bangumi_tab":".pgc_tab");const{data:f,run:m,loading:p}=useRequest(async()=>{d.value=!1;try{const w=await getTabResult({is_refresh:0},l);return{...w,modules:w.modules.filter(D=>D.items.length)}}catch{return d.value=!0,{modules:[],has_next:!1,next_cursor:"0"}}},{initialData:{modules:[],has_next:!0,next_cursor:"0"}}),v=computed(()=>{var w;return(w=f.value.modules.find(D=>D.style===OgvCardType.double_feed))!=null?w:{}}),g=computed(()=>v.value.title),$=computed(()=>{var w;return f?{...f.value,modules:(w=f.value.modules)==null?void 0:w.filter(D=>D.style!==OgvCardType.double_feed)}:[]}),y=w=>{var D;return((D=w[0])==null?void 0:D.mode)==="horizontal"?w.slice(0,5):w.slice(0,7)},{data:B,dataList:C,loadMore:S,loadingMore:E,reload:k,reset:b}=useLoadMore(async w=>{var P,j,O;const D=!(w!=null&&w.dataList.length),L=f.value.next_cursor;try{const F=await getTabResult({cursor:D?L:Number((P=w==null?void 0:w.data)==null?void 0:P.next_cursor),is_refresh:1},l);return{list:(O=((j=F.modules.find(W=>W.style===OgvCardType.double_feed))!=null?j:{}).items)!=null?O:[],has_next:F.has_next,next_cursor:F.next_cursor}}catch{return{list:[],has_next:!1,next_cursor:"0"}}},{manual:!0,isNoMore:w=>w?u.value:!1});watch(B,w=>{u.value=!w.has_next});const V=computed(()=>{var w,D;return[...(w=v.value.items)!=null?w:[],...(D=C.value)!=null?D:[],...E.value?Array.from(new Array(10),()=>({skeleton:!0,mode:"horizontal"})):[]]}),A=computed(()=>p.value||!f.value.modules.length&&!d.value),x=w=>{o.push(w)},T=()=>{A.value||E.value||S()},I=w=>{!w.seasonId||openPlayerWindow({type:"ogv",seasonId:w.seasonId,fromSpmid:`${r}.pv`})},R=l?"HomeBangumiTab":"HomePgcTab",N=()=>{m(),u.value=!1,b()};return useRefresh(R,()=>N()),onActivated(()=>{var w;s.name===R&&!((w=f.value.modules)!=null&&w.length)&&N()}),onDeactivated(()=>{u.value=!1,b()}),(w,D)=>{const L=resolveComponent("WidgetArrow"),P=resolveComponent("v-button"),j=resolveComponent("Scroller");return openBlock(),createBlock(j,{ref_key:"bangumiRef",ref:_,class:normalizeClass(["page_scroller pt_lg h_100 p_relative u_select_none",{bangumi_tab:unref(l),pgc_tab:unref(c)}]),onLoadMore:T},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1I,[unref(A)?(openBlock(),createBlock(_sfc_main$1i,{key:0,showLoadingAnimation:""})):d.value?(openBlock(),createBlock(SearchNetError,{key:1})):(openBlock(),createElementBlock(Fragment,{key:2},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref($).modules,O=>(openBlock(),createElementBlock("div",{class:"mb_sm",key:O.module_id},[createBaseVNode("div",_hoisted_2$1B,[createBaseVNode("span",null,toDisplayString(O.title),1),(openBlock(!0),createElementBlock(Fragment,null,renderList(O.headers,F=>(openBlock(),createElementBlock("div",{key:F.title+F.url,class:"flex_start"},[createVNode(P,{class:"i_button_more","active-shrink":"",onClick:U=>x(F.url)},{default:withCtx(()=>[createBaseVNode("span",_hoisted_3$1r,toDisplayString(F.title),1),createVNode(L,{class:"i_icon_more text2"})]),_:2},1032,["onClick"])]))),128))]),createBaseVNode("div",_hoisted_4$16,[(openBlock(!0),createElementBlock(Fragment,null,renderList(y(O.items),(F,U)=>(openBlock(),createElementBlock("div",{key:F.epid,class:normalizeClass(["mb_xxl",{col_3:F.mode==="horizontal",col_sm_1_5:F.mode==="horizontal",col_2:F.mode==="vertical",col_sm_1_7:F.mode==="vertical",to_hide_sm:F.mode==="horizontal"?U>3:U>5,to_hide_xl:F.mode==="horizontal"?U>4:U>6}])},[createVNode(unref(BiliBangumiCard),{onClickBangumi:I,info:F,mode:F.mode,appTheme:unref(i).appTheme,rootRef:_.value,"disable-inline-player":"","disable-hover":""},null,8,["info","mode","appTheme","rootRef"])],2))),128))])]))),128)),unref(V).length?(openBlock(),createElementBlock("div",_hoisted_5$R,[createBaseVNode("div",_hoisted_6$J,[createBaseVNode("span",null,toDisplayString(unref(g)),1)]),createBaseVNode("div",_hoisted_7$G,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(V),O=>(openBlock(),createElementBlock("div",{key:O.cover,class:normalizeClass(["mb_xxl",{col_3:O.mode==="horizontal",col_sm_1_5:O.mode==="horizontal",col_2:O.mode==="vertical",col_sm_1_7:O.mode==="vertical"}])},[createVNode(unref(BiliBangumiCard),{onClickBangumi:I,info:O,mode:O.mode,skeleton:O.skeleton,appTheme:unref(i).appTheme,rootRef:_.value,"disable-inline-player":"","disable-hover":"",showLoadingAnimation:""},null,8,["info","mode","skeleton","appTheme","rootRef"])],2))),128))]),u.value?(openBlock(),createElementBlock("div",_hoisted_8$F,"\u5DF2\u7ECF\u5230\u5E95\u5566~")):createCommentVNode("",!0)])):createCommentVNode("",!0)],64))])]),_:1},8,["class"])}}});var HomePgcTab=_export_sfc(_sfc_main$1f,[["__scopeId","data-v-fdb974ca"]]);const _hoisted_1$1H={class:"i_page_wrapper"},_hoisted_2$1A=createBaseVNode("div",{class:"i_page_content"},null,-1),_hoisted_3$1q=[_hoisted_2$1A],_sfc_main$1e=defineComponent({__name:"SelectedNoop",setup(a){return onActivated(()=>{events.emit("pageSpmIdChange","main.selected.0.0")}),(o,s)=>(openBlock(),createElementBlock("div",_hoisted_1$1H,_hoisted_3$1q))}}),_hoisted_1$1G={class:"card-left flex_shrink_0 mr_xs"},_hoisted_2$1z={class:"item-driation"},_hoisted_3$1p={class:"card-right flex_col_between"},_hoisted_4$15={class:"text1 text_ellipsis_2l w_100 mt_xs"},_hoisted_5$Q={key:0,src:_imports_0$7,alt:""},_hoisted_6$I={class:"w_100 text3 mb_xs"},_hoisted_7$F={key:0},_hoisted_8$E={key:1},_hoisted_9$z={class:"ml_md"},_sfc_main$1d=defineComponent({__name:"UgcSeasonItem",props:{item:{type:Object,default:()=>({})},y:Number,h:Number},setup(a){const o=a,s=DPR(),{activeItem:i}=storeToRefs(useUgcSeasonStore()),l=ref(null),c=ref(!1);useIntersectionObserver(l,([{isIntersecting:u}])=>c.value=u);let r=null;return onMounted(()=>{r=setTimeout(()=>{var d;const{y:u}=((d=l.value.getClientRects())==null?void 0:d[0])||{};u&&u>o.y-98&&u<o.y+o.h&&(c.value||(c.value=!0))},600)}),onBeforeUnmount(()=>{clearTimeout(r)}),(u,d)=>{var f,m,p,v,g,$;const _=resolveComponent("VImg");return openBlock(),createElementBlock("div",{ref_key:"ugcSeasonItem",ref:l,class:"season-item"},[c.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["season-item-wrap flex_start px_lg py_sm h_100",{active:a.item.cid===unref(i).cid}])},[createBaseVNode("div",_hoisted_1$1G,[createVNode(_,{class:"cover-img p_cover",src:a.item.arc.pic,width:140*unref(s),height:78*unref(s),loading:"lazy",rule:"1c"},null,8,["src","width","height"]),createBaseVNode("div",_hoisted_2$1z,toDisplayString(unref(formatDuration)("(hh:)?mm:ss",(a.item.arc.duration||0)*1e3-1)),1)]),createBaseVNode("div",_hoisted_3$1p,[createBaseVNode("h4",_hoisted_4$15,[a.item.cid===unref(i).cid?(openBlock(),createElementBlock("img",_hoisted_5$Q)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(a.item.title),1)]),createBaseVNode("p",_hoisted_6$I,[a.item.arc.enable_vt?(openBlock(),createElementBlock("span",_hoisted_7$F,[createVNode(unref(PlayTime)),createTextVNode(" "+toDisplayString(a.item.arc.vt_display||unref(formatNum)((m=(f=a.item.arc)==null?void 0:f.stat)==null?void 0:m.vt)),1)])):(openBlock(),createElementBlock("span",_hoisted_8$E,[createVNode(unref(VdPlay)),createTextVNode(" "+toDisplayString(unref(formatNum)((v=(p=a.item.arc)==null?void 0:p.stat)==null?void 0:v.view)),1)])),createBaseVNode("span",_hoisted_9$z,[createVNode(unref(VdDm)),createTextVNode(" "+toDisplayString(unref(formatNum)(($=(g=a.item.arc)==null?void 0:g.stat)==null?void 0:$.danmaku)),1)])])])],2)):createCommentVNode("",!0)],512)}}});var UgcMultiIPtem_vue_vue_type_style_index_0_lang="";const _hoisted_1$1F={class:"card-left flex_shrink_0 mr_xs"},_hoisted_2$1y={class:"item-driation"},_hoisted_3$1o={class:"card-right flex_col"},_hoisted_4$14={class:"text1 text_ellipsis_2l w_100 mt_sm"},_hoisted_5$P={key:0,src:_imports_0$7,alt:""},_sfc_main$1c=defineComponent({__name:"UgcMultiIPtem",props:{item:{type:Object,default:()=>({})},src:String,y:Number,h:Number},setup(a){const o=a,s=DPR(),{activeItem:i,videoInfo:l}=storeToRefs(useUgcSeasonStore()),c=ref(null),r=ref(!1);useIntersectionObserver(c,([{isIntersecting:d}])=>r.value=d);let u=null;return onMounted(()=>{u=setTimeout(()=>{var d;if(o.item.cid===i.value.cid){const{y:_}=((d=c.value.getClientRects())==null?void 0:d[0])||{};_&&_>o.y-98&&_<o.y+o.h&&(r.value=!0)}},800)}),onBeforeUnmount(()=>{clearTimeout(u)}),(d,_)=>{const f=resolveComponent("VImg");return openBlock(),createElementBlock("div",{ref_key:"ugcSeasonItem",ref:c,class:"season-item"},[r.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["season-item-wrap flex_start px_lg py_sm h_100",{active:a.item.cid===unref(i).cid}])},[createBaseVNode("div",_hoisted_1$1F,[createVNode(f,{class:"cover-img p_cover",src:unref(l).pic,width:140*unref(s),height:78*unref(s),loading:"lazy",rule:"1c"},null,8,["src","width","height"]),createBaseVNode("div",_hoisted_2$1y,toDisplayString(unref(formatDuration)("(hh:)?mm:ss",(a.item.duration||0)*1e3-1)),1)]),createBaseVNode("div",_hoisted_3$1o,[createBaseVNode("h4",_hoisted_4$14,[a.item.cid===unref(i).cid?(openBlock(),createElementBlock("img",_hoisted_5$P)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(a.item.part),1)])])],2)):createCommentVNode("",!0)],512)}}});var UgcSeasonPanelSeason_vue_vue_type_style_index_0_lang="";const _hoisted_1$1E={class:"ugc_season--season-title px_lg"},_hoisted_2$1x={class:"py_lg bb_1 bc_line_light"},_hoisted_3$1n={key:0,class:"season-tt seaon-se flex_between"},_hoisted_4$13={class:"season-tt-left"},_hoisted_5$O={class:"text1 flex_start"},_hoisted_6$H=["title"],_hoisted_7$E={class:"left-info mt_xs"},_hoisted_8$D={key:0,class:"text3"},_hoisted_9$y={key:1,class:"play-num text3"},_hoisted_10$u={key:2,class:"abstract"},_hoisted_11$s=createTextVNode(" \xA0\xB7\xA0 "),_hoisted_12$p={key:0,class:"season-intro"},_hoisted_13$j={class:"season-tt-right flex_shrink_0"},_hoisted_14$g=createTextVNode(" \u8BA2\u9605\u5168\u96C6 "),_hoisted_15$e=createTextVNode("\u5DF2\u8BA2\u9605"),_hoisted_16$d={key:1,class:"season-tt season-mp"},_hoisted_17$c={class:"text1 flex_start"},_hoisted_18$c=["title"],_hoisted_19$b={class:"left-info mt_xs text3"},_hoisted_20$a={key:0},_hoisted_21$a={key:1,class:"play-num"},_hoisted_22$9={class:"ml_md"},_hoisted_23$9={class:"season-items"},_hoisted_24$9=createBaseVNode("br",null,null,-1),_hoisted_25$8=createTextVNode("\u9876\u90E8 "),_sfc_main$1b=defineComponent({__name:"UgcSeasonPanelSeason",props:{info:{type:Object,default:()=>({})},videoItemDom:String},setup(a){const o=a,s=useUgcSeasonStore(),{pageType:i,videoInfo:l,videoSeason:c,videoEpisodes:r,videoPages:u,activeIndex:d,activeItem:_,isShowComment:f,rightPanelTab:m}=storeToRefs(s),p=computed(()=>i.value==="ugcSeason"),{abTestInfo:v}=storeToRefs(useAbTestStore()),g=computed(()=>{let{stat:D,id:L,enable_vt:P}=c.value,{enable_vt:j,stat:O}=l.value;return{id:L,view:formatNum(D==null?void 0:D.view),vt:formatNum(D==null?void 0:D.vt),enableVt:!!P,viewP:formatNum(O==null?void 0:O.view),vtP:formatNum(O==null?void 0:O.vt),enableVtP:!!j}}),$=ref(!1),{userInfo:y}=storeToRefs(useUserInfoStore()),B=inject("tripleData"),C=inject("updateTripleData"),S=ref(null);useIntersectionObserver(S,([{isIntersecting:D}])=>{D&&o.info.cid===_.value.cid&&allCustomReport({type:"show",spm_info:"main.play-story.ugc-season.season"},{msg:JSON.stringify({isTab:v.value.is_ugc_season_tab})})});const E=ref(null),k=ref(0),b=computed(()=>{var D,L;return((L=(D=E.value)==null?void 0:D.$el)==null?void 0:L.getClientRects()[0])||{}}),V=computed(()=>o.info.cid===_.value.cid&&k.value&&k.value>200),A=()=>{var D;k.value=((D=E.value.$el)==null?void 0:D.scrollTop)||0};onActivated(()=>{var D;o.info.cid===_.value.cid&&(D=E.value)!=null&&D.$el&&(E.value.$el.scrollTop=k.value)});const x=()=>{o.info.cid===_.value.cid&&E.value.$el&&scrollTo((d.value-1)*98,{element:E.value.$el,speed:4})};onMounted(()=>{watch(()=>o.info.cid,D=>{D&&A()},{immediate:!0}),watch([_,f],([D,L])=>{o.info.cid===D.cid&&L&&setTimeout(()=>x())},{immediate:!0,flush:"post"}),watch(m,D=>{o.info.cid===_.value.cid&&D==="1"&&setTimeout(()=>x())})});const T=()=>{scrollToTop({element:E.value.$el,speed:3})};let I=!1;const R=()=>{if(!y.value.isLogin)return requestLogin("videoSection.favCollection");I||(I=!0,Upinfo.seasonfav({platform:"web",season_id:c.value.id},!0).then(D=>{D.code===0&&(C==null||C(o.info.cid,"orderState",!0))}).catch(()=>{}).finally(()=>{I=!1}))},N=()=>{I||(I=!0,Upinfo.seasonfav({platform:"web",season_id:c.value.id},!1).then(D=>{D.code===0&&(C==null||C(o.info.cid,"orderState",!1))}).catch(()=>{}).finally(()=>{I=!1}))},w=D=>{o.info.cid===_.value.cid&&D+1!==d.value&&(ugcSeasonEvents.emit("initVideoList",D+1),allCustomReport({type:"click",spm_info:"main.play-story.right-panel.item"},{msg:JSON.stringify({})}))};return(D,L)=>{var O;const P=resolveComponent("v-button"),j=resolveComponent("Scroller");return openBlock(),createElementBlock("div",{class:"ugc_season--season h_100",ref_key:"pageRef",ref:S},[createBaseVNode("div",_hoisted_1$1E,[createBaseVNode("div",_hoisted_2$1x,[unref(i)==="ugcSeason"?(openBlock(),createElementBlock("div",_hoisted_3$1n,[createBaseVNode("div",_hoisted_4$13,[createBaseVNode("h4",_hoisted_5$O,[createBaseVNode("span",{class:"tt-text text_ellipsis",title:unref(c).title},toDisplayString(unref(c).title),9,_hoisted_6$H),createBaseVNode("span",null,"\uFF08"+toDisplayString(unref(d))+"/"+toDisplayString(unref(r).length)+"\uFF09 ",1)]),createBaseVNode("div",_hoisted_7$E,[unref(g).enableVt?(openBlock(),createElementBlock("span",_hoisted_8$D,toDisplayString(unref(g).vt)+"\u5206\u949F\u64AD\u653E",1)):(openBlock(),createElementBlock("span",_hoisted_9$y,toDisplayString(unref(g).view)+"\u64AD\u653E",1)),(O=unref(c))!=null&&O.intro?(openBlock(),createElementBlock("span",_hoisted_10$u,[_hoisted_11$s,createBaseVNode("span",{class:"cs_pointer brand_pink",onMouseenter:L[0]||(L[0]=F=>$.value=!0),onMouseleave:L[1]||(L[1]=F=>$.value=!1)}," \u7B80\u4ECB ",32)])):createCommentVNode("",!0),createVNode(Transition,{name:"fade"},{default:withCtx(()=>[$.value?(openBlock(),createElementBlock("div",_hoisted_12$p,toDisplayString(unref(c).intro),1)):createCommentVNode("",!0)]),_:1})])]),createBaseVNode("div",_hoisted_13$j,[unref(B).orderState?(openBlock(),createBlock(P,{key:1,size:"small",onClick:N},{default:withCtx(()=>[_hoisted_15$e]),_:1})):(openBlock(),createBlock(P,{key:0,class:"order-btn",type:"pink",size:"small",plain:"","active-pink":"",onClick:R},{default:withCtx(()=>[_hoisted_14$g]),_:1}))])])):(openBlock(),createElementBlock("div",_hoisted_16$d,[createBaseVNode("h4",_hoisted_17$c,[createBaseVNode("span",{class:"tt-text text_ellipsis",title:unref(l).title},toDisplayString(unref(l).title),9,_hoisted_18$c),createBaseVNode("span",null,"\uFF08"+toDisplayString(unref(d))+"/"+toDisplayString(unref(u).length)+"\uFF09",1)]),createBaseVNode("div",_hoisted_19$b,[unref(g).enableVtP?(openBlock(),createElementBlock("span",_hoisted_20$a,toDisplayString(unref(g).vtP)+"\u5206\u949F\u64AD\u653E",1)):(openBlock(),createElementBlock("span",_hoisted_21$a,toDisplayString(unref(g).viewP)+"\u64AD\u653E",1)),createBaseVNode("span",_hoisted_22$9,toDisplayString(unref(formatDate)("YYYY-MM-DD",unref(l).pubdate*1e3)),1)])]))])]),createVNode(j,{class:"ugc_season--season-scroll page_scroller pt_sm",ref_key:"seasonRef",ref:E,onScroll:A},{default:withCtx(()=>[createBaseVNode("div",_hoisted_23$9,[unref(p)?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(r),(F,U)=>(openBlock(),createBlock(_sfc_main$1d,{key:F.cid,item:F,y:unref(b).y,h:unref(b).height,onClick:W=>w(U)},null,8,["item","y","h","onClick"]))),128)):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(unref(u),(F,U)=>(openBlock(),createBlock(_sfc_main$1c,{key:F.cid,item:F,y:unref(b).y,h:unref(b).height,onClick:W=>w(U)},null,8,["item","y","h","onClick"]))),128)),createBaseVNode("p",{class:normalizeClass(["b_text text3 text_center mt_md",{visible:unref(V),invisible:!unref(V)}])}," \u6CA1\u6709\u66F4\u591A\u5566 ",2)]),unref(V)?(openBlock(),createBlock(P,{key:0,class:"btn-to-top",title:"\u56DE\u5230\u9876\u90E8","active-shrink":"",onClick:T},{default:withCtx(()=>[createVNode(unref(PaletteTop),{class:"icon-to-top"}),_hoisted_24$9,_hoisted_25$8]),_:1})):createCommentVNode("",!0)]),_:1},512)],512)}}});var UgcSeasonPanelComment_vue_vue_type_style_index_0_lang="";const _hoisted_1$1D={class:"app_selected--comment-wrap"},_hoisted_2$1w={class:"app_selected--comment-dialog"},_sfc_main$1a=defineComponent({__name:"UgcSeasonPanelComment",props:{info:{type:Object,default:()=>({})},videoItemDom:String},setup(a){const o=a,s=ref(null),i=reactive({showContent:!1,showPopup:!1,showSubPage:!1}),{commentInstance:l,initCommentInstance:c,clearComment:r}=useCommentModule(SPM_PV.ugcSeason),u=computed(()=>o.info.id),{isShowComment:d,rightPanelTab:_,activeItem:f}=storeToRefs(useUgcSeasonStore()),{abTestInfo:m}=storeToRefs(useAbTestStore()),p=ref(0),v=()=>{p.value=s.value.scrollTop};onActivated(()=>{f.value.cid===o.info.cid&&s.value&&(s.value.scrollTop=p.value)});const g=ref(null);useIntersectionObserver(g,([{isIntersecting:y}])=>{o.info.cid===f.value.cid&&y&&allCustomReport({type:"show",spm_info:"main.play-story.ugc-season.comment"},{msg:JSON.stringify({isTab:m.value.is_ugc_season_tab})})});const $=()=>{l.value||c(`${o.videoItemDom} .app_selected--comment-dom`,{oid:u.value,type:1,scrollContainer:s.value,detailContainerSelector:`${o.videoItemDom} .app_selected--comment-detail`,dialogContainerSelector:`${o.videoItemDom} .app_selected--comment-dialog`,onViewDetailReply:()=>{ugcSeasonEvents.emit("showCommentPopup",o.info.cid)},onBackToNormalReply:()=>{i.showPopup=!1,ugcSeasonEvents.emit("hideCommentPopup")},onViewDialogReply:()=>{ugcSeasonEvents.emit("showCommentSubPage",o.info.cid)},onBackToDetailReply:()=>{i.showSubPage=!1,ugcSeasonEvents.emit("hideCommentSubPage")},onChangeReplyCount:y=>{},onPreviewImage:(y,B)=>{events.emit("hidePopover"),events.emit("visitGallery",{container:".app_selected--wrapper",downloadable:!1,items:y.map(C=>({src:C.url,width:C.width,height:C.height,size:C.size,tags:[]})),index:B})}})};return onMounted(()=>{watch([d,_],([y,B])=>{var C,S,E,k;o.info.cid===f.value.cid&&(y&&B==="2"?($(),(S=(C=l.value)==null?void 0:C.reset)==null||S.call(C,{showBackTopIcon:!0})):(events.emit("leaveGallery"),ugcSeasonEvents.emit("hideCommentPopup"),ugcSeasonEvents.emit("hideCommentSubPage"),(k=(E=l.value)==null?void 0:E.reset)==null||k.call(E,{showBackTopIcon:!1})))}),watch([()=>o.info.cid,f],([y,B])=>{y===B.cid?(r(),d.value&&_.value==="2"&&$()):setTimeout(()=>r(),300)}),ugcSeasonEvents.on("showCommentPopup",y=>{y===o.info.cid&&(i.showPopup=!0)}),ugcSeasonEvents.on("showCommentSubPage",y=>{y===o.info.cid&&(i.showSubPage=!0)}),ugcSeasonEvents.on("hideCommentPopup",()=>{i.showPopup=!1,setTimeout(()=>r("detail"),300)}),ugcSeasonEvents.on("hideCommentSubPage",()=>{i.showSubPage=!1,setTimeout(()=>r("dialog"),300)})}),onBeforeUnmount(()=>{ugcSeasonEvents.off("showCommentPopup"),ugcSeasonEvents.off("showCommentSubPage"),ugcSeasonEvents.off("hideCommentPopup"),ugcSeasonEvents.off("hideCommentSubPage")}),(y,B)=>(openBlock(),createElementBlock("div",{class:"app_selected--comment ugc-cmt",ref_key:"pageRef",ref:g},[createBaseVNode("div",{class:"app_selected--comment-dom",ref_key:"commentDom",ref:s,onScroll:v},null,544),withDirectives(createBaseVNode("div",_hoisted_1$1D,[createBaseVNode("div",{class:normalizeClass(["app_selected--comment-detail",{"is-left":i.showSubPage}])},null,2),withDirectives(createBaseVNode("div",_hoisted_2$1w,null,512),[[vShow,i.showSubPage]])],512),[[vShow,i.showPopup]])],512))}});var UgcSeasonPanel_vue_vue_type_style_index_0_lang="";const _hoisted_1$1C={class:"ugc_season--panel-tabs bt_1 bb_1 bc_line_light px_lg p_relative"},_hoisted_2$1v={class:"ugc_season--panel-content"},_sfc_main$19=defineComponent({__name:"UgcSeasonPanel",props:{info:{type:Object,default:()=>({})},video:{type:Object,default:()=>({})},videoItemDom:String},setup(a){const o=a,s=useUgcSeasonStore(),{rightPanelTab:i,isUgcSeason:l,activeItem:c}=storeToRefs(s),{abTestInfo:r}=storeToRefs(useAbTestStore()),u=computed(()=>{var m,p;return formatNum((p=(m=o.video.View)==null?void 0:m.stat)==null?void 0:p.reply)}),d=()=>{ugcSeasonEvents.emit("hideComment"),allCustomReport({type:"click",spm_info:"main.play-story.right-panel.close"},{msg:JSON.stringify({})})},_=m=>{i.value=m},f=m=>{var v;const p=getClosestElement(m.target,".vui_tabs--nav-item");p&&((v=p.innerText)!=null&&v.includes("\u8BC4\u8BBA")?allCustomReport({type:"click",spm_info:"main.play-story.ugc-season.comment-tab"},{msg:JSON.stringify({})}):allCustomReport({type:"click",spm_info:"main.play-story.ugc-season.season-tab"},{msg:JSON.stringify({})}))};return onMounted(()=>{watch([()=>o.videoItemDom,u,c,i],([m,p,v,g])=>{if(!r.value.is_ugc_season_tab&&g!=="2")return;const $=document.querySelector(`${m} .vui_tabs--nav-num`);$&&(v.id===o.info.id?$.textContent=String(p):$.textContent="")},{flush:"post"})}),(m,p)=>{const v=resolveComponent("v-tab-item"),g=resolveComponent("v-tabs");return openBlock(),createElementBlock("div",{class:normalizeClass(["ugc_season--panel h_100",{"alone-panel":!unref(r).is_ugc_season_tab}])},[createBaseVNode("div",_hoisted_1$1C,[createVNode(g,{autoAdjustment:"","active-key":unref(i),"slide-to-hover":!1,"active-pink":!0,"tabs-gutter":32,"slider-width":18,onClick:p[0]||(p[0]=$=>f($)),onTabChange:_},{default:withCtx(()=>[unref(r).is_ugc_season_tab||unref(i)==="1"?(openBlock(),createBlock(v,{key:"1",tab:unref(l)?"\u5408\u96C6":"\u9009\u96C6"},null,8,["tab"])):createCommentVNode("",!0),unref(r).is_ugc_season_tab||unref(i)==="2"?(openBlock(),createBlock(v,{key:"2",tab:"\u8BC4\u8BBA",num:1})):createCommentVNode("",!0)]),_:1},8,["active-key"]),createBaseVNode("span",{class:"ugc_season--panel-close p_center_y r_md",onClick:d},[createVNode(unref(IcoClose))])]),createBaseVNode("div",_hoisted_2$1v,[withDirectives(createVNode(_sfc_main$1b,{info:a.info,videoItemDom:a.videoItemDom},null,8,["info","videoItemDom"]),[[vShow,unref(i)==="1"]]),withDirectives(createVNode(_sfc_main$1a,{info:a.info,videoItemDom:a.videoItemDom},null,8,["info","videoItemDom"]),[[vShow,unref(i)==="2"]])])],2)}}});var UgcSeasonItem_vue_vue_type_style_index_0_lang="";const _hoisted_1$1B=["data-cid"],_hoisted_2$1u=createBaseVNode("span",null,"\u8BE6\u60C5\u9875",-1),_hoisted_3$1m=createTextVNode(" \xA0 "),_hoisted_4$12=createBaseVNode("span",null,"\u8BE6\u60C5\u9875",-1),_hoisted_5$N=["onClick"],_sfc_main$18=defineComponent({__name:"UgcSeasonItem",props:{info:{type:Object,default:()=>({})},playingList:{type:Array,default:()=>[]},index:Number,width:Number,height:Number,activeId:Number,isOnSliding:Boolean,isWinVisiable:Boolean,isSelectedPage:Boolean},emits:["playerInited","playerEnded"],setup(a,{emit:o}){const s=a,i=ref(),l=ref({}),c=ref({}),r=ref({}),u=ref(!1),d=ref(!1),_=ref(!1),f=ref(!1),m=ref(!1),p=ref(!1),v=ref(!1),g=computed(()=>s.activeId&&s.activeId===s.info.cid),$=computed(()=>g.value&&s.isSelectedPage);computed(()=>$.value&&!s.isOnSliding);const y=computed(()=>s.isSelectedPage&&v.value&&f.value&&s.info.cid),B=computed(()=>`.app_selected--us .app_selected--item[data-cid="${s.info.cid}"]`),C=computed(()=>`${B.value} .cpx-player-summary-wrap`),S=window,E=S.nano,k=ref(!0),b=ref(!1),V=[0,1,2],A=inject("hasActiveDialog"),{userInfo:x}=storeToRefs(useUserInfoStore()),{isMainMini:T}=storeToRefs(useSelectedStore()),I=useUgcSeasonStore(),{reportGoToDetails:R,reportToggleDetails:N,reportSwitchVideo:w}=I,{pageInited:D,seekTime:L,activeItem:P,activeVideo:j,fromItem:O,rightPanelTab:F,isShowComment:U,isShowMiniBtns:W,isMiniPanelHover:ne,isPlayerControlHover:H}=storeToRefs(I);watchEffect(()=>{var z,Y;((z=s.info)==null?void 0:z.cid)&&s.info.cid===((Y=P.value)==null?void 0:Y.cid)&&(j.value=l.value)});const{player:M,itemInfo:ee,fromSpmid:G,firstInfo:Q,firstPlay:te,restartPlay:ce,heartbeat:$e}=useSelectedTrack();watchEffect(()=>{ee.value=s.info,G.value=`main.play-story.video.${O.value._location||0}.click`});const we=useUgcSeasonToolStore(),{resetToolStore:_e,initToolStore:ke,initTriple:oe,initFollowed:ie,setLike:ye,setCoin:Te,setFav:Ee}=we,{cid:Ve}=storeToRefs(we),ue=ref(!1);watch([()=>s.width,U],([z,Y])=>{ue.value=Y?z<1360:z<980},{immediate:!0}),watch(()=>s.info.cid,z=>{z&&(v.value=!1,p.value=!1,f.value=!1,b.value=!1,He(),Ye(),setTimeout(()=>{const Y=document.querySelector(`${B.value} .video-backdrop-bg`),de=document.querySelector(`${B.value} .video-backdrop-blur`);Y&&(Y.style.background="#000"),de&&(de.style.background="#000")}))},{immediate:!0}),watch($,z=>{z&&Ve.value!==s.info.cid&&_e()}),watch([$,y],([z,Y])=>{z&&Y&&ke(M.value,s.info,l.value)}),watch([$,c],([z,Y])=>{z&&Y.init&&oe(Y)}),watch([$,r],([z,Y])=>{var de,ve,xe;z&&((de=Y[0])==null?void 0:de.followed)&&ie((xe=Y[(ve=s.info.owner)==null?void 0:ve.mid])==null?void 0:xe.followed)}),provide("updateVideoData",(z,Y,de)=>{z===s.info.cid&&(l.value.View.stat[Y]=de)});const We=(z,Y,de)=>{z===s.info.cid&&(c.value[Y]=de)};provide("tripleData",c),provide("updateTripleData",We);let Ge=null;const Ye=async()=>{if(!!s.info.bvid)try{l.value=await loadVideoData({bvid:s.info.bvid}),f.value=!0,Ke(),Xe(),clearTimeout(Ge)}catch(z){console.error(z),Ge=setTimeout(()=>Ye(),1e3)}},Ke=async()=>{if(!!s.info.bvid)try{const Y=(await Upinfo.getVideoState(s.info.bvid)).data||{};c.value={init:!0,liked:Y.like,faved:Y.favorite,hasCoined:Y.coin,orderState:Y.season_fav}}catch(z){console.error(z)}},Xe=async()=>{var z;if(!!x.value.isLogin)try{const Y=(((z=l.value.View)==null?void 0:z.staff)||[]).map(de=>de.mid);Y.includes(s.info.owner.mid)||Y.unshift(s.info.owner.mid),r.value=await getRelations(Y)||{}}catch(Y){console.error(Y)}};watchEffect(()=>{s.isSelectedPage&&m.value&&s.info.cid&&!p.value&&He()});const He=async()=>{var Y,de;p.value=!0;const z={element:i.value,fullWrap:document.querySelector(".app_selected--content"),aid:s.info.id,cid:s.info.cid,channelKind:7,pcSpecialMode:!0,controlsList:new Set(["noPlaybackClue","noPBP"]),featureList:new Set(["noToast"]),storageKey:"Pc-Special",autoplay:!1,enableHEVC:!0,enableAV1:!0,hideBoxShadow:!0,iid:"pc_app_selected"};$.value&&!D.value&&(D.value=!0,L.value&&(z.t=L.value));try{M.value.reload?(await M.value.reload(z),$.value&&M.value.play()):(M.value=E.createPlayer(z,{"bpx-primary-color":"#f69","bpx-fn-color":"#f69","bpx-fn-hover-color":"#f69"}),K(),await M.value.connect(),document.fullscreenElement&&M.value.setSideScreen(E.ScreenKind.Full),g.value||(de=(Y=M.value).toggleFeature)==null||de.call(Y,{shortcut:!0})),S.ugcSeasonPlayers[s.info.cid]=M.value,v.value=!0}catch(ve){console.error(ve)}},Z=()=>{var z,Y;if(M.value.disconnect)try{$.value&&$e(),(Y=(z=M.value)==null?void 0:z.disconnect)==null||Y.call(z),S.ugcSeasonPlayers&&(S.ugcSeasonPlayers[s.info.cid]=null,delete S.ugcSeasonPlayers[s.info.cid])}catch(de){console.error(de)}},K=()=>{M.value.on(E.EventType.Player_Virtual_Action,X),M.value.on(E.EventType.Player_Play,me),M.value.on(E.EventType.Player_Pause,ge),M.value.on(E.EventType.Player_Ended,Ce),M.value.on(E.EventType.Player_Danmaku_Change,Fe),M.value.on(E.EventType.Player_Quality_Requested,Le),M.value.on(E.EventType.Player_RateChange,Be),M.value.on(E.EventType.Player_VolumeChange,pe),M.value.on(E.EventType.Player_Summary_Change,he),M.value.on(E.EventType.Player_Aspect_Change,Se),M.value.on(E.EventType.Player_Initialized,be)},X=({detail:z})=>{var Y;if(!!z){switch(z.kind){case E.InternalKind.OpenUrl:openInBrowser$1(toHttps(z.data),"selected.JumpEvent");return;case E.InternalKind.First_playtime:Q.value||(Q.value=z.data,te(),(Y=O.value)!=null&&Y.cid||w("auto",0));return}if(!x.value.isLogin&&z.kind<11){requestLogin("ugcPlayer.videoEvents"+z.kind);return}switch(z.kind){case E.InternalKind.Like:ye(s.info.id);break;case E.InternalKind.Coin:Te();break;case E.InternalKind.Collect:Ee();break;case E.InternalKind.Triple:events.emit("playerTriple",{type:"ugc",action:z.data.action});break;case E.InternalKind.Super_Quality_Guide:requestBigVip("qnPay");break}}},ae=()=>{var z,Y,de,ve;k.value?(Y=(z=M.value).play)==null||Y.call(z):(ve=(de=M.value).pause)==null||ve.call(de)},me=()=>{var z,Y,de,ve;$.value?k.value=(Y=(z=M.value).isPaused)==null?void 0:Y.call(z):(ve=(de=M.value).pause)==null||ve.call(de)},ge=()=>{var z,Y;k.value=(Y=(z=M.value).isPaused)==null?void 0:Y.call(z)},Ce=()=>{$.value&&(A!=null&&A()?M.value.pause():o("playerEnded"))},Fe=z=>{if(_.value){const Y=M.value.danmaku.isOpen();setData(KEY_DM_SWITCH,{isDmOpen:Y,idxs:et(V)})}},Le=z=>{const Y=M.value.getQuality();setData(KEY_QN_CONFIG,{qn:Y,idxs:et(V)})},Be=z=>{if(g.value){const Y=M.value.getPlaybackRate();Y<3&&setData(KEY_RATE_CONFIG,{rate:Y})}},pe=debounce$1(()=>{const z=M.value.getVolume();setData(KEY_VOLUME_CONFIG,{volume:z,idxs:et(V)})},200),he=z=>{N(!z.detail)},Se=z=>{var ve;const Y=(ve=M.value)==null?void 0:ve.mediaElement(),de=!!(z.detail&&Y);if(de){const{videoWidth:xe,videoHeight:Me}=Y;setMainVideoSize({width:xe,height:Me})}else setMainVideoSize(null);allCustomReport({type:"click",spm_info:"main.play-detail.player.aspect-ratio"},{msg:JSON.stringify({win_name:"main",is_set_aspect:de})})},be=()=>{var de,ve;if(IS_GPU_DISABLED||b.value||!M.value.mediaElement)return;b.value=!0;const z=(ve=(de=M.value).mediaElement)==null?void 0:ve.call(de),Y=z==null?void 0:z.parentElement;if(Y){let xe=Y.querySelector(".video-backdrop-bg"),Me=Y.querySelector(".video-backdrop-blur");Me||(Me=document.createElement("div"),Me.classList.add("video-backdrop","video-backdrop-blur"),Y.prepend(Me)),xe||(xe=document.createElement("div"),xe.classList.add("video-backdrop","video-backdrop-bg"),Y.prepend(xe));const{videoWidth:Ie,videoHeight:Ae}=z;let je=document.createElement("canvas");je.width=Ie,je.height=Ae,je.getContext("2d").drawImage(z,0,0,Ie,Ae),je.toBlob(Ue=>{if(Ue){const it=URL.createObjectURL(Ue);xe.style.backgroundImage=`url(${it})`,Me.style.backgroundImage=`url(${it})`}je=null},"image/jpeg",.6)}},Pe=z=>{var Y;((Y=z.key)==null?void 0:Y.toLowerCase())==="d"&&Ze()},ze=z=>{var Y;(Y=z.target)!=null&&Y.classList.contains("bui-switchdm-input")&&Ze()};let Je=null;const Ze=()=>{_.value=!0,clearTimeout(Je),Je=setTimeout(()=>_.value=!1,200)},ot=(z,Y)=>{r.value[z]&&(r.value[z].followed=Y)},nt=()=>{var z,Y,de,ve;(Y=(z=M.value).pause)==null||Y.call(z),openPlayerWindow({type:"ugc",bvid:s.info.bvid,cid:s.info.cid,t:((ve=(de=M.value).getCurrentTime)==null?void 0:ve.call(de))||0,fromSpmid:SPM_PV.selected,exitMini:!0}),R()},rt=()=>{$.value&&(U.value=!U.value)};ugcSeasonEvents.on("toggleUgcSeason",rt);const at=()=>{u.value=!1,clearTimeout(qe)};let qe=null;const Qe=throttle$2(()=>{u.value=!0,clearTimeout(qe),qe=setTimeout(()=>u.value=!1,1e3)},200),et=z=>z.filter(Y=>V.includes(Y)&&Y!==s.index),st=z=>[z.includes(s.index),et(z)];let le=null;watch($,z=>{var Y,de,ve,xe,Me,Ie,Ae,je,Re,Ue,it,yt,$t,Bt,Ct,mt;if(clearTimeout(le),z){const{isDmOpen:vt,idxs:ct}=getData(KEY_DM_SWITCH)||{};if(isBol(vt)&&ct){const[tt,dt]=st(ct);tt&&(vt?(Y=M.value.danmaku)==null||Y.open():(de=M.value.danmaku)==null||de.close()),setData(KEY_DM_SWITCH,dt.length?{isDmOpen:vt,idxs:dt}:null)}const{qn:ut,idxs:pt}=getData(KEY_QN_CONFIG)||{};if(isNum(ut==null?void 0:ut.newQ)&&pt){const[tt,dt]=st(pt);tt&&(((xe=(ve=M.value).getQuality)==null?void 0:xe.call(ve))||{}).newQ!==ut.newQ&&((Ie=(Me=M.value).requestQuality)==null||Ie.call(Me,ut.newQ)),setData(KEY_QN_CONFIG,dt.length?{qn:ut,idxs:dt}:null)}const{rate:ft}=getData(KEY_RATE_CONFIG)||{};ft&&isNum(ft)&&((je=(Ae=M.value).setPlaybackRate)==null||je.call(Ae,ft));const{volume:ht,idxs:_t}=getData(KEY_VOLUME_CONFIG)||{};if(isNum(ht)&&_t){const[tt,dt]=st(_t);tt&&((Ue=(Re=M.value).setVolume)==null||Ue.call(Re,ht)),setData(KEY_VOLUME_CONFIG,dt.length?{volume:ht,idxs:dt}:null)}(yt=(it=M.value).setDmSetting)==null||yt.call(it),(Bt=($t=M.value).toggleFeature)==null||Bt.call($t,{shortcut:!1})}else(mt=(Ct=M.value).toggleFeature)==null||mt.call(Ct,{shortcut:!0}),events.emit("leaveGallery")}),watch([$,M],([z])=>{var Y,de;z?M.value.play&&(s.isWinVisiable?(M.value.play(),Q.value&&ce()):d.value=!0,S.ugcSeasonPlayers.activePlayer!==M.value&&(S.ugcSeasonPlayers.activePlayer=M.value),o("playerInited")):((de=(Y=M.value).pause)==null||de.call(Y),$e())});const fe=()=>{!$.value||(U.value=!0)};ugcSeasonEvents.on("showComment",fe);const De=()=>{!$.value||(U.value=!1)};ugcSeasonEvents.on("hideComment",De);const q=(z=!1)=>{!$.value||(F.value!=="2"?(F.value="2",U.value=!0):U.value?De():fe(),z&&allCustomReport({type:"click",spm_info:"main.play-story.ugc-season.comment-entrance"},{msg:JSON.stringify({})}))};ugcSeasonEvents.on("toggleComment",q),watch(()=>s.isWinVisiable,z=>{var Y,de;z?($.value&&d.value&&((de=(Y=M.value).play)==null||de.call(Y),Q.value&&ce(),w("auto",0)),d.value=!1):$.value&&M.value.isPaused&&!M.value.isPaused()&&(M.value.pause(),$e(),d.value=!0)});let se=null;const Ne=()=>{H.value=!0},J=()=>{H.value=!1};return watch(y,z=>{var Y;z&&!se&&(se=(Y=i.value)==null?void 0:Y.querySelector(".cpx-player-control-wrap"),se&&(se.addEventListener("mouseenter",Ne,!1),se.addEventListener("mouseleave",J,!1)))}),onMounted(()=>{m.value=!0,document.addEventListener("keydown",Pe),document.addEventListener("mousedown",ze)}),onBeforeUnmount(()=>{Z(),clearTimeout(Ge),ugcSeasonEvents.off("showComment",fe),ugcSeasonEvents.off("hideComment",De),ugcSeasonEvents.off("toggleComment",q),ugcSeasonEvents.off("toggleUgcSeason",rt),document.removeEventListener("keydown",Pe),document.removeEventListener("mousedown",ze),se==null||se.removeEventListener("mouseenter",Ne,!1),se==null||se.removeEventListener("mouseleave",J,!1)}),(z,Y)=>{const de=resolveComponent("WidgetArrow");return openBlock(),createElementBlock("div",{class:normalizeClass(["app_selected--item p_relative",{"app_selected--mini":unref(T),"app_selected--item-active":u.value,"app_selected--item-deactive":!u.value,"app_selected--item-showcmt":unref(U),"app_selected--item-narrow":ue.value}]),"data-cid":a.info.cid,style:normalizeStyle({height:a.height+"px"}),onMouseleave:at,onMousemove:Y[4]||(Y[4]=(...ve)=>unref(Qe)&&unref(Qe)(...ve))},[createBaseVNode("div",{class:normalizeClass(["app_selected--player w_100 h_100",{"app_selected--shown":unref($)}]),ref_key:"selectedPlayerRef",ref:i},null,2),withDirectives(createBaseVNode("div",{class:normalizeClass(["app_selected--cmtwrap bg_bg1 p_absolute r_0 t_0 b_0 h_100",{deactive:!unref(g)}])},[createVNode(_sfc_main$19,{info:a.info,video:l.value,videoItemDom:unref(B)},null,8,["info","video","videoItemDom"])],2),[[vShow,unref(U)]]),createVNode(_sfc_main$2D,{loading:!v.value},null,8,["loading"]),createBaseVNode("div",{class:"app_selected--todetail flex_between u_select_none cs_pointer",onClick:nt},[_hoisted_2$1u,createVNode(de,{class:"i_icon_more"}),_hoisted_3$1m]),createVNode(Transition,{name:"fade"},{default:withCtx(()=>[unref(y)&&unref(W)?(openBlock(),createElementBlock("div",{key:0,class:"app_selected--todetail-mini flex_between u_select_none cs_pointer",onClick:nt,onMouseenter:Y[0]||(Y[0]=ve=>ne.value=!0),onMouseleave:Y[1]||(Y[1]=ve=>ne.value=!1)},[_hoisted_4$12,createVNode(de,{class:"i_icon_more"})],32)):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{name:"fade"},{default:withCtx(()=>[unref(y)&&unref(W)?(openBlock(),createElementBlock("div",{key:0,class:"app_selected--pause p_center",onClick:withModifiers(ae,["stop"]),onMouseenter:Y[2]||(Y[2]=ve=>ne.value=!0),onMouseleave:Y[3]||(Y[3]=ve=>ne.value=!1)},[withDirectives(createVNode(unref(VdPauseS),{class:"pause-icon"},null,512),[[vShow,!k.value]]),withDirectives(createVNode(unref(VdPlays),{class:"pause-icon"},null,512),[[vShow,k.value]])],40,_hoisted_5$N)):createCommentVNode("",!0)]),_:1}),unref(y)?(openBlock(),createBlock(Teleport,{key:0,to:unref(C)},[createVNode(_sfc_main$1J,{ref:"selectedVideoInfoRef",from:"UgcSeason",info:a.info,video:l.value,tripleData:c.value,relations:r.value,isActive:unref($),isShowComment:unref(U),onUpdateRelations:ot},null,8,["info","video","tripleData","relations","isActive","isShowComment"])],8,["to"])):createCommentVNode("",!0)],46,_hoisted_1$1B)}}});var UgcSeason_vue_vue_type_style_index_0_lang="";const _hoisted_1$1A={key:0,class:"load-error p_center"},_hoisted_2$1t=createBaseVNode("img",{class:"error-img",src:_imports_1,alt:""},null,-1),_hoisted_3$1l=createBaseVNode("p",{class:"text_center mt_lg"},"\u54CE\u5440\uFF01\u597D\u50CF\u52A0\u8F7D\u5931\u8D25\u4E86>.<",-1),_hoisted_4$11=[_hoisted_2$1t,_hoisted_3$1l],_sfc_main$17=defineComponent({__name:"UgcSeason",setup(a){const o=useRoute(),s=ref(null),i=ref(null),l=ref(null),c=ref(null),r=ref(null),u=300,d=500,_=ref(!1),f=ref(!1),m=ref(null),p=ref(0),v=ref(0),g=ref(getIsVisible()),$=ref([]),y=ref([]),B=ref([]),C=ref(null),S=ref(0),E=ref(0),k=computed(()=>-E.value*v.value),b=ref([0,1,2]),V=computed(()=>{const[q,se,Ne]=b.value;return{[q]:0,[se]:1,[Ne]:2}}),A=ref(!1),{msgParent:x}=storeToRefs(useUgcSeasonToolStore()),T=computed(()=>o.name==="UgcSeason");useRoutePageFadeIn(".app_selected--content"),useReportPv({spm_id:SPM_PV.ugcSeason,pageName:"UgcSeason"}),onActivated(()=>{events.emit("pageSpmIdChange",SPM_PV.ugcSeason)});const I=useUgcSeasonStore(),{reportSwitchVideo:R}=I,{rightPanelTab:N,pageInited:w,seekTime:D,pageType:L,isUgcSeason:P,videoInfo:j,cardInfo:O,videoPages:F,curPage:U,curIndex:W,allVideoList:ne,videoSeason:H,videoEpisodes:M,activeItem:ee,fromItem:G,isMainMini:Q,isMainMouseOver:te,isMainHeaderOver:ce,isMouseActive:$e,isShowMiniBtns:we,isMiniPanelHover:_e,isShowComment:ke}=storeToRefs(I);P.value=!1,ne.value=[],M.value=[],F.value=[],N.value="1",w.value=!1,ke.value=!0,watch([y,E],([q,se])=>{ee.value=q[se]||{}},{deep:!0}),watch(ee,(q,se)=>{setMainVideoSize(null),oe.dispatchEvent(new CustomEvent("setAspect",{detail:"unaspect"})),q&&(G.value=se)}),watchEffect(()=>{window.isMiniPlayer=Q.value});const oe=window,ie=oe.nano;oe.ugcSeasonPlayers={},watch(y,q=>{Object.keys(oe.ugcSeasonPlayers).forEach(se=>{se!=="activePlayer"&&q.every(Ne=>String(Ne.cid)!==String(se))&&delete oe.ugcSeasonPlayers[se]})},{deep:!0}),oe.appRequestLogin=()=>requestLogin("videoPlayer"),oe.appRequestFullScreen=q=>{setPlayerFullscreen().then(()=>q())};let ye=null,Te=null;const Ee=()=>{clearTimeout(ye),clearTimeout(Te)},Ve=()=>{Q.value=!0,events.emit("leaveGallery"),messageEvents.emit("closeMessagePanel"),le(),Ee(),ye=setTimeout(()=>{callNative("window/miniMainWindow"),IS_MAC&&Q.value&&(setMiniMainBtnsVisible(we.value),Te=setTimeout(()=>{we.value&&Ge()},1200))},50)},ue=()=>{Ee(),callNative("window/unminiMainWindow")};ugcSeasonEvents.on("miniSelectedPlayer",Ve),ugcSeasonEvents.on("unminiSelectedPlayer",ue);const Oe=()=>{setTimeout(()=>{Q.value?(ue(),allCustomReport({type:"click",spm_info:"main.play-detail.header.mini-eixt"},{msg:JSON.stringify({win_name:"main",is_shortcut:!0})})):(Ve(),allCustomReport({type:"click",spm_info:"main.play-detail.header.mini-enter"},{msg:JSON.stringify({win_name:"main",is_shortcut:!0})}))})};watch(Q,()=>{var q,se,Ne;oe.dispatchEvent(new CustomEvent("setAspect",{detail:"unaspect"})),(Ne=(se=(q=oe.ugcSeasonPlayers)==null?void 0:q.activePlayer)==null?void 0:se.setState)==null||Ne.call(se,{[ie.InternalKind.DmSetting]:{noDmHover:Q.value}})},{immediate:!0}),watch(we,()=>{IS_MAC&&Q.value&&setMiniMainBtnsVisible(we.value)},{immediate:!0}),useIpcListener("window/mainWindowMiniChange",({data:q})=>{Q.value=q,setTimeout(()=>ae())}),useIpcListener("window/mainWindowMouseLeave",()=>te.value=!1),useIpcListener("window/playerWindowMiniChange",({data:q})=>{q&&Q.value&&ue()});const We=ref(!1),Ge=()=>{mainWindowMouseEnter(),We.value=!0,te.value=!0},Ye=()=>We.value=!1;watch([We,te],([q,se])=>{ce.value=!q&&se});let Ke=null;const Xe=()=>{$e.value=!0,Q.value&&!te.value&&Ge(),clearTimeout(Ke),Ke=setTimeout(()=>$e.value=!1,1e3)},He=q=>{if(_.value=!1,B.value=[],y.value=[],$.value=[...ne.value],q===1){E.value=0;const se=$.value.splice(0,3);y.value.push(...se)}else if(q>1){E.value=1;const se=$.value.splice(0,q+1);if(se.length===3)q===3&&B.value.push(se.shift());else if(se.length>3){let Ne=se.length-3;se.length===q&&Ne++;const J=se.splice(0,Ne);B.value.push(...J)}y.value.push(...se)}$.value.length||y.value.length===3?$.value.push({}):y.value.length===2&&y.value.push({}),_.value=!0};ugcSeasonEvents.on("initVideoList",He),(async()=>{const{cid:q,bvid:se,t:Ne}=o.query;if(!se||(D.value=Ne,A.value))return;A.value=!0;let J=0;try{const z=await loadVideoData({bvid:se});j.value=z.View||{},O.value=z.Card||{},H.value=j.value.ugc_season||{},M.value=[],(H.value.sections||[]).forEach(ve=>M.value.push(...ve.episodes));const Y=M.value.findIndex(ve=>j.value.aid===ve.aid);W.value=Y>-1?Y+1:1,F.value=j.value.pages||[];const de=F.value.findIndex(ve=>ve.cid===q);U.value=de>-1?de+1:1,M.value.length?(L.value="ugcSeason",P.value=!0,J=W.value,ne.value=M.value.map((ve,xe)=>(ve.arc||(ve.arc={}),{id:ve.aid,cid:ve.cid,bvid:ve.bvid,duration:ve.arc.duration,pubdate:ve.arc.pubdate,enable_vt:ve.arc.enable_vt,vt_display:ve.arc.vt_display,pic:ve.arc.pic,stat:ve.arc.stat,title:ve.title,owner:j.value.owner,_location:xe}))):(L.value="multiPage",P.value=!1,J=U.value,ne.value=F.value.map((ve,xe)=>({id:j.value.aid,cid:ve.cid,bvid:j.value.bvid,duration:ve.duration,pubdate:j.value.pubdate,enable_vt:j.value.enable_vt,vt_display:j.value.vt_display,pic:j.value.pic,stat:j.value.stat,title:j.value.title,owner:j.value.owner,_location:xe}))),A.value=!1}catch{A.value=!1}He(J)})();const K=debounce$1(async(q,se)=>{if(!f.value&&!(E.value>0&&!$.value.length||ne.value.length===1)){if(f.value=!0,ee.value=y.value[E.value+1]||{},S.value=-v.value,await sleep(u),R(q,se),f.value=!1,await sleep(),E.value>0){const Ne=$.value.shift();if(y.value.push(Ne),y.value.length>3){const J=y.value.shift();B.value.push(J)}b.value.push(b.value.shift()),C.value.append(C.value.firstElementChild)}else E.value=1;S.value=0}},d),X=debounce$1(async(q,se)=>{if(!f.value&&E.value!==0){if(f.value=!0,ee.value=y.value[E.value-1]||{},S.value=v.value,await sleep(u),R(q,se),f.value=!1,await sleep(),B.value.length>0){const Ne=B.value.pop();y.value.unshift(Ne);const J=y.value.pop();$.value.unshift(J),b.value.unshift(b.value.pop()),C.value.prepend(C.value.lastElementChild)}else E.value=0;S.value=0}},d),ae=()=>{if(p.value=m.value.offsetWidth,v.value=m.value.offsetHeight,!v.value){const q=document.querySelector(".app_container");q&&(p.value=q.offsetWidth,v.value=q.offsetHeight)}},me=200;let ge=!0,Ce=0,Fe=0,Le=0;const Be=q=>{const se=Date.now();if(ge=se-Ce>me,Ce=se,IS_MAC){const Ne=q.deltaY>0,J=Fe>0,z=Ne!==J,Y=Math.abs(q.deltaY)>Math.abs(Fe);Fe=q.deltaY,ge||z||Y?(Le++,Le>100&&(Le=100),Le>2&&pe(q.deltaY)):Le=0}else ge&&pe(q.deltaY)},pe=debounce$1(q=>{q<0?X("roll",2):K("roll",1)},300,!0,!1),he=q=>{if(getClosestElement(q.target,".app_selected--item")){const se=getClosestElement(q.target,".cpx-player-hotkey-panel");if(!getClosestElement(q.target,".all-staff")&&!getClosestElement(q.target,".bili-dialog-m")&&!getClosestElement(q.target,".app_selected--cmtwrap")&&!getClosestElement(q.target,".video-desc-wrap.ov_overlay_y")&&!se&&Be(q),!se)return q.stopPropagation(),!1}},Se=q=>{var Ne;const se=m.value.querySelector(".app_selected--shown .cpx-player-video-area");if(se){const J=(Ne=oe.ugcSeasonPlayers)==null?void 0:Ne.activePlayer;J.tooltip.remove("shortcut"),setTimeout(()=>{var z;(z=J.tooltip)==null||z.create({name:"shortcut",target:se,title:q,position:5,duration:1500})})}},be=()=>{document.fullscreenElement||(Q.value&&ue(),setTimeout(()=>{allCustomReport({type:"click",spm_info:"main.main.main-page.maximize"},{msg:JSON.stringify({is_enter:!getIsMaximized(),is_shortcut:!0,win_name:"main"})}),toggleWindowMaximize()}))};oe.toggleWinMaximize=be;let Pe=!1,ze=!1,Je=!1,Ze=!1,ot=!1;const nt=q=>{var ve,xe,Me,Ie;const{target:se,key:Ne,ctrlKey:J,shiftKey:z,altKey:Y,metaKey:de}=q||{};if((se==null?void 0:se.getAttribute("contenteditable"))!=="true"&&!(["INPUT","TEXTAREA"].includes(se==null?void 0:se.tagName)&&se.getAttribute("type")!=="checkbox")&&!(J||Y||de)){if(["ArrowLeft","ArrowRight"].includes(Ne)&&z){const Ae=(ve=oe.ugcSeasonPlayers)==null?void 0:ve.activePlayer,je=(xe=Ae==null?void 0:Ae.getPlaybackRate)==null?void 0:xe.call(Ae);if(je){const Re=["0.5","0.75","1.0","1.25","1.5","1.75","2.0"];let Ue=Re.findIndex(it=>je===+it);Ue===-1&&(Ue=2),Ne==="ArrowLeft"?Ue=Ue>0?Ue-1:0:Ue=Ue<Re.length-1?Ue+1:Re.length-1,Ae.setPlaybackRate(+Re[Ue]),Se(`${Re[Ue]}x\u64AD\u653E`)}return}if(["ArrowUp","ArrowDown"].includes(Ne)){if(z){const Ae=(Me=oe.ugcSeasonPlayers)==null?void 0:Me.activePlayer,je=(Ie=Ae==null?void 0:Ae.getVolume)==null?void 0:Ie.call(Ae);if(isNum(je)){let Re=je;Ne==="ArrowUp"?(Re<.1?Re+=.02:Re+=.1,Re>1&&(Re=1)):(Re<=.1?Re-=.02:Re<.2?Re-=.05:Re-=.1,Re<0&&(Re=0)),Ae.setVolume(Re),Se(Re?`\u97F3\u91CF\uFF1A${Math.round(Re*100)}%`:"\u9759\u97F3")}return}return Pe||(Pe=!0,Ne==="ArrowUp"?X("keyboard",2):K("keyboard",1)),q.stopPropagation(),q.preventDefault(),!1}if(!z){if(Ne==="Escape"){le(),ugcSeasonEvents.emit("hideComment");return}if(/^[wec]$/i.test(Ne)&&Q.value)return q.stopPropagation(),q.preventDefault(),!1;if(/^x$/i.test(Ne)){!Q.value&&!ze&&(ze=!0,ugcSeasonEvents.emit("toggleSelectedInfo"));return}if(/^c$/i.test(Ne)){!Q.value&&!Je&&(Je=!0,ugcSeasonEvents.emit("toggleComment"));return}if(/^v$/i.test(Ne)){!Q.value&&!Ze&&(Ze=!0,fe());return}if(/^s$/i.test(Ne)){if(document.fullscreenElement)return;if(!ot){ot=!0,Oe();return}}}}},rt=q=>{if(["ArrowUp","ArrowDown"].includes(q.key)){Pe=!1;return}if(/^x$/i.test(q.key)){ze=!1;return}if(/^c$/i.test(q.key)){Je=!1;return}if(/^v$/i.test(q.key)){Ze=!1;return}if(/^s$/i.test(q.key)){ot=!1;return}};useIpcListener("window/focusChange",()=>{Pe=ze=Je=Ze=ot=!1});let at=null;useIpcListener("window/fullScreenChange",({data:q})=>{clearInterval(at),at=setInterval(()=>{(q&&document.fullscreenElement||!q&&!document.fullscreenElement)&&(clearInterval(at),ae())})}),useIpcListener("window/visibleChange",({data:q})=>{IS_MAC&&callNativeSync("window/isMinimized")||(g.value=q,!q&&Q.value&&(callNativeSync("config/getBossShortcutHide")||setTimeout(()=>ue(),200)))});const qe={dialogFollowed:s,dialogCoinOperated:i,dialogCollection:l,dialogShare:c,dialogDynShare:r},Qe=Object.keys(qe),et=()=>Qe.some(q=>{var se;return(se=qe[q])==null?void 0:se.value.isShowDialog}),st=q=>{var se;et()||(q==="dialogDynShare"?r.value.show({rid:ee.value.id,type:8}):(se=qe[q])==null||se.value.showDialog())},le=()=>{Qe.forEach(q=>{var se;return(se=qe[q])==null?void 0:se.value.closeDialog()})};ugcSeasonEvents.on("showActionDialog",st),ugcSeasonEvents.on("closeActionDialog",le),watch(ee,()=>le()),provide("hasActiveDialog",et);const fe=()=>{et()?c.value.isShowDialog&&(c.value.copyShareLink(),c.value.closeDialog(),allCustomReport({type:"click",spm_info:"main.play-detail.share.shortcut"},{msg:JSON.stringify({win_name:"main",is_open:!1})})):(st("dialogShare"),allCustomReport({type:"click",spm_info:"main.play-detail.share.shortcut"},{msg:JSON.stringify({win_name:"main",is_open:!0})}))},De=q=>{if(Q.value)return q.preventDefault(),q.stopPropagation(),!1};return onMounted(()=>{ae(),window.addEventListener("resize",ae),document.addEventListener("wheel",he,!0),document.addEventListener("keydown",nt,!0),document.addEventListener("keyup",rt,!0),document.addEventListener("contextmenu",De,!0),setTimeout(()=>x.value=m.value)}),onBeforeUnmount(()=>{Q.value&&ue(),delete oe.ugcSeasonPlayers,ugcSeasonEvents.off("initVideoList",He),ugcSeasonEvents.off("miniSelectedPlayer",Ve),ugcSeasonEvents.off("unminiSelectedPlayer",ue),ugcSeasonEvents.off("showActionDialog",st),ugcSeasonEvents.off("closeActionDialog",le),window.removeEventListener("resize",ae),document.removeEventListener("wheel",he,!0),document.removeEventListener("keydown",nt,!0),document.removeEventListener("keyup",rt,!0),document.removeEventListener("contextmenu",De,!0)}),(q,se)=>{const Ne=resolveComponent("v-button");return openBlock(),createElementBlock("div",{class:normalizeClass(["app_selected app_selected--us i_page_wrapper",{"app_selected--active":unref(we),"app_selected--deactive":!unref(we)}])},[createBaseVNode("div",{class:"app_selected--content i_page_content ov_hidden p_relative",onMouseenter:Ge,onMousemove:Xe,onMouseleave:Ye},[createVNode(_sfc_main$1C,{from:"UgcSeason"}),createVNode(Transition,{name:"fade"},{default:withCtx(()=>[!unref(Q)||unref(we)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["app_selected--btns p_center_y flex_col",{r_md:unref(we),btns_mini:unref(Q)}])},[createVNode(Ne,{"active-shrink":"",class:"mb_sm",title:"\u5207\u6362\u89C6\u9891\uFF08\u9F20\u6807\u6EDA\u8F6E\u5411\u4E0A/\u952E\u76D8\u2191\uFF09",disabled:E.value===0,onClick:se[0]||(se[0]=J=>unref(X)("click",2)),onMouseenter:se[1]||(se[1]=J=>_e.value=!0),onMouseleave:se[2]||(se[2]=J=>_e.value=!1)},{default:withCtx(()=>[createVNode(unref(ArrowUp))]),_:1},8,["disabled"]),createVNode(Ne,{"active-shrink":"",title:"\u5207\u6362\u89C6\u9891\uFF08\u9F20\u6807\u6EDA\u8F6E\u5411\u4E0B/\u952E\u76D8\u2193\uFF09",disabled:$.value.length===0,onClick:se[3]||(se[3]=J=>unref(K)("click",1)),onMouseenter:se[4]||(se[4]=J=>_e.value=!0),onMouseleave:se[5]||(se[5]=J=>_e.value=!1)},{default:withCtx(()=>[createVNode(unref(ArrowDown))]),_:1},8,["disabled"])],2)):createCommentVNode("",!0)]),_:1}),createBaseVNode("div",{ref_key:"selderWrapperRef",ref:m,class:normalizeClass(["app_selected--wrapper ov_hidden bd_1 bc_line_light",{no_drag:!unref(Q)}])},[createBaseVNode("div",{class:normalizeClass(["app_selected--slider min_h_100",{is_transition:f.value}]),style:normalizeStyle({marginTop:unref(k)+"px",transform:S.value?`translateY(${S.value}px)`:""})},[createVNode(_sfc_main$2D,{loading:A.value&&!y.value.length||!_.value},null,8,["loading"]),!A.value&&!y.value.length?(openBlock(),createElementBlock("div",_hoisted_1$1A,_hoisted_4$11)):createCommentVNode("",!0),createBaseVNode("div",{class:"app_selected--items-wrap",ref_key:"selectedItemWrapRef",ref:C},[(openBlock(),createElementBlock(Fragment,null,renderList([0,1,2],J=>createVNode(_sfc_main$18,{key:J,index:J,info:y.value[unref(V)[J]],playingList:y.value,isOnSliding:f.value,width:p.value,height:v.value,activeId:unref(ee).cid,isWinVisiable:g.value,isSelectedPage:unref(T),onPlayerEnded:se[6]||(se[6]=z=>unref(K)("auto",1))},null,8,["index","info","playingList","isOnSliding","width","height","activeId","isWinVisiable","isSelectedPage"])),64))],512)],6)],2),createVNode(_sfc_main$1G,{ref_key:"dialogFollowedRef",ref:s,from:"UgcSeason"},null,512),createVNode(_sfc_main$1F,{ref_key:"dialogCoinOperatedRef",ref:i,from:"UgcSeason"},null,512),createVNode(_sfc_main$1E,{ref_key:"dialogCollectionRef",ref:l,from:"UgcSeason"},null,512),createVNode(_sfc_main$1D,{ref_key:"dialogShareRef",ref:c,from:"UgcSeason"},null,512),createVNode(_sfc_main$2A,{ref_key:"dialogDynShareRef",ref:r,from:"UgcSeason"},null,512)],32)],2)}}});var UpList_vue_vue_type_style_index_0_lang="";const _hoisted_1$1z={key:0,class:"up_list w_100 loading"},_hoisted_2$1s=createBaseVNode("div",{class:"up_list--item_skeleton--icon bd_radius_50"},null,-1),_hoisted_3$1k=createBaseVNode("div",{class:"up_list--item_skeleton--title"},null,-1),_hoisted_4$10=[_hoisted_2$1s,_hoisted_3$1k],_hoisted_5$M={key:1,class:"up_list w_100"},_hoisted_6$G=createBaseVNode("div",{class:"up_list--item--icon is-all bd_radius_50"},null,-1),_hoisted_7$D=createBaseVNode("div",{class:"up_list--item--title"},"\u5168\u90E8\u52A8\u6001",-1),_hoisted_8$C=[_hoisted_6$G,_hoisted_7$D],_hoisted_9$x=["onClick"],_hoisted_10$t={key:0,class:"up_list--item--dot p_absolute bd_radius_50"},_hoisted_11$r={class:"up_list--item--icon bd_radius_50"},_hoisted_12$o={class:"up_list--item--title"},_sfc_main$16=defineComponent({__name:"UpList",props:{items:{type:Array,default:()=>[]},activeIndex:{type:Number,default:-1},loading:{type:Boolean,default:!0}},emits:["change"],setup(a,{emit:o}){const s=a,i=l=>{l!==s.activeIndex&&o("change",l)};return(l,c)=>a.loading?(openBlock(),createElementBlock("div",_hoisted_1$1z,[(openBlock(),createElementBlock(Fragment,null,renderList(20,r=>createBaseVNode("div",{class:"up_list--item_skeleton",key:r},_hoisted_4$10)),64))])):(openBlock(),createElementBlock("div",_hoisted_5$M,[createBaseVNode("div",{class:normalizeClass(["up_list--item flex_row p_relative bd_radius_md cs_pointer",{"is-active":a.activeIndex===-1}]),onClick:c[0]||(c[0]=r=>i(-1))},_hoisted_8$C,2),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.items,(r,u)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["up_list--item flex_row p_relative bd_radius_md cs_pointer",{"is-active":a.activeIndex===u}]),key:u,onClick:d=>i(u)},[r.has_update?(openBlock(),createElementBlock("div",_hoisted_10$t)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_11$r,[createVNode(Avatar,{face:r.face,width:32,height:32},null,8,["face"])]),createBaseVNode("div",_hoisted_12$o,toDisplayString(r.uname),1)],10,_hoisted_9$x))),128))]))}});var LiveListItem_vue_vue_type_style_index_0_lang="";const _hoisted_1$1y={class:"flex_col_center"},_hoisted_2$1r=createBaseVNode("div",{class:"dynamic_live_item--avatar flex_center bd_none"},[createBaseVNode("div",{class:"live-item-avatar skeleton round"})],-1),_hoisted_3$1j={key:0,class:"live-item-name b_text text3 fs_6 flex_center mt_xs mb_0"},_hoisted_4$$=createBaseVNode("div",{class:"skeleton w_75"},"\xA0",-1),_hoisted_5$L=[_hoisted_4$$],_hoisted_6$F={key:0,class:"ml_sm ov_hidden w_100"},_hoisted_7$C=createBaseVNode("h4",{class:"b_text text1 font_regular text_ellipsis my_0"},[createBaseVNode("div",{class:"skeleton w_50 thick"},"\xA0")],-1),_hoisted_8$B=createBaseVNode("div",{class:"live-item-room-tt b_text text3 fs_6 text_ellipsis mb_0 w_100"},[createBaseVNode("div",{class:"skeleton item-sub"},"\xA0")],-1),_hoisted_9$w=[_hoisted_7$C,_hoisted_8$B],_hoisted_10$s={class:"flex_col_center"},_hoisted_11$q={class:"dynamic_live_item--avatar flex_center"},_hoisted_12$n={class:"live-item-avatar"},_hoisted_13$i={key:0,class:"live-item-name b_text text3 fs_6 text_center text_ellipsis mt_xs mb_0"},_hoisted_14$f={key:0,class:"ml_sm ov_hidden"},_hoisted_15$d=["title"],_hoisted_16$c=["title"],_hoisted_17$b=createBaseVNode("div",{class:"p_cover"},null,-1),_hoisted_18$b={class:"live-item-tooltip text1 fs_5 p_relative pe_none"},_hoisted_19$a=createBaseVNode("div",{class:"tooltip-arrow p_center_y"},null,-1),_sfc_main$15=defineComponent({__name:"LiveListItem",props:{isSmall:{type:Boolean,default:!1},liveItem:{type:Object,default:()=>({})},liveLoading:{type:Boolean,default:!1}},setup(a){const o=a,s=computed(()=>{var u;return((u=o.liveItem.user)==null?void 0:u.name)||"--"}),i=computed(()=>{var u;return(u=o.liveItem.user)==null?void 0:u.face}),l=computed(()=>{var u,d;return((d=(u=o.liveItem.room)==null?void 0:u.show)==null?void 0:d.title)||"--"}),c=computed(()=>{var u;return(u=o.liveItem.room)==null?void 0:u.room_id}),r=()=>{c.value&&openLiveRoomWindow(c.value)};return(u,d)=>{const _=resolveComponent("v-dropdown");return openBlock(),createElementBlock("div",{class:normalizeClass(["dynamic_live_item flex_start p_relative",{justify_center:a.isSmall}]),onClick:r},[a.liveLoading?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_1$1y,[_hoisted_2$1r,a.isSmall?(openBlock(),createElementBlock("div",_hoisted_3$1j,_hoisted_5$L)):createCommentVNode("",!0)]),a.isSmall?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_6$F,_hoisted_9$w))],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_10$s,[createBaseVNode("div",_hoisted_11$q,[createBaseVNode("div",_hoisted_12$n,[createVNode(UserAvatar,{class:"online_border_pink",info:{face:unref(i)},isMini:"",isShowLive:"",isOnLine:""},null,8,["info"])])]),a.isSmall?(openBlock(),createElementBlock("p",_hoisted_13$i,toDisplayString(unref(s)),1)):createCommentVNode("",!0)]),a.isSmall?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_14$f,[createBaseVNode("h4",{class:"b_text text1 font_regular text_ellipsis my_xs",title:unref(s)},toDisplayString(unref(s)),9,_hoisted_15$d),createBaseVNode("p",{class:"live-item-room-tt b_text text3 fs_6 text_ellipsis mb_0",title:unref(l)},toDisplayString(unref(l)),9,_hoisted_16$c)])),a.isSmall?(openBlock(),createBlock(_,{key:1,trigger:"hover",classname:"dynamic_live_item--tooltip",placement:"left",offset:20,skidding:-10,wrapperStyle:{zIndex:9}},{content:withCtx(()=>[createBaseVNode("div",_hoisted_18$b,[createTextVNode(toDisplayString(unref(s))+" ",1),_hoisted_19$a])]),default:withCtx(()=>[_hoisted_17$b]),_:1})):createCommentVNode("",!0)],64))],2)}}});var LiveList_vue_vue_type_style_index_0_lang="";const _hoisted_1$1x={class:"dynamic_live--inner bd_radius"},_hoisted_2$1q={class:"px_sm pt_sm"},_hoisted_3$1i={key:0,class:"dynamic_live--item mt_0 b_text text1 text_center"},_hoisted_4$_=createBaseVNode("div",{class:"skeleton thick"},"\xA0",-1),_hoisted_5$K=[_hoisted_4$_],_hoisted_6$E={key:1,class:"dynamic_live--item mt_0 b_text text1 p_relative"},_hoisted_7$B=createBaseVNode("div",{class:"skeleton thick live-long-tt"},"\xA0",-1),_hoisted_8$A=[_hoisted_7$B],_hoisted_9$v=createTextVNode(" \u5173\u6CE8\u76F4\u64AD "),_hoisted_10$r=createBaseVNode("div",{class:"p_cover"},null,-1),_hoisted_11$p=createBaseVNode("div",{class:"live-item-tooltip text1 fs_5 p_relative pe_none"},[createTextVNode(" \u67E5\u770B\u5168\u90E8\u5173\u6CE8\u76F4\u64AD\u95F4 "),createBaseVNode("div",{class:"tooltip-arrow p_center_y"})],-1),_hoisted_12$m=createTextVNode(" \u5173\u6CE8\u76F4\u64AD "),_hoisted_13$h={class:"fs_4 text3 fw_400"},_hoisted_14$e={class:"text3 fs_5 fw_400 p_center_y r_xs flex_end"},_hoisted_15$c=createBaseVNode("span",null,"\u66F4\u591A",-1),_hoisted_16$b={class:"dynamic_live--ups px_sm pb_sm ov_overlay_y auto_hide_scrollbar scrollbar_thin"},_sfc_main$14=defineComponent({__name:"LiveList",props:{isSmall:{type:Boolean,default:!1},liveList:{type:Object,default:()=>({})},liveLoading:{type:Boolean,default:!1}},setup(a){const o=useRoute(),s=useRouter(),i=computed(()=>o.name==="Dynamic"),l=()=>{s.push({name:"HomeLive",query:{allowGoBack:1}})};return(c,r)=>{const u=resolveComponent("v-dropdown");return openBlock(),createElementBlock("div",{class:normalizeClass(["dynamic_live pl_sm p_sticky t_sm u_select_none",{"dynamic_live--small":a.isSmall,"dynamic_live--loading":a.liveLoading}])},[createBaseVNode("div",_hoisted_1$1x,[createBaseVNode("div",_hoisted_2$1q,[a.liveLoading?(openBlock(),createElementBlock(Fragment,{key:0},[a.isSmall?(openBlock(),createElementBlock("h4",_hoisted_3$1i,_hoisted_5$K)):(openBlock(),createElementBlock("h3",_hoisted_6$E,_hoisted_8$A))],64)):(openBlock(),createElementBlock(Fragment,{key:1},[a.isSmall?(openBlock(),createElementBlock("h4",{key:0,class:"dynamic_live--item mt_0 b_text text1 text_center px_0 p_relative",onClick:l},[_hoisted_9$v,a.isSmall&&unref(i)?(openBlock(),createBlock(u,{key:0,trigger:"hover",classname:"dynamic_live_item--tooltip",placement:"left",wrapperStyle:{zIndex:9}},{content:withCtx(()=>[_hoisted_11$p]),default:withCtx(()=>[_hoisted_10$r]),_:1})):createCommentVNode("",!0)])):(openBlock(),createElementBlock("h3",{key:1,class:"dynamic_live--item mt_0 b_text text1 p_relative",title:"\u67E5\u770B\u5168\u90E8\u5173\u6CE8\u76F4\u64AD\u95F4",onClick:l},[_hoisted_12$m,createBaseVNode("span",_hoisted_13$h,"\xB7"+toDisplayString(a.liveList.total),1),createBaseVNode("span",_hoisted_14$e,[_hoisted_15$c,createVNode(unref(IcoArrowRight),{class:"ico-right"})])]))],64))]),createBaseVNode("div",_hoisted_16$b,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.liveList.list||[],d=>(openBlock(),createElementBlock("div",{class:normalizeClass(["dynamic_live--item",{"live-item-sm":a.isSmall}]),key:d.uid},[createVNode(_sfc_main$15,{liveItem:d,liveLoading:a.liveLoading,isSmall:a.isSmall},null,8,["liveItem","liveLoading","isSmall"])],2))),128))])])],2)}}});var FeedFragmentAll_vue_vue_type_style_index_0_lang="";const _hoisted_1$1w=createBaseVNode("div",{class:"feed_fragment--anchor"},null,-1),_hoisted_2$1p={class:"feed_fragment--inner p_relative"},_hoisted_3$1h=createBaseVNode("div",{class:"feed_fragment--loading"},null,-1),_hoisted_4$Z=createBaseVNode("div",{class:"feed_fragment--empty"},[createBaseVNode("img",{src:_imports_0$3}),createBaseVNode("p",null,"\u6CA1\u6709\u4F60\u60F3\u8981\u7684\u5185\u5BB9~")],-1),_hoisted_5$J={class:"feed_fragment--error"},_hoisted_6$D=createBaseVNode("img",{src:_imports_1},null,-1),_hoisted_7$A=createBaseVNode("p",null,"\u5185\u5BB9\u4E0D\u89C1\u4E86\uFF0C\u8BF7\u60A8\u518D\u5237\u65B0\u8BD5\u8BD5",-1),_hoisted_8$z=createTextVNode("\u518D\u8BD5\u4E00\u6B21"),_hoisted_9$u=createBaseVNode("div",{class:"feed_fragment--anchor"},null,-1),_sfc_main$13=defineComponent({__name:"FeedFragmentAll",props:{active:{type:Boolean,default:!0},status:{type:String,default:"initial"},list:{type:Array,default:()=>[]},feedKey:{type:String,default:"id"},itemKey:{type:String,default:"id"},useItemWrapper:{type:Boolean,default:!1},disableScroll:{type:Boolean,default:!1},liveList:{type:Object,default:()=>({})},liveLoading:{type:Boolean,default:!1},isSpace:{type:Boolean,default:!1}},emits:["load-more","refresh"],setup(a,{expose:o,emit:s}){const i=a,{userInfo:l}=storeToRefs(useUserInfoStore()),{isLiveListSmall:c}=storeToRefs(useDynamicStore()),r=computed(()=>{var g;return((g=i.liveList)==null?void 0:g.total)&&l.value.isLogin}),u=(g,$)=>g[i.itemKey]||$,{routePositions:d}=storeToRefs(useRoutePositionsStore()),_=ref(),f=g=>{i.feedKey&&(d.value[i.feedKey]=g.target.scrollTop)},m=ref(null);onMounted(()=>{i.isSpace||useResizeObserver(m.value,g=>{const $=g[0],{width:y}=$.contentRect;c.value=!!y&&y<840})}),watch(()=>i.active,g=>{g&&_.value&&(setTimeout(()=>{const $=d.value[i.feedKey];isNum($)&&(_.value.$el.scrollTop=$)}),dynamicEvents.emit("resetRoutePosition",i.feedKey))},{immediate:!0});function p(){!i.list.length&&!i.useItemWrapper||s("load-more")}function v(){s("refresh")}return o({rootRef:_}),(g,$)=>{const y=resolveComponent("VButton"),B=resolveComponent("Scroller");return openBlock(),createBlock(B,{class:"feed_fragment page_scroller",ref_key:"pageScrollRef",ref:_,disabled:a.disableScroll,active:a.active,onLoadMore:p,onScrollPassive:f},{default:withCtx(()=>[createBaseVNode("div",{class:"feed_fragment--wrapper flex_center w_100",ref_key:"dynamicWrapper",ref:m},[_hoisted_1$1w,createBaseVNode("div",_hoisted_2$1p,[renderSlot(g.$slots,"top"),a.list.length?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:0},[a.status==="loading"?renderSlot(g.$slots,"loading",{key:0},()=>[_hoisted_3$1h]):a.status==="empty"?renderSlot(g.$slots,"empty",{key:1},()=>[_hoisted_4$Z]):a.status==="error"?renderSlot(g.$slots,"error",{key:2},()=>[createBaseVNode("div",_hoisted_5$J,[_hoisted_6$D,_hoisted_7$A,createVNode(y,{type:"pink",size:"large",onClick:v},{default:withCtx(()=>[_hoisted_8$z]),_:1})])]):createCommentVNode("",!0)],64)),a.useItemWrapper?renderSlot(g.$slots,"itemWrapper",{key:1}):(openBlock(!0),createElementBlock(Fragment,{key:2},renderList(a.list,(C,S)=>renderSlot(g.$slots,"item",{key:u(C,S),data:C,index:S})),128)),renderSlot(g.$slots,"bottom")]),unref(r)?(openBlock(),createBlock(_sfc_main$14,{key:0,liveList:a.liveList,liveLoading:a.liveLoading,isSmall:unref(c)},null,8,["liveList","liveLoading","isSmall"])):createCommentVNode("",!0),_hoisted_9$u],512)]),_:3},8,["disabled","active"])}}});var LoginPanel_vue_vue_type_style_index_0_lang="";const _hoisted_1$1v={class:"login_panel flex_col_center bd_radius"},_hoisted_2$1o={key:0,class:"login_panel--img bd_radius_50 mb_sm mt_nsm",src:_imports_0$2},_hoisted_3$1g=["textContent"],_hoisted_4$Y=["textContent"],_hoisted_5$I=createTextVNode("\u767B\u5F55"),_sfc_main$12=defineComponent({__name:"LoginPanel",props:{showAvatar:Boolean,title:{type:String,default:"\u4F60\u8FD8\u672A\u767B\u5F55"},desc:{type:String,default:"\u767B\u5F55\u6CE8\u518C\u89E3\u9501\u66F4\u591A\u7CBE\u5F69\u5185\u5BB9"}},setup(a){const o=()=>{requestLogin("loginPanel.handleLoginClick")};return(s,i)=>{const l=resolveComponent("VButton");return openBlock(),createElementBlock("div",_hoisted_1$1v,[a.showAvatar?(openBlock(),createElementBlock("img",_hoisted_2$1o)):createCommentVNode("",!0),createBaseVNode("div",{class:"login_panel--title",textContent:toDisplayString(a.title)},null,8,_hoisted_3$1g),createBaseVNode("div",{class:"login_panel--desc",textContent:toDisplayString(a.desc)},null,8,_hoisted_4$Y),createVNode(l,{class:"login_panel--btn",size:"large",type:"pink",onClick:o},{default:withCtx(()=>[_hoisted_5$I]),_:1})])}}});var AllFeedFragment_vue_vue_type_style_index_0_lang="";const _hoisted_1$1u={class:"feed_fragment--loading"},_hoisted_2$1n={key:0,class:"dynamic_feed_fragment--login flex_col_center bd_radius"},_sfc_main$11=defineComponent({__name:"AllFeedFragment",props:{pageKey:{type:String,default:""},classKey:{type:String,default:""},active:{type:Boolean,default:!1},hostMid:{type:[Number,String],default:0},scene:{type:String,default:"GENERAL"},disableScroll:{type:Boolean,default:!1},liveList:{type:Object,default:()=>({})},liveLoading:{type:Boolean,default:!1}},setup(a,{expose:o}){const s=a,i="dynamic_feed_fragment",l=computed(()=>({[i]:!0,[s.classKey]:s.classKey,"invisible p_absolute t_0 z_index_n1":!s.active})),c=computed(()=>s.pageKey&&s.classKey?`${s.pageKey}-${s.classKey}`:""),r=ref(null),u=ref(null),d="id_str",{status:_,list:f,reset:m}=useFeedState([]),{userInfo:p}=storeToRefs(useUserInfoStore()),{updateBaseLine:v}=storeToRefs(useDynamicStore()),{changeScroller:g,resetScroller:$}=useScrollToTop("",{watchParam:()=>s.active}),{initialCheck:y}=useScrollTriggerInlinePlayProvideContainer(u,()=>s.active,1e3);provide("scrollContainerRef",u),provide("galleryFixed",s.disableScroll);const B=reactive({current:"",offset:"",page:0}),C=()=>{m(),B.page=0,B.current="",B.offset=""};watch(()=>B.current,x=>{s.scene==="GENERAL"&&!s.hostMid&&(v.value=x)});const S=async()=>{var x;if(_.value!=="empty"&&_.value!=="noMore"&&_.value!=="loading"){_.value="loading";try{const{items:T,has_more:I,offset:R,update_baseline:N}=await getDynamicList({current:B.current,offset:B.offset,page:++B.page,hostMid:s.hostMid,scene:s.scene,isLogin:((x=p.value)==null?void 0:x.isLogin)||!1});T!=null&&T.length&&f.value.push(...T),B.page===1&&N&&(B.current=String(N)),B.offset=String(R),f.value.length?I?_.value="loaded":_.value="noMore":_.value="empty"}catch{_.value="error"}}},E=x=>{B.current&&(B.current=x[d]),f.value.unshift(x)},k=async(x=!0)=>new Promise(T=>{scrollToTop({element:u.value,speed:3,animation:x,onDone:T})});let b=s.hostMid;const V=async(x=!0)=>{b=s.hostMid,await k(x),C(),await S(),y()};watch(()=>s.active,x=>{!x||_.value!=="initial"&&b===s.hostMid||V()}),watch(()=>s.hostMid,()=>{!s.active||b===s.hostMid||V(!1)});const A=(x,T)=>{if(x){f.value=f.value.filter(x);return}f.value.splice(T,1)};return events.on("removeDynamic",({id:x,uid:T})=>{if(x){const I=f.value.findIndex(R=>R.id_str===x);if(I>-1){A(null,I);return}}T&&A(getRemoveAuthorAllDynamicCardFilter(T),-1)}),onMounted(()=>{let x=r.value.rootRef.elRef;s.disableScroll&&(x=getScrollParent(x)),u.value=x,g(getSelectorByClassNames(...Array.from(x.classList))),s.active&&$()}),o({refresh:V,unshift:E}),(x,T)=>(openBlock(),createBlock(_sfc_main$13,{ref_key:"feedFragmentRef",ref:r,class:normalizeClass(unref(l)),list:unref(f),status:unref(_),"item-key":d,"disable-scroll":a.disableScroll,active:a.active,"feed-key":unref(c),liveList:a.liveList,liveLoading:a.liveLoading,isSpace:a.scene==="SPACE",onLoadMore:S,onRefresh:V},createSlots({loading:withCtx(()=>[createBaseVNode("div",_hoisted_1$1u,[(openBlock(),createElementBlock(Fragment,null,renderList(5,I=>createVNode(CardSkeleton,{key:I})),64))])]),top:withCtx(()=>[a.scene==="GENERAL"&&!a.hostMid&&!unref(p).isLogin?(openBlock(),createElementBlock("div",_hoisted_2$1n,[createVNode(_sfc_main$12,{desc:"\u767B\u5F55\u8D26\u53F7\uFF0C\u67E5\u770B\u4F60\u5173\u6CE8\u7684UP\u4E3B\u5185\u5BB9"})])):createCommentVNode("",!0)]),_:2},[a.active?{name:"item",fn:withCtx(({data:I,index:R})=>[createVNode(unref(Card),{data:I,onRemove:N=>A(N,R),onRefresh:V},null,8,["data","onRemove"])])}:void 0,a.disableScroll?{name:"bottom",fn:withCtx(()=>[withDirectives(createVNode(_sfc_main$2d,{class:"p_relative",onTrigger:S},null,512),[[vShow,unref(_)==="loaded"]])])}:void 0]),1032,["class","list","status","disable-scroll","active","feed-key","liveList","liveLoading","isSpace"]))}});var UploadingImg_vue_vue_type_style_index_0_lang="";const _hoisted_1$1t={class:"dynamic_uploading_img"},_hoisted_2$1m={class:"dynamic_uploading_img--progress"},_sfc_main$10=defineComponent({__name:"UploadingImg",props:{src:{type:String,default:""},data:{type:Object,default:()=>({})},progress:{type:Number,default:0}},setup(a){const o=a,s=ref(!1);watch(()=>o.progress,c=>{c===0&&(s.value=!0)},{immediate:!0});const i=computed(()=>{var r;return{backgroundImage:`url(${o.src||formatImg((r=o.data)==null?void 0:r.src,{w:160,h:160})})`}});function l(){o.progress===100&&(s.value=!1)}return(c,r)=>(openBlock(),createElementBlock("div",_hoisted_1$1t,[createBaseVNode("div",{class:"dynamic_uploading_img--pic",style:normalizeStyle(unref(i))},null,4),createVNode(Transition,{name:"fade"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",_hoisted_2$1m,[createBaseVNode("div",{class:"dynamic_uploading_img--progress--stage",style:normalizeStyle({width:`${a.progress}%`}),onTransitionend:l},null,36)],512),[[vShow,s.value]])]),_:1})]))}}),_hoisted_1$1s={width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1l=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.728 4.243a1 1 0 0 0-1.414 0L8.485 7.07 5.657 4.243a1 1 0 0 0-1.414 1.414L7.07 8.486l-2.828 2.828a1 1 0 1 0 1.414 1.414L8.485 9.9l2.829 2.828a1 1 0 1 0 1.414-1.414L9.9 8.485l2.828-2.828a1 1 0 0 0 0-1.414Z",fill:"#fff"},null,-1),_hoisted_3$1f=[_hoisted_2$1l];function render$t(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$1s,_hoisted_3$1f)}var IcoMellowClose={render:render$t},vuedraggable_umd={exports:{}},require$$0=getAugmentedNamespace(vue_runtime_esmBundler);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(a,o){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);o&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),s.push.apply(s,i)}return s}function _objectSpread2(a){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?ownKeys(Object(s),!0).forEach(function(i){_defineProperty(a,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(s,i))})}return a}function _typeof(a){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(o){return typeof o}:_typeof=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(a)}function _defineProperty(a,o,s){return o in a?Object.defineProperty(a,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[o]=s,a}function _extends(){return _extends=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])}return a},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(a,o){if(a==null)return{};var s={},i=Object.keys(a),l,c;for(c=0;c<i.length;c++)l=i[c],!(o.indexOf(l)>=0)&&(s[l]=a[l]);return s}function _objectWithoutProperties(a,o){if(a==null)return{};var s=_objectWithoutPropertiesLoose(a,o),i,l;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(l=0;l<c.length;l++)i=c[l],!(o.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(a,i)||(s[i]=a[i]))}return s}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _iterableToArray(a){if(typeof Symbol!="undefined"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function _unsupportedIterableToArray(a,o){if(!!a){if(typeof a=="string")return _arrayLikeToArray(a,o);var s=Object.prototype.toString.call(a).slice(8,-1);if(s==="Object"&&a.constructor&&(s=a.constructor.name),s==="Map"||s==="Set")return Array.from(a);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray(a,o)}}function _arrayLikeToArray(a,o){(o==null||o>a.length)&&(o=a.length);for(var s=0,i=new Array(o);s<o;s++)i[s]=a[s];return i}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var version="1.14.0";function userAgent(a){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(a)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(a,o,s){a.addEventListener(o,s,!IE11OrLess&&captureMode)}function off(a,o,s){a.removeEventListener(o,s,!IE11OrLess&&captureMode)}function matches(a,o){if(!!o){if(o[0]===">"&&(o=o.substring(1)),a)try{if(a.matches)return a.matches(o);if(a.msMatchesSelector)return a.msMatchesSelector(o);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(o)}catch{return!1}return!1}}function getParentOrHost(a){return a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode}function closest(a,o,s,i){if(a){s=s||document;do{if(o!=null&&(o[0]===">"?a.parentNode===s&&matches(a,o):matches(a,o))||i&&a===s)return a;if(a===s)break}while(a=getParentOrHost(a))}return null}var R_SPACE=/\s+/g;function toggleClass(a,o,s){if(a&&o)if(a.classList)a.classList[s?"add":"remove"](o);else{var i=(" "+a.className+" ").replace(R_SPACE," ").replace(" "+o+" "," ");a.className=(i+(s?" "+o:"")).replace(R_SPACE," ")}}function css(a,o,s){var i=a&&a.style;if(i){if(s===void 0)return document.defaultView&&document.defaultView.getComputedStyle?s=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(s=a.currentStyle),o===void 0?s:s[o];!(o in i)&&o.indexOf("webkit")===-1&&(o="-webkit-"+o),i[o]=s+(typeof s=="string"?"":"px")}}function matrix(a,o){var s="";if(typeof a=="string")s=a;else do{var i=css(a,"transform");i&&i!=="none"&&(s=i+" "+s)}while(!o&&(a=a.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(s)}function find(a,o,s){if(a){var i=a.getElementsByTagName(o),l=0,c=i.length;if(s)for(;l<c;l++)s(i[l],l);return i}return[]}function getWindowScrollingElement(){var a=document.scrollingElement;return a||document.documentElement}function getRect(a,o,s,i,l){if(!(!a.getBoundingClientRect&&a!==window)){var c,r,u,d,_,f,m;if(a!==window&&a.parentNode&&a!==getWindowScrollingElement()?(c=a.getBoundingClientRect(),r=c.top,u=c.left,d=c.bottom,_=c.right,f=c.height,m=c.width):(r=0,u=0,d=window.innerHeight,_=window.innerWidth,f=window.innerHeight,m=window.innerWidth),(o||s)&&a!==window&&(l=l||a.parentNode,!IE11OrLess))do if(l&&l.getBoundingClientRect&&(css(l,"transform")!=="none"||s&&css(l,"position")!=="static")){var p=l.getBoundingClientRect();r-=p.top+parseInt(css(l,"border-top-width")),u-=p.left+parseInt(css(l,"border-left-width")),d=r+c.height,_=u+c.width;break}while(l=l.parentNode);if(i&&a!==window){var v=matrix(l||a),g=v&&v.a,$=v&&v.d;v&&(r/=$,u/=g,m/=g,f/=$,d=r+f,_=u+m)}return{top:r,left:u,bottom:d,right:_,width:m,height:f}}}function isScrolledPast(a,o,s){for(var i=getParentAutoScrollElement(a,!0),l=getRect(a)[o];i;){var c=getRect(i)[s],r=void 0;if(s==="top"||s==="left"?r=l>=c:r=l<=c,!r)return i;if(i===getWindowScrollingElement())break;i=getParentAutoScrollElement(i,!1)}return!1}function getChild(a,o,s,i){for(var l=0,c=0,r=a.children;c<r.length;){if(r[c].style.display!=="none"&&r[c]!==Sortable.ghost&&(i||r[c]!==Sortable.dragged)&&closest(r[c],s.draggable,a,!1)){if(l===o)return r[c];l++}c++}return null}function lastChild(a,o){for(var s=a.lastElementChild;s&&(s===Sortable.ghost||css(s,"display")==="none"||o&&!matches(s,o));)s=s.previousElementSibling;return s||null}function index(a,o){var s=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)a.nodeName.toUpperCase()!=="TEMPLATE"&&a!==Sortable.clone&&(!o||matches(a,o))&&s++;return s}function getRelativeScrollOffset(a){var o=0,s=0,i=getWindowScrollingElement();if(a)do{var l=matrix(a),c=l.a,r=l.d;o+=a.scrollLeft*c,s+=a.scrollTop*r}while(a!==i&&(a=a.parentNode));return[o,s]}function indexOfObject(a,o){for(var s in a)if(!!a.hasOwnProperty(s)){for(var i in o)if(o.hasOwnProperty(i)&&o[i]===a[s][i])return Number(s)}return-1}function getParentAutoScrollElement(a,o){if(!a||!a.getBoundingClientRect)return getWindowScrollingElement();var s=a,i=!1;do if(s.clientWidth<s.scrollWidth||s.clientHeight<s.scrollHeight){var l=css(s);if(s.clientWidth<s.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||s.clientHeight<s.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!s.getBoundingClientRect||s===document.body)return getWindowScrollingElement();if(i||o)return s;i=!0}}while(s=s.parentNode);return getWindowScrollingElement()}function extend(a,o){if(a&&o)for(var s in o)o.hasOwnProperty(s)&&(a[s]=o[s]);return a}function isRectEqual(a,o){return Math.round(a.top)===Math.round(o.top)&&Math.round(a.left)===Math.round(o.left)&&Math.round(a.height)===Math.round(o.height)&&Math.round(a.width)===Math.round(o.width)}var _throttleTimeout;function throttle(a,o){return function(){if(!_throttleTimeout){var s=arguments,i=this;s.length===1?a.call(i,s[0]):a.apply(i,s),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},o)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(a,o,s){a.scrollLeft+=o,a.scrollTop+=s}function clone(a){var o=window.Polymer,s=window.jQuery||window.Zepto;return o&&o.dom?o.dom(a).cloneNode(!0):s?s(a).clone(!0)[0]:a.cloneNode(!0)}function setRect(a,o){css(a,"position","absolute"),css(a,"top",o.top),css(a,"left",o.left),css(a,"width",o.width),css(a,"height",o.height)}function unsetRect(a){css(a,"position",""),css(a,"top",""),css(a,"left",""),css(a,"width",""),css(a,"height","")}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var a=[],o;return{captureAnimationState:function(){if(a=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(l){if(!(css(l,"display")==="none"||l===Sortable.ghost)){a.push({target:l,rect:getRect(l)});var c=_objectSpread2({},a[a.length-1].rect);if(l.thisAnimationDuration){var r=matrix(l,!0);r&&(c.top-=r.f,c.left-=r.e)}l.fromRect=c}})}},addAnimationState:function(i){a.push(i)},removeAnimationState:function(i){a.splice(indexOfObject(a,{target:i}),1)},animateAll:function(i){var l=this;if(!this.options.animation){clearTimeout(o),typeof i=="function"&&i();return}var c=!1,r=0;a.forEach(function(u){var d=0,_=u.target,f=_.fromRect,m=getRect(_),p=_.prevFromRect,v=_.prevToRect,g=u.rect,$=matrix(_,!0);$&&(m.top-=$.f,m.left-=$.e),_.toRect=m,_.thisAnimationDuration&&isRectEqual(p,m)&&!isRectEqual(f,m)&&(g.top-m.top)/(g.left-m.left)===(f.top-m.top)/(f.left-m.left)&&(d=calculateRealTime(g,p,v,l.options)),isRectEqual(m,f)||(_.prevFromRect=f,_.prevToRect=m,d||(d=l.options.animation),l.animate(_,g,m,d)),d&&(c=!0,r=Math.max(r,d),clearTimeout(_.animationResetTimer),_.animationResetTimer=setTimeout(function(){_.animationTime=0,_.prevFromRect=null,_.fromRect=null,_.prevToRect=null,_.thisAnimationDuration=null},d),_.thisAnimationDuration=d)}),clearTimeout(o),c?o=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),a=[]},animate:function(i,l,c,r){if(r){css(i,"transition",""),css(i,"transform","");var u=matrix(this.el),d=u&&u.a,_=u&&u.d,f=(l.left-c.left)/(d||1),m=(l.top-c.top)/(_||1);i.animatingX=!!f,i.animatingY=!!m,css(i,"transform","translate3d("+f+"px,"+m+"px,0)"),this.forRepaintDummy=repaint(i),css(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),css(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){css(i,"transition",""),css(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function repaint(a){return a.offsetWidth}function calculateRealTime(a,o,s,i){return Math.sqrt(Math.pow(o.top-a.top,2)+Math.pow(o.left-a.left,2))/Math.sqrt(Math.pow(o.top-s.top,2)+Math.pow(o.left-s.left,2))*i.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(o){for(var s in defaults)defaults.hasOwnProperty(s)&&!(s in o)&&(o[s]=defaults[s]);plugins.forEach(function(i){if(i.pluginName===o.pluginName)throw"Sortable: Cannot mount plugin ".concat(o.pluginName," more than once")}),plugins.push(o)},pluginEvent:function(o,s,i){var l=this;this.eventCanceled=!1,i.cancel=function(){l.eventCanceled=!0};var c=o+"Global";plugins.forEach(function(r){!s[r.pluginName]||(s[r.pluginName][c]&&s[r.pluginName][c](_objectSpread2({sortable:s},i)),s.options[r.pluginName]&&s[r.pluginName][o]&&s[r.pluginName][o](_objectSpread2({sortable:s},i)))})},initializePlugins:function(o,s,i,l){plugins.forEach(function(u){var d=u.pluginName;if(!(!o.options[d]&&!u.initializeByDefault)){var _=new u(o,s,o.options);_.sortable=o,_.options=o.options,o[d]=_,_extends(i,_.defaults)}});for(var c in o.options)if(!!o.options.hasOwnProperty(c)){var r=this.modifyOption(o,c,o.options[c]);typeof r!="undefined"&&(o.options[c]=r)}},getEventProperties:function(o,s){var i={};return plugins.forEach(function(l){typeof l.eventProperties=="function"&&_extends(i,l.eventProperties.call(s[l.pluginName],o))}),i},modifyOption:function(o,s,i){var l;return plugins.forEach(function(c){!o[c.pluginName]||c.optionListeners&&typeof c.optionListeners[s]=="function"&&(l=c.optionListeners[s].call(o[c.pluginName],i))}),l}};function dispatchEvent(a){var o=a.sortable,s=a.rootEl,i=a.name,l=a.targetEl,c=a.cloneEl,r=a.toEl,u=a.fromEl,d=a.oldIndex,_=a.newIndex,f=a.oldDraggableIndex,m=a.newDraggableIndex,p=a.originalEvent,v=a.putSortable,g=a.extraEventProperties;if(o=o||s&&s[expando],!!o){var $,y=o.options,B="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?$=new CustomEvent(i,{bubbles:!0,cancelable:!0}):($=document.createEvent("Event"),$.initEvent(i,!0,!0)),$.to=r||s,$.from=u||s,$.item=l||s,$.clone=c,$.oldIndex=d,$.newIndex=_,$.oldDraggableIndex=f,$.newDraggableIndex=m,$.originalEvent=p,$.pullMode=v?v.lastPutMode:void 0;var C=_objectSpread2(_objectSpread2({},g),PluginManager.getEventProperties(i,o));for(var S in C)$[S]=C[S];s&&s.dispatchEvent($),y[B]&&y[B].call(o,$)}}var _excluded=["evt"],pluginEvent=function(o,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=i.evt,c=_objectWithoutProperties(i,_excluded);PluginManager.pluginEvent.bind(Sortable)(o,s,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:l,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(u){_dispatchEvent({sortable:s,name:u,originalEvent:l})}},c))};function _dispatchEvent(a){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},a))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document!="undefined",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(!!documentExists){if(IE11OrLess)return!1;var a=document.createElement("x");return a.style.cssText="pointer-events:auto",a.style.pointerEvents==="auto"}}(),_detectDirection=function(o,s){var i=css(o),l=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),c=getChild(o,0,s),r=getChild(o,1,s),u=c&&css(c),d=r&&css(r),_=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+getRect(c).width,f=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+getRect(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(c&&u.float&&u.float!=="none"){var m=u.float==="left"?"left":"right";return r&&(d.clear==="both"||d.clear===m)?"vertical":"horizontal"}return c&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||_>=l&&i[CSSFloatProperty]==="none"||r&&i[CSSFloatProperty]==="none"&&_+f>l)?"vertical":"horizontal"},_dragElInRowColumn=function(o,s,i){var l=i?o.left:o.top,c=i?o.right:o.bottom,r=i?o.width:o.height,u=i?s.left:s.top,d=i?s.right:s.bottom,_=i?s.width:s.height;return l===u||c===d||l+r/2===u+_/2},_detectNearestEmptySortable=function(o,s){var i;return sortables.some(function(l){var c=l[expando].options.emptyInsertThreshold;if(!(!c||lastChild(l))){var r=getRect(l),u=o>=r.left-c&&o<=r.right+c,d=s>=r.top-c&&s<=r.bottom+c;if(u&&d)return i=l}}),i},_prepareGroup=function(o){function s(c,r){return function(u,d,_,f){var m=u.options.group.name&&d.options.group.name&&u.options.group.name===d.options.group.name;if(c==null&&(r||m))return!0;if(c==null||c===!1)return!1;if(r&&c==="clone")return c;if(typeof c=="function")return s(c(u,d,_,f),r)(u,d,_,f);var p=(r?u:d).options.group.name;return c===!0||typeof c=="string"&&c===p||c.join&&c.indexOf(p)>-1}}var i={},l=o.group;(!l||_typeof(l)!="object")&&(l={name:l}),i.name=l.name,i.checkPull=s(l.pull,!0),i.checkPut=s(l.put),i.revertClone=l.revertClone,o.group=i},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&document.addEventListener("click",function(a){if(ignoreNextClick)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(o){if(dragEl){o=o.touches?o.touches[0]:o;var s=_detectNearestEmptySortable(o.clientX,o.clientY);if(s){var i={};for(var l in o)o.hasOwnProperty(l)&&(i[l]=o[l]);i.target=i.rootEl=s,i.preventDefault=void 0,i.stopPropagation=void 0,s[expando]._onDragOver(i)}}},_checkOutsideTargetEl=function(o){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(o.target)};function Sortable(a,o){if(!(a&&a.nodeType&&a.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a,this.options=o=_extends({},o),a[expando]=this;var s={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,u){r.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,a,s);for(var i in s)!(i in o)&&(o[i]=s[i]);_prepareGroup(o);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=o.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),o.supportPointer?on(a,"pointerdown",this._onTapStart):(on(a,"mousedown",this._onTapStart),on(a,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(a,"dragover",this),on(a,"dragenter",this)),sortables.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(o){!this.el.contains(o)&&o!==this.el&&(lastTarget=null)},_getDirection:function(o,s){return typeof this.options.direction=="function"?this.options.direction.call(this,o,s,dragEl):this.options.direction},_onTapStart:function(o){if(!!o.cancelable){var s=this,i=this.el,l=this.options,c=l.preventOnFilter,r=o.type,u=o.touches&&o.touches[0]||o.pointerType&&o.pointerType==="touch"&&o,d=(u||o).target,_=o.target.shadowRoot&&(o.path&&o.path[0]||o.composedPath&&o.composedPath()[0])||d,f=l.filter;if(_saveInputCheckedState(i),!dragEl&&!(/mousedown|pointerdown/.test(r)&&o.button!==0||l.disabled)&&!_.isContentEditable&&!(!this.nativeDraggable&&Safari&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=closest(d,l.draggable,i,!1),!(d&&d.animated)&&lastDownEl!==d)){if(oldIndex=index(d),oldDraggableIndex=index(d,l.draggable),typeof f=="function"){if(f.call(this,o,d,this)){_dispatchEvent({sortable:s,rootEl:_,name:"filter",targetEl:d,toEl:i,fromEl:i}),pluginEvent("filter",s,{evt:o}),c&&o.cancelable&&o.preventDefault();return}}else if(f&&(f=f.split(",").some(function(m){if(m=closest(_,m.trim(),i,!1),m)return _dispatchEvent({sortable:s,rootEl:m,name:"filter",targetEl:d,fromEl:i,toEl:i}),pluginEvent("filter",s,{evt:o}),!0}),f)){c&&o.cancelable&&o.preventDefault();return}l.handle&&!closest(_,l.handle,i,!1)||this._prepareDragStart(o,u,d)}}},_prepareDragStart:function(o,s,i){var l=this,c=l.el,r=l.options,u=c.ownerDocument,d;if(i&&!dragEl&&i.parentNode===c){var _=getRect(i);if(rootEl=c,dragEl=i,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=i,activeGroup=r.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(s||o).clientX,clientY:(s||o).clientY},tapDistanceLeft=tapEvt.clientX-_.left,tapDistanceTop=tapEvt.clientY-_.top,this._lastX=(s||o).clientX,this._lastY=(s||o).clientY,dragEl.style["will-change"]="all",d=function(){if(pluginEvent("delayEnded",l,{evt:o}),Sortable.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!FireFox&&l.nativeDraggable&&(dragEl.draggable=!0),l._triggerDragStart(o,s),_dispatchEvent({sortable:l,name:"choose",originalEvent:o}),toggleClass(dragEl,r.chosenClass,!0)},r.ignore.split(",").forEach(function(f){find(dragEl,f.trim(),_disableDraggable)}),on(u,"dragover",nearestEmptyInsertDetectEvent),on(u,"mousemove",nearestEmptyInsertDetectEvent),on(u,"touchmove",nearestEmptyInsertDetectEvent),on(u,"mouseup",l._onDrop),on(u,"touchend",l._onDrop),on(u,"touchcancel",l._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:o}),r.delay&&(!r.delayOnTouchOnly||s)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(u,"mouseup",l._disableDelayedDrag),on(u,"touchend",l._disableDelayedDrag),on(u,"touchcancel",l._disableDelayedDrag),on(u,"mousemove",l._delayedDragTouchMoveHandler),on(u,"touchmove",l._delayedDragTouchMoveHandler),r.supportPointer&&on(u,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(d,r.delay)}else d()}},_delayedDragTouchMoveHandler:function(o){var s=o.touches?o.touches[0]:o;Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var o=this.el.ownerDocument;off(o,"mouseup",this._disableDelayedDrag),off(o,"touchend",this._disableDelayedDrag),off(o,"touchcancel",this._disableDelayedDrag),off(o,"mousemove",this._delayedDragTouchMoveHandler),off(o,"touchmove",this._delayedDragTouchMoveHandler),off(o,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(o,s){s=s||o.pointerType=="touch"&&o,!this.nativeDraggable||s?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):s?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(o,s){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:s}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var i=this.options;!o&&toggleClass(dragEl,i.dragClass,!1),toggleClass(dragEl,i.ghostClass,!0),Sortable.active=this,o&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:s})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var o=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),s=o;o&&o.shadowRoot&&(o=o.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),o!==s);)s=o;if(dragEl.parentNode[expando]._isOutsideThisEl(o),s)do{if(s[expando]){var i=void 0;if(i=s[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:o,rootEl:s}),i&&!this.options.dragoverBubble)break}o=s}while(s=s.parentNode);_unhideGhostForTarget()}},_onTouchMove:function(o){if(tapEvt){var s=this.options,i=s.fallbackTolerance,l=s.fallbackOffset,c=o.touches?o.touches[0]:o,r=ghostEl&&matrix(ghostEl,!0),u=ghostEl&&r&&r.a,d=ghostEl&&r&&r.d,_=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),f=(c.clientX-tapEvt.clientX+l.x)/(u||1)+(_?_[0]-ghostRelativeParentInitialScroll[0]:0)/(u||1),m=(c.clientY-tapEvt.clientY+l.y)/(d||1)+(_?_[1]-ghostRelativeParentInitialScroll[1]:0)/(d||1);if(!Sortable.active&&!awaitingDragStarted){if(i&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<i)return;this._onDragStart(o,!0)}if(ghostEl){r?(r.e+=f-(lastDx||0),r.f+=m-(lastDy||0)):r={a:1,b:0,c:0,d:1,e:f,f:m};var p="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");css(ghostEl,"webkitTransform",p),css(ghostEl,"mozTransform",p),css(ghostEl,"msTransform",p),css(ghostEl,"transform",p),lastDx=f,lastDy=m,touchEvt=c}o.cancelable&&o.preventDefault()}},_appendGhost:function(){if(!ghostEl){var o=this.options.fallbackOnBody?document.body:rootEl,s=getRect(dragEl,!0,PositionGhostAbsolutely,!0,o),i=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=o;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),s.top+=ghostRelativeParent.scrollTop,s.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,i.ghostClass,!1),toggleClass(ghostEl,i.fallbackClass,!0),toggleClass(ghostEl,i.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",s.top),css(ghostEl,"left",s.left),css(ghostEl,"width",s.width),css(ghostEl,"height",s.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,o.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(o,s){var i=this,l=o.dataTransfer,c=i.options;if(pluginEvent("dragStart",this,{evt:o}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),i.cloneId=_nextTick(function(){pluginEvent("clone",i),!Sortable.eventCanceled&&(i.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),i._hideClone(),_dispatchEvent({sortable:i,name:"clone"}))}),!s&&toggleClass(dragEl,c.dragClass,!0),s?(ignoreNextClick=!0,i._loopId=setInterval(i._emulateDragOver,50)):(off(document,"mouseup",i._onDrop),off(document,"touchend",i._onDrop),off(document,"touchcancel",i._onDrop),l&&(l.effectAllowed="move",c.setData&&c.setData.call(i,l,dragEl)),on(document,"drop",i),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,i._dragStartId=_nextTick(i._dragStarted.bind(i,s,o)),on(document,"selectstart",i),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(o){var s=this.el,i=o.target,l,c,r,u=this.options,d=u.group,_=Sortable.active,f=activeGroup===d,m=u.sort,p=putSortable||_,v,g=this,$=!1;if(_silent)return;function y(j,O){pluginEvent(j,g,_objectSpread2({evt:o,isOwner:f,axis:v?"vertical":"horizontal",revert:r,dragRect:l,targetRect:c,canSort:m,fromSortable:p,target:i,completed:C,onMove:function(U,W){return _onMove(rootEl,s,dragEl,l,U,getRect(U),o,W)},changed:S},O))}function B(){y("dragOverAnimationCapture"),g.captureAnimationState(),g!==p&&p.captureAnimationState()}function C(j){return y("dragOverCompleted",{insertion:j}),j&&(f?_._hideClone():_._showClone(g),g!==p&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:_.options.ghostClass,!1),toggleClass(dragEl,u.ghostClass,!0)),putSortable!==g&&g!==Sortable.active?putSortable=g:g===Sortable.active&&putSortable&&(putSortable=null),p===g&&(g._ignoreWhileAnimating=i),g.animateAll(function(){y("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(i===dragEl&&!dragEl.animated||i===s&&!i.animated)&&(lastTarget=null),!u.dragoverBubble&&!o.rootEl&&i!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(o.target),!j&&nearestEmptyInsertDetectEvent(o)),!u.dragoverBubble&&o.stopPropagation&&o.stopPropagation(),$=!0}function S(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,u.draggable),_dispatchEvent({sortable:g,name:"change",toEl:s,newIndex,newDraggableIndex,originalEvent:o})}if(o.preventDefault!==void 0&&o.cancelable&&o.preventDefault(),i=closest(i,u.draggable,s,!0),y("dragOver"),Sortable.eventCanceled)return $;if(dragEl.contains(o.target)||i.animated&&i.animatingX&&i.animatingY||g._ignoreWhileAnimating===i)return C(!1);if(ignoreNextClick=!1,_&&!u.disabled&&(f?m||(r=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,_,dragEl,o))&&d.checkPut(this,_,dragEl,o))){if(v=this._getDirection(o,i)==="vertical",l=getRect(dragEl),y("dragOverValid"),Sortable.eventCanceled)return $;if(r)return parentEl=rootEl,B(),this._hideClone(),y("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),C(!0);var E=lastChild(s,u.draggable);if(!E||_ghostIsLast(o,v,this)&&!E.animated){if(E===dragEl)return C(!1);if(E&&s===o.target&&(i=E),i&&(c=getRect(i)),_onMove(rootEl,s,dragEl,l,i,c,o,!!i)!==!1)return B(),s.appendChild(dragEl),parentEl=s,S(),C(!0)}else if(E&&_ghostIsFirst(o,v,this)){var k=getChild(s,0,u,!0);if(k===dragEl)return C(!1);if(i=k,c=getRect(i),_onMove(rootEl,s,dragEl,l,i,c,o,!1)!==!1)return B(),s.insertBefore(dragEl,k),parentEl=s,S(),C(!0)}else if(i.parentNode===s){c=getRect(i);var b=0,V,A=dragEl.parentNode!==s,x=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||l,i.animated&&i.toRect||c,v),T=v?"top":"left",I=isScrolledPast(i,"top","top")||isScrolledPast(dragEl,"top","top"),R=I?I.scrollTop:void 0;lastTarget!==i&&(V=c[T],pastFirstInvertThresh=!1,isCircumstantialInvert=!x&&u.invertSwap||A),b=_getSwapDirection(o,i,c,v,x?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,isCircumstantialInvert,lastTarget===i);var N;if(b!==0){var w=index(dragEl);do w-=b,N=parentEl.children[w];while(N&&(css(N,"display")==="none"||N===ghostEl))}if(b===0||N===i)return C(!1);lastTarget=i,lastDirection=b;var D=i.nextElementSibling,L=!1;L=b===1;var P=_onMove(rootEl,s,dragEl,l,i,c,o,L);if(P!==!1)return(P===1||P===-1)&&(L=P===1),_silent=!0,setTimeout(_unsilent,30),B(),L&&!D?s.appendChild(dragEl):i.parentNode.insertBefore(dragEl,L?D:i),I&&scrollBy(I,0,R-I.scrollTop),parentEl=dragEl.parentNode,V!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(V-getRect(i)[T])),S(),C(!0)}if(s.contains(dragEl))return C(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var o=this.el.ownerDocument;off(o,"mouseup",this._onDrop),off(o,"touchend",this._onDrop),off(o,"pointerup",this._onDrop),off(o,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(o){var s=this.el,i=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,i.draggable),pluginEvent("drop",this,{evt:o}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,i.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(s,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),o&&(moved&&(o.cancelable&&o.preventDefault(),!i.dropBubble&&o.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:o}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:o}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:o}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:o}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:o})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:o}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:o})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:o}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(o){o.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(o){switch(o.type){case"drop":case"dragend":this._onDrop(o);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(o),_globalDragOver(o));break;case"selectstart":o.preventDefault();break}},toArray:function(){for(var o=[],s,i=this.el.children,l=0,c=i.length,r=this.options;l<c;l++)s=i[l],closest(s,r.draggable,this.el,!1)&&o.push(s.getAttribute(r.dataIdAttr)||_generateId(s));return o},sort:function(o,s){var i={},l=this.el;this.toArray().forEach(function(c,r){var u=l.children[r];closest(u,this.options.draggable,l,!1)&&(i[c]=u)},this),s&&this.captureAnimationState(),o.forEach(function(c){i[c]&&(l.removeChild(i[c]),l.appendChild(i[c]))}),s&&this.animateAll()},save:function(){var o=this.options.store;o&&o.set&&o.set(this)},closest:function(o,s){return closest(o,s||this.options.draggable,this.el,!1)},option:function(o,s){var i=this.options;if(s===void 0)return i[o];var l=PluginManager.modifyOption(this,o,s);typeof l!="undefined"?i[o]=l:i[o]=s,o==="group"&&_prepareGroup(i)},destroy:function(){pluginEvent("destroy",this);var o=this.el;o[expando]=null,off(o,"mousedown",this._onTapStart),off(o,"touchstart",this._onTapStart),off(o,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(o,"dragover",this),off(o,"dragenter",this)),Array.prototype.forEach.call(o.querySelectorAll("[draggable]"),function(s){s.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=o=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(o){if(o.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault()}function _onMove(a,o,s,i,l,c,r,u){var d,_=a[expando],f=_.options.onMove,m;return window.CustomEvent&&!IE11OrLess&&!Edge?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=o,d.from=a,d.dragged=s,d.draggedRect=i,d.related=l||o,d.relatedRect=c||getRect(o),d.willInsertAfter=u,d.originalEvent=r,a.dispatchEvent(d),f&&(m=f.call(_,d,r)),m}function _disableDraggable(a){a.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(a,o,s){var i=getRect(getChild(s.el,0,s.options,!0)),l=10;return o?a.clientX<i.left-l||a.clientY<i.top&&a.clientX<i.right:a.clientY<i.top-l||a.clientY<i.bottom&&a.clientX<i.left}function _ghostIsLast(a,o,s){var i=getRect(lastChild(s.el,s.options.draggable)),l=10;return o?a.clientX>i.right+l||a.clientX<=i.right&&a.clientY>i.bottom&&a.clientX>=i.left:a.clientX>i.right&&a.clientY>i.top||a.clientX<=i.right&&a.clientY>i.bottom+l}function _getSwapDirection(a,o,s,i,l,c,r,u){var d=i?a.clientY:a.clientX,_=i?s.height:s.width,f=i?s.top:s.left,m=i?s.bottom:s.right,p=!1;if(!r){if(u&&targetMoveDistance<_*l){if(!pastFirstInvertThresh&&(lastDirection===1?d>f+_*c/2:d<m-_*c/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)p=!0;else if(lastDirection===1?d<f+targetMoveDistance:d>m-targetMoveDistance)return-lastDirection}else if(d>f+_*(1-l)/2&&d<m-_*(1-l)/2)return _getInsertDirection(o)}return p=p||r,p&&(d<f+_*c/2||d>m-_*c/2)?d>f+_/2?1:-1:0}function _getInsertDirection(a){return index(dragEl)<index(a)?1:-1}function _generateId(a){for(var o=a.tagName+a.className+a.src+a.href+a.textContent,s=o.length,i=0;s--;)i+=o.charCodeAt(s);return i.toString(36)}function _saveInputCheckedState(a){savedInputChecked.length=0;for(var o=a.getElementsByTagName("input"),s=o.length;s--;){var i=o[s];i.checked&&savedInputChecked.push(i)}}function _nextTick(a){return setTimeout(a,0)}function _cancelNextTick(a){return clearTimeout(a)}documentExists&&on(document,"touchmove",function(a){(Sortable.active||awaitingDragStarted)&&a.cancelable&&a.preventDefault()});Sortable.utils={on,off,css,find,is:function(o,s){return!!closest(o,s,o,!1)},extend,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild};Sortable.get=function(a){return a[expando]};Sortable.mount=function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];o[0].constructor===Array&&(o=o[0]),o.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),i.utils)),PluginManager.mount(i)})};Sortable.create=function(a,o){return new Sortable(a,o)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}return a.prototype={dragStarted:function(s){var i=s.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):i.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(s){var i=s.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(s){this._handleAutoScroll(s,!0)},_handleAutoScroll:function(s,i){var l=this,c=(s.touches?s.touches[0]:s).clientX,r=(s.touches?s.touches[0]:s).clientY,u=document.elementFromPoint(c,r);if(touchEvt$1=s,i||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(s,this.options,u,i);var d=getParentAutoScrollElement(u,!0);scrolling&&(!pointerElemChangedInterval||c!==lastAutoScrollX||r!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var _=getParentAutoScrollElement(document.elementFromPoint(c,r),!0);_!==d&&(d=_,clearAutoScrolls()),autoScroll(s,l.options,_,i)},10),lastAutoScrollX=c,lastAutoScrollY=r)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(u,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(s,this.options,getParentAutoScrollElement(u,!1),!1)}}},_extends(a,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(a){clearInterval(a.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(a,o,s,i){if(!!o.scroll){var l=(a.touches?a.touches[0]:a).clientX,c=(a.touches?a.touches[0]:a).clientY,r=o.scrollSensitivity,u=o.scrollSpeed,d=getWindowScrollingElement(),_=!1,f;scrollRootEl!==s&&(scrollRootEl=s,clearAutoScrolls(),scrollEl=o.scroll,f=o.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(s,!0)));var m=0,p=scrollEl;do{var v=p,g=getRect(v),$=g.top,y=g.bottom,B=g.left,C=g.right,S=g.width,E=g.height,k=void 0,b=void 0,V=v.scrollWidth,A=v.scrollHeight,x=css(v),T=v.scrollLeft,I=v.scrollTop;v===d?(k=S<V&&(x.overflowX==="auto"||x.overflowX==="scroll"||x.overflowX==="visible"),b=E<A&&(x.overflowY==="auto"||x.overflowY==="scroll"||x.overflowY==="visible")):(k=S<V&&(x.overflowX==="auto"||x.overflowX==="scroll"),b=E<A&&(x.overflowY==="auto"||x.overflowY==="scroll"));var R=k&&(Math.abs(C-l)<=r&&T+S<V)-(Math.abs(B-l)<=r&&!!T),N=b&&(Math.abs(y-c)<=r&&I+E<A)-(Math.abs($-c)<=r&&!!I);if(!autoScrolls[m])for(var w=0;w<=m;w++)autoScrolls[w]||(autoScrolls[w]={});(autoScrolls[m].vx!=R||autoScrolls[m].vy!=N||autoScrolls[m].el!==v)&&(autoScrolls[m].el=v,autoScrolls[m].vx=R,autoScrolls[m].vy=N,clearInterval(autoScrolls[m].pid),(R!=0||N!=0)&&(_=!0,autoScrolls[m].pid=setInterval(function(){i&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var D=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*u:0,L=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*u:0;typeof f=="function"&&f.call(Sortable.dragged.parentNode[expando],L,D,a,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,L,D)}.bind({layer:m}),24))),m++}while(o.bubbleScroll&&p!==d&&(p=getParentAutoScrollElement(p,!1)));scrolling=_}},30),drop=function(o){var s=o.originalEvent,i=o.putSortable,l=o.dragEl,c=o.activeSortable,r=o.dispatchSortableEvent,u=o.hideGhostForTarget,d=o.unhideGhostForTarget;if(!!s){var _=i||c;u();var f=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:s,m=document.elementFromPoint(f.clientX,f.clientY);d(),_&&!_.el.contains(m)&&(r("spill"),this.onSpill({dragEl:l,putSortable:i}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(o){var s=o.oldDraggableIndex;this.startIndex=s},onSpill:function(o){var s=o.dragEl,i=o.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var l=getChild(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(s,l):this.sortable.el.appendChild(s),this.sortable.animateAll(),i&&i.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(o){var s=o.dragEl,i=o.putSortable,l=i||this.sortable;l.captureAnimationState(),s.parentNode&&s.parentNode.removeChild(s),l.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});var lastSwapEl;function SwapPlugin(){function a(){this.defaults={swapClass:"sortable-swap-highlight"}}return a.prototype={dragStart:function(s){var i=s.dragEl;lastSwapEl=i},dragOverValid:function(s){var i=s.completed,l=s.target,c=s.onMove,r=s.activeSortable,u=s.changed,d=s.cancel;if(!!r.options.swap){var _=this.sortable.el,f=this.options;if(l&&l!==_){var m=lastSwapEl;c(l)!==!1?(toggleClass(l,f.swapClass,!0),lastSwapEl=l):lastSwapEl=null,m&&m!==lastSwapEl&&toggleClass(m,f.swapClass,!1)}u(),i(!0),d()}},drop:function(s){var i=s.activeSortable,l=s.putSortable,c=s.dragEl,r=l||this.sortable,u=this.options;lastSwapEl&&toggleClass(lastSwapEl,u.swapClass,!1),lastSwapEl&&(u.swap||l&&l.options.swap)&&c!==lastSwapEl&&(r.captureAnimationState(),r!==i&&i.captureAnimationState(),swapNodes(c,lastSwapEl),r.animateAll(),r!==i&&i.animateAll())},nulling:function(){lastSwapEl=null}},_extends(a,{pluginName:"swap",eventProperties:function(){return{swapItem:lastSwapEl}}})}function swapNodes(a,o){var s=a.parentNode,i=o.parentNode,l,c;!s||!i||s.isEqualNode(o)||i.isEqualNode(a)||(l=index(a),c=index(o),s.isEqualNode(i)&&l<c&&c++,s.insertBefore(o,s.children[l]),i.insertBefore(a,i.children[c]))}var multiDragElements=[],multiDragClones=[],lastMultiDragSelect,multiDragSortable,initialFolding=!1,folding=!1,dragStarted=!1,dragEl$1,clonesFromRect,clonesHidden;function MultiDragPlugin(){function a(o){for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));o.options.supportPointer?on(document,"pointerup",this._deselectMultiDrag):(on(document,"mouseup",this._deselectMultiDrag),on(document,"touchend",this._deselectMultiDrag)),on(document,"keydown",this._checkKeyDown),on(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(l,c){var r="";multiDragElements.length&&multiDragSortable===o?multiDragElements.forEach(function(u,d){r+=(d?", ":"")+u.textContent}):r=c.textContent,l.setData("Text",r)}}}return a.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(s){var i=s.dragEl;dragEl$1=i},delayEnded:function(){this.isMultiDrag=~multiDragElements.indexOf(dragEl$1)},setupClone:function(s){var i=s.sortable,l=s.cancel;if(!!this.isMultiDrag){for(var c=0;c<multiDragElements.length;c++)multiDragClones.push(clone(multiDragElements[c])),multiDragClones[c].sortableIndex=multiDragElements[c].sortableIndex,multiDragClones[c].draggable=!1,multiDragClones[c].style["will-change"]="",toggleClass(multiDragClones[c],this.options.selectedClass,!1),multiDragElements[c]===dragEl$1&&toggleClass(multiDragClones[c],this.options.chosenClass,!1);i._hideClone(),l()}},clone:function(s){var i=s.sortable,l=s.rootEl,c=s.dispatchSortableEvent,r=s.cancel;!this.isMultiDrag||this.options.removeCloneOnHide||multiDragElements.length&&multiDragSortable===i&&(insertMultiDragClones(!0,l),c("clone"),r())},showClone:function(s){var i=s.cloneNowShown,l=s.rootEl,c=s.cancel;!this.isMultiDrag||(insertMultiDragClones(!1,l),multiDragClones.forEach(function(r){css(r,"display","")}),i(),clonesHidden=!1,c())},hideClone:function(s){var i=this;s.sortable;var l=s.cloneNowHidden,c=s.cancel;!this.isMultiDrag||(multiDragClones.forEach(function(r){css(r,"display","none"),i.options.removeCloneOnHide&&r.parentNode&&r.parentNode.removeChild(r)}),l(),clonesHidden=!0,c())},dragStartGlobal:function(s){s.sortable,!this.isMultiDrag&&multiDragSortable&&multiDragSortable.multiDrag._deselectMultiDrag(),multiDragElements.forEach(function(i){i.sortableIndex=index(i)}),multiDragElements=multiDragElements.sort(function(i,l){return i.sortableIndex-l.sortableIndex}),dragStarted=!0},dragStarted:function(s){var i=this,l=s.sortable;if(!!this.isMultiDrag){if(this.options.sort&&(l.captureAnimationState(),this.options.animation)){multiDragElements.forEach(function(r){r!==dragEl$1&&css(r,"position","absolute")});var c=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(r){r!==dragEl$1&&setRect(r,c)}),folding=!0,initialFolding=!0}l.animateAll(function(){folding=!1,initialFolding=!1,i.options.animation&&multiDragElements.forEach(function(r){unsetRect(r)}),i.options.sort&&removeMultiDragElements()})}},dragOver:function(s){var i=s.target,l=s.completed,c=s.cancel;folding&&~multiDragElements.indexOf(i)&&(l(!1),c())},revert:function(s){var i=s.fromSortable,l=s.rootEl,c=s.sortable,r=s.dragRect;multiDragElements.length>1&&(multiDragElements.forEach(function(u){c.addAnimationState({target:u,rect:folding?getRect(u):r}),unsetRect(u),u.fromRect=r,i.removeAnimationState(u)}),folding=!1,insertMultiDragElements(!this.options.removeCloneOnHide,l))},dragOverCompleted:function(s){var i=s.sortable,l=s.isOwner,c=s.insertion,r=s.activeSortable,u=s.parentEl,d=s.putSortable,_=this.options;if(c){if(l&&r._hideClone(),initialFolding=!1,_.animation&&multiDragElements.length>1&&(folding||!l&&!r.options.sort&&!d)){var f=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(p){p!==dragEl$1&&(setRect(p,f),u.appendChild(p))}),folding=!0}if(!l)if(folding||removeMultiDragElements(),multiDragElements.length>1){var m=clonesHidden;r._showClone(i),r.options.animation&&!clonesHidden&&m&&multiDragClones.forEach(function(p){r.addAnimationState({target:p,rect:clonesFromRect}),p.fromRect=clonesFromRect,p.thisAnimationDuration=null})}else r._showClone(i)}},dragOverAnimationCapture:function(s){var i=s.dragRect,l=s.isOwner,c=s.activeSortable;if(multiDragElements.forEach(function(u){u.thisAnimationDuration=null}),c.options.animation&&!l&&c.multiDrag.isMultiDrag){clonesFromRect=_extends({},i);var r=matrix(dragEl$1,!0);clonesFromRect.top-=r.f,clonesFromRect.left-=r.e}},dragOverAnimationComplete:function(){folding&&(folding=!1,removeMultiDragElements())},drop:function(s){var i=s.originalEvent,l=s.rootEl,c=s.parentEl,r=s.sortable,u=s.dispatchSortableEvent,d=s.oldIndex,_=s.putSortable,f=_||this.sortable;if(!!i){var m=this.options,p=c.children;if(!dragStarted)if(m.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),toggleClass(dragEl$1,m.selectedClass,!~multiDragElements.indexOf(dragEl$1)),~multiDragElements.indexOf(dragEl$1))multiDragElements.splice(multiDragElements.indexOf(dragEl$1),1),lastMultiDragSelect=null,dispatchEvent({sortable:r,rootEl:l,name:"deselect",targetEl:dragEl$1,originalEvt:i});else{if(multiDragElements.push(dragEl$1),dispatchEvent({sortable:r,rootEl:l,name:"select",targetEl:dragEl$1,originalEvt:i}),i.shiftKey&&lastMultiDragSelect&&r.el.contains(lastMultiDragSelect)){var v=index(lastMultiDragSelect),g=index(dragEl$1);if(~v&&~g&&v!==g){var $,y;for(g>v?(y=v,$=g):(y=g,$=v+1);y<$;y++)~multiDragElements.indexOf(p[y])||(toggleClass(p[y],m.selectedClass,!0),multiDragElements.push(p[y]),dispatchEvent({sortable:r,rootEl:l,name:"select",targetEl:p[y],originalEvt:i}))}}else lastMultiDragSelect=dragEl$1;multiDragSortable=f}if(dragStarted&&this.isMultiDrag){if(folding=!1,(c[expando].options.sort||c!==l)&&multiDragElements.length>1){var B=getRect(dragEl$1),C=index(dragEl$1,":not(."+this.options.selectedClass+")");if(!initialFolding&&m.animation&&(dragEl$1.thisAnimationDuration=null),f.captureAnimationState(),!initialFolding&&(m.animation&&(dragEl$1.fromRect=B,multiDragElements.forEach(function(E){if(E.thisAnimationDuration=null,E!==dragEl$1){var k=folding?getRect(E):B;E.fromRect=k,f.addAnimationState({target:E,rect:k})}})),removeMultiDragElements(),multiDragElements.forEach(function(E){p[C]?c.insertBefore(E,p[C]):c.appendChild(E),C++}),d===index(dragEl$1))){var S=!1;multiDragElements.forEach(function(E){if(E.sortableIndex!==index(E)){S=!0;return}}),S&&u("update")}multiDragElements.forEach(function(E){unsetRect(E)}),f.animateAll()}multiDragSortable=f}(l===c||_&&_.lastPutMode!=="clone")&&multiDragClones.forEach(function(E){E.parentNode&&E.parentNode.removeChild(E)})}},nullingGlobal:function(){this.isMultiDrag=dragStarted=!1,multiDragClones.length=0},destroyGlobal:function(){this._deselectMultiDrag(),off(document,"pointerup",this._deselectMultiDrag),off(document,"mouseup",this._deselectMultiDrag),off(document,"touchend",this._deselectMultiDrag),off(document,"keydown",this._checkKeyDown),off(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(s){if(!(typeof dragStarted!="undefined"&&dragStarted)&&multiDragSortable===this.sortable&&!(s&&closest(s.target,this.options.draggable,this.sortable.el,!1))&&!(s&&s.button!==0))for(;multiDragElements.length;){var i=multiDragElements[0];toggleClass(i,this.options.selectedClass,!1),multiDragElements.shift(),dispatchEvent({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:i,originalEvt:s})}},_checkKeyDown:function(s){s.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(s){s.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},_extends(a,{pluginName:"multiDrag",utils:{select:function(s){var i=s.parentNode[expando];!i||!i.options.multiDrag||~multiDragElements.indexOf(s)||(multiDragSortable&&multiDragSortable!==i&&(multiDragSortable.multiDrag._deselectMultiDrag(),multiDragSortable=i),toggleClass(s,i.options.selectedClass,!0),multiDragElements.push(s))},deselect:function(s){var i=s.parentNode[expando],l=multiDragElements.indexOf(s);!i||!i.options.multiDrag||!~l||(toggleClass(s,i.options.selectedClass,!1),multiDragElements.splice(l,1))}},eventProperties:function(){var s=this,i=[],l=[];return multiDragElements.forEach(function(c){i.push({multiDragElement:c,index:c.sortableIndex});var r;folding&&c!==dragEl$1?r=-1:folding?r=index(c,":not(."+s.options.selectedClass+")"):r=index(c),l.push({multiDragElement:c,index:r})}),{items:_toConsumableArray(multiDragElements),clones:[].concat(multiDragClones),oldIndicies:i,newIndicies:l}},optionListeners:{multiDragKey:function(s){return s=s.toLowerCase(),s==="ctrl"?s="Control":s.length>1&&(s=s.charAt(0).toUpperCase()+s.substr(1)),s}}})}function insertMultiDragElements(a,o){multiDragElements.forEach(function(s,i){var l=o.children[s.sortableIndex+(a?Number(i):0)];l?o.insertBefore(s,l):o.appendChild(s)})}function insertMultiDragClones(a,o){multiDragClones.forEach(function(s,i){var l=o.children[s.sortableIndex+(a?Number(i):0)];l?o.insertBefore(s,l):o.appendChild(s)})}function removeMultiDragElements(){multiDragElements.forEach(function(a){a!==dragEl$1&&a.parentNode&&a.parentNode.removeChild(a)})}Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var sortable_esm=Object.freeze(Object.defineProperty({__proto__:null,default:Sortable,MultiDrag:MultiDragPlugin,Sortable,Swap:SwapPlugin},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(sortable_esm);(function(a,o){(function(i,l){a.exports=l(require$$0,require$$1)})(typeof self!="undefined"?self:commonjsGlobal,function(s,i){return function(l){var c={};function r(u){if(c[u])return c[u].exports;var d=c[u]={i:u,l:!1,exports:{}};return l[u].call(d.exports,d,d.exports,r),d.l=!0,d.exports}return r.m=l,r.c=c,r.d=function(u,d,_){r.o(u,d)||Object.defineProperty(u,d,{enumerable:!0,get:_})},r.r=function(u){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},r.t=function(u,d){if(d&1&&(u=r(u)),d&8||d&4&&typeof u=="object"&&u&&u.__esModule)return u;var _=Object.create(null);if(r.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:u}),d&2&&typeof u!="string")for(var f in u)r.d(_,f,function(m){return u[m]}.bind(null,f));return _},r.n=function(u){var d=u&&u.__esModule?function(){return u.default}:function(){return u};return r.d(d,"a",d),d},r.o=function(u,d){return Object.prototype.hasOwnProperty.call(u,d)},r.p="",r(r.s="fb15")}({"00ee":function(l,c,r){var u=r("b622"),d=u("toStringTag"),_={};_[d]="z",l.exports=String(_)==="[object z]"},"0366":function(l,c,r){var u=r("1c0b");l.exports=function(d,_,f){if(u(d),_===void 0)return d;switch(f){case 0:return function(){return d.call(_)};case 1:return function(m){return d.call(_,m)};case 2:return function(m,p){return d.call(_,m,p)};case 3:return function(m,p,v){return d.call(_,m,p,v)}}return function(){return d.apply(_,arguments)}}},"057f":function(l,c,r){var u=r("fc6a"),d=r("241c").f,_={}.toString,f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],m=function(p){try{return d(p)}catch{return f.slice()}};l.exports.f=function(v){return f&&_.call(v)=="[object Window]"?m(v):d(u(v))}},"06cf":function(l,c,r){var u=r("83ab"),d=r("d1e7"),_=r("5c6c"),f=r("fc6a"),m=r("c04e"),p=r("5135"),v=r("0cfb"),g=Object.getOwnPropertyDescriptor;c.f=u?g:function(y,B){if(y=f(y),B=m(B,!0),v)try{return g(y,B)}catch{}if(p(y,B))return _(!d.f.call(y,B),y[B])}},"0cfb":function(l,c,r){var u=r("83ab"),d=r("d039"),_=r("cc12");l.exports=!u&&!d(function(){return Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(l,c,r){var u=r("23e7"),d=r("d58f").left,_=r("a640"),f=r("ae40"),m=_("reduce"),p=f("reduce",{1:0});u({target:"Array",proto:!0,forced:!m||!p},{reduce:function(g){return d(this,g,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(l,c,r){var u=r("c6b6"),d=r("9263");l.exports=function(_,f){var m=_.exec;if(typeof m=="function"){var p=m.call(_,f);if(typeof p!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return p}if(u(_)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return d.call(_,f)}},"159b":function(l,c,r){var u=r("da84"),d=r("fdbc"),_=r("17c2"),f=r("9112");for(var m in d){var p=u[m],v=p&&p.prototype;if(v&&v.forEach!==_)try{f(v,"forEach",_)}catch{v.forEach=_}}},"17c2":function(l,c,r){var u=r("b727").forEach,d=r("a640"),_=r("ae40"),f=d("forEach"),m=_("forEach");l.exports=!f||!m?function(v){return u(this,v,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(l,c,r){var u=r("d066");l.exports=u("document","documentElement")},"1c0b":function(l,c){l.exports=function(r){if(typeof r!="function")throw TypeError(String(r)+" is not a function");return r}},"1c7e":function(l,c,r){var u=r("b622"),d=u("iterator"),_=!1;try{var f=0,m={next:function(){return{done:!!f++}},return:function(){_=!0}};m[d]=function(){return this},Array.from(m,function(){throw 2})}catch{}l.exports=function(p,v){if(!v&&!_)return!1;var g=!1;try{var $={};$[d]=function(){return{next:function(){return{done:g=!0}}}},p($)}catch{}return g}},"1d80":function(l,c){l.exports=function(r){if(r==null)throw TypeError("Can't call method on "+r);return r}},"1dde":function(l,c,r){var u=r("d039"),d=r("b622"),_=r("2d00"),f=d("species");l.exports=function(m){return _>=51||!u(function(){var p=[],v=p.constructor={};return v[f]=function(){return{foo:1}},p[m](Boolean).foo!==1})}},"23cb":function(l,c,r){var u=r("a691"),d=Math.max,_=Math.min;l.exports=function(f,m){var p=u(f);return p<0?d(p+m,0):_(p,m)}},"23e7":function(l,c,r){var u=r("da84"),d=r("06cf").f,_=r("9112"),f=r("6eeb"),m=r("ce4e"),p=r("e893"),v=r("94ca");l.exports=function(g,$){var y=g.target,B=g.global,C=g.stat,S,E,k,b,V,A;if(B?E=u:C?E=u[y]||m(y,{}):E=(u[y]||{}).prototype,E)for(k in $){if(V=$[k],g.noTargetGet?(A=d(E,k),b=A&&A.value):b=E[k],S=v(B?k:y+(C?".":"#")+k,g.forced),!S&&b!==void 0){if(typeof V==typeof b)continue;p(V,b)}(g.sham||b&&b.sham)&&_(V,"sham",!0),f(E,k,V,g)}}},"241c":function(l,c,r){var u=r("ca84"),d=r("7839"),_=d.concat("length","prototype");c.f=Object.getOwnPropertyNames||function(m){return u(m,_)}},"25f0":function(l,c,r){var u=r("6eeb"),d=r("825a"),_=r("d039"),f=r("ad6d"),m="toString",p=RegExp.prototype,v=p[m],g=_(function(){return v.call({source:"a",flags:"b"})!="/a/b"}),$=v.name!=m;(g||$)&&u(RegExp.prototype,m,function(){var B=d(this),C=String(B.source),S=B.flags,E=String(S===void 0&&B instanceof RegExp&&!("flags"in p)?f.call(B):S);return"/"+C+"/"+E},{unsafe:!0})},"2ca0":function(l,c,r){var u=r("23e7"),d=r("06cf").f,_=r("50c4"),f=r("5a34"),m=r("1d80"),p=r("ab13"),v=r("c430"),g="".startsWith,$=Math.min,y=p("startsWith"),B=!v&&!y&&!!function(){var C=d(String.prototype,"startsWith");return C&&!C.writable}();u({target:"String",proto:!0,forced:!B&&!y},{startsWith:function(S){var E=String(m(this));f(S);var k=_($(arguments.length>1?arguments[1]:void 0,E.length)),b=String(S);return g?g.call(E,b,k):E.slice(k,k+b.length)===b}})},"2d00":function(l,c,r){var u=r("da84"),d=r("342f"),_=u.process,f=_&&_.versions,m=f&&f.v8,p,v;m?(p=m.split("."),v=p[0]+p[1]):d&&(p=d.match(/Edge\/(\d+)/),(!p||p[1]>=74)&&(p=d.match(/Chrome\/(\d+)/),p&&(v=p[1]))),l.exports=v&&+v},"342f":function(l,c,r){var u=r("d066");l.exports=u("navigator","userAgent")||""},"35a1":function(l,c,r){var u=r("f5df"),d=r("3f8c"),_=r("b622"),f=_("iterator");l.exports=function(m){if(m!=null)return m[f]||m["@@iterator"]||d[u(m)]}},"37e8":function(l,c,r){var u=r("83ab"),d=r("9bf2"),_=r("825a"),f=r("df75");l.exports=u?Object.defineProperties:function(p,v){_(p);for(var g=f(v),$=g.length,y=0,B;$>y;)d.f(p,B=g[y++],v[B]);return p}},"3bbe":function(l,c,r){var u=r("861d");l.exports=function(d){if(!u(d)&&d!==null)throw TypeError("Can't set "+String(d)+" as a prototype");return d}},"3ca3":function(l,c,r){var u=r("6547").charAt,d=r("69f3"),_=r("7dd0"),f="String Iterator",m=d.set,p=d.getterFor(f);_(String,"String",function(v){m(this,{type:f,string:String(v),index:0})},function(){var g=p(this),$=g.string,y=g.index,B;return y>=$.length?{value:void 0,done:!0}:(B=u($,y),g.index+=B.length,{value:B,done:!1})})},"3f8c":function(l,c){l.exports={}},4160:function(l,c,r){var u=r("23e7"),d=r("17c2");u({target:"Array",proto:!0,forced:[].forEach!=d},{forEach:d})},"428f":function(l,c,r){var u=r("da84");l.exports=u},"44ad":function(l,c,r){var u=r("d039"),d=r("c6b6"),_="".split;l.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(f){return d(f)=="String"?_.call(f,""):Object(f)}:Object},"44d2":function(l,c,r){var u=r("b622"),d=r("7c73"),_=r("9bf2"),f=u("unscopables"),m=Array.prototype;m[f]==null&&_.f(m,f,{configurable:!0,value:d(null)}),l.exports=function(p){m[f][p]=!0}},"44e7":function(l,c,r){var u=r("861d"),d=r("c6b6"),_=r("b622"),f=_("match");l.exports=function(m){var p;return u(m)&&((p=m[f])!==void 0?!!p:d(m)=="RegExp")}},4930:function(l,c,r){var u=r("d039");l.exports=!!Object.getOwnPropertySymbols&&!u(function(){return!String(Symbol())})},"4d64":function(l,c,r){var u=r("fc6a"),d=r("50c4"),_=r("23cb"),f=function(m){return function(p,v,g){var $=u(p),y=d($.length),B=_(g,y),C;if(m&&v!=v){for(;y>B;)if(C=$[B++],C!=C)return!0}else for(;y>B;B++)if((m||B in $)&&$[B]===v)return m||B||0;return!m&&-1}};l.exports={includes:f(!0),indexOf:f(!1)}},"4de4":function(l,c,r){var u=r("23e7"),d=r("b727").filter,_=r("1dde"),f=r("ae40"),m=_("filter"),p=f("filter");u({target:"Array",proto:!0,forced:!m||!p},{filter:function(g){return d(this,g,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(l,c,r){var u=r("0366"),d=r("7b0b"),_=r("9bdd"),f=r("e95a"),m=r("50c4"),p=r("8418"),v=r("35a1");l.exports=function($){var y=d($),B=typeof this=="function"?this:Array,C=arguments.length,S=C>1?arguments[1]:void 0,E=S!==void 0,k=v(y),b=0,V,A,x,T,I,R;if(E&&(S=u(S,C>2?arguments[2]:void 0,2)),k!=null&&!(B==Array&&f(k)))for(T=k.call(y),I=T.next,A=new B;!(x=I.call(T)).done;b++)R=E?_(T,S,[x.value,b],!0):x.value,p(A,b,R);else for(V=m(y.length),A=new B(V);V>b;b++)R=E?S(y[b],b):y[b],p(A,b,R);return A.length=b,A}},"4fad":function(l,c,r){var u=r("23e7"),d=r("6f53").entries;u({target:"Object",stat:!0},{entries:function(f){return d(f)}})},"50c4":function(l,c,r){var u=r("a691"),d=Math.min;l.exports=function(_){return _>0?d(u(_),9007199254740991):0}},5135:function(l,c){var r={}.hasOwnProperty;l.exports=function(u,d){return r.call(u,d)}},5319:function(l,c,r){var u=r("d784"),d=r("825a"),_=r("7b0b"),f=r("50c4"),m=r("a691"),p=r("1d80"),v=r("8aa5"),g=r("14c3"),$=Math.max,y=Math.min,B=Math.floor,C=/\$([$&'`]|\d\d?|<[^>]*>)/g,S=/\$([$&'`]|\d\d?)/g,E=function(k){return k===void 0?k:String(k)};u("replace",2,function(k,b,V,A){var x=A.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,T=A.REPLACE_KEEPS_$0,I=x?"$":"$0";return[function(w,D){var L=p(this),P=w==null?void 0:w[k];return P!==void 0?P.call(w,L,D):b.call(String(L),w,D)},function(N,w){if(!x&&T||typeof w=="string"&&w.indexOf(I)===-1){var D=V(b,N,this,w);if(D.done)return D.value}var L=d(N),P=String(this),j=typeof w=="function";j||(w=String(w));var O=L.global;if(O){var F=L.unicode;L.lastIndex=0}for(var U=[];;){var W=g(L,P);if(W===null||(U.push(W),!O))break;var ne=String(W[0]);ne===""&&(L.lastIndex=v(P,f(L.lastIndex),F))}for(var H="",M=0,ee=0;ee<U.length;ee++){W=U[ee];for(var G=String(W[0]),Q=$(y(m(W.index),P.length),0),te=[],ce=1;ce<W.length;ce++)te.push(E(W[ce]));var $e=W.groups;if(j){var we=[G].concat(te,Q,P);$e!==void 0&&we.push($e);var _e=String(w.apply(void 0,we))}else _e=R(G,P,Q,te,$e,w);Q>=M&&(H+=P.slice(M,Q)+_e,M=Q+G.length)}return H+P.slice(M)}];function R(N,w,D,L,P,j){var O=D+N.length,F=L.length,U=S;return P!==void 0&&(P=_(P),U=C),b.call(j,U,function(W,ne){var H;switch(ne.charAt(0)){case"$":return"$";case"&":return N;case"`":return w.slice(0,D);case"'":return w.slice(O);case"<":H=P[ne.slice(1,-1)];break;default:var M=+ne;if(M===0)return W;if(M>F){var ee=B(M/10);return ee===0?W:ee<=F?L[ee-1]===void 0?ne.charAt(1):L[ee-1]+ne.charAt(1):W}H=L[M-1]}return H===void 0?"":H})}})},5692:function(l,c,r){var u=r("c430"),d=r("c6cd");(l.exports=function(_,f){return d[_]||(d[_]=f!==void 0?f:{})})("versions",[]).push({version:"3.6.5",mode:u?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(l,c,r){var u=r("d066"),d=r("241c"),_=r("7418"),f=r("825a");l.exports=u("Reflect","ownKeys")||function(p){var v=d.f(f(p)),g=_.f;return g?v.concat(g(p)):v}},"5a34":function(l,c,r){var u=r("44e7");l.exports=function(d){if(u(d))throw TypeError("The method doesn't accept regular expressions");return d}},"5c6c":function(l,c){l.exports=function(r,u){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:u}}},"5db7":function(l,c,r){var u=r("23e7"),d=r("a2bf"),_=r("7b0b"),f=r("50c4"),m=r("1c0b"),p=r("65f0");u({target:"Array",proto:!0},{flatMap:function(g){var $=_(this),y=f($.length),B;return m(g),B=p($,0),B.length=d(B,$,$,y,0,1,g,arguments.length>1?arguments[1]:void 0),B}})},6547:function(l,c,r){var u=r("a691"),d=r("1d80"),_=function(f){return function(m,p){var v=String(d(m)),g=u(p),$=v.length,y,B;return g<0||g>=$?f?"":void 0:(y=v.charCodeAt(g),y<55296||y>56319||g+1===$||(B=v.charCodeAt(g+1))<56320||B>57343?f?v.charAt(g):y:f?v.slice(g,g+2):(y-55296<<10)+(B-56320)+65536)}};l.exports={codeAt:_(!1),charAt:_(!0)}},"65f0":function(l,c,r){var u=r("861d"),d=r("e8b5"),_=r("b622"),f=_("species");l.exports=function(m,p){var v;return d(m)&&(v=m.constructor,typeof v=="function"&&(v===Array||d(v.prototype))?v=void 0:u(v)&&(v=v[f],v===null&&(v=void 0))),new(v===void 0?Array:v)(p===0?0:p)}},"69f3":function(l,c,r){var u=r("7f9a"),d=r("da84"),_=r("861d"),f=r("9112"),m=r("5135"),p=r("f772"),v=r("d012"),g=d.WeakMap,$,y,B,C=function(x){return B(x)?y(x):$(x,{})},S=function(x){return function(T){var I;if(!_(T)||(I=y(T)).type!==x)throw TypeError("Incompatible receiver, "+x+" required");return I}};if(u){var E=new g,k=E.get,b=E.has,V=E.set;$=function(x,T){return V.call(E,x,T),T},y=function(x){return k.call(E,x)||{}},B=function(x){return b.call(E,x)}}else{var A=p("state");v[A]=!0,$=function(x,T){return f(x,A,T),T},y=function(x){return m(x,A)?x[A]:{}},B=function(x){return m(x,A)}}l.exports={set:$,get:y,has:B,enforce:C,getterFor:S}},"6eeb":function(l,c,r){var u=r("da84"),d=r("9112"),_=r("5135"),f=r("ce4e"),m=r("8925"),p=r("69f3"),v=p.get,g=p.enforce,$=String(String).split("String");(l.exports=function(y,B,C,S){var E=S?!!S.unsafe:!1,k=S?!!S.enumerable:!1,b=S?!!S.noTargetGet:!1;if(typeof C=="function"&&(typeof B=="string"&&!_(C,"name")&&d(C,"name",B),g(C).source=$.join(typeof B=="string"?B:"")),y===u){k?y[B]=C:f(B,C);return}else E?!b&&y[B]&&(k=!0):delete y[B];k?y[B]=C:d(y,B,C)})(Function.prototype,"toString",function(){return typeof this=="function"&&v(this).source||m(this)})},"6f53":function(l,c,r){var u=r("83ab"),d=r("df75"),_=r("fc6a"),f=r("d1e7").f,m=function(p){return function(v){for(var g=_(v),$=d(g),y=$.length,B=0,C=[],S;y>B;)S=$[B++],(!u||f.call(g,S))&&C.push(p?[S,g[S]]:g[S]);return C}};l.exports={entries:m(!0),values:m(!1)}},"73d9":function(l,c,r){var u=r("44d2");u("flatMap")},7418:function(l,c){c.f=Object.getOwnPropertySymbols},"746f":function(l,c,r){var u=r("428f"),d=r("5135"),_=r("e538"),f=r("9bf2").f;l.exports=function(m){var p=u.Symbol||(u.Symbol={});d(p,m)||f(p,m,{value:_.f(m)})}},7839:function(l,c){l.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(l,c,r){var u=r("1d80");l.exports=function(d){return Object(u(d))}},"7c73":function(l,c,r){var u=r("825a"),d=r("37e8"),_=r("7839"),f=r("d012"),m=r("1be4"),p=r("cc12"),v=r("f772"),g=">",$="<",y="prototype",B="script",C=v("IE_PROTO"),S=function(){},E=function(x){return $+B+g+x+$+"/"+B+g},k=function(x){x.write(E("")),x.close();var T=x.parentWindow.Object;return x=null,T},b=function(){var x=p("iframe"),T="java"+B+":",I;return x.style.display="none",m.appendChild(x),x.src=String(T),I=x.contentWindow.document,I.open(),I.write(E("document.F=Object")),I.close(),I.F},V,A=function(){try{V=document.domain&&new ActiveXObject("htmlfile")}catch{}A=V?k(V):b();for(var x=_.length;x--;)delete A[y][_[x]];return A()};f[C]=!0,l.exports=Object.create||function(T,I){var R;return T!==null?(S[y]=u(T),R=new S,S[y]=null,R[C]=T):R=A(),I===void 0?R:d(R,I)}},"7dd0":function(l,c,r){var u=r("23e7"),d=r("9ed3"),_=r("e163"),f=r("d2bb"),m=r("d44e"),p=r("9112"),v=r("6eeb"),g=r("b622"),$=r("c430"),y=r("3f8c"),B=r("ae93"),C=B.IteratorPrototype,S=B.BUGGY_SAFARI_ITERATORS,E=g("iterator"),k="keys",b="values",V="entries",A=function(){return this};l.exports=function(x,T,I,R,N,w,D){d(I,T,R);var L=function(ee){if(ee===N&&U)return U;if(!S&&ee in O)return O[ee];switch(ee){case k:return function(){return new I(this,ee)};case b:return function(){return new I(this,ee)};case V:return function(){return new I(this,ee)}}return function(){return new I(this)}},P=T+" Iterator",j=!1,O=x.prototype,F=O[E]||O["@@iterator"]||N&&O[N],U=!S&&F||L(N),W=T=="Array"&&O.entries||F,ne,H,M;if(W&&(ne=_(W.call(new x)),C!==Object.prototype&&ne.next&&(!$&&_(ne)!==C&&(f?f(ne,C):typeof ne[E]!="function"&&p(ne,E,A)),m(ne,P,!0,!0),$&&(y[P]=A))),N==b&&F&&F.name!==b&&(j=!0,U=function(){return F.call(this)}),(!$||D)&&O[E]!==U&&p(O,E,U),y[T]=U,N)if(H={values:L(b),keys:w?U:L(k),entries:L(V)},D)for(M in H)(S||j||!(M in O))&&v(O,M,H[M]);else u({target:T,proto:!0,forced:S||j},H);return H}},"7f9a":function(l,c,r){var u=r("da84"),d=r("8925"),_=u.WeakMap;l.exports=typeof _=="function"&&/native code/.test(d(_))},"825a":function(l,c,r){var u=r("861d");l.exports=function(d){if(!u(d))throw TypeError(String(d)+" is not an object");return d}},"83ab":function(l,c,r){var u=r("d039");l.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(l,c,r){var u=r("c04e"),d=r("9bf2"),_=r("5c6c");l.exports=function(f,m,p){var v=u(m);v in f?d.f(f,v,_(0,p)):f[v]=p}},"861d":function(l,c){l.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}},8875:function(l,c,r){var u,d,_;(function(f,m){d=[],u=m,_=typeof u=="function"?u.apply(c,d):u,_!==void 0&&(l.exports=_)})(typeof self!="undefined"?self:this,function(){function f(){var m=Object.getOwnPropertyDescriptor(document,"currentScript");if(!m&&"currentScript"in document&&document.currentScript||m&&m.get!==f&&document.currentScript)return document.currentScript;try{throw new Error}catch(V){var p=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,v=/@([^@]*):(\d+):(\d+)\s*$/ig,g=p.exec(V.stack)||v.exec(V.stack),$=g&&g[1]||!1,y=g&&g[2]||!1,B=document.location.href.replace(document.location.hash,""),C,S,E,k=document.getElementsByTagName("script");$===B&&(C=document.documentElement.outerHTML,S=new RegExp("(?:[^\\n]+?\\n){0,"+(y-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),E=C.replace(S,"$1").trim());for(var b=0;b<k.length;b++)if(k[b].readyState==="interactive"||k[b].src===$||$===B&&k[b].innerHTML&&k[b].innerHTML.trim()===E)return k[b];return null}}return f})},8925:function(l,c,r){var u=r("c6cd"),d=Function.toString;typeof u.inspectSource!="function"&&(u.inspectSource=function(_){return d.call(_)}),l.exports=u.inspectSource},"8aa5":function(l,c,r){var u=r("6547").charAt;l.exports=function(d,_,f){return _+(f?u(d,_).length:1)}},"8bbf":function(l,c){l.exports=s},"90e3":function(l,c){var r=0,u=Math.random();l.exports=function(d){return"Symbol("+String(d===void 0?"":d)+")_"+(++r+u).toString(36)}},9112:function(l,c,r){var u=r("83ab"),d=r("9bf2"),_=r("5c6c");l.exports=u?function(f,m,p){return d.f(f,m,_(1,p))}:function(f,m,p){return f[m]=p,f}},9263:function(l,c,r){var u=r("ad6d"),d=r("9f7f"),_=RegExp.prototype.exec,f=String.prototype.replace,m=_,p=function(){var y=/a/,B=/b*/g;return _.call(y,"a"),_.call(B,"a"),y.lastIndex!==0||B.lastIndex!==0}(),v=d.UNSUPPORTED_Y||d.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0,$=p||g||v;$&&(m=function(B){var C=this,S,E,k,b,V=v&&C.sticky,A=u.call(C),x=C.source,T=0,I=B;return V&&(A=A.replace("y",""),A.indexOf("g")===-1&&(A+="g"),I=String(B).slice(C.lastIndex),C.lastIndex>0&&(!C.multiline||C.multiline&&B[C.lastIndex-1]!==`
`)&&(x="(?: "+x+")",I=" "+I,T++),E=new RegExp("^(?:"+x+")",A)),g&&(E=new RegExp("^"+x+"$(?!\\s)",A)),p&&(S=C.lastIndex),k=_.call(V?E:C,I),V?k?(k.input=k.input.slice(T),k[0]=k[0].slice(T),k.index=C.lastIndex,C.lastIndex+=k[0].length):C.lastIndex=0:p&&k&&(C.lastIndex=C.global?k.index+k[0].length:S),g&&k&&k.length>1&&f.call(k[0],E,function(){for(b=1;b<arguments.length-2;b++)arguments[b]===void 0&&(k[b]=void 0)}),k}),l.exports=m},"94ca":function(l,c,r){var u=r("d039"),d=/#|\.prototype\./,_=function(g,$){var y=m[f(g)];return y==v?!0:y==p?!1:typeof $=="function"?u($):!!$},f=_.normalize=function(g){return String(g).replace(d,".").toLowerCase()},m=_.data={},p=_.NATIVE="N",v=_.POLYFILL="P";l.exports=_},"99af":function(l,c,r){var u=r("23e7"),d=r("d039"),_=r("e8b5"),f=r("861d"),m=r("7b0b"),p=r("50c4"),v=r("8418"),g=r("65f0"),$=r("1dde"),y=r("b622"),B=r("2d00"),C=y("isConcatSpreadable"),S=9007199254740991,E="Maximum allowed index exceeded",k=B>=51||!d(function(){var x=[];return x[C]=!1,x.concat()[0]!==x}),b=$("concat"),V=function(x){if(!f(x))return!1;var T=x[C];return T!==void 0?!!T:_(x)},A=!k||!b;u({target:"Array",proto:!0,forced:A},{concat:function(T){var I=m(this),R=g(I,0),N=0,w,D,L,P,j;for(w=-1,L=arguments.length;w<L;w++)if(j=w===-1?I:arguments[w],V(j)){if(P=p(j.length),N+P>S)throw TypeError(E);for(D=0;D<P;D++,N++)D in j&&v(R,N,j[D])}else{if(N>=S)throw TypeError(E);v(R,N++,j)}return R.length=N,R}})},"9bdd":function(l,c,r){var u=r("825a");l.exports=function(d,_,f,m){try{return m?_(u(f)[0],f[1]):_(f)}catch(v){var p=d.return;throw p!==void 0&&u(p.call(d)),v}}},"9bf2":function(l,c,r){var u=r("83ab"),d=r("0cfb"),_=r("825a"),f=r("c04e"),m=Object.defineProperty;c.f=u?m:function(v,g,$){if(_(v),g=f(g,!0),_($),d)try{return m(v,g,$)}catch{}if("get"in $||"set"in $)throw TypeError("Accessors not supported");return"value"in $&&(v[g]=$.value),v}},"9ed3":function(l,c,r){var u=r("ae93").IteratorPrototype,d=r("7c73"),_=r("5c6c"),f=r("d44e"),m=r("3f8c"),p=function(){return this};l.exports=function(v,g,$){var y=g+" Iterator";return v.prototype=d(u,{next:_(1,$)}),f(v,y,!1,!0),m[y]=p,v}},"9f7f":function(l,c,r){var u=r("d039");function d(_,f){return RegExp(_,f)}c.UNSUPPORTED_Y=u(function(){var _=d("a","y");return _.lastIndex=2,_.exec("abcd")!=null}),c.BROKEN_CARET=u(function(){var _=d("^r","gy");return _.lastIndex=2,_.exec("str")!=null})},a2bf:function(l,c,r){var u=r("e8b5"),d=r("50c4"),_=r("0366"),f=function(m,p,v,g,$,y,B,C){for(var S=$,E=0,k=B?_(B,C,3):!1,b;E<g;){if(E in v){if(b=k?k(v[E],E,p):v[E],y>0&&u(b))S=f(m,p,b,d(b.length),S,y-1)-1;else{if(S>=9007199254740991)throw TypeError("Exceed the acceptable array length");m[S]=b}S++}E++}return S};l.exports=f},a352:function(l,c){l.exports=i},a434:function(l,c,r){var u=r("23e7"),d=r("23cb"),_=r("a691"),f=r("50c4"),m=r("7b0b"),p=r("65f0"),v=r("8418"),g=r("1dde"),$=r("ae40"),y=g("splice"),B=$("splice",{ACCESSORS:!0,0:0,1:2}),C=Math.max,S=Math.min,E=9007199254740991,k="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!y||!B},{splice:function(V,A){var x=m(this),T=f(x.length),I=d(V,T),R=arguments.length,N,w,D,L,P,j;if(R===0?N=w=0:R===1?(N=0,w=T-I):(N=R-2,w=S(C(_(A),0),T-I)),T+N-w>E)throw TypeError(k);for(D=p(x,w),L=0;L<w;L++)P=I+L,P in x&&v(D,L,x[P]);if(D.length=w,N<w){for(L=I;L<T-w;L++)P=L+w,j=L+N,P in x?x[j]=x[P]:delete x[j];for(L=T;L>T-w+N;L--)delete x[L-1]}else if(N>w)for(L=T-w;L>I;L--)P=L+w-1,j=L+N-1,P in x?x[j]=x[P]:delete x[j];for(L=0;L<N;L++)x[L+I]=arguments[L+2];return x.length=T-w+N,D}})},a4d3:function(l,c,r){var u=r("23e7"),d=r("da84"),_=r("d066"),f=r("c430"),m=r("83ab"),p=r("4930"),v=r("fdbf"),g=r("d039"),$=r("5135"),y=r("e8b5"),B=r("861d"),C=r("825a"),S=r("7b0b"),E=r("fc6a"),k=r("c04e"),b=r("5c6c"),V=r("7c73"),A=r("df75"),x=r("241c"),T=r("057f"),I=r("7418"),R=r("06cf"),N=r("9bf2"),w=r("d1e7"),D=r("9112"),L=r("6eeb"),P=r("5692"),j=r("f772"),O=r("d012"),F=r("90e3"),U=r("b622"),W=r("e538"),ne=r("746f"),H=r("d44e"),M=r("69f3"),ee=r("b727").forEach,G=j("hidden"),Q="Symbol",te="prototype",ce=U("toPrimitive"),$e=M.set,we=M.getterFor(Q),_e=Object[te],ke=d.Symbol,oe=_("JSON","stringify"),ie=R.f,ye=N.f,Te=T.f,Ee=w.f,Ve=P("symbols"),ue=P("op-symbols"),Oe=P("string-to-symbol-registry"),We=P("symbol-to-string-registry"),Ge=P("wks"),Ye=d.QObject,Ke=!Ye||!Ye[te]||!Ye[te].findChild,Xe=m&&g(function(){return V(ye({},"a",{get:function(){return ye(this,"a",{value:7}).a}})).a!=7})?function(Be,pe,he){var Se=ie(_e,pe);Se&&delete _e[pe],ye(Be,pe,he),Se&&Be!==_e&&ye(_e,pe,Se)}:ye,He=function(Be,pe){var he=Ve[Be]=V(ke[te]);return $e(he,{type:Q,tag:Be,description:pe}),m||(he.description=pe),he},Z=v?function(Be){return typeof Be=="symbol"}:function(Be){return Object(Be)instanceof ke},K=function(pe,he,Se){pe===_e&&K(ue,he,Se),C(pe);var be=k(he,!0);return C(Se),$(Ve,be)?(Se.enumerable?($(pe,G)&&pe[G][be]&&(pe[G][be]=!1),Se=V(Se,{enumerable:b(0,!1)})):($(pe,G)||ye(pe,G,b(1,{})),pe[G][be]=!0),Xe(pe,be,Se)):ye(pe,be,Se)},X=function(pe,he){C(pe);var Se=E(he),be=A(Se).concat(Fe(Se));return ee(be,function(Pe){(!m||me.call(Se,Pe))&&K(pe,Pe,Se[Pe])}),pe},ae=function(pe,he){return he===void 0?V(pe):X(V(pe),he)},me=function(pe){var he=k(pe,!0),Se=Ee.call(this,he);return this===_e&&$(Ve,he)&&!$(ue,he)?!1:Se||!$(this,he)||!$(Ve,he)||$(this,G)&&this[G][he]?Se:!0},ge=function(pe,he){var Se=E(pe),be=k(he,!0);if(!(Se===_e&&$(Ve,be)&&!$(ue,be))){var Pe=ie(Se,be);return Pe&&$(Ve,be)&&!($(Se,G)&&Se[G][be])&&(Pe.enumerable=!0),Pe}},Ce=function(pe){var he=Te(E(pe)),Se=[];return ee(he,function(be){!$(Ve,be)&&!$(O,be)&&Se.push(be)}),Se},Fe=function(pe){var he=pe===_e,Se=Te(he?ue:E(pe)),be=[];return ee(Se,function(Pe){$(Ve,Pe)&&(!he||$(_e,Pe))&&be.push(Ve[Pe])}),be};if(p||(ke=function(){if(this instanceof ke)throw TypeError("Symbol is not a constructor");var pe=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),he=F(pe),Se=function(be){this===_e&&Se.call(ue,be),$(this,G)&&$(this[G],he)&&(this[G][he]=!1),Xe(this,he,b(1,be))};return m&&Ke&&Xe(_e,he,{configurable:!0,set:Se}),He(he,pe)},L(ke[te],"toString",function(){return we(this).tag}),L(ke,"withoutSetter",function(Be){return He(F(Be),Be)}),w.f=me,N.f=K,R.f=ge,x.f=T.f=Ce,I.f=Fe,W.f=function(Be){return He(U(Be),Be)},m&&(ye(ke[te],"description",{configurable:!0,get:function(){return we(this).description}}),f||L(_e,"propertyIsEnumerable",me,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:ke}),ee(A(Ge),function(Be){ne(Be)}),u({target:Q,stat:!0,forced:!p},{for:function(Be){var pe=String(Be);if($(Oe,pe))return Oe[pe];var he=ke(pe);return Oe[pe]=he,We[he]=pe,he},keyFor:function(pe){if(!Z(pe))throw TypeError(pe+" is not a symbol");if($(We,pe))return We[pe]},useSetter:function(){Ke=!0},useSimple:function(){Ke=!1}}),u({target:"Object",stat:!0,forced:!p,sham:!m},{create:ae,defineProperty:K,defineProperties:X,getOwnPropertyDescriptor:ge}),u({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:Ce,getOwnPropertySymbols:Fe}),u({target:"Object",stat:!0,forced:g(function(){I.f(1)})},{getOwnPropertySymbols:function(pe){return I.f(S(pe))}}),oe){var Le=!p||g(function(){var Be=ke();return oe([Be])!="[null]"||oe({a:Be})!="{}"||oe(Object(Be))!="{}"});u({target:"JSON",stat:!0,forced:Le},{stringify:function(pe,he,Se){for(var be=[pe],Pe=1,ze;arguments.length>Pe;)be.push(arguments[Pe++]);if(ze=he,!(!B(he)&&pe===void 0||Z(pe)))return y(he)||(he=function(Je,Ze){if(typeof ze=="function"&&(Ze=ze.call(this,Je,Ze)),!Z(Ze))return Ze}),be[1]=he,oe.apply(null,be)}})}ke[te][ce]||D(ke[te],ce,ke[te].valueOf),H(ke,Q),O[G]=!0},a630:function(l,c,r){var u=r("23e7"),d=r("4df4"),_=r("1c7e"),f=!_(function(m){Array.from(m)});u({target:"Array",stat:!0,forced:f},{from:d})},a640:function(l,c,r){var u=r("d039");l.exports=function(d,_){var f=[][d];return!!f&&u(function(){f.call(null,_||function(){throw 1},1)})}},a691:function(l,c){var r=Math.ceil,u=Math.floor;l.exports=function(d){return isNaN(d=+d)?0:(d>0?u:r)(d)}},ab13:function(l,c,r){var u=r("b622"),d=u("match");l.exports=function(_){var f=/./;try{"/./"[_](f)}catch{try{return f[d]=!1,"/./"[_](f)}catch{}}return!1}},ac1f:function(l,c,r){var u=r("23e7"),d=r("9263");u({target:"RegExp",proto:!0,forced:/./.exec!==d},{exec:d})},ad6d:function(l,c,r){var u=r("825a");l.exports=function(){var d=u(this),_="";return d.global&&(_+="g"),d.ignoreCase&&(_+="i"),d.multiline&&(_+="m"),d.dotAll&&(_+="s"),d.unicode&&(_+="u"),d.sticky&&(_+="y"),_}},ae40:function(l,c,r){var u=r("83ab"),d=r("d039"),_=r("5135"),f=Object.defineProperty,m={},p=function(v){throw v};l.exports=function(v,g){if(_(m,v))return m[v];g||(g={});var $=[][v],y=_(g,"ACCESSORS")?g.ACCESSORS:!1,B=_(g,0)?g[0]:p,C=_(g,1)?g[1]:void 0;return m[v]=!!$&&!d(function(){if(y&&!u)return!0;var S={length:-1};y?f(S,1,{enumerable:!0,get:p}):S[1]=1,$.call(S,B,C)})}},ae93:function(l,c,r){var u=r("e163"),d=r("9112"),_=r("5135"),f=r("b622"),m=r("c430"),p=f("iterator"),v=!1,g=function(){return this},$,y,B;[].keys&&(B=[].keys(),"next"in B?(y=u(u(B)),y!==Object.prototype&&($=y)):v=!0),$==null&&($={}),!m&&!_($,p)&&d($,p,g),l.exports={IteratorPrototype:$,BUGGY_SAFARI_ITERATORS:v}},b041:function(l,c,r){var u=r("00ee"),d=r("f5df");l.exports=u?{}.toString:function(){return"[object "+d(this)+"]"}},b0c0:function(l,c,r){var u=r("83ab"),d=r("9bf2").f,_=Function.prototype,f=_.toString,m=/^\s*function ([^ (]*)/,p="name";u&&!(p in _)&&d(_,p,{configurable:!0,get:function(){try{return f.call(this).match(m)[1]}catch{return""}}})},b622:function(l,c,r){var u=r("da84"),d=r("5692"),_=r("5135"),f=r("90e3"),m=r("4930"),p=r("fdbf"),v=d("wks"),g=u.Symbol,$=p?g:g&&g.withoutSetter||f;l.exports=function(y){return _(v,y)||(m&&_(g,y)?v[y]=g[y]:v[y]=$("Symbol."+y)),v[y]}},b64b:function(l,c,r){var u=r("23e7"),d=r("7b0b"),_=r("df75"),f=r("d039"),m=f(function(){_(1)});u({target:"Object",stat:!0,forced:m},{keys:function(v){return _(d(v))}})},b727:function(l,c,r){var u=r("0366"),d=r("44ad"),_=r("7b0b"),f=r("50c4"),m=r("65f0"),p=[].push,v=function(g){var $=g==1,y=g==2,B=g==3,C=g==4,S=g==6,E=g==5||S;return function(k,b,V,A){for(var x=_(k),T=d(x),I=u(b,V,3),R=f(T.length),N=0,w=A||m,D=$?w(k,R):y?w(k,0):void 0,L,P;R>N;N++)if((E||N in T)&&(L=T[N],P=I(L,N,x),g)){if($)D[N]=P;else if(P)switch(g){case 3:return!0;case 5:return L;case 6:return N;case 2:p.call(D,L)}else if(C)return!1}return S?-1:B||C?C:D}};l.exports={forEach:v(0),map:v(1),filter:v(2),some:v(3),every:v(4),find:v(5),findIndex:v(6)}},c04e:function(l,c,r){var u=r("861d");l.exports=function(d,_){if(!u(d))return d;var f,m;if(_&&typeof(f=d.toString)=="function"&&!u(m=f.call(d))||typeof(f=d.valueOf)=="function"&&!u(m=f.call(d))||!_&&typeof(f=d.toString)=="function"&&!u(m=f.call(d)))return m;throw TypeError("Can't convert object to primitive value")}},c430:function(l,c){l.exports=!1},c6b6:function(l,c){var r={}.toString;l.exports=function(u){return r.call(u).slice(8,-1)}},c6cd:function(l,c,r){var u=r("da84"),d=r("ce4e"),_="__core-js_shared__",f=u[_]||d(_,{});l.exports=f},c740:function(l,c,r){var u=r("23e7"),d=r("b727").findIndex,_=r("44d2"),f=r("ae40"),m="findIndex",p=!0,v=f(m);m in[]&&Array(1)[m](function(){p=!1}),u({target:"Array",proto:!0,forced:p||!v},{findIndex:function($){return d(this,$,arguments.length>1?arguments[1]:void 0)}}),_(m)},c8ba:function(l,c){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}l.exports=r},c975:function(l,c,r){var u=r("23e7"),d=r("4d64").indexOf,_=r("a640"),f=r("ae40"),m=[].indexOf,p=!!m&&1/[1].indexOf(1,-0)<0,v=_("indexOf"),g=f("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:p||!v||!g},{indexOf:function(y){return p?m.apply(this,arguments)||0:d(this,y,arguments.length>1?arguments[1]:void 0)}})},ca84:function(l,c,r){var u=r("5135"),d=r("fc6a"),_=r("4d64").indexOf,f=r("d012");l.exports=function(m,p){var v=d(m),g=0,$=[],y;for(y in v)!u(f,y)&&u(v,y)&&$.push(y);for(;p.length>g;)u(v,y=p[g++])&&(~_($,y)||$.push(y));return $}},caad:function(l,c,r){var u=r("23e7"),d=r("4d64").includes,_=r("44d2"),f=r("ae40"),m=f("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:!m},{includes:function(v){return d(this,v,arguments.length>1?arguments[1]:void 0)}}),_("includes")},cc12:function(l,c,r){var u=r("da84"),d=r("861d"),_=u.document,f=d(_)&&d(_.createElement);l.exports=function(m){return f?_.createElement(m):{}}},ce4e:function(l,c,r){var u=r("da84"),d=r("9112");l.exports=function(_,f){try{d(u,_,f)}catch{u[_]=f}return f}},d012:function(l,c){l.exports={}},d039:function(l,c){l.exports=function(r){try{return!!r()}catch{return!0}}},d066:function(l,c,r){var u=r("428f"),d=r("da84"),_=function(f){return typeof f=="function"?f:void 0};l.exports=function(f,m){return arguments.length<2?_(u[f])||_(d[f]):u[f]&&u[f][m]||d[f]&&d[f][m]}},d1e7:function(l,c,r){var u={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,_=d&&!u.call({1:2},1);c.f=_?function(m){var p=d(this,m);return!!p&&p.enumerable}:u},d28b:function(l,c,r){var u=r("746f");u("iterator")},d2bb:function(l,c,r){var u=r("825a"),d=r("3bbe");l.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var _=!1,f={},m;try{m=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,m.call(f,[]),_=f instanceof Array}catch{}return function(v,g){return u(v),d(g),_?m.call(v,g):v.__proto__=g,v}}():void 0)},d3b7:function(l,c,r){var u=r("00ee"),d=r("6eeb"),_=r("b041");u||d(Object.prototype,"toString",_,{unsafe:!0})},d44e:function(l,c,r){var u=r("9bf2").f,d=r("5135"),_=r("b622"),f=_("toStringTag");l.exports=function(m,p,v){m&&!d(m=v?m:m.prototype,f)&&u(m,f,{configurable:!0,value:p})}},d58f:function(l,c,r){var u=r("1c0b"),d=r("7b0b"),_=r("44ad"),f=r("50c4"),m=function(p){return function(v,g,$,y){u(g);var B=d(v),C=_(B),S=f(B.length),E=p?S-1:0,k=p?-1:1;if($<2)for(;;){if(E in C){y=C[E],E+=k;break}if(E+=k,p?E<0:S<=E)throw TypeError("Reduce of empty array with no initial value")}for(;p?E>=0:S>E;E+=k)E in C&&(y=g(y,C[E],E,B));return y}};l.exports={left:m(!1),right:m(!0)}},d784:function(l,c,r){r("ac1f");var u=r("6eeb"),d=r("d039"),_=r("b622"),f=r("9263"),m=r("9112"),p=_("species"),v=!d(function(){var C=/./;return C.exec=function(){var S=[];return S.groups={a:"7"},S},"".replace(C,"$<a>")!=="7"}),g=function(){return"a".replace(/./,"$0")==="$0"}(),$=_("replace"),y=function(){return/./[$]?/./[$]("a","$0")==="":!1}(),B=!d(function(){var C=/(?:)/,S=C.exec;C.exec=function(){return S.apply(this,arguments)};var E="ab".split(C);return E.length!==2||E[0]!=="a"||E[1]!=="b"});l.exports=function(C,S,E,k){var b=_(C),V=!d(function(){var N={};return N[b]=function(){return 7},""[C](N)!=7}),A=V&&!d(function(){var N=!1,w=/a/;return C==="split"&&(w={},w.constructor={},w.constructor[p]=function(){return w},w.flags="",w[b]=/./[b]),w.exec=function(){return N=!0,null},w[b](""),!N});if(!V||!A||C==="replace"&&!(v&&g&&!y)||C==="split"&&!B){var x=/./[b],T=E(b,""[C],function(N,w,D,L,P){return w.exec===f?V&&!P?{done:!0,value:x.call(w,D,L)}:{done:!0,value:N.call(D,w,L)}:{done:!1}},{REPLACE_KEEPS_$0:g,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}),I=T[0],R=T[1];u(String.prototype,C,I),u(RegExp.prototype,b,S==2?function(N,w){return R.call(N,this,w)}:function(N){return R.call(N,this)})}k&&m(RegExp.prototype[b],"sham",!0)}},d81d:function(l,c,r){var u=r("23e7"),d=r("b727").map,_=r("1dde"),f=r("ae40"),m=_("map"),p=f("map");u({target:"Array",proto:!0,forced:!m||!p},{map:function(g){return d(this,g,arguments.length>1?arguments[1]:void 0)}})},da84:function(l,c,r){(function(u){var d=function(_){return _&&_.Math==Math&&_};l.exports=d(typeof globalThis=="object"&&globalThis)||d(typeof window=="object"&&window)||d(typeof self=="object"&&self)||d(typeof u=="object"&&u)||Function("return this")()}).call(this,r("c8ba"))},dbb4:function(l,c,r){var u=r("23e7"),d=r("83ab"),_=r("56ef"),f=r("fc6a"),m=r("06cf"),p=r("8418");u({target:"Object",stat:!0,sham:!d},{getOwnPropertyDescriptors:function(g){for(var $=f(g),y=m.f,B=_($),C={},S=0,E,k;B.length>S;)k=y($,E=B[S++]),k!==void 0&&p(C,E,k);return C}})},dbf1:function(l,c,r){(function(u){r.d(c,"a",function(){return _});function d(){return typeof window!="undefined"?window.console:u.console}var _=d()}).call(this,r("c8ba"))},ddb0:function(l,c,r){var u=r("da84"),d=r("fdbc"),_=r("e260"),f=r("9112"),m=r("b622"),p=m("iterator"),v=m("toStringTag"),g=_.values;for(var $ in d){var y=u[$],B=y&&y.prototype;if(B){if(B[p]!==g)try{f(B,p,g)}catch{B[p]=g}if(B[v]||f(B,v,$),d[$]){for(var C in _)if(B[C]!==_[C])try{f(B,C,_[C])}catch{B[C]=_[C]}}}}},df75:function(l,c,r){var u=r("ca84"),d=r("7839");l.exports=Object.keys||function(f){return u(f,d)}},e01a:function(l,c,r){var u=r("23e7"),d=r("83ab"),_=r("da84"),f=r("5135"),m=r("861d"),p=r("9bf2").f,v=r("e893"),g=_.Symbol;if(d&&typeof g=="function"&&(!("description"in g.prototype)||g().description!==void 0)){var $={},y=function(){var b=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),V=this instanceof y?new g(b):b===void 0?g():g(b);return b===""&&($[V]=!0),V};v(y,g);var B=y.prototype=g.prototype;B.constructor=y;var C=B.toString,S=String(g("test"))=="Symbol(test)",E=/^Symbol\((.*)\)[^)]+$/;p(B,"description",{configurable:!0,get:function(){var b=m(this)?this.valueOf():this,V=C.call(b);if(f($,b))return"";var A=S?V.slice(7,-1):V.replace(E,"$1");return A===""?void 0:A}}),u({global:!0,forced:!0},{Symbol:y})}},e163:function(l,c,r){var u=r("5135"),d=r("7b0b"),_=r("f772"),f=r("e177"),m=_("IE_PROTO"),p=Object.prototype;l.exports=f?Object.getPrototypeOf:function(v){return v=d(v),u(v,m)?v[m]:typeof v.constructor=="function"&&v instanceof v.constructor?v.constructor.prototype:v instanceof Object?p:null}},e177:function(l,c,r){var u=r("d039");l.exports=!u(function(){function d(){}return d.prototype.constructor=null,Object.getPrototypeOf(new d)!==d.prototype})},e260:function(l,c,r){var u=r("fc6a"),d=r("44d2"),_=r("3f8c"),f=r("69f3"),m=r("7dd0"),p="Array Iterator",v=f.set,g=f.getterFor(p);l.exports=m(Array,"Array",function($,y){v(this,{type:p,target:u($),index:0,kind:y})},function(){var $=g(this),y=$.target,B=$.kind,C=$.index++;return!y||C>=y.length?($.target=void 0,{value:void 0,done:!0}):B=="keys"?{value:C,done:!1}:B=="values"?{value:y[C],done:!1}:{value:[C,y[C]],done:!1}},"values"),_.Arguments=_.Array,d("keys"),d("values"),d("entries")},e439:function(l,c,r){var u=r("23e7"),d=r("d039"),_=r("fc6a"),f=r("06cf").f,m=r("83ab"),p=d(function(){f(1)}),v=!m||p;u({target:"Object",stat:!0,forced:v,sham:!m},{getOwnPropertyDescriptor:function($,y){return f(_($),y)}})},e538:function(l,c,r){var u=r("b622");c.f=u},e893:function(l,c,r){var u=r("5135"),d=r("56ef"),_=r("06cf"),f=r("9bf2");l.exports=function(m,p){for(var v=d(p),g=f.f,$=_.f,y=0;y<v.length;y++){var B=v[y];u(m,B)||g(m,B,$(p,B))}}},e8b5:function(l,c,r){var u=r("c6b6");l.exports=Array.isArray||function(_){return u(_)=="Array"}},e95a:function(l,c,r){var u=r("b622"),d=r("3f8c"),_=u("iterator"),f=Array.prototype;l.exports=function(m){return m!==void 0&&(d.Array===m||f[_]===m)}},f5df:function(l,c,r){var u=r("00ee"),d=r("c6b6"),_=r("b622"),f=_("toStringTag"),m=d(function(){return arguments}())=="Arguments",p=function(v,g){try{return v[g]}catch{}};l.exports=u?d:function(v){var g,$,y;return v===void 0?"Undefined":v===null?"Null":typeof($=p(g=Object(v),f))=="string"?$:m?d(g):(y=d(g))=="Object"&&typeof g.callee=="function"?"Arguments":y}},f772:function(l,c,r){var u=r("5692"),d=r("90e3"),_=u("keys");l.exports=function(f){return _[f]||(_[f]=d(f))}},fb15:function(l,c,r){if(r.r(c),typeof window!="undefined"){var u=window.document.currentScript;{var d=r("8875");u=d(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:d})}var _=u&&u.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);_&&(r.p=_[1])}r("99af"),r("4de4"),r("4160"),r("c975"),r("d81d"),r("a434"),r("159b"),r("a4d3"),r("e439"),r("dbb4"),r("b64b");function f(Z,K,X){return K in Z?Object.defineProperty(Z,K,{value:X,enumerable:!0,configurable:!0,writable:!0}):Z[K]=X,Z}function m(Z,K){var X=Object.keys(Z);if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(Z);K&&(ae=ae.filter(function(me){return Object.getOwnPropertyDescriptor(Z,me).enumerable})),X.push.apply(X,ae)}return X}function p(Z){for(var K=1;K<arguments.length;K++){var X=arguments[K]!=null?arguments[K]:{};K%2?m(Object(X),!0).forEach(function(ae){f(Z,ae,X[ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(X)):m(Object(X)).forEach(function(ae){Object.defineProperty(Z,ae,Object.getOwnPropertyDescriptor(X,ae))})}return Z}function v(Z){if(Array.isArray(Z))return Z}r("e01a"),r("d28b"),r("e260"),r("d3b7"),r("3ca3"),r("ddb0");function g(Z,K){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(Z)))){var X=[],ae=!0,me=!1,ge=void 0;try{for(var Ce=Z[Symbol.iterator](),Fe;!(ae=(Fe=Ce.next()).done)&&(X.push(Fe.value),!(K&&X.length===K));ae=!0);}catch(Le){me=!0,ge=Le}finally{try{!ae&&Ce.return!=null&&Ce.return()}finally{if(me)throw ge}}return X}}r("a630"),r("fb6a"),r("b0c0"),r("25f0");function $(Z,K){(K==null||K>Z.length)&&(K=Z.length);for(var X=0,ae=new Array(K);X<K;X++)ae[X]=Z[X];return ae}function y(Z,K){if(!!Z){if(typeof Z=="string")return $(Z,K);var X=Object.prototype.toString.call(Z).slice(8,-1);if(X==="Object"&&Z.constructor&&(X=Z.constructor.name),X==="Map"||X==="Set")return Array.from(Z);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return $(Z,K)}}function B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(Z,K){return v(Z)||g(Z,K)||y(Z,K)||B()}function S(Z){if(Array.isArray(Z))return $(Z)}function E(Z){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(Z))return Array.from(Z)}function k(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(Z){return S(Z)||E(Z)||y(Z)||k()}var V=r("a352"),A=r.n(V);function x(Z){Z.parentElement!==null&&Z.parentElement.removeChild(Z)}function T(Z,K,X){var ae=X===0?Z.children[0]:Z.children[X-1].nextSibling;Z.insertBefore(K,ae)}var I=r("dbf1");r("13d5"),r("4fad"),r("ac1f"),r("5319");function R(Z){var K=Object.create(null);return function(ae){var me=K[ae];return me||(K[ae]=Z(ae))}}var N=/-(\w)/g,w=R(function(Z){return Z.replace(N,function(K,X){return X.toUpperCase()})});r("5db7"),r("73d9");var D=["Start","Add","Remove","Update","End"],L=["Choose","Unchoose","Sort","Filter","Clone"],P=["Move"],j=[P,D,L].flatMap(function(Z){return Z}).map(function(Z){return"on".concat(Z)}),O={manage:P,manageAndEmit:D,emit:L};function F(Z){return j.indexOf(Z)!==-1}r("caad"),r("2ca0");var U=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function W(Z){return U.includes(Z)}function ne(Z){return["transition-group","TransitionGroup"].includes(Z)}function H(Z){return["id","class","role","style"].includes(Z)||Z.startsWith("data-")||Z.startsWith("aria-")||Z.startsWith("on")}function M(Z){return Z.reduce(function(K,X){var ae=C(X,2),me=ae[0],ge=ae[1];return K[me]=ge,K},{})}function ee(Z){var K=Z.$attrs,X=Z.componentData,ae=X===void 0?{}:X,me=M(Object.entries(K).filter(function(ge){var Ce=C(ge,2),Fe=Ce[0];return Ce[1],H(Fe)}));return p(p({},me),ae)}function G(Z){var K=Z.$attrs,X=Z.callBackBuilder,ae=M(Q(K));Object.entries(X).forEach(function(ge){var Ce=C(ge,2),Fe=Ce[0],Le=Ce[1];O[Fe].forEach(function(Be){ae["on".concat(Be)]=Le(Be)})});var me="[data-draggable]".concat(ae.draggable||"");return p(p({},ae),{},{draggable:me})}function Q(Z){return Object.entries(Z).filter(function(K){var X=C(K,2),ae=X[0];return X[1],!H(ae)}).map(function(K){var X=C(K,2),ae=X[0],me=X[1];return[w(ae),me]}).filter(function(K){var X=C(K,2),ae=X[0];return X[1],!F(ae)})}r("c740");function te(Z,K){if(!(Z instanceof K))throw new TypeError("Cannot call a class as a function")}function ce(Z,K){for(var X=0;X<K.length;X++){var ae=K[X];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(Z,ae.key,ae)}}function $e(Z,K,X){return K&&ce(Z.prototype,K),X&&ce(Z,X),Z}var we=function(K){var X=K.el;return X},_e=function(K,X){return K.__draggable_context=X},ke=function(K){return K.__draggable_context},oe=function(){function Z(K){var X=K.nodes,ae=X.header,me=X.default,ge=X.footer,Ce=K.root,Fe=K.realList;te(this,Z),this.defaultNodes=me,this.children=[].concat(b(ae),b(me),b(ge)),this.externalComponent=Ce.externalComponent,this.rootTransition=Ce.transition,this.tag=Ce.tag,this.realList=Fe}return $e(Z,[{key:"render",value:function(X,ae){var me=this.tag,ge=this.children,Ce=this._isRootComponent,Fe=Ce?{default:function(){return ge}}:ge;return X(me,ae,Fe)}},{key:"updated",value:function(){var X=this.defaultNodes,ae=this.realList;X.forEach(function(me,ge){_e(we(me),{element:ae[ge],index:ge})})}},{key:"getUnderlyingVm",value:function(X){return ke(X)}},{key:"getVmIndexFromDomIndex",value:function(X,ae){var me=this.defaultNodes,ge=me.length,Ce=ae.children,Fe=Ce.item(X);if(Fe===null)return ge;var Le=ke(Fe);if(Le)return Le.index;if(ge===0)return 0;var Be=we(me[0]),pe=b(Ce).findIndex(function(he){return he===Be});return X<pe?0:ge}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Z}(),ie=r("8bbf");function ye(Z,K){var X=Z[K];return X?X():[]}function Te(Z){var K=Z.$slots,X=Z.realList,ae=Z.getKey,me=X||[],ge=["header","footer"].map(function(he){return ye(K,he)}),Ce=C(ge,2),Fe=Ce[0],Le=Ce[1],Be=K.item;if(!Be)throw new Error("draggable element must have an item slot");var pe=me.flatMap(function(he,Se){return Be({element:he,index:Se}).map(function(be){return be.key=ae(he),be.props=p(p({},be.props||{}),{},{"data-draggable":!0}),be})});if(pe.length!==me.length)throw new Error("Item slot must have only one child");return{header:Fe,footer:Le,default:pe}}function Ee(Z){var K=ne(Z),X=!W(Z)&&!K;return{transition:K,externalComponent:X,tag:X?Object(ie.resolveComponent)(Z):K?ie.TransitionGroup:Z}}function Ve(Z){var K=Z.$slots,X=Z.tag,ae=Z.realList,me=Z.getKey,ge=Te({$slots:K,realList:ae,getKey:me}),Ce=Ee(X);return new oe({nodes:ge,root:Ce,realList:ae})}function ue(Z,K){var X=this;Object(ie.nextTick)(function(){return X.$emit(Z.toLowerCase(),K)})}function Oe(Z){var K=this;return function(X,ae){if(K.realList!==null)return K["onDrag".concat(Z)](X,ae)}}function We(Z){var K=this,X=Oe.call(this,Z);return function(ae,me){X.call(K,ae,me),ue.call(K,Z,ae)}}var Ge=null,Ye={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(K){return K}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Ke=["update:modelValue","change"].concat(b([].concat(b(O.manageAndEmit),b(O.emit)).map(function(Z){return Z.toLowerCase()}))),Xe=Object(ie.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ye,emits:Ke,data:function(){return{error:!1}},render:function(){try{this.error=!1;var K=this.$slots,X=this.$attrs,ae=this.tag,me=this.componentData,ge=this.realList,Ce=this.getKey,Fe=Ve({$slots:K,tag:ae,realList:ge,getKey:Ce});this.componentStructure=Fe;var Le=ee({$attrs:X,componentData:me});return Fe.render(ie.h,Le)}catch(Be){return this.error=!0,Object(ie.h)("pre",{style:{color:"red"}},Be.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&I.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var K=this;if(!this.error){var X=this.$attrs,ae=this.$el,me=this.componentStructure;me.updated();var ge=G({$attrs:X,callBackBuilder:{manageAndEmit:function(Le){return We.call(K,Le)},emit:function(Le){return ue.bind(K,Le)},manage:function(Le){return Oe.call(K,Le)}}}),Ce=ae.nodeType===1?ae:ae.parentElement;this._sortable=new A.a(Ce,ge),this.targetDomElement=Ce,Ce.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var K=this.list;return K||this.modelValue},getKey:function(){var K=this.itemKey;return typeof K=="function"?K:function(X){return X[K]}}},watch:{$attrs:{handler:function(K){var X=this._sortable;!X||Q(K).forEach(function(ae){var me=C(ae,2),ge=me[0],Ce=me[1];X.option(ge,Ce)})},deep:!0}},methods:{getUnderlyingVm:function(K){return this.componentStructure.getUnderlyingVm(K)||null},getUnderlyingPotencialDraggableComponent:function(K){return K.__draggable_component__},emitChanges:function(K){var X=this;Object(ie.nextTick)(function(){return X.$emit("change",K)})},alterList:function(K){if(this.list){K(this.list);return}var X=b(this.modelValue);K(X),this.$emit("update:modelValue",X)},spliceList:function(){var K=arguments,X=function(me){return me.splice.apply(me,b(K))};this.alterList(X)},updatePosition:function(K,X){var ae=function(ge){return ge.splice(X,0,ge.splice(K,1)[0])};this.alterList(ae)},getRelatedContextFromMoveEvent:function(K){var X=K.to,ae=K.related,me=this.getUnderlyingPotencialDraggableComponent(X);if(!me)return{component:me};var ge=me.realList,Ce={list:ge,component:me};if(X!==ae&&ge){var Fe=me.getUnderlyingVm(ae)||{};return p(p({},Fe),Ce)}return Ce},getVmIndexFromDomIndex:function(K){return this.componentStructure.getVmIndexFromDomIndex(K,this.targetDomElement)},onDragStart:function(K){this.context=this.getUnderlyingVm(K.item),K.item._underlying_vm_=this.clone(this.context.element),Ge=K.item},onDragAdd:function(K){var X=K.item._underlying_vm_;if(X!==void 0){x(K.item);var ae=this.getVmIndexFromDomIndex(K.newIndex);this.spliceList(ae,0,X);var me={element:X,newIndex:ae};this.emitChanges({added:me})}},onDragRemove:function(K){if(T(this.$el,K.item,K.oldIndex),K.pullMode==="clone"){x(K.clone);return}var X=this.context,ae=X.index,me=X.element;this.spliceList(ae,1);var ge={element:me,oldIndex:ae};this.emitChanges({removed:ge})},onDragUpdate:function(K){x(K.item),T(K.from,K.item,K.oldIndex);var X=this.context.index,ae=this.getVmIndexFromDomIndex(K.newIndex);this.updatePosition(X,ae);var me={element:this.context.element,oldIndex:X,newIndex:ae};this.emitChanges({moved:me})},computeFutureIndex:function(K,X){if(!K.element)return 0;var ae=b(X.to.children).filter(function(Fe){return Fe.style.display!=="none"}),me=ae.indexOf(X.related),ge=K.component.getVmIndexFromDomIndex(me),Ce=ae.indexOf(Ge)!==-1;return Ce||!X.willInsertAfter?ge:ge+1},onDragMove:function(K,X){var ae=this.move,me=this.realList;if(!ae||!me)return!0;var ge=this.getRelatedContextFromMoveEvent(K),Ce=this.computeFutureIndex(ge,K),Fe=p(p({},this.context),{},{futureIndex:Ce}),Le=p(p({},K),{},{relatedContext:ge,draggedContext:Fe});return ae(Le,X)},onDragEnd:function(){Ge=null}}}),He=Xe;c.default=He},fb6a:function(l,c,r){var u=r("23e7"),d=r("861d"),_=r("e8b5"),f=r("23cb"),m=r("50c4"),p=r("fc6a"),v=r("8418"),g=r("b622"),$=r("1dde"),y=r("ae40"),B=$("slice"),C=y("slice",{ACCESSORS:!0,0:0,1:2}),S=g("species"),E=[].slice,k=Math.max;u({target:"Array",proto:!0,forced:!B||!C},{slice:function(V,A){var x=p(this),T=m(x.length),I=f(V,T),R=f(A===void 0?T:A,T),N,w,D;if(_(x)&&(N=x.constructor,typeof N=="function"&&(N===Array||_(N.prototype))?N=void 0:d(N)&&(N=N[S],N===null&&(N=void 0)),N===Array||N===void 0))return E.call(x,I,R);for(w=new(N===void 0?Array:N)(k(R-I,0)),D=0;I<R;I++,D++)I in x&&v(w,D,x[I]);return w.length=D,w}})},fc6a:function(l,c,r){var u=r("44ad"),d=r("1d80");l.exports=function(_){return u(d(_))}},fdbc:function(l,c){l.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(l,c,r){var u=r("4930");l.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(vuedraggable_umd);var Draggable=getDefaultExportFromCjs(vuedraggable_umd.exports),PicsUploaderPopover_vue_vue_type_style_index_0_lang="";const _hoisted_1$1r={class:"dynamic_pics_uploader"},_hoisted_2$1k={class:"dynamic_pics_uploader--header"},_hoisted_3$1e={class:"dynamic_pics_uploader--title"},_hoisted_4$X={class:"dynamic_pics_uploader--desc"},_hoisted_5$H=["onClick"],_hoisted_6$C=["onClick"],_hoisted_7$z=["onClick"],_hoisted_8$y={key:0,class:"dynamic_pics_uploader--item--error"},_hoisted_9$t=createBaseVNode("div",{class:"dynamic_pics_uploader--item--error__icon"},null,-1),_hoisted_10$q={class:"dynamic_pics_uploader--item--error__msg"},_hoisted_11$o={key:2,class:"dynamic_pics_uploader--item--skeleton"},_hoisted_12$l=createBaseVNode("span",{class:"dynamic_pics_uploader--item--skeleton--loading"},null,-1),_hoisted_13$g=[_hoisted_12$l],_sfc_main$$=defineComponent({__name:"PicsUploaderPopover",props:{visible:{type:Boolean,default:!1},relative:{type:Boolean,default:!1},placement:{type:String,default:"bottom-start"},offset:{type:Object,default:()=>({x:0,y:0})},autohide:{type:Boolean,default:!1},maxAmount:{type:Number,default:9},maxSize:{type:Number,default:20},accept:{type:Array,default:()=>["png","jpeg","jpg","gif"]},minWidth:{type:Number,default:10},minHeight:{type:Number,default:10}},emits:["update:visible","change"],setup(a,{expose:o,emit:s}){const i=a,l={ITEM_STATUS_TYPE_LOADING:"LOADING",ITEM_STATUS_TYPE_SUCCESS:"SUCCESS",ITEM_STATUS_TYPE_ERROR:"ERROR"},c=8;function r(){return[{status:"",data:null,progress:0}]}const u=reactive({visibleState:!1,maxGifMByte:c,title:"\u56FE\u7247\u4E0A\u4F20",list:r(),dragging:!1,uploader:null}),d=computed(()=>`${u.list.length<i.maxAmount+1?u.list.length-1:i.maxAmount} / ${i.maxAmount}`),_=computed(()=>u.list.filter(C=>C.status===l.ITEM_STATUS_TYPE_SUCCESS).map(C=>({...C.data})));watch(_,C=>{s("change",C)}),watch(()=>u.visibleState,C=>{C&&(_.value.length||y()),s("update:visible",C)}),watch(()=>i.visible,C=>{C!==u.visibleState&&(u.visibleState=C)});const f=new PictureUploader({accept:i.accept,multiple:!0,maxSize:i.maxSize,minWidth:i.minWidth,minHeight:i.minHeight,onBeforeUpload:$});function m(C){return C===u.list.length-1?u.list.length!==i.maxAmount+1:!1}function p(){u.visibleState=!1,u.list=r()}function v(C){u.list=C.map(S=>{const E=f.getProcessedItem(S);return E.src=S.img_src,E})}async function g(){if(u.list.length<2){p();return}await alertAsync({content:"\u5173\u95ED\u5C06\u6E05\u9664\u6240\u6709\u5DF2\u6DFB\u52A0\u56FE\u7247\uFF0C\u8BF7\u786E\u8BA4",confirmText:"\u6E05\u9664\u56FE\u7247",cancelText:"\u70B9\u9519\u4E86~"})&&p()}function $(C){const S=C.length+u.list.length-1-i.maxAmount;S>0&&(C.splice(C.length-S),toastAsync({content:`\u4E0A\u4F20\u56FE\u7247\u4E0D\u5F97\u8D85\u8FC7${i.maxAmount}\u5F20`}))}async function y(){try{const C=[...u.list.slice(0,u.list.length-1),...await f.trigger()];C.length<i.maxAmount+1&&C.push(...r()),u.list=C}catch(C){console.log(C)}}function B(C){const S=[...u.list];S.splice(C,1),u.list=S}return o({refresh:v,close:p}),(C,S)=>(openBlock(),createBlock(_sfc_main$2I,{visible:u.visibleState,"onUpdate:visible":S[2]||(S[2]=E=>u.visibleState=E),width:"290",relative:a.relative,placement:a.placement,offset:a.offset,autohide:a.autohide},{reference:withCtx(()=>[renderSlot(C.$slots,"reference")]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1r,[createBaseVNode("div",_hoisted_2$1k,[createBaseVNode("span",_hoisted_3$1e,toDisplayString(u.title),1),createBaseVNode("span",_hoisted_4$X,toDisplayString(unref(d)),1),createBaseVNode("div",{class:"dynamic_pics_uploader--close",onClick:withModifiers(g,["stop"])},[createVNode(unref(IcoClose))],8,_hoisted_5$H)]),createVNode(unref(Draggable),{list:u.list,class:normalizeClass({"dynamic_pics_uploader--content":!0,dragging:u.dragging}),draggable:".dynamic_pics_uploader--item",animation:"500","item-key":"id",onStart:S[0]||(S[0]=E=>u.dragging=!0),onEnd:S[1]||(S[1]=E=>u.dragging=!1)},{item:withCtx(({element:E,index:k})=>[k<i.maxAmount?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass({"dynamic_pics_uploader--add":m(k),"dynamic_pics_uploader--item":!m(k),[E.status.toLowerCase()]:!m(k)}),onClick:withModifiers(()=>{!m(k)||y()},["stop"])},[m(k)?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",{class:"dynamic_pics_uploader--item--remove",onClick:withModifiers(b=>B(k),["stop"])},[createVNode(unref(IcoMellowClose))],8,_hoisted_7$z),E.status==="ERROR"?(openBlock(),createElementBlock("div",_hoisted_8$y,[_hoisted_9$t,createBaseVNode("div",_hoisted_10$q,toDisplayString(E.msg),1)])):E.src||E.data&&E.data.img_src?(openBlock(),createBlock(_sfc_main$10,normalizeProps(mergeProps({key:1},E)),null,16)):(openBlock(),createElementBlock("div",_hoisted_11$o,_hoisted_13$g))],64))],10,_hoisted_6$C)):createCommentVNode("",!0)]),_:1},8,["list","class"])])]),_:3},8,["visible","relative","placement","offset","autohide"]))}}),_hoisted_1$1q={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1j=createBaseVNode("path",{d:"M11.1 13.434c.939 0 1.7-.755 1.7-1.688 0-.932-.761-1.688-1.7-1.688s-1.7.756-1.7 1.688c0 .933.761 1.688 1.7 1.688Zm11.906-7.597a3.63 3.63 0 0 1 3.644 3.625v12.91c0 2.001-1.633 3.625-3.644 3.625H8.994a3.63 3.63 0 0 1-3.644-3.625V9.462c0-2 1.633-3.625 3.644-3.625h14.012ZM20.393 18.03c-1.957.234-3.577 1.51-4.879 3.894a.602.602 0 0 1-.932.156c-1.319-1.196-2.765-1.683-4.381-1.485-1.398.171-2.51 1.05-3.36 2.703a2.34 2.34 0 0 0 2.153 1.41h14.012a2.34 2.34 0 0 0 2.344-2.335v-1.77l-.015-.021c-1.454-1.947-3.085-2.774-4.942-2.552Zm2.613-10.9H8.994A2.34 2.34 0 0 0 6.65 9.461v11.921c.914-1.14 2.052-1.806 3.404-1.971 1.739-.214 3.338.23 4.77 1.315 1.423-2.308 3.237-3.62 5.426-3.88 1.902-.228 3.611.425 5.1 1.92V9.461a2.335 2.335 0 0 0-2.344-2.334Z",fill:"#9499A0"},null,-1),_hoisted_3$1d=[_hoisted_2$1j];function render$s(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$1q,_hoisted_3$1d)}var IcoAlbum={render:render$s},index_vue_vue_type_style_index_0_lang="";const _hoisted_1$1p={class:"dynamic_publish"},_hoisted_2$1i={class:"dynamic_publish--input"},_hoisted_3$1c={class:"dynamic_publish--control"},_hoisted_4$W={class:"dynamic_publish--tools"},_hoisted_5$G=createTextVNode(" > "),_hoisted_6$B={class:"dynamic_publish--headquarters"},_hoisted_7$y=["title"],_sfc_main$_=defineComponent({__name:"index",props:{version:{type:String,default:"lite",validator(a){return["lite","pro"].includes(a)}},defaultContent:{type:String,default:""},defaultContentNodes:{type:Array,default:()=>[]}},emits:["done","popover-visible-change"],setup(a,{expose:o,emit:s}){const i=a,{userInfo:l}=storeToRefs(useUserInfoStore()),c=reactive({init:!1,publish:!1}),r=ref(""),u=reactive({id:0,name:"",requestId:"",fromSource:""}),d=reactive({value:"",nodes:[]}),_=reactive({tools:{emoji:{visible:!0,active:!1},pic:{visible:!0,active:!1,config:{maxSize:20},data:reactive([])},at:{visible:!0,active:!1,config:{maxCount:20}},topic:{visible:!1,active:!1},poll:{visible:!1,active:!1,data:{id:0,title:""}},lottery:{visible:!1,active:!1,data:{id:0,title:""}},popularize:{visible:!1,active:!1,data:{id:0,type:0}},videoReserve:{visible:!1,active:!1,data:{id:0,source:0,lottery:0}},liveReserve:{visible:!1,active:!1,data:{id:0,source:0,lottery:0}}},commentOption:{active:!1,value:1,list:[]},maxContentLength:1e3,maxArticleContentLength:2e4});reactive({visible:!1,resolve:null,reject:null});const f=computed(()=>!!(d.value||_.tools.pic.data.length)),m=computed(()=>getStringLength(d.value)),p=computed(()=>{const w=m.value,D=w>0,L=w>_.maxContentLength;let P=w;return L&&(P=_.maxContentLength-w),{visible:D,text:P,heedful:L,title:"\u5168\u89D2\u5B57\u7B26\u8BA1\u6570\u4E3A1\u534A\u89D2\u5B57\u7B26\u8BA1\u6570\u4E3A0.5\uFF0C\u4E0D\u8DB31\u65F6\u8BB0\u4E3A1"}}),v=computed(()=>{const w=c.init||c.publish,D=!d.value.replace(/\s/g,"").length,L=_.tools.pic.data.length===0;return{text:"\u53D1\u5E03",disabled:w||D&&L||p.value.heedful}}),g=reactive({textarea:null,emojiPopover:null,picsUploaderPopover:null});function $(w,D){g[w]=D}function y(w,{nodes:D}){let L=0,P={at:!1};const j=_.tools.at.config.maxCount;D.forEach(O=>{if(O.type==="highlight")switch(O.data.type){case"at":L++;break}}),w.forEach((O,F)=>{if(O.type==="highlight")switch(O.data.type){case"at":L===j?(P.at=!0,w[F]=getRichTextareaTextNode(O.text)):L++;break}}),P.at&&toastAsync({content:`\u6700\u591A\u652F\u6301@ ${j}\u4F4D\u7528\u6237`})}function B(w){const{value:D,nodes:L}=w;d.value=D;const P={poll:null,lottery:null};d.nodes=L.map(j=>{if(j.type==="highlight")switch(j.data.type){case"vote":P.poll={id:j.data.rid,title:j.data.text};break;case"lottery":P.lottery={id:j.data.rid,title:j.data.text};break}return j}),P.poll?!_.tools.poll.data.id&&_.tools.poll.visible&&(_.tools.poll.data=P.poll):_.tools.poll.data.id&&this._resetTool("poll"),P.lottery?!_.tools.lottery.data.id&&_.tools.lottery.visible&&(_.tools.lottery.data=P.lottery):_.tools.lottery.data.id&&this._resetTool("lottery"),u.id}function C(w){w.type===4?k({type:"text",data:{text:w.text}}):k({type:"emoji",data:w})}function S(w){clearArray(_.tools.pic.data,...w)}async function E(w){var D,L;switch((L=(D=_.tools[w])==null?void 0:D.config)!=null&&L.focus&&await N(),w){case"at":k({type:"text",data:{text:"@"}});break}}function k(...w){g.textarea.insert(...w)}function b(w){var D;if(w!=null&&w.length){g.picsUploaderPopover.refresh(w),_.tools.pic.active=!0;return}(D=g.picsUploaderPopover)==null||D.close()}function V(w){switch(w){case"pic":b([]);break}}function A(){var w;g.textarea.refresh({nodes:[]}),(w=_.tools.pic.data)!=null&&w.length&&V("pic")}async function x(){if(!v.value.disabled){c.publish=!0;try{const w=await createDynamic({nodes:d.nodes,pics:_.tools.pic.data,topic:u,scene:0,uploadId:r.value,comment:_.commentOption.value});toastAsync({content:"\u53D1\u5E03\u6210\u529F"}),c.publish=!1,s("done",{...w},{topic:toRaw(u)}),A()}catch(w){c.publish=!1,console.log(w.message)}}}function T(){r.value=`${l.value.mid||0}_${Math.floor(Date.now()/1e3)}_${Math.floor(Math.random()*1e4)}`}async function I(){var w,D,L,P,j,O;try{c.init=!0;const{settings:F,permissions:U}=await getDynamicPublishConfig();if(_.maxContentLength=F.max_content_length||1e3,_.maxArticleContentLength=F.max_article_content_length||2e4,_.tools.at.config.maxCount=F.max_at_count||20,_.tools.pic.config.maxSize=F.max_upload_size,i.version==="pro"){_.tools.poll.visible=!0,_.tools.lottery.visible=!!((w=U.lottery)!=null&&w.allowable),_.tools.popularize.visible=!!((D=U.popularize)!=null&&D.allowable),_.tools.videoReserve.visible=!!((L=U.video_reserve)!=null&&L.allowable),_.tools.liveReserve.visible=!!((P=U.live_reserve)!=null&&P.allowable);const W=[];(j=U.control_comment)!=null&&j.allowable&&W.push({...U.control_comment,value:0}),(O=U.choose_comment)!=null&&O.allowable&&W.push({...U.choose_comment,value:2}),W.length&&W.unshift({value:1,title:"\u5141\u8BB8\u8BC4\u8BBA",desc:""}),_.commentOption.list=W}r.value||T()}catch(F){console.log(F.message)}c.init=!1}async function R(){if(c.init||c.publish)return Promise.reject(new Error("loading..."));f.value&&await alertAsync({content:"\u662F\u5426\u4FDD\u5B58\u672C\u6B21\u7F16\u8F91",cancelText:"\u4E0D\u4FDD\u5B58",confirmText:"\u4FDD\u5B58"})?console.log("save"):A()}async function N(){await promiseTimeout(0),g.textarea.focus()}return watch(_,w=>{const D=w.tools.emoji.active||w.tools.pic.active;s("popover-visible-change",D)},{deep:!0}),o({init:I,exit:R,focus:N}),(w,D)=>{const L=resolveComponent("VButton");return openBlock(),createElementBlock("div",_hoisted_1$1p,[createBaseVNode("div",_hoisted_2$1i,[createVNode(unref(RichTextarea),{ref:P=>$("textarea",P),placeholder:"\u6709\u4EC0\u4E48\u60F3\u548C\u5927\u5BB6\u5206\u4EAB\u7684\uFF1F","default-value":a.defaultContent,"default-nodes":a.defaultContentNodes,"before-insert":y,onChange:B},null,8,["default-value","default-nodes"])]),createBaseVNode("div",_hoisted_3$1c,[createBaseVNode("div",_hoisted_4$W,[createVNode(_sfc_main$2J,{visible:_.tools.emoji.active,"onUpdate:visible":D[0]||(D[0]=P=>_.tools.emoji.active=P),relative:"",ref:P=>$("emojiPopover",P),"mutex-id":"tool",offset:{x:-11,y:32},onSelect:C},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({"dynamic_publish--tools--item":!0,active:_.tools.emoji.active})},[createVNode(unref(IcoEmoji))],2),_hoisted_5$G]),_:1},8,["visible"]),createVNode(_sfc_main$$,{visible:_.tools.pic.active,"onUpdate:visible":D[1]||(D[1]=P=>_.tools.pic.active=P),relative:"",ref:P=>$("picsUploaderPopover",P),offset:{x:-11,y:32},"max-size":_.tools.pic.config.maxSize,onChange:S},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({"dynamic_publish--tools--item":!0,active:_.tools.pic.active})},[createVNode(unref(IcoAlbum))],2)]),_:1},8,["visible","max-size"]),createBaseVNode("div",{class:"dynamic_publish--tools--item",onClick:D[2]||(D[2]=P=>E("at"))},[createVNode(unref(IcoAt))])]),createBaseVNode("div",_hoisted_6$B,[withDirectives(createBaseVNode("div",{class:normalizeClass({"dynamic_publish--hint":!0,heedful:unref(p).heedful}),title:unref(p).title},toDisplayString(unref(p).text),11,_hoisted_7$y),[[vShow,unref(p).visible]]),createVNode(L,{class:"dynamic_publish--action bd_radius_sm",disabled:unref(v).disabled,type:"pink",onClick:x},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(v).text),1)]),_:1},8,["disabled"])])])])}}});var PublishPopup_vue_vue_type_style_index_0_lang="";const _hoisted_1$1o={class:"dynamic_publish_popup--header flex_between"},_hoisted_2$1h=["textContent"],_hoisted_3$1b=["onClick"],_hoisted_4$V={class:"dynamic_publish_popup--content"},_sfc_main$Z=defineComponent({__name:"PublishPopup",emits:["done"],setup(a,{expose:o,emit:s}){const i=ref(null),l=ref(null),c=ref("\u53D1\u5E03\u52A8\u6001"),r=()=>{i.value.show(),l.value.init(),l.value.focus()},u=async()=>{try{await l.value.exit(),i.value.hide()}catch(f){console.log(f)}},d=(...f)=>{i.value.hide(),s("done",...f)},_=f=>{f?i.value.el.style.top="calc(50% - 100px)":i.value.el.style.top=""};return o({show:r,hide:u}),(f,m)=>(openBlock(),createBlock(VPopup,{"custom-class":"dynamic_publish_popup",ref_key:"popupRef",ref:i,onWrapClick:u},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1o,[createBaseVNode("div",{class:"dynamic_publish_popup--title",textContent:toDisplayString(c.value)},null,8,_hoisted_2$1h),createBaseVNode("div",{class:"dynamic_publish_popup--close",onClick:withModifiers(u,["stop"])},[createVNode(unref(IcoClose))],8,_hoisted_3$1b)]),createBaseVNode("div",_hoisted_4$V,[createVNode(_sfc_main$_,{ref_key:"publishRef",ref:l,onDone:d,onPopoverVisibleChange:_},null,512)])]),_:1},512))}}),_hoisted_1$1n={class:"dynamic_all"},_sfc_main$Y=defineComponent({__name:"DynamicAll",props:{active:{type:Boolean,default:!1},hostMid:{type:Number,default:0}},emits:["focus"],setup(a,{expose:o,emit:s}){const i=a,l=ref(null),c=ref(null),r=ref(null),u=ref(null),d=ref(0),_=ref({}),f=async(S=!1)=>{l.value||await nextTick(),$(),S?(l.value.refresh(),c.value.refresh()):i.hostMid?c.value.refresh():l.value.refresh(),v(),B()},{isLogin:m}=useWatchLoginStatus(f);provide("pageSpmId",SPM_PV.dynamicAll),provide("dynamicScene","dynamic"),provide("galleryContainer",".dynamic_all"),useWrite("Dynamic",()=>{if(!m.value){requestLogin("dynamicAll.write");return}s("focus"),r.value.show()});const p=ref(!1),v=async(S=!1)=>{if(!(!m||p.value))try{S||(p.value=!0);const E=await getDynamicLiveList();_.value=E,p.value=!1}catch{_.value={},p.value=!1}},g=async S=>{try{const{item:E}=await getDynamicDetail(S.dyn_id_str,!0);l.value.unshift(E)}catch(E){console.log(E)}},$=()=>{var S;(S=u.value)==null||S.close()};o({handleRefresh:f,closeDetails:$}),watch(()=>i.hostMid,S=>{$(),S&&(d.value=S)}),useRefresh("Dynamic",()=>{!i.active||f()});let y=null;const B=()=>{clearInterval(y),y=setInterval(()=>v(!0),2e4)},C=()=>{clearInterval(y)};return onActivated(()=>{"total"in _.value&&v(!0),B()}),onDeactivated(()=>C()),(S,E)=>withDirectives((openBlock(),createElementBlock("div",_hoisted_1$1n,[createVNode(_sfc_main$11,{ref_key:"feedFragmentAll",ref:l,active:a.active&&!a.hostMid,liveList:_.value,liveLoading:p.value,"page-key":"dynamic-all","class-key":"all"},null,8,["active","liveList","liveLoading"]),createVNode(_sfc_main$11,{ref_key:"feedFragmentUp",ref:c,active:a.active&&!!a.hostMid,liveList:_.value,liveLoading:p.value,"page-key":"dynamic-all","class-key":"up","host-mid":d.value},null,8,["active","liveList","liveLoading","host-mid"]),createVNode(_sfc_main$Z,{ref_key:"publishPopupRef",ref:r,onDone:g},null,512),createVNode(_sfc_main$1W,{ref_key:"allSupplements",ref:u,active:a.active},null,8,["active"])],512)),[[vShow,a.active]])}});var FeedFragmentVideo_vue_vue_type_style_index_0_lang="";const _hoisted_1$1m=createBaseVNode("div",{class:"feed_fragment--loading"},null,-1),_hoisted_2$1g=createBaseVNode("div",{class:"feed_fragment--empty"},[createBaseVNode("img",{src:_imports_0$3}),createBaseVNode("p",null,"\u6CA1\u6709\u4F60\u60F3\u8981\u7684\u5185\u5BB9~")],-1),_hoisted_3$1a={class:"feed_fragment--error"},_hoisted_4$U=createBaseVNode("img",{src:_imports_1},null,-1),_hoisted_5$F=createBaseVNode("p",null,"\u5185\u5BB9\u4E0D\u89C1\u4E86\uFF0C\u8BF7\u60A8\u518D\u5237\u65B0\u8BD5\u8BD5",-1),_hoisted_6$A=createTextVNode("\u518D\u8BD5\u4E00\u6B21"),_sfc_main$X=defineComponent({__name:"FeedFragmentVideo",props:{active:{type:Boolean,default:!0},status:{type:String,default:"initial"},list:{type:Array,default:()=>[]},feedKey:{type:String,default:"id"},itemKey:{type:String,default:"id"},useItemWrapper:{type:Boolean,default:!1},disableScroll:{type:Boolean,default:!1}},emits:["load-more","refresh"],setup(a,{expose:o,emit:s}){const i=a;function l(f,m){return f[i.itemKey]||m}const{routePositions:c}=storeToRefs(useRoutePositionsStore()),r=ref(),u=f=>{i.feedKey&&(c.value[i.feedKey]=f.target.scrollTop)};watch(()=>i.active,f=>{f&&r.value&&(setTimeout(()=>{const m=c.value[i.feedKey];isNum(m)&&(r.value.$el.scrollTop=m)}),dynamicEvents.emit("resetRoutePosition",i.feedKey))},{immediate:!0});function d(){!i.list.length&&!i.useItemWrapper||s("load-more")}function _(){s("refresh")}return o({rootRef:r}),(f,m)=>{const p=resolveComponent("VButton"),v=resolveComponent("Scroller");return openBlock(),createBlock(v,{class:"feed_fragment page_scroller",ref_key:"pageScrollRef",ref:r,disabled:a.disableScroll,active:a.active,onLoadMore:d,onScrollPassive:u},{default:withCtx(()=>[renderSlot(f.$slots,"top"),a.list.length?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:0},[a.status==="loading"?renderSlot(f.$slots,"loading",{key:0},()=>[_hoisted_1$1m]):a.status==="empty"?renderSlot(f.$slots,"empty",{key:1},()=>[_hoisted_2$1g]):a.status==="error"?renderSlot(f.$slots,"error",{key:2},()=>[createBaseVNode("div",_hoisted_3$1a,[_hoisted_4$U,_hoisted_5$F,createVNode(p,{type:"pink",size:"large",onClick:_},{default:withCtx(()=>[_hoisted_6$A]),_:1})])]):createCommentVNode("",!0)],64)),a.useItemWrapper?renderSlot(f.$slots,"itemWrapper",{key:1}):(openBlock(!0),createElementBlock(Fragment,{key:2},renderList(a.list,(g,$)=>renderSlot(f.$slots,"item",{key:l(g,$),data:g,index:$})),128)),renderSlot(f.$slots,"bottom")]),_:3},8,["disabled","active"])}}});var VideoFeedFragment_vue_vue_type_style_index_0_lang="";const _hoisted_1$1l={class:"pt_lg i_wrapper dynamic_video_feed_fragment--skeleton row gutter_md"},_hoisted_2$1f={class:"row gutter_md pt_lg i_wrapper"},_sfc_main$W=defineComponent({__name:"VideoFeedFragment",props:{pageKey:{type:String,default:""},classKey:{type:String,default:""},active:{type:Boolean,default:!1},hostMid:{type:Number,default:0}},setup(a,{expose:o}){const s=a,i="dynamic_video_feed_fragment",l=computed(()=>({dynamic_video_feed_fragment:!0,[s.classKey]:s.classKey})),c=computed(()=>s.pageKey&&s.classKey?`${s.pageKey}-${s.classKey}`:""),r=getSelectorByClassNames(i,s.classKey);useScrollToTop(r,{watchParam:()=>s.active});const u=new Map,{status:d,list:_,reset:f}=useFeedState([]),m=reactive({offset:"",page:0}),p=()=>{f(),u.clear(),m.offset="",m.page=0},v=async()=>{if(d.value!=="noMore"&&d.value!=="loading"){d.value="loading";try{const{items:B,has_more:C,offset:S,page:E}=await getDynamicVideos({offset:m.offset,page:++m.page,hostMid:s.hostMid});B!=null&&B.length&&B.forEach((k,b)=>{const V=k.aid;u.get(V)||(u.set(V,!0),_.value.push(transformDynamicArchiveToVideoInfo(k,b)))}),m.offset=S,m.page=E,_.value.length?C?d.value="loaded":d.value="noMore":d.value="empty"}catch{d.value="error"}}};async function g(B=!0){return new Promise(C=>{scrollToTop({element:document.querySelector(r),speed:3,animation:B,onDone:C})})}let $=s.hostMid;async function y(B=!0){$=s.hostMid,await g(B),p(),v()}return watch(()=>s.active,B=>{!B||d.value!=="initial"&&$===s.hostMid||y()}),watch(()=>s.hostMid,()=>{!s.active||y(!1)}),useRefresh("Dynamic",()=>{s.active&&y()}),o({refresh:y}),(B,C)=>withDirectives((openBlock(),createBlock(_sfc_main$X,{class:normalizeClass(unref(l)),"use-item-wrapper":"",status:unref(d),active:a.active,"feed-key":unref(c),onLoadMore:v,onHandleRefresh:y},{loading:withCtx(()=>[createBaseVNode("div",_hoisted_1$1l,[(openBlock(),createElementBlock(Fragment,null,renderList(20,S=>createBaseVNode("div",{class:"col_4 col_sm_3 col_lg_1_5 mb_xxl",key:S},[createVNode(unref(BiliVideoCard),{showAvatar:!0,"disable-frame":"","disable-scale":"",showLoadingAnimation:!0,skeleton:!0})])),64))])]),itemWrapper:withCtx(()=>[createBaseVNode("div",_hoisted_2$1f,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(_),S=>(openBlock(),createElementBlock("div",{class:"home_hots_all--video col_4 col_sm_3 col_lg_1_5 mb_xxl",key:S.aid},[createVNode(unref(BiliVideoCard),{info:S,"is-rcmd":"","img-lazy":"eager","disable-frame":"","disable-scale":"",iid:"pc_app_dynamic_video"},null,8,["info"])]))),128))])]),_:1},8,["class","status","active","feed-key"])),[[vShow,a.active]])}}),_hoisted_1$1k={class:"dynamic_video"},_sfc_main$V=defineComponent({__name:"DynamicVideo",props:{active:{type:Boolean,default:!1},hostMid:{type:Number,default:0}},setup(a,{expose:o}){const s=a,i=ref(null),l=ref(null),c=ref(0),r=async(u=!1)=>{i.value||await nextTick(),u?(i.value.refresh(),l.value.refresh()):s.hostMid?l.value.refresh():i.value.refresh()};return useWatchLoginStatus(r),o({handleRefresh:r}),watch(()=>s.hostMid,u=>{u&&(c.value=u)}),onMounted(()=>{useScrollToTop(".dynamic_video .feed_fragment",{watchParam:()=>s.active})}),(u,d)=>withDirectives((openBlock(),createElementBlock("div",_hoisted_1$1k,[createVNode(_sfc_main$W,{ref_key:"feedFragmentAll",ref:i,active:a.active&&!a.hostMid,"page-key":"dynamic-video","class-key":"all"},null,8,["active"]),createVNode(_sfc_main$W,{ref_key:"feedFragmentUp",ref:l,active:a.active&&!!a.hostMid,"page-key":"dynamic-video","class-key":"up","host-mid":c.value},null,8,["active","host-mid"])],512)),[[vShow,a.active]])}});var Notification_vue_vue_type_style_index_0_lang="";const _sfc_main$U=defineComponent({__name:"Notification",props:{visible:{type:Boolean,default:!1}},emits:["check"],setup(a,{emit:o}){const{isLiveListSmall:s}=storeToRefs(useDynamicStore()),i=()=>o("check");return(l,c)=>(openBlock(),createBlock(Transition,{name:"v_notification--transition"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:normalizeClass(["v_notification u_select_none",{"dyn-live-sm":unref(s)}]),onClick:i},[renderSlot(l.$slots,"default")],2),[[vShow,a.visible]])]),_:3}))}}),_hoisted_1$1j={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1e=createBaseVNode("path",{d:"M14.375 2.195c-.008-.353-.278-.576-.663-.568-.387.008-.586.244-.65.597-.032.184-.022.376-.024.564-.003.32 0 .642 0 .963l-.151.068c-.169-.162-.334-.327-.506-.485-1.55-1.428-3.387-1.96-5.445-1.644-2.906.446-5.059 2.866-5.311 5.885-.237 2.833 1.59 5.57 4.334 6.491 2.775.932 5.863-.152 7.424-2.609.1-.158.204-.32.266-.495.119-.34.059-.656-.277-.838-.323-.174-.63-.104-.859.192-.114.149-.202.318-.309.473-.968 1.397-2.297 2.159-3.998 2.242a5.03 5.03 0 0 1-5.029-3.544 5.065 5.065 0 0 1 2.29-5.855c1.972-1.149 4.503-.819 6.099.801.117.119.195.275.385.548-.623 0-1.103-.026-1.578.007-.44.03-.672.292-.668.659.003.357.252.652.675.663a93.97 93.97 0 0 0 3.31.005c.364-.004.665-.212.676-.571.036-1.182.039-2.367.01-3.549Z",fill:"#E58900"},null,-1),_hoisted_3$19=[_hoisted_2$1e];function render$r(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$1j,_hoisted_3$19)}var IcoYeRefresh={render:render$r},Dynamic_vue_vue_type_style_index_0_lang="";const _hoisted_1$1i={class:"flex_start flex_inline"},_hoisted_2$1d={class:"app_dynamic i_page_wrapper"},_hoisted_3$18={class:"app_dynamic--content i_page_content flex_row"},_hoisted_4$T={class:"app_dynamic--content--main h_100 p_relative"},_hoisted_5$E=createTextVNode("\u6709\u65B0\u52A8\u6001\uFF0C\u70B9\u51FB\u5237\u65B0 "),_sfc_main$T=defineComponent({__name:"Dynamic",setup(a){useRoutePageFadeIn(".app_dynamic");const{handlePageScroll:o,resetScrollPosition:s,restoreScrollPosition:i,routePositions:l,pageScrollRef:c}=useRouteScrollKeeper("DynamicUpList",!1),{userInfo:r}=storeToRefs(useUserInfoStore()),u=ref(null),d=ref(null);let _=Date.now();const f=computed(()=>r.value.isLogin?[{key:"1",name:"\u7EFC\u5408"},{key:"2",name:"\u89C6\u9891"}]:[{key:"1",name:"\u7EFC\u5408"}]),m=useCurrentInstanceActive(),p=ref(0),v=ref([]),g=ref(!1);let $="1";const y=useRoute();r.value.isLogin&&(y.query.tab?$=y.query.tab==="video"?"2":"1":$=callNativeSync("store/getData","DYNAMIC_DEF_TAB_KEY")||"1");const B=ref($),C=ref(-1),{spmId:S,reportPv:E,initEnterTime:k,pageName:b,logOpenAppPage:V}=useReportPv({spm_id:$==="1"?SPM_PV.dynamicAll:SPM_PV.dynamicVideo,pageName:$==="1"?"DynamicAll":"DynamicVideo"}),A=(H=!1)=>{var M,ee,G;B.value==="1"?(M=u.value)==null||M.handleRefresh(H):((ee=u.value)==null||ee.handleRefresh(),(G=d.value)==null||G.handleRefresh(H))},x=()=>{dynamicEvents.emit("closeCommentDetails")};watch(y,()=>{y.name==="Dynamic"&&(x(),y.query.tab==="all"?B.value="1":y.query.tab==="video"&&r.value.isLogin&&(B.value="2"))},{immediate:!0}),watch(B,H=>{var M;B.value==="2"&&((M=d.value)==null||M.handleRefresh(!!p.value)),callNative("store/setData","DYNAMIC_DEF_TAB_KEY",H),E(),S.value=H==="1"?SPM_PV.dynamicAll:SPM_PV.dynamicVideo,k(),b.value=H==="1"?"DynamicAll":"DynamicVideo",V()});const T=ref(Date.now());let I=T.value,R=3e5,N=null;const w=ref(!1),D=computed(()=>{const H=m.value&&w.value&&(!p.value||T.value-I>R);return H&&!p.value&&(I=0),H}),{updateBaseLine:L}=storeToRefs(useDynamicStore()),P=async()=>{try{if(!L.value)return;const{update_num:H}=await getDynamicUpdate(L.value,B.value==="2");H>0&&(w.value=!0)}catch(H){console.log(H)}},j=()=>{clearInterval(N),N=setInterval(()=>{T.value=Date.now(),w.value||P()},30*1e3)},O=()=>{w.value=!1;const H=!!p.value;H&&(I=T.value),F(-1),W(),setTimeout(()=>{A(H),j()})},F=H=>{C.value=H,H!==-1?(v.value[H].has_update=!1,p.value=v.value[C.value].mid):p.value=0},U=H=>{["dynamic-all-all","dynamic-all-up","dynamic-video-all","dynamic-video-up"].filter(M=>M!==H).forEach(M=>{l.value[M]=0})};dynamicEvents.on("resetRoutePosition",H=>U(H));const W=async()=>{if(!r.value.isLogin){v.value=[];return}if(!g.value){g.value=!0;try{const H=await getUpListNew();v.value=(H==null?void 0:H.items)||[]}catch{toastAsync({content:"UP\u4E3B\u4FE1\u606F\u52A0\u8F7D\u5931\u8D25"})}g.value=!1,s(),U()}};watch(()=>r.value.isLogin,()=>{W()},{immediate:!0}),useRefresh("Dynamic",()=>{p.value||W()});let ne=null;return onActivated(()=>{Date.now()-_>12e4?O():(i(),j()),clearTimeout(ne),ne=setTimeout(()=>P(),1e3)}),onDeactivated(()=>{_=Date.now(),clearInterval(N)}),onBeforeUnmount(()=>dynamicEvents.off("resetRoutePosition")),(H,M)=>{const ee=resolveComponent("v-tab-item"),G=resolveComponent("v-tabs"),Q=resolveComponent("HeaderSlot");return openBlock(),createElementBlock(Fragment,null,[createVNode(Q,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1i,[createVNode(G,{class:"mt_xs","auto-adjustment":"",activeKey:B.value,"onUpdate:activeKey":M[0]||(M[0]=te=>B.value=te),"slide-to-hover":!1,"active-pink":!0,"no-padding-left":!1,"tabs-gutter":32,"slider-width":18,onTabChange:x},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(f),te=>(openBlock(),createBlock(ee,{key:te.key,tab:te.name},null,8,["tab"]))),128))]),_:1},8,["activeKey"])])]),_:1}),createBaseVNode("div",_hoisted_2$1d,[createBaseVNode("div",_hoisted_3$18,[createVNode(_sfc_main$2K,{ref_key:"pageScrollRef",ref:c,class:"app_dynamic--content--aside auto_hide_scrollbar",onScrollPassive:unref(o)},{default:withCtx(()=>[createVNode(_sfc_main$16,{items:v.value,loading:g.value,"active-index":C.value,onChange:F},null,8,["items","loading","active-index"])]),_:1},8,["onScrollPassive"]),createBaseVNode("div",_hoisted_4$T,[createVNode(_sfc_main$Y,{ref_key:"dynamicAll",ref:u,active:unref(m)&&B.value==="1","host-mid":p.value,onFocus:M[1]||(M[1]=te=>B.value="1")},null,8,["active","host-mid"]),unref(r)&&unref(r).isLogin?(openBlock(),createBlock(_sfc_main$V,{key:0,ref_key:"dynamicVideo",ref:d,active:unref(m)&&B.value==="2","host-mid":p.value},null,8,["active","host-mid"])):createCommentVNode("",!0),createVNode(_sfc_main$U,{class:"app_dynamic--notification",visible:unref(D),onCheck:O},{default:withCtx(()=>[createVNode(unref(IcoYeRefresh),{class:"app_dynamic--notification--ico"}),_hoisted_5$E]),_:1},8,["visible"])])])])],64)}}});var MineInfo_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$e=a=>(pushScopeId("data-v-2db9ee86"),a=a(),popScopeId(),a),_hoisted_1$1h={class:"mine"},_hoisted_2$1c={class:"mine-left mr_lg"},_hoisted_3$17={class:"mine-content"},_hoisted_4$S={class:"mine-content-row1"},_hoisted_5$D=["textContent"],_hoisted_6$z={key:3,class:"vip-label ml_xs"},_hoisted_7$x=["src"],_hoisted_8$x=["textContent"],_hoisted_9$s={class:"mine-content-row2"},_hoisted_10$p=_withScopeId$e(()=>createBaseVNode("span",null,"B\u5E01\uFF1A",-1)),_hoisted_11$n=["textContent"],_hoisted_12$k=_withScopeId$e(()=>createBaseVNode("span",{class:"ml_md"},"\u786C\u5E01\uFF1A",-1)),_hoisted_13$f=["textContent"],_hoisted_14$d={class:"mine-data"},_hoisted_15$b=["textContent"],_hoisted_16$a=_withScopeId$e(()=>createBaseVNode("div",null,"\u52A8\u6001",-1)),_hoisted_17$a=["textContent"],_hoisted_18$a=_withScopeId$e(()=>createBaseVNode("div",null,"\u5173\u6CE8",-1)),_hoisted_19$9=["textContent"],_hoisted_20$9=_withScopeId$e(()=>createBaseVNode("div",null,"\u7C89\u4E1D",-1)),_hoisted_21$9=_withScopeId$e(()=>createBaseVNode("span",null,"\u7A7A\u95F4",-1)),_hoisted_22$8=_withScopeId$e(()=>createBaseVNode("svg",{width:"7",height:"11",viewBox:"0 0 7 11",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:`M1.6401 9.34486C1.51333 9.21809 1.51333 9.01256 1.6401 8.88579L5.30595 5.21994L1.6401 1.55409\r
              C1.51333 1.42732 1.51333 1.22179 1.6401 1.09502C1.76687 0.968249 1.97241 0.968249\r
              2.09918 1.09502L5.84154 4.83738C6.05282 5.04866 6.05282 5.39122 5.84154 5.6025L2.09918\r
              9.34486C1.97241 9.47163 1.76687 9.47163 1.6401 9.34486Z`,"stroke-width":"1.3","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),_hoisted_23$8=[_hoisted_21$9,_hoisted_22$8],_hoisted_24$8=_withScopeId$e(()=>createBaseVNode("svg",{class:"big",viewBox:"0 0 127 119",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:`M50.9315 13.8113C44.4627 3.22267 33.0098 -3.35758 20.5486 -3.64364C8.08747 -3.92971 8.7012\r
          -1.53179 10.365 1.24552C13.989 7.92547 17.5557 16.5722 19.4922 24.8059C19.5202 24.952 19.5602\r
          25.1538 19.6103 25.4057C20.5349 30.0632 24.8564 51.8305 18.9019 54.1525C14.7176 55.7842 5.79105\r
          57.0739 -7.87778 58.0214C-17.5904 58.4137 -24.4167 58.6252 -28.3566 58.6557L-41.0372 58.6375C-47.3258\r
          58.6375 -46.0443 69.4927 -43.8725 76.1181L-43.2118 78.3658C-43.1549 78.5313 -43.098 78.6975 -43.0409\r
          78.864C-41.1463 84.3934 -39.116 90.3187 -31.7967 89.2986C-30.8189 89.1623 -29.8064 88.8775 -28.5069\r
          88.5119C-26.3524 87.9057 -23.4092 87.0777 -18.528 86.3371C-10.7026 85.1497 6.54979 82.6082 9.25054\r
          82.6082C18.7749 82.6082 2.56246 105.367 -4.37959 114.323C-5.27316 115.371 -6.24806 116.552 -7.30542\r
          117.833C-14.283 126.288 -24.8516 139.094 -39.3364 146.62C-48.0984 150.218 -46.3596 154.818 -37.7568\r
          161.454C-28.4845 166.803 -17.2052 167.451 -7.37427 163.2C1.31153 158.744 8.46288 151.816 13.1712\r
          143.302L13.8755 142.181C16.7633 137.23 22.8978 123.35 28.601 110.067L35.4349 94.0031C36.4648 91.5823\r
          37.9784 88.3232 39.9757 84.2259C42.1639 79.7372 46.2058 76.43 51.0388 75.1738C56.1809 73.8373 61.9088\r
          72.6796 68.2228 71.7007C82.7314 69.4514 103.737 69.4514 112.205 71.7007C120.673 73.95 121.632 64.7653\r
          119.833 55.2265C118.033 45.6878 107.957 35.1447 93.4243 35.1447C88.2021 35.1447 80.2906 36.8816 71.9246\r
          39.6115C59.8758 44.3387 53.4179 46.3641 52.551 45.6878C51.7306 45.1226 52.027 43.7105 52.5437 41.2496\r
          C53.0468 38.8529 53.7588 35.4614 53.8514 30.8884C54.0459 24.5133 53.2052 18.2674 50.9315 13.8113Z\r
          M59.6662 96.6696C56.4725 96.4483 52.0189 96.1397 49.8611 97.9584C48.1129 99.9033 47.9698 102.782\r
          49.5143 104.886C51.0951 107.484 104.291 154.365 110.433 159.376C116.576 164.387 121.744 162.212 125.877\r
          142.076C129.644 123.723 105.251 112.24 93.7227 106.813C92.602 106.286 91.6028 105.815 90.763 105.401\r
          C81.2128 101.324 71.1898 98.4243 60.9206 96.7512C60.5335 96.7297 60.1121 96.7005 59.6662 96.6696Z`})],-1)),_hoisted_25$7=["textContent"],_hoisted_26$7={class:"r2"},_hoisted_27$6=["textContent"],_hoisted_28$5=_withScopeId$e(()=>createBaseVNode("svg",{width:"7",height:"11",viewBox:"0 0 7 11",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:`M1.6401 9.34486C1.51333 9.21809 1.51333 9.01256 1.6401 8.88579L5.30595 5.21994L1.6401 1.55409\r
              C1.51333 1.42732 1.51333 1.22179 1.6401 1.09502C1.76687 0.968249 1.97241 0.968249\r
              2.09918 1.09502L5.84154 4.83738C6.05282 5.04866 6.05282 5.39122 5.84154 5.6025L2.09918\r
              9.34486C1.97241 9.47163 1.76687 9.47163 1.6401 9.34486Z`,"stroke-width":"1.3","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),_sfc_main$S=defineComponent({__name:"MineInfo",setup(a){const o=useRoute(),s=useRouter(),i=useUserInfoStore(),{userInfo:l}=storeToRefs(i),c=ref(!0),r=ref(null),u=ref({follower:"-",following:"-",dynamic:"-"});let d=null;const _=new Promise(T=>d=T);onMounted(()=>d==null?void 0:d());let f=!1,m=null;const p=()=>{if(!l.value.isLogin||!r.value)return;const T={avatar:l.value.face,iconType:(()=>{var w,D;const R=l.value.vip,N=(R==null?void 0:R.status)&&R.type===2;if(((w=l.value.officialVerify)==null?void 0:w.type)===0)return"personal";if(((D=l.value.officialVerify)==null?void 0:D.type)===1)return"business";if(N)return l.value.vip_avatar_subscript===2?"small-vip":"big-vip"})(),avatarWidth:68};if(f&&JSON.stringify(T)===JSON.stringify(m))return;m=T,r.value.innerHTML="",new UserAvatar$1().append(m,r.value,"mine"),f=!0},v=computed(()=>{var T,I,R;return((R=(I=(T=l.value)==null?void 0:T.vip)==null?void 0:I.label)==null?void 0:R.img_label_uri_hans_static)||""}),g=ref(56),$=()=>{var R,N;const I=document.createElement("canvas").getContext("2d");if(!I||!((R=l.value.vip_label)!=null&&R.text))return 56;I.font="20px PingFangSC-Regular",g.value=Math.ceil(I.measureText((N=l.value.vip_label)==null?void 0:N.text).width/2)+6};(async()=>{var T;l.value.mid&&getMineData((T=l.value.mid)==null?void 0:T.toString()).then(I=>u.value=I),$(),await _,nextTick(()=>p()),watch(l,async()=>{var I;l.value.isLogin?getMineData((I=l.value.mid)==null?void 0:I.toString()).then(R=>u.value=R):u.value={follower:"-",following:"-",dynamic:"-"},o.path.indexOf("/page/mine")===0&&(await nextTick(),p()),$()}),watch(o,async()=>{o.path.indexOf("/page/mine")===0?c.value||(c.value=!0,await nextTick(),p()):c.value=!1})})(),onActivated(async()=>{await reloadUserInfo()});const B=()=>{if(!l.value.isLogin){requestLogin("mineInfo.openBCoin");return}openInBrowser("https://pay.bilibili.com/pay-v2-web/bcoin_index","mine.BCoin")},C=()=>{if(!l.value.isLogin){requestLogin("mineInfo.openCoin");return}openInBrowser("https://account.bilibili.com/account/coin","mine.Coin")},S=()=>{if(!l.value.isLogin){requestLogin("mineInfo.openVip");return}l.value.vipStatus?openInBrowser("https://account.bilibili.com/account/big","mine.Vip"):requestBigVip("spacePay")},E=()=>{if(!l.value.isLogin){requestLogin("mineInfo.toSpaceDynamic");return}s.push({name:"Space",query:{mid:l.value.mid,tab:0}})},k=()=>{if(!l.value.isLogin){requestLogin("mineInfo.toSpace");return}s.push({name:"Space",query:{mid:l.value.mid}})},b=()=>{requestLogin("mineInfo.handleAvatarClick")},V=()=>{requestLogin("mineInfo.handleLoginClick")},A=()=>{if(!l.value.isLogin){requestLogin("mineInfo.toFollowers");return}s.push({name:"Follower",query:{mid:l.value.mid}})},x=()=>{if(!l.value.isLogin){requestLogin("mineInfo.toFollowing");return}s.push({name:"Following",query:{mid:l.value.mid}})};return(T,I)=>(openBlock(),createElementBlock("div",_hoisted_1$1h,[createBaseVNode("div",_hoisted_2$1c,[unref(l).isLogin?(openBlock(),createElementBlock("div",{key:0,class:"mine-avatar",ref_key:"avatar",ref:r,onClick:k},null,512)):createCommentVNode("",!0),unref(l).isLogin?createCommentVNode("",!0):(openBlock(),createElementBlock("img",{key:1,class:"mine-avatar-default u_drag_none",src:_imports_0$2,onClick:b})),createBaseVNode("div",_hoisted_3$17,[createBaseVNode("div",_hoisted_4$S,[unref(l).isLogin?(openBlock(),createElementBlock("h3",{key:0,class:"b_text uname fw_bold",textContent:toDisplayString(unref(l).uname)},null,8,_hoisted_5$D)):createCommentVNode("",!0),unref(l).isLogin?createCommentVNode("",!0):(openBlock(),createElementBlock("span",{key:1,class:"uname",style:{cursor:"pointer"},onClick:V},"\u70B9\u51FB\u767B\u5F55")),unref(l).isLogin?(openBlock(),createBlock(UserLevel,{key:2,class:"mine-level",level:unref(l).level_info.current_level,isSenior:!!unref(l).is_senior_member},null,8,["level","isSenior"])):createCommentVNode("",!0),unref(v)?(openBlock(),createElementBlock("span",_hoisted_6$z,[createBaseVNode("img",{src:unref(v),alt:""},null,8,_hoisted_7$x)])):unref(l).vipStatus?(openBlock(),createElementBlock("span",{key:4,class:"vip-info",style:normalizeStyle({backgroundColor:unref(l).vip_label.bg_color,color:unref(l).vip_label.text_color,width:g.value+"px"}),onClick:S},[createBaseVNode("span",{style:normalizeStyle({width:g.value*2+"px"}),textContent:toDisplayString(unref(l).vip_label.text)},null,12,_hoisted_8$x)],4)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_9$s,[_hoisted_10$p,createBaseVNode("span",{class:"s_num",onClick:B,textContent:toDisplayString(unref(l).isLogin?unref(l).wallet.bcoin_balance:"-")},null,8,_hoisted_11$n),_hoisted_12$k,createBaseVNode("span",{class:"s_num",onClick:C,textContent:toDisplayString(unref(l).isLogin?unref(l).money:"-")},null,8,_hoisted_13$f)])]),createBaseVNode("div",_hoisted_14$d,[createBaseVNode("div",{class:"mine-data-item divider",onClick:E},[createBaseVNode("span",{textContent:toDisplayString(u.value.dynamic)},null,8,_hoisted_15$b),_hoisted_16$a]),createBaseVNode("div",{class:"mine-data-item divider",onClick:x},[createBaseVNode("span",{textContent:toDisplayString(u.value.following)},null,8,_hoisted_17$a),_hoisted_18$a]),createBaseVNode("div",{class:"mine-data-item",onClick:A},[createBaseVNode("span",{textContent:toDisplayString(u.value.follower)},null,8,_hoisted_19$9),_hoisted_20$9]),createBaseVNode("div",{class:"space",onClick:k},_hoisted_23$8)])]),createBaseVNode("div",{class:"mine-right",onClick:S},[_hoisted_24$8,createBaseVNode("div",{class:"r1",textContent:toDisplayString(unref(l).vipStatus?"\u6211\u7684\u5927\u4F1A\u5458":"\u6210\u4E3A\u5927\u4F1A\u5458")},null,8,_hoisted_25$7),createBaseVNode("div",_hoisted_26$7,[createBaseVNode("span",{textContent:toDisplayString(unref(l).vipStatus?"\u70ED\u64AD\u5185\u5BB9\u770B\u4E0D\u505C":"\u4E86\u89E3\u66F4\u591A\u6743\u76CA")},null,8,_hoisted_27$6),_hoisted_28$5])])]))}});var MineInfo=_export_sfc(_sfc_main$S,[["__scopeId","data-v-2db9ee86"]]);const _hoisted_1$1g={width:"16",height:"16",viewBox:"0 0 18 18"},_hoisted_2$1b=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.375 3.75c0-1.036-.84-1.875-1.875-1.875h-3c-1.036 0-1.875.84-1.875 1.875v.375H2.062a.563.563 0 0 0 0 1.125h13.876a.562.562 0 1 0 0-1.125h-3.563V3.75Zm-1.125.375h-4.5V3.75A.75.75 0 0 1 7.5 3h3a.75.75 0 0 1 .75.75v.375ZM4.125 6.938a.563.563 0 0 0-1.125 0v6.115c0 1.5 1.114 2.789 2.638 2.916.98.082 2.187.156 3.362.156a41.52 41.52 0 0 0 3.362-.156C13.886 15.842 15 14.553 15 13.053V6.937a.562.562 0 1 0-1.125 0v6.116c0 .944-.695 1.72-1.607 1.795-.962.08-2.136.152-3.268.152-1.132 0-2.306-.071-3.268-.152-.912-.076-1.607-.85-1.607-1.795V6.937Zm3 .937c.31 0 .563.252.563.563v2.624a.562.562 0 1 1-1.125 0V8.438c0-.311.251-.563.562-.563Zm4.313.563a.562.562 0 1 0-1.126 0v2.624a.562.562 0 1 0 1.126 0V8.438Z"},null,-1),_hoisted_3$16=[_hoisted_2$1b];function render$q(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$1g,_hoisted_3$16)}var DeleteIco={render:render$q};const _hoisted_1$1f={width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1a=createBaseVNode("path",{d:"M9.332 5.697a1.604 1.604 0 0 1 0 2.606l-6.523 4.843C1.668 13.995 0 13.221 0 11.845V2.156C0 .78 1.668.006 2.81.853L9.33 5.697Z",fill:"currentColor"},null,-1),_hoisted_3$15=[_hoisted_2$1a];function render$p(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$1f,_hoisted_3$15)}var PlayAllIco={render:render$p},SearchBox_vue_vue_type_style_index_0_lang="";const _hoisted_1$1e=["placeholder"],_sfc_main$R=defineComponent({__name:"SearchBox",props:{searchPlaceholder:{type:String,default:"\u641C\u7D22\u4F60\u611F\u5174\u8DA3\u7684\u5185\u5BB9"},isSpacePage:{type:Boolean,default:!1}},emits:["confirmSearch"],setup(a,{expose:o,emit:s}){const i=a,{spaceSearchKeyword:l}=storeToRefs(useSearchStore()),c=ref(null),r=ref(!1),u=()=>{r.value=!0},d=()=>{r.value=!1},_=$=>{$.key==="Enter"&&m()};let f=!1;const m=()=>{var y;if(f)return;f=!0;const $=p.value.trim();(y=c.value)==null||y.blur(),f=!1,s("confirmSearch",$)},p=ref(""),v=()=>{p.value=""},g=()=>{v(),m()};return watch(l,()=>{i.isSpacePage&&(p.value=l.value)},{immediate:!0}),watch(p,()=>{i.isSpacePage&&(l.value=p.value)},{immediate:!0}),o({clearSearchKeyWord:v}),($,y)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["page_searchbox",{search_active:r.value}])},[createBaseVNode("div",{class:"page_searchbox--input no_drag",ref:"inputWrapper",onKeydown:_},[withDirectives(createBaseVNode("input",{type:"text",class:"input-text text1",ref_key:"searchInput",ref:c,placeholder:a.searchPlaceholder,"onUpdate:modelValue":y[0]||(y[0]=B=>p.value=B),onFocus:u,onBlur:d},null,40,_hoisted_1$1e),[[vModelText,p.value]])],544),withDirectives(createVNode(unref(SvgClose),{class:"page_searchbox--icon-close cs_pointer p_center_y",onClick:g},null,512),[[vShow,p.value]]),createVNode(unref(IcoSearch),{class:"page_searchbox--icon-search cs_pointer p_center_y r_md",onClick:m})],2))}});var Mine_vue_vue_type_style_index_0_scoped_true_lang="",Mine_vue_vue_type_style_index_1_lang="";const _withScopeId$d=a=>(pushScopeId("data-v-0723b3d9"),a=a(),popScopeId(),a),_hoisted_1$1d={class:"app_mine i_page_wrapper u_select_none"},_hoisted_2$19={class:"app_mine--content i_page_content page_scroller"},_hoisted_3$14={class:"mine-nav i_wrapper"},_hoisted_4$R={class:"mine-nav-wp"},_hoisted_5$C=_withScopeId$d(()=>createBaseVNode("div",{style:{flex:"1"}},null,-1)),_hoisted_6$y={class:"search-box-wrap"},_hoisted_7$w={class:"mine-right-btn-content"},_hoisted_8$w=["textContent"],_sfc_main$Q=defineComponent({__name:"Mine",setup(a){const o=[{key:"1",name:"\u5386\u53F2\u8BB0\u5F55",router:"MineHistory"},{key:"2",name:"\u79BB\u7EBF\u7F13\u5B58",router:"MineDownload"},{key:"3",name:"\u6211\u7684\u6536\u85CF",router:"MineFavorite"},{key:"4",name:"\u7A0D\u540E\u518D\u770B",router:"MineWatchLater"}],s=ref(null),i=ref("1"),l=useRoute(),c=useRouter(),r=ref(),u=useMineStore(),d=ref([]),{isHistoryEmpty:_,isWatchLaterEmpty:f,mineFavoriteTab:m}=storeToRefs(u),p=computed(()=>["MineHistory","MineDownload"].includes(l.name.toString())?!0:l.name==="MineFavorite"?["DEFAULT_FOLDER","CUSTOM_FOLDERS"].includes(m.value):!1),v=computed(()=>{switch(i.value){case"1":return"\u641C\u7D22\u4F60\u7684\u5386\u53F2\u8BB0\u5F55";case"2":return"\u641C\u7D22\u4F60\u7684\u79BB\u7EBF\u7F13\u5B58";case"3":return"\u641C\u7D22\u4F60\u7684\u6536\u85CF\u5185\u5BB9";default:return"\u641C\u7D22"}});useRoutePageFadeIn(".app_mine");const g=E=>{const k=o.find(b=>b.key===E);k&&(c.push({name:k.router,query:l.query}),events.emit("requestScrollToTop"))},$=E=>{var k;(k=r.value)==null||k.doSearch(E)};watch(l,()=>{const E=o.find(k=>k.router===l.name);E&&(i.value=E.key)},{immediate:!0}),watch(i,()=>{var E;(E=s.value)==null||E.clearSearchKeyWord()});const y=E=>E.tab==="history"&&_.value||E.tab==="watchLater"&&f.value;let B=0;events.on("mineNavButton",E=>{const k=Date.now();k-B<100||(B=k,d.value=E)});const C=ref(!1);useRefresh("Mine",async()=>{var E;C.value=!0,await nextTick(),C.value=!1,(E=s.value)==null||E.clearSearchKeyWord()},!0);const S=ref(!1);return onActivated(()=>S.value=!0),onDeactivated(()=>S.value=!1),useScrollToTop(".app_mine--content",{watchParam:S}),onBeforeUnmount(()=>u.resetMineFavoriteTab()),(E,k)=>{const b=resolveComponent("v-tab-item"),V=resolveComponent("v-tabs"),A=resolveComponent("v-button"),x=resolveComponent("router-view");return openBlock(),createElementBlock("div",_hoisted_1$1d,[createBaseVNode("div",_hoisted_2$19,[C.value?createCommentVNode("",!0):(openBlock(),createBlock(MineInfo,{key:0,class:"mt_xxl i_wrapper"})),createBaseVNode("div",_hoisted_3$14,[createBaseVNode("div",_hoisted_4$R,[createVNode(V,{class:"no_drag mine-nav-tabs","auto-adjustment":"",activeKey:i.value,"onUpdate:activeKey":k[0]||(k[0]=T=>i.value=T),"slide-to-hover":!1,"active-pink":!0,"no-padding-left":!0,"tabs-gutter":32,"slider-width":18,onTabChange:g},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(o),T=>(openBlock(),createBlock(b,{key:T.key,tab:T.name},null,8,["tab"]))),128))]),_:1},8,["activeKey"]),_hoisted_5$C,createBaseVNode("div",_hoisted_6$y,[unref(p)?(openBlock(),createBlock(_sfc_main$R,{key:0,ref_key:"searchBox",ref:s,searchPlaceholder:unref(v),onConfirmSearch:$},null,8,["searchPlaceholder"])):createCommentVNode("",!0)]),["MineWatchLater"].includes(unref(l).name.toString())?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(d.value,(T,I)=>(openBlock(),createBlock(A,{key:I,class:normalizeClass(["mine-right-option",{text2:!y(T)&&T.text!=="\u64AD\u653E\u5168\u90E8"}]),disabled:y(T),type:T.text==="\u64AD\u653E\u5168\u90E8"?"pink":"",onClick:T.handler},{default:withCtx(()=>[createBaseVNode("div",_hoisted_7$w,[T.text!=="\u64AD\u653E\u5168\u90E8"?(openBlock(),createBlock(unref(DeleteIco),{key:0})):createCommentVNode("",!0),T.text==="\u64AD\u653E\u5168\u90E8"?(openBlock(),createBlock(unref(PlayAllIco),{key:1})):createCommentVNode("",!0),createBaseVNode("span",{textContent:toDisplayString(T.text)},null,8,_hoisted_8$w)])]),_:2},1032,["disabled","class","type","onClick"]))),128)):createCommentVNode("",!0)])]),C.value?createCommentVNode("",!0):(openBlock(),createBlock(x,{key:1},{default:withCtx(({Component:T})=>[(openBlock(),createBlock(resolveDynamicComponent(T),{ref_key:"mineRouterView",ref:r},null,512))]),_:1}))])])}}});var Mine=_export_sfc(_sfc_main$Q,[["__scopeId","data-v-0723b3d9"]]);const _hoisted_1$1c={class:"device-icon",fill:"#fff",width:"16",height:"16",viewBox:"0 0 16 16"},_hoisted_2$18=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.497 3.5H5.503a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.994a1 1 0 0 0 1-1v-8a1 1 0 0 0-1-1Zm-4.994-1a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h4.994a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2H5.503Z"},null,-1),_hoisted_3$13=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 12a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1A.5.5 0 0 1 7 12ZM6.404 3.5a1 1 0 0 0 1 1h1.192a1 1 0 0 0 1-1H6.404Z"},null,-1),_hoisted_4$Q=[_hoisted_2$18,_hoisted_3$13];function render$o(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$1c,_hoisted_4$Q)}var IcoPhone={render:render$o};const _hoisted_1$1b={class:"device-icon",fill:"#fff",width:"17",height:"16",viewBox:"0 0 17 16",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$17=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.5 13a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h5ZM14 2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10Zm0 1H4a1 1 0 0 0-.993.883L3 4v6a1 1 0 0 0 .883.993L4 11h10a1 1 0 0 0 .993-.883L15 10V4a1 1 0 0 0-1-1Z"},null,-1),_hoisted_3$12=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.95 11h2l1 3h-4l1-3Z"},null,-1),_hoisted_4$P=[_hoisted_2$17,_hoisted_3$12];function render$n(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$1b,_hoisted_4$P)}var IcoPc={render:render$n};const _hoisted_1$1a={class:"device-icon",stroke:"#fff",fill:"none",width:"17",height:"16",viewBox:"0 0 17 16",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$16=createBaseVNode("path",{d:"M3.3 12V4a1.5 1.5 0 0 1 1.5-1.5h6.796a1.5 1.5 0 0 1 1.5 1.5v8a1.5 1.5 0 0 1-1.5 1.5H4.8A1.5 1.5 0 0 1 3.3 12Z"},null,-1),_hoisted_3$11=createBaseVNode("path",{d:"M8.7 11.5h-1","stroke-linecap":"round"},null,-1),_hoisted_4$O=[_hoisted_2$16,_hoisted_3$11];function render$m(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$1a,_hoisted_4$O)}var IcoPad={render:render$m};const _hoisted_1$19={class:"device-icon",fill:"none",width:"17",height:"16",viewBox:"0 0 17 16",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$15=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#fff",d:"M13.8 2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-10a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10Zm0 1h-10a1 1 0 0 0-.993.883L2.8 4v6a1 1 0 0 0 .883.993L3.8 11h10a1 1 0 0 0 .993-.883L14.8 10V4a1 1 0 0 0-1-1Z"},null,-1),_hoisted_3$10=createBaseVNode("path",{d:"M4.3 11.5 3.8 13M4.982 11.5 3.8 13M13.3 11.5l.5 1.5M12.664 11.5 13.8 13",stroke:"#fff","stroke-linecap":"round"},null,-1),_hoisted_4$N=[_hoisted_2$15,_hoisted_3$10];function render$l(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$19,_hoisted_4$N)}var IcoTv={render:render$l};const _hoisted_1$18={class:"device-icon",fill:"none",width:"16",height:"17",viewBox:"0 0 16 17",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$14=createStaticVNode('<path d="M4.948 7.226a69.63 69.63 0 0 0 6.104 0c1.526-.067 2.835 1.136 2.835 2.627v2.02a.5.5 0 0 1-.5.5H2.613a.5.5 0 0 1-.5-.5v-2.02c0-1.491 1.31-2.694 2.835-2.627Z" stroke="#fff"></path><path d="M5.692 3.37h4.743A1.5 1.5 0 0 1 11.9 4.548L12.438 7c-.266.031-.62.07-1.032.11-.942.09-2.186.18-3.406.18-1.22 0-2.431-.09-3.34-.18a39.71 39.71 0 0 1-.972-.108l.539-2.454A1.5 1.5 0 0 1 5.692 3.37Z" stroke="#fff"></path><circle cx="4.722" cy="9.824" r=".766" fill="#fff"></circle><circle cx="11.278" cy="9.824" r=".766" fill="#fff"></circle><path d="M3.04 12.702h.818l-.26 1.073a.284.284 0 0 1-.559-.067v-1.006Z" fill="#fff" stroke="#fff"></path><path d="M12.918 12.702H12.1l.258 1.073a.284.284 0 0 0 .56-.067v-1.006Z" fill="#D8D8D8" stroke="#979797"></path>',6),_hoisted_8$v=[_hoisted_2$14];function render$k(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$18,_hoisted_8$v)}var IcoCar={render:render$k};const _hoisted_1$17={class:"device-icon",fill:"none",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$13=createStaticVNode('<path d="M2.5 12V4A1.5 1.5 0 0 1 4 2.5h8A1.5 1.5 0 0 1 13.5 4v8a1.5 1.5 0 0 1-1.5 1.5H4A1.5 1.5 0 0 1 2.5 12Z" stroke="#fff"></path><path d="M4.5 8V5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5Z" stroke="#fff"></path><circle cx="4.397" cy="10.444" r=".45" fill="#fff"></circle><circle cx="6.198" cy="10.444" r=".45" fill="#fff"></circle><circle cx="5.204" cy="11.714" r=".45" fill="#fff"></circle><circle cx="8" cy="10.444" r=".45" fill="#fff"></circle><circle cx="7.006" cy="11.714" r=".45" fill="#fff"></circle><circle cx="9.802" cy="10.444" r=".45" fill="#fff"></circle><circle cx="11.603" cy="10.444" r=".45" fill="#fff"></circle><circle cx="8.807" cy="11.714" r=".45" fill="#fff"></circle><circle cx="10.609" cy="11.714" r=".45" fill="#fff"></circle>',11),_hoisted_13$e=[_hoisted_2$13];function render$j(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$17,_hoisted_13$e)}var IcoIot={render:render$j};const _hoisted_1$16={class:"up-icon",width:"16",height:"17",viewBox:"0 0 16 17"},_hoisted_2$12=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 3.75c-1.714 0-3.208.088-4.258.174A1.45 1.45 0 0 0 2.4 5.246C2.323 6.107 2.25 7.25 2.25 8.5s.073 2.393.15 3.254a1.45 1.45 0 0 0 1.342 1.322c1.05.086 2.544.174 4.258.174s3.208-.088 4.258-.174a1.45 1.45 0 0 0 1.341-1.321c.078-.862.151-2.004.151-3.255s-.073-2.393-.15-3.255a1.45 1.45 0 0 0-1.342-1.321A52.956 52.956 0 0 0 8 3.75Zm-4.34-.823A53.955 53.955 0 0 1 8 2.75c1.747 0 3.27.09 4.34.177a2.45 2.45 0 0 1 2.255 2.228c.08.883.155 2.057.155 3.345 0 1.288-.075 2.462-.155 3.345a2.45 2.45 0 0 1-2.255 2.228c-1.07.087-2.593.177-4.34.177-1.747 0-3.27-.09-4.34-.177a2.45 2.45 0 0 1-2.255-2.229A37.662 37.662 0 0 1 1.25 8.5c0-1.288.075-2.461.155-3.344A2.45 2.45 0 0 1 3.66 2.927Zm.673 3.123a.45.45 0 0 1 .45.45V9a1.05 1.05 0 1 0 2.1 0V6.5a.45.45 0 0 1 .9 0V9a1.95 1.95 0 1 1-3.9 0V6.5a.45.45 0 0 1 .45-.45ZM9 6.05a.45.45 0 0 0-.45.45v4a.45.45 0 0 0 .9 0v-.717h1.133a1.867 1.867 0 0 0 0-3.733H9Zm1.583 2.833H9.45V6.95h1.133a.967.967 0 0 1 0 1.933Z"},null,-1),_hoisted_3$$=[_hoisted_2$12];function render$i(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$16,_hoisted_3$$)}var IcoUpUser={render:render$i};const _hoisted_1$15={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$11=createBaseVNode("path",{"clip-rule":"evenodd",d:"M11.857 4.582a1.457 1.457 0 1 1-2.914 0 1.457 1.457 0 0 1 2.914 0Zm0 10.833a1.457 1.457 0 1 1-2.914 0 1.457 1.457 0 0 1 2.914 0ZM10.4 11.457a1.457 1.457 0 1 0 0-2.914 1.457 1.457 0 0 0 0 2.914Z"},null,-1),_hoisted_3$_=[_hoisted_2$11];function render$h(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$15,_hoisted_3$_)}var IcoMore={render:render$h},Empty_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$c=a=>(pushScopeId("data-v-0e063a5c"),a=a(),popScopeId(),a),_hoisted_1$14={class:"empty p_relative"},_hoisted_2$10={class:"p_center text_center"},_hoisted_3$Z=_withScopeId$c(()=>createBaseVNode("p",null,[createBaseVNode("img",{class:"empty-img",src:_imports_0$3,alt:""})],-1)),_hoisted_4$M=["textContent"],_sfc_main$P=defineComponent({__name:"Empty",props:{text:{type:String,default:"\u4ECA\u5929\u771F\u662F\u5BC2\u5BDE\u5982\u96EA\u554A~"}},setup(a){const o=a;return(s,i)=>(openBlock(),createElementBlock("div",_hoisted_1$14,[createBaseVNode("div",_hoisted_2$10,[_hoisted_3$Z,createBaseVNode("p",{class:"mt_lg b_text text3",textContent:toDisplayString(o.text)},null,8,_hoisted_4$M)])]))}});var NoData=_export_sfc(_sfc_main$P,[["__scopeId","data-v-0e063a5c"]]),DataError_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$b=a=>(pushScopeId("data-v-60c67add"),a=a(),popScopeId(),a),_hoisted_1$13={class:"datastatus--error p_relative"},_hoisted_2$$={class:"error-box p_center"},_hoisted_3$Y=_withScopeId$b(()=>createBaseVNode("img",{class:"error-img",src:_imports_0$8,alt:""},null,-1)),_hoisted_4$L=["textContent"],_hoisted_5$B=createTextVNode("\u518D\u8BD5\u4E00\u6B21"),_sfc_main$O=defineComponent({__name:"DataError",props:{text:{type:String,default:""},showRefresh:{type:Boolean,default:!0}},emits:["refresh"],setup(a,{emit:o}){const s=a;return(i,l)=>{const c=resolveComponent("VButton");return openBlock(),createElementBlock("div",_hoisted_1$13,[createBaseVNode("div",_hoisted_2$$,[_hoisted_3$Y,s.text?(openBlock(),createElementBlock("div",{key:0,class:"error-message",textContent:toDisplayString(s.text)},null,8,_hoisted_4$L)):createCommentVNode("",!0),a.showRefresh?(openBlock(),createBlock(c,{key:1,type:"pink",size:"large",onClick:l[0]||(l[0]=r=>o("refresh"))},{default:withCtx(()=>[_hoisted_5$B]),_:1})):createCommentVNode("",!0)])])}}});var DataError=_export_sfc(_sfc_main$O,[["__scopeId","data-v-60c67add"]]),SearchResultCount_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$12={class:"search-result-count-tip"},_hoisted_2$_={class:"b_text text2 tip-text"},_hoisted_3$X=createTextVNode(" \u627E\u5230 "),_hoisted_4$K={class:"brand_pink"},_sfc_main$N=defineComponent({__name:"SearchResultCount",props:{count:{type:Number,default:null},unit:{type:String,default:"\u7ED3\u679C"}},setup(a){return(o,s)=>(openBlock(),createElementBlock("div",_hoisted_1$12,[createBaseVNode("p",_hoisted_2$_,[_hoisted_3$X,createBaseVNode("span",_hoisted_4$K,toDisplayString(a.count),1),createTextVNode(" \u4E2A\u76F8\u5173"+toDisplayString(a.unit),1)])]))}});var SearchResultCount=_export_sfc(_sfc_main$N,[["__scopeId","data-v-96feeebc"]]),MineHistory_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$a=a=>(pushScopeId("data-v-09f70744"),a=a(),popScopeId(),a),_hoisted_1$11={key:0,class:"flex_col_center w_100 h_100"},_hoisted_2$Z={key:1,class:"container"},_hoisted_3$W={class:"i_wrapper p_relative"},_hoisted_4$J={class:"mine-right-btn-content"},_hoisted_5$A=_withScopeId$a(()=>createBaseVNode("span",null,"\u6E05\u7A7A\u5386\u53F2\u8BB0\u5F55",-1)),_hoisted_6$x={key:0,class:"search-result-count"},_hoisted_7$v={key:3,class:"i_wrapper history-skeleton"},_hoisted_8$u={key:4,class:"h-content i_wrapper"},_hoisted_9$r=["textContent"],_hoisted_10$o=["onClick"],_hoisted_11$m=_withScopeId$a(()=>createBaseVNode("div",{class:"cover-img p_cover"},[createBaseVNode("img",{class:"p_center",src:_imports_0$5})],-1)),_hoisted_12$j={key:0,class:"badge offline",textContent:"\u5DF2\u770B\u5B8C"},_hoisted_13$d=["textContent"],_hoisted_14$c={class:"tapper"},_hoisted_15$a=["textContent"],_hoisted_16$9=["textContent"],_hoisted_17$9=["textContent"],_hoisted_18$9={key:2,class:"progress"},_hoisted_19$8={class:"info"},_hoisted_20$8={class:"info-content"},_hoisted_21$8=["textContent","title","onClick"],_hoisted_22$7={key:0,class:"sub-title"},_hoisted_23$7={key:0,class:"sub-title-tag"},_hoisted_24$7=["onClick"],_hoisted_25$6=["textContent"],_hoisted_26$6={class:"info-option"},_hoisted_27$5={class:"drop-down-list"},_hoisted_28$4=["onClick"],_hoisted_29$3={class:"content-wrapper"},_hoisted_30$2=_withScopeId$a(()=>createBaseVNode("h4",{class:"b_text text1 text_center mt_md"},"\u786E\u8BA4\u5220\u9664\u6240\u6709\u5386\u53F2\u8BB0\u5F55\u5417\uFF1F",-1)),_hoisted_31$2={class:"mt_xl text_center dialog_btns"},_hoisted_32$2=createTextVNode("\u53D6\u6D88"),_hoisted_33$2=createTextVNode("\u5220\u9664"),_sfc_main$M=defineComponent({__name:"MineHistory",setup(a,{expose:o}){useReportPv({spm_id:SPM_PV.mineHistory,isKeepAlive:!1,pageName:"MineHistory"});const s={1:"iPhone",2:"PC",3:"Android",33:"AndroidTV",4:"iPad",5:"WP8",6:"UWP",7:"H5",8:"AndroidCar",9:"AndroidThing",10:"AndroidPad",11:"IPTV"},i=DPR(),l=useRouter(),c=ref({max:"",view_at:"0",business:"",ps:"20"}),r=ref(!0),u=ref(null),d=useElementVisible(u),{userInfo:_}=storeToRefs(useUserInfoStore()),{isHistoryEmpty:f}=storeToRefs(useMineStore()),m=ref(!1),p=ref(!1),v=ref(!1),g=ref(""),$=ref(1),y=ref(!0),B=ref(!0),C=ref(0),S=()=>{const F=new Date;return F.setHours(0),F.setMinutes(0),F.setSeconds(0),F.setMilliseconds(0),Math.round(F.getTime()/1e3)},E=F=>{const U=S();if(F>U)return"\u4ECA\u5929 "+formatTime$1(F*1e3,3);if(F>U-86400)return"\u6628\u5929 "+formatTime$1(F*1e3,3);{const W=new Date().getFullYear(),ne=new Date(F*1e3),H=ne.getFullYear(),M=ne.getMonth()+1<10?"0"+(ne.getMonth()+1):ne.getMonth()+1,ee=ne.getDate()<10?"0"+ne.getDate():ne.getDate();return`${H===W?"":H+"-"}${M}-${ee}`}},k=(()=>{const F=S();return[F,F-24*3600,F-7*24*3600]})(),b=ref([{text:"\u4ECA\u5929",list:[],time:k[0]},{text:"\u6628\u5929",list:[],time:k[1]},{text:"\u8FD1\u4E00\u5468",list:[],time:k[2]},{text:"\u4E00\u5468\u524D",list:[],time:-1/0}]);f.value=!0;const V=async()=>{if(!!_.value.isLogin&&!!r.value&&!m.value){m.value=!0,p.value=!1;try{const F=await getWatchHistory(c.value),{cursor:U,list:W}=F||{};c.value=U,W!=null&&W.length||(r.value=!1),x(W)}catch(F){console.error(F),m.value=!1,r.value=!1,p.value=!0}}},A=async()=>{if(!!_.value.isLogin&&!!y.value&&!m.value){m.value=!0,p.value=!1;try{const F=await searchHistory({pn:$.value,keyword:g.value,business:"all"}),{has_more:U,list:W,page:ne}=F||{};y.value=U,C.value=(ne==null?void 0:ne.total)||0,U&&($.value=(ne==null?void 0:ne.pn)+1),x(W)}catch(F){console.error(F),m.value=!1,y.value=!1,p.value=!0}}},x=F=>{F==null||F.forEach(U=>{for(let W=0;W<b.value.length;W++)if(U.view_at>b.value[W].time){b.value[W].list.push(U);break}}),f.value=b.value.every(U=>!U.list.length),m.value=!1},T=()=>{V().then(()=>{d.value&&V()})};T(),watch(d,()=>{if(d.value){if(!g.value){V();return}B.value||A()}});const I=F=>{var W;const U={live:()=>{openLiveRoomWindow(F.history.oid)},pgc:()=>{openPlayerWindow({type:"ogv",epid:F.history.epid,fromSpmid:SPM_PV.mineHistory+".pv"})},archive:()=>{openPlayerWindow({type:"ugc",bvid:F.history.bvid,p:F.history.page||1,fromSpmid:SPM_PV.mineHistory+".pv"})},article:()=>{openInBrowser(`https://www.bilibili.com/read/cv${F.history.oid}?spm_id_from=${SPM_PV.mineHistory}.pv`,"mine.History")},"article-list":()=>{openInBrowser(`https://www.bilibili.com/read/cv${F.history.cid}?spm_id_from=${SPM_PV.mineHistory}.pv`,"mine.History")},cheese:()=>{if(F.uri){const ne=F.uri.includes("?"),H=F.uri+(ne?"&":"?")+"is_PCend=1";openInBrowser(H,"mine.History")}}};(W=U[F.history.business])==null||W.call(U)},R=async(F,U)=>{var ne;const W=(ne=b.value.find(H=>H.text===F))==null?void 0:ne.list.splice(U,1);W[0]&&deleteHistory({kid:W[0].history.business+"_"+W[0].kid}).then(()=>{toastAsync({content:"\u5220\u9664\u6210\u529F"}),b.value.every(H=>H.list.length===0)&&P()}).catch(H=>{console.error(H),toastAsync({content:H.message})})},N=ref(!1),w=()=>{clearHistory().then(()=>{toastAsync({content:"\u5220\u9664\u6210\u529F"})}).catch(F=>{console.error(F),toastAsync({content:F.message})}),N.value=!1,r.value=!1,f.value=!0,b.value.forEach(F=>F.list=[])},D=F=>formatDuration$1(F.progress>=0?F.progress:F.duration)+"/"+formatDuration$1(F.duration),L=F=>{l.push({name:"Space",query:{mid:F}})},P=()=>{c.value={max:"",view_at:"0",business:"",ps:"20"},r.value=!0,f.value=!0,b.value.forEach(F=>F.list=[]),T()},j=async F=>{if(v.value=!!F,!(!g.value&&!F)){if(g.value=F,events.emit("requestScrollToTop"),B.value=!0,!F){P();return}$.value=1,y.value=!0,f.value=!0,b.value.forEach(U=>U.list=[]),await A(),B.value=!1}},O=()=>{!_.value.isLogin||(N.value=!0)};return onBeforeUnmount(()=>{r.value=!0,m.value=!1}),o({doSearch:j}),(F,U)=>{const W=resolveComponent("v-button"),ne=resolveComponent("VImg"),H=resolveComponent("v-dropdown"),M=resolveComponent("v-dialog");return!unref(_)||!unref(_).isLogin?(openBlock(),createElementBlock("div",_hoisted_1$11,[createVNode(_sfc_main$12,{showAvatar:""})])):(openBlock(),createElementBlock("div",_hoisted_2$Z,[createBaseVNode("div",_hoisted_3$W,[!unref(f)&&!v.value&&unref(_).isLogin?(openBlock(),createBlock(W,{key:0,class:"clear-history-option",onClick:O},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$J,[createVNode(unref(DeleteIco)),_hoisted_5$A])]),_:1})):createCommentVNode("",!0)]),v.value?(openBlock(),createElementBlock("div",_hoisted_6$x,[createVNode(SearchResultCount,{count:C.value,unit:"\u7ED3\u679C"},null,8,["count"])])):createCommentVNode("",!0),!p.value&&!m.value&&unref(f)?(openBlock(),createBlock(NoData,{key:1})):p.value&&!m.value&&unref(f)?(openBlock(),createBlock(DataError,{key:2,class:"mt_lg",onRefresh:P})):m.value&&unref(f)?(openBlock(),createElementBlock("div",_hoisted_7$v,[createVNode(_sfc_main$1Q,{itemNum:20})])):(openBlock(),createElementBlock("div",_hoisted_8$u,[(openBlock(!0),createElementBlock(Fragment,null,renderList(b.value,ee=>(openBlock(),createElementBlock(Fragment,null,[ee.list.length?(openBlock(),createElementBlock("div",{class:"t-label",textContent:toDisplayString(ee.text),key:ee.text},null,8,_hoisted_9$r)):createCommentVNode("",!0),ee.list.length?(openBlock(),createElementBlock("div",{class:"p_relative row gutter_md",key:ee.text+"list"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(ee.list,(G,Q)=>{var te,ce;return openBlock(),createElementBlock("div",{class:"history-item col_3 col_sm_1_5",key:((te=G.history)==null?void 0:te.business)+G.kid},[createBaseVNode("div",{class:"cover",onClick:$e=>I(G)},[_hoisted_11$m,withDirectives(createVNode(ne,{class:"cover-img p_cover",src:G.cover||((ce=G.covers)==null?void 0:ce[0])||"",width:512*unref(i),height:288*unref(i),loading:"lazy",rule:"1c","bfs-style":"pc-common-cover-h",onError:$e=>G.isError=!0},null,8,["src","width","height","onError"]),[[vShow,!G.isError]]),G.progress<0?(openBlock(),createElementBlock("div",_hoisted_12$j)):createCommentVNode("",!0),G.progress>=0&&G.badge?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["badge",{offline:G.history.business==="live"&&1>G.live_status}]),textContent:toDisplayString(G.badge)},null,10,_hoisted_13$d)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_14$c,[["iPhone","Android","WP8","H5"].includes(s[G.history.dt])?(openBlock(),createBlock(unref(IcoPhone),{key:0})):createCommentVNode("",!0),["PC","UWP"].includes(s[G.history.dt])?(openBlock(),createBlock(unref(IcoPc),{key:1})):createCommentVNode("",!0),["iPad","AndroidPad"].includes(s[G.history.dt])?(openBlock(),createBlock(unref(IcoPad),{key:2})):createCommentVNode("",!0),["AndroidTV","IPTV"].includes(s[G.history.dt])?(openBlock(),createBlock(unref(IcoTv),{key:3})):createCommentVNode("",!0),["AndroidCar"].includes(s[G.history.dt])?(openBlock(),createBlock(unref(IcoCar),{key:4})):createCommentVNode("",!0),["AndroidThing"].includes(s[G.history.dt])?(openBlock(),createBlock(unref(IcoIot),{key:5})):createCommentVNode("",!0),createBaseVNode("span",{class:"ct",textContent:toDisplayString(E(G.view_at))},null,8,_hoisted_15$a),["archive","pgc","cheese"].includes(G.history.business)&&G.duration>0&&G.progress>=0?(openBlock(),createElementBlock("span",{key:6,textContent:toDisplayString(D(G))},null,8,_hoisted_16$9)):createCommentVNode("",!0),G.history.business==="live"?(openBlock(),createElementBlock("span",{key:7,textContent:toDisplayString(G.tag_name)},null,8,_hoisted_17$9)):createCommentVNode("",!0)]),["archive","pgc","cheese"].includes(G.history.business)&&G.duration>0?(openBlock(),createElementBlock("div",_hoisted_18$9,[createBaseVNode("div",{class:"progress-active",style:normalizeStyle({width:`${Math.floor((G.progress>=0?G.progress:G.duration)/G.duration*100)}%`})},null,4)])):createCommentVNode("",!0)],8,_hoisted_10$o),createBaseVNode("div",_hoisted_19$8,[createBaseVNode("div",_hoisted_20$8,[createBaseVNode("div",{class:"info-title fw_500",textContent:toDisplayString(G.title),title:G.title,onClick:$e=>I(G)},null,8,_hoisted_21$8),["pgc","cheese"].includes(G.history.business)?(openBlock(),createElementBlock("div",_hoisted_22$7,[G.history.business==="cheese"?(openBlock(),createElementBlock("span",_hoisted_23$7,"\u8BFE\u5802")):createCommentVNode("",!0),createBaseVNode("span",null,toDisplayString(G.show_title),1)])):createCommentVNode("",!0),["archive","live","article","article-list"].includes(G.history.business)?(openBlock(),createElementBlock("div",{key:1,class:"info-up",onClick:$e=>L(G.author_mid)},[createVNode(unref(IcoUpUser)),createBaseVNode("span",{class:"up-name",textContent:toDisplayString(G.author_name)},null,8,_hoisted_25$6)],8,_hoisted_24$7)):createCommentVNode("",!0)]),createVNode(H,{trigger:"click"},{content:withCtx(()=>[createBaseVNode("div",_hoisted_27$5,[createBaseVNode("div",{class:"delete",onClick:$e=>R(ee.text,Q)},"\u5220\u9664\u8BB0\u5F55",8,_hoisted_28$4)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_26$6,[createVNode(unref(IcoMore))])]),_:2},1024)])])}),128))])):createCommentVNode("",!0)],64))),256))])),createBaseVNode("div",{ref_key:"bottomRef",ref:u,class:"bottom-load"},null,512),createVNode(M,{visible:N.value,"onUpdate:visible":U[1]||(U[1]=ee=>N.value=ee),width:320,"class-name":"i_dialog py_lg",onCancel:U[2]||(U[2]=ee=>N.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_29$3,[_hoisted_30$2,createBaseVNode("div",_hoisted_31$2,[createVNode(W,{class:"mr_sm",onClick:U[0]||(U[0]=ee=>N.value=!1)},{default:withCtx(()=>[_hoisted_32$2]),_:1}),createVNode(W,{type:"danger",onClick:w},{default:withCtx(()=>[_hoisted_33$2]),_:1})])])]),_:1},8,["visible"])]))}}});var MineHistory=_export_sfc(_sfc_main$M,[["__scopeId","data-v-09f70744"]]);const _hoisted_1$10={class:"mr_2",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$Y=createBaseVNode("path",{d:"M13.667 9.917h.5a.5.5 0 0 0-.5-.5v.5Zm-11.334 0v-.5a.5.5 0 0 0-.5.5h.5Zm11.334-.5H2.333v1h11.334v-1Zm-11.834.5V12.6h1V9.917h-1Zm1.5 4.183h9.334v-1H3.333v1Zm10.834-1.5V9.917h-1V12.6h1Zm-1.5 1.5a1.5 1.5 0 0 0 1.5-1.5h-1a.5.5 0 0 1-.5.5v1ZM1.833 12.6a1.5 1.5 0 0 0 1.5 1.5v-1a.5.5 0 0 1-.5-.5h-1ZM11.258 12.466a.708.708 0 1 0 0-1.416.708.708 0 0 0 0 1.416Z"},null,-1),_hoisted_3$V=createBaseVNode("path",{d:"m12.421 3.913-.49.102.49-.102ZM2.823 10.02l1.26-6.006-.978-.205-1.261 6.006.979.205Zm1.75-6.403h6.869v-1h-6.87v1Zm7.358.399 1.246 6.003.98-.203L12.91 3.81l-.98.204Zm-.49-.399a.5.5 0 0 1 .49.399l.98-.204a1.5 1.5 0 0 0-1.47-1.195v1Zm-7.358.397a.5.5 0 0 1 .49-.397v-1a1.5 1.5 0 0 0-1.468 1.192l.978.205Z"},null,-1),_hoisted_4$I=[_hoisted_2$Y,_hoisted_3$V];function render$g(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$10,_hoisted_4$I)}var IcoDisk={render:render$g};const _hoisted_1$$={width:"50",height:"47",viewBox:"0 0 50 47",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$X=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M49.455 16.794c.08.808.15 1.617.212 2.426.244 3.238.355 6.482.33 9.729-.012 1.626-.066 3.25-.155 4.875a99.068 99.068 0 0 1-.28 3.653l-.062.609-.033.304-.017.152a8.708 8.708 0 0 1-2.343 5.13 8.543 8.543 0 0 1-4.829 2.558l-.101.016c-.081.012-.161.025-.242.033l-.34.035-.6.05-1.199.092a189.129 189.129 0 0 1-7.198.398 205.775 205.775 0 0 1-19.214-.178c-1.6-.089-3.198-.202-4.797-.338l-.15-.012-.075-.006-.085-.009c-.115-.012-.23-.023-.345-.038l-.343-.053-.34-.067a8.63 8.63 0 0 1-6.545-6.52 8.713 8.713 0 0 1-.129-.686l-.043-.345-.032-.304a99.887 99.887 0 0 1-.298-3.65 107.377 107.377 0 0 1-.157-9.744c.092-3.245.319-6.481.667-9.707.1-.914.345-1.817.727-2.655a8.53 8.53 0 0 1 1.521-2.284 8.486 8.486 0 0 1 4.73-2.58c.226-.037.45-.07.677-.089l.169-.015.15-.01.3-.022 1.2-.079a191.143 191.143 0 0 1 5.545-.255l-.309-.39a79.062 79.062 0 0 1-1.585-2.131l-.385-.542-.19-.272-.014-.021a3.15 3.15 0 0 1-.167-.257 2.163 2.163 0 0 1-.245-1.466 2.613 2.613 0 0 1 2.873-2.11c.32.041.562.137.773.257.21.119.387.265.535.43.068.074.127.154.187.234l.02.027.198.265.392.537a75.887 75.887 0 0 1 1.522 2.178c.493.736.973 1.483 1.433 2.243.179.296.354.594.527.895a301.567 301.567 0 0 1 7.425-.007c.172-.298.347-.594.523-.888.46-.762.94-1.507 1.434-2.243a75.887 75.887 0 0 1 1.521-2.178l.392-.537.198-.265.02-.027c.06-.08.12-.16.187-.234.148-.165.325-.31.535-.43.212-.12.453-.216.773-.256 1.365-.17 2.614.767 2.874 2.109.06.318.043.58-.003.82a2.163 2.163 0 0 1-.242.646 2.93 2.93 0 0 1-.163.25l-.019.028-.19.272-.385.542a75.788 75.788 0 0 1-1.585 2.13 31.312 31.312 0 0 1-.298.377c.76.025 1.522.054 2.282.088 1.6.072 3.2.161 4.801.28l.075.005.084.009.17.017c.112.008.22.024.33.04l.01.002.17.025.168.032a8.49 8.49 0 0 1 1.642.483A8.582 8.582 0 0 1 49.2 14.61l.03.17.023.171.023.171.012.093.007.062.033.303c.045.404.087.809.127 1.213Zm-4.48 16.756c.086-1.57.136-3.131.148-4.638.023-3.104-.082-6.24-.315-9.315a120.78 120.78 0 0 0-.322-3.468l-.033-.303.003.027-.01-.087-.028-.21-.03-.163-.018-.08a3.666 3.666 0 0 0-2.732-2.758l-.062-.015-.155-.028-.163-.024-.173-.017-.067-.005a155.47 155.47 0 0 0-4.655-.272c-2.952-.13-6.029-.2-9.404-.215a570.01 570.01 0 0 0-1.703-.004c-2.819 0-5.349.03-7.744.096-1.603.04-3.181.098-4.681.17l-.385.02c-.614.032-1.289.066-1.939.108l-1.188.079-.385.027-.157.015a3.621 3.621 0 0 0-2.912 2.105 3.73 3.73 0 0 0-.311 1.136 118.847 118.847 0 0 0-.64 9.313c-.09 3.175-.04 6.302.148 9.295a85.293 85.293 0 0 0 .282 3.454l.025.242.028.219c.017.106.032.192.047.254l.006.034a3.739 3.739 0 0 0 2.256 2.63c.175.069.356.126.54.168l.178.035.17.027.177.019.221.018c1.524.13 3.09.24 4.659.328a203.81 203.81 0 0 0 11.24.318 202.36 202.36 0 0 0 12.199-.373l.088-.006c.695-.044 1.487-.094 2.243-.152l1.189-.093.533-.044.245-.025s.107-.015.147-.022a3.676 3.676 0 0 0 2.035-1.083l.015-.015a3.782 3.782 0 0 0 1.008-2.14l.01-.085.052-.474.058-.58.005-.052c.033-.364.066-.727.097-1.09.061-.759.116-1.534.16-2.3Zm-4.647-10.6c.188.1.372.2.565.315.675.397.787 1.127.538 1.904-.288.898-1.218 1.686-2.108 1.395l-.038-.011c-.182-.06-.377-.131-.567-.202l-.143-.054c-.142-.054-.285-.108-.427-.165l-.058-.023c-.17-.066-.34-.133-.509-.204-.19-.076-.378-.153-.565-.233-.188-.079-.376-.16-.563-.24-.188-.08-.375-.16-.564-.238l-1.128-.471c-.752-.311-1.507-.616-2.26-.917l-1.132-.445c-.188-.075-.377-.146-.566-.218-.188-.072-.377-.143-.565-.218l-.045-.018c-.784-.315-.815-1.295-.577-2.13.253-.889.967-1.49 1.848-1.234.407.118.817.239 1.22.369l.607.193.602.203c.801.276 1.595.566 2.38.872.347.131.69.27 1.032.41l.143.057.216.088c.318.13.635.26.95.398a27.324 27.324 0 0 1 1.714.817Zm-20.339-.042-.045.019c-.18.072-.363.141-.545.21-.195.075-.39.149-.585.227l-1.131.446c-.754.3-1.509.604-2.26.916l-1.129.471-.498.212c-.21.09-.418.179-.628.266-.187.08-.375.158-.566.234-.131.055-.264.108-.398.16l-.168.067a26.616 26.616 0 0 1-1.137.42l-.038.012c-.892.292-1.82-.498-2.109-1.396-.25-.78-.136-1.509.537-1.905a17.666 17.666 0 0 1 1.13-.602c.378-.185.762-.364 1.148-.53.338-.147.677-.286 1.017-.425l.15-.061a64.772 64.772 0 0 1 3.555-1.339l.602-.203.607-.194c.401-.13.811-.25 1.22-.368.881-.256 1.595.345 1.848 1.234.237.834.205 1.813-.577 2.13Zm11.597 5.663c-.395-.08-.751.097-.863.479l-.02.069-.033.118-.04.13a7.027 7.027 0 0 1-.295.787 4.96 4.96 0 0 1-.517.936c-.2.272-.417.504-.645.654-.23.15-.462.222-.722.227a1.783 1.783 0 0 1-.813-.168c-.265-.121-.517-.316-.759-.552a4.674 4.674 0 0 1-.655-.83 5.849 5.849 0 0 1-.403-.725l-.058-.123-.049-.108-.031-.069a.772.772 0 0 0-.719-.457h-.006a.773.773 0 0 0-.719.457l-.031.07-.049.107-.058.123c-.04.082-.08.165-.123.247-.087.163-.18.323-.28.478-.195.309-.415.593-.655.83-.242.236-.494.43-.759.552a1.774 1.774 0 0 1-.813.168 1.344 1.344 0 0 1-.722-.227c-.23-.15-.446-.382-.645-.654a4.953 4.953 0 0 1-.516-.935 6.447 6.447 0 0 1-.207-.521c-.027-.077-.052-.154-.076-.23l-.012-.036-.04-.131-.034-.118-.02-.069c-.11-.384-.466-.558-.863-.48-.418.083-.72.428-.638.85l.02.1.018.088.04.172a8.41 8.41 0 0 0 .307.992c.168.434.375.861.65 1.273.273.41.623.806 1.083 1.118a3.055 3.055 0 0 0 1.603.525 3.402 3.402 0 0 0 1.587-.343 4.2 4.2 0 0 0 1.232-.918c.28-.3.516-.619.723-.95.207.331.444.65.724.95.336.36.748.684 1.231.918.483.236 1.037.36 1.587.343.282-.008.57-.059.843-.15.274-.089.53-.22.76-.374.46-.313.81-.709 1.084-1.119a6.6 6.6 0 0 0 .65-1.273 8.652 8.652 0 0 0 .306-.992l.04-.172.019-.087.02-.101c.081-.424-.219-.767-.639-.85Z",fill:"#E3E5E7"},null,-1),_hoisted_3$U=[_hoisted_2$X];function render$f(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$$,_hoisted_3$U)}var PlaceHolerImg={render:render$f},DownloadItem_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$9=a=>(pushScopeId("data-v-8aa628a8"),a=a(),popScopeId(),a),_hoisted_1$_={class:"scale-wrapper"},_hoisted_2$W=["src"],_hoisted_3$T=_withScopeId$9(()=>createBaseVNode("div",{class:"tapper"},null,-1)),_hoisted_4$H=["textContent"],_hoisted_5$z=_withScopeId$9(()=>createBaseVNode("div",{style:{flex:"1"}},null,-1)),_hoisted_6$w=["textContent"],_hoisted_7$u=["textContent"],_hoisted_8$t={key:2,class:"hover-layer"},_hoisted_9$q=_withScopeId$9(()=>createBaseVNode("span",null,"\u524D\u5F80\u8BE6\u60C5\u9875",-1)),_hoisted_10$n={class:"info"},_hoisted_11$l={class:"info-content"},_hoisted_12$i=["textContent","title"],_hoisted_13$c={class:"info-option"},_hoisted_14$b={class:"drop-down-list"},_hoisted_15$9=["textContent","onClick"],_hoisted_16$8=["textContent"],_hoisted_17$8={key:1,class:"info-downloading"},_hoisted_18$8=["textContent"],_hoisted_19$7={class:"downloading-progress"},_hoisted_20$7={class:"content-wrapper"},_hoisted_21$7=_withScopeId$9(()=>createBaseVNode("h4",{class:"b_text text1 text_center mt_md"},"\u786E\u8BA4\u5220\u9664\u8BE5\u7F13\u5B58\u9879\u5417\uFF1F",-1)),_hoisted_22$6={class:"mt_xl text_center dialog_btns"},_hoisted_23$6=createTextVNode("\u53D6\u6D88"),_hoisted_24$6=createTextVNode("\u5220\u9664"),_sfc_main$L=defineComponent({__name:"DownloadItem",props:{item:{type:Object,required:!0},isDownloaded:{type:Boolean,default:!0},isDownloadSearch:{type:Boolean,default:!1}},setup(a){const o=a,s=useDownloadPageStore(),i=useUserInfoStore(),{userInfo:l}=storeToRefs(i),c={1:"\u756A\u5267",2:"\u7535\u5F71",3:"\u7EAA\u5F55\u7247",4:"\u56FD\u521B",5:"\u7535\u89C6\u5267",7:"\u7EFC\u827A",music:"\u97F3\u4E50"},r=ref(!1),u=DPR(),d=useRouter(),_=computed(()=>{var N;return((N=o.item.itemList)==null?void 0:N.length)>1}),f=computed(()=>{var N;return((N=o.item.itemList)==null?void 0:N.length)===1?o.item.itemList[0]:o.item}),m=computed(()=>{var N,w;return(N=o.item.itemList)!=null&&N[0]?((w=o.item.itemList)==null?void 0:w[0].type)==="ogv"?c[o.item.itemList[0].seasonType]:"":o.item.type==="ogv"?c[o.item.seasonType]:""}),p=ref("");let v=!1;const g=async()=>{v=!0;try{p.value=await tryLocalImage(f.value.coverImg,trimHttp$1(formatImg$1(f.value.coverUrl||"",512*u,288*u)))}finally{v=!1}};g(),watch(f,N=>{!v&&N.coverImg!==f.value.coverImg&&g()});const $=()=>{var w;const N=(w=o.item.itemList)!=null&&w.length?o.item.itemList[0]:o.item;openPlayerWindow({type:N.type,aid:N.aid,bvid:N.bvid,p:N.p,seasonId:N.seasonId,epid:N.epid,fromSpmid:SPM_PV.mineDownload+".pv"})},y=ref(!1),B=()=>{y.value=!0},C=()=>{y.value=!1,o.isDownloaded?o.item.itemList?callNative("download/deleteGroups",{groupIds:[o.item.groupId]}):callNative("download/deleteGroupItems",{groupId:o.item.groupId,itemIds:[o.item.itemId]}):callNative("download/deleteTasks",{taskIds:[o.item.itemId]})};let S=!1,E=-1;const k=400,b=async N=>{if(!(S||Date.now()-E<k)){S=!0,E=Date.now();try{await callNative("download/pauseTasks",{taskIds:[N.itemId]})}finally{S=!1}}},V=async N=>{if(!l.value.isLogin){requestLogin("downloadItem.handleStart");return}if(!(S||Date.now()-E<k)){S=!0,E=Date.now();try{await callNative("download/restartTasks",{taskIds:[N.itemId]})}finally{S=!1}}},A=N=>{d.push({name:"Space",query:{mid:N}})},x=()=>{var w,D;const N=((D=(w=o.item.itemList)==null?void 0:w[0])==null?void 0:D.itemId)||o.item.itemId;N&&openPlayerWindow({type:"ugc",fromSpmid:"main.mine-cache.0.0.pv",mediaList:{bizType:-1,bizId:N,bizTitle:"\u79BB\u7EBF\u7F13\u5B58"}})},T=N=>{if(!!o.isDownloaded){if(o.isDownloadSearch&&N.status!=="completed"){toastAsync({content:"\u89C6\u9891\u672A\u4E0B\u8F7D\u5B8C\u6210\uFF01"});return}if(_.value)s.setOpenedGroup(o.item),d.push({name:"MineDownloadCollection"});else{if(N.status==="damaged"){toastAsync({content:"\u6587\u4EF6\u635F\u574F\uFF0C\u8BF7\u91CD\u65B0\u4E0B\u8F7D"});return}openPlayerWindow({type:N.type,aid:N.aid,bvid:N.bvid,p:N.p,cid:N.cid,localCid:N.cid,seasonId:N.seasonId,epid:N.epid,fromSpmid:SPM_PV.mineDownload+".pv",mediaList:{bizType:-1,bizId:N.itemId,bizTitle:"\u79BB\u7EBF\u7F13\u5B58"}})}}},I=computed(()=>{const N={connecting:"\u94FE\u63A5\u4E2D",downloading:o.item.totalSize?`\u7F13\u5B58\u4E2D\uFF1A${formatSize(o.item.loadedSize||0)}/${formatSize(o.item.totalSize)}`:"\u7F13\u5B58\u4E2D",pending:"\u7B49\u5F85\u4E0B\u8F7D",paused:"\u5DF2\u6682\u505C",completed:"\u5DF2\u5B8C\u6210",error:"\u4E0B\u8F7D\u9519\u8BEF",notAllowed:"\u4E0B\u8F7D\u9519\u8BEF",damaged:"\u6587\u4EF6\u635F\u574F"},{status:w,errorMsg:D}=o.item||{};let L=N[w];return w==="error"&&D&&(L=`${L}\uFF08${D}\uFF09`),L}),R=computed(()=>{var N;return o.isDownloaded?[...!o.item.itemList||o.item.itemList.length<=1?[{text:"\u66F4\u65B0\u5F39\u5E55",handler:()=>{let w=null;o.item.itemList?w=Promise.all(o.item.itemList.map(D=>callNative("download/updateItemDmInfo",{itemId:D.itemId}))):w=callNative("download/updateItemDmInfo",{itemId:o.item.itemId}),w==null||w.then(()=>toastAsync({content:"\u5DF2\u66F4\u65B0\u5F39\u5E55\u6570\u636E"})).catch(D=>{console.error(D),toastAsync({content:"\u66F4\u65B0\u5F39\u5E55\u5931\u8D25"})})}}]:[],{text:((N=o.item.itemList)==null?void 0:N.length)>1?"\u64AD\u653E\u5168\u90E8":"\u64AD\u653E",handler:x},{text:"\u5728\u7EBF\u8BE6\u60C5\u9875",handler:$},{text:"\u5220\u9664",handler:B}]:[{text:"\u5728\u7EBF\u8BE6\u60C5\u9875",handler:$},{text:"\u5220\u9664",handler:B}]});return(N,w)=>{var j,O;const D=resolveComponent("v-dropdown"),L=resolveComponent("v-button"),P=resolveComponent("v-dialog");return openBlock(),createElementBlock("div",{class:normalizeClass(["download-item",{"not-collection":!unref(_)}])},[createBaseVNode("div",_hoisted_1$_,[unref(_)?(openBlock(),createElementBlock("div",{key:0,class:"collection",onClick:w[0]||(w[0]=F=>T(unref(f)))})):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["cover",{clickable:a.isDownloaded,"transp-bg":r.value}]),onClick:w[4]||(w[4]=F=>T(unref(f)))},[createVNode(unref(PlaceHolerImg),{class:"cover-ph"}),p.value?(openBlock(),createElementBlock("img",{key:0,src:p.value,loading:"lazy",style:normalizeStyle({backgroundColor:r.value?"transparent":""}),onLoad:w[1]||(w[1]=F=>r.value=!0),onerror:"this.remove()"},null,44,_hoisted_2$W)):createCommentVNode("",!0),(!a.isDownloaded||((j=o.item.itemList)==null?void 0:j.length))&&unref(m)?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["badge",{"hide-on-hover":!a.isDownloaded}])},toDisplayString(unref(m)),3)):createCommentVNode("",!0),_hoisted_3$T,createBaseVNode("div",{class:normalizeClass(["cover-info",{"hide-on-hover":!a.isDownloaded}])},[unref(f).totalSize?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(unref(IcoDisk)),createBaseVNode("div",{class:"size",textContent:toDisplayString(unref(formatSize)(unref(f).totalSize))},null,8,_hoisted_4$H)],64)):createCommentVNode("",!0),_hoisted_5$z,unref(_)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:1,class:"duration",textContent:toDisplayString(unref(formatDuration$1)(Math.round(unref(f).duration)))},null,8,_hoisted_6$w)),unref(_)?(openBlock(),createElementBlock("div",{key:2,class:"collection-count",textContent:toDisplayString(`${((O=a.item.itemList)==null?void 0:O.length)||1}\u4E2A\u5185\u5BB9`)},null,8,_hoisted_7$u)):createCommentVNode("",!0)],2),a.isDownloaded?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_8$t,[createBaseVNode("div",{class:"to-detail",onClick:$},[_hoisted_9$q,createVNode(unref(IcoArrowRight))]),["connecting","downloading","pending"].includes(unref(f).status)?(openBlock(),createElementBlock("div",{key:0,class:"control-button",onClick:w[2]||(w[2]=F=>b(unref(f)))}," \u6682\u505C\u7F13\u5B58 ")):createCommentVNode("",!0),["paused","error","damaged","notAllowed"].includes(unref(f).status)?(openBlock(),createElementBlock("div",{key:1,class:"control-button",onClick:w[3]||(w[3]=F=>V(unref(f)))},toDisplayString(unref(f).status==="paused"?"\u5F00\u59CB\u7F13\u5B58":"\u91CD\u65B0\u4E0B\u8F7D"),1)):createCommentVNode("",!0)]))],2)]),createBaseVNode("div",_hoisted_10$n,[createBaseVNode("div",_hoisted_11$l,[createBaseVNode("div",{class:"info-title fw_500",textContent:toDisplayString(a.item.title),title:a.item.title,onClick:w[5]||(w[5]=F=>T(unref(f)))},null,8,_hoisted_12$i)]),createVNode(D,{trigger:"click","click-hide":""},{content:withCtx(()=>[createBaseVNode("div",_hoisted_14$b,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(R),(F,U)=>(openBlock(),createElementBlock("div",{class:"option",key:U,textContent:toDisplayString(F.text),onClick:F.handler},null,8,_hoisted_15$9))),128))])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_13$c,[createVNode(unref(IcoMore$1))])]),_:1})]),a.isDownloaded&&unref(f).uname?(openBlock(),createElementBlock("div",{key:0,class:"info-up",onClick:w[6]||(w[6]=F=>A(unref(f).uid))},[createVNode(unref(WidgetUp),{class:"up-icon"}),createBaseVNode("span",{class:"up-name",textContent:toDisplayString(unref(f).uname)},null,8,_hoisted_16$8)])):createCommentVNode("",!0),a.isDownloaded?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_17$8,[createBaseVNode("div",{class:"downloading-text",textContent:toDisplayString(unref(I))},null,8,_hoisted_18$8),createBaseVNode("div",_hoisted_19$7,[createBaseVNode("div",{class:"progress-percent",style:normalizeStyle({width:`${unref(f).progress}%`})},null,4)])])),createVNode(P,{visible:y.value,"onUpdate:visible":w[8]||(w[8]=F=>y.value=F),width:320,"class-name":"i_dialog py_lg",onCancel:w[9]||(w[9]=F=>y.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_20$7,[_hoisted_21$7,createBaseVNode("div",_hoisted_22$6,[createVNode(L,{class:"mr_sm",onClick:w[7]||(w[7]=F=>y.value=!1)},{default:withCtx(()=>[_hoisted_23$6]),_:1}),createVNode(L,{type:"danger",onClick:C},{default:withCtx(()=>[_hoisted_24$6]),_:1})])])]),_:1},8,["visible"])],2)}}});var DownloadItem=_export_sfc(_sfc_main$L,[["__scopeId","data-v-8aa628a8"]]);const _hoisted_1$Z={width:"50",height:"47",viewBox:"0 0 50 47",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$V=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M49.455 16.794c.08.808.15 1.617.212 2.426.244 3.238.355 6.482.33 9.729-.012 1.626-.066 3.25-.155 4.875a99.068 99.068 0 0 1-.28 3.653l-.062.609-.033.304-.017.152a8.708 8.708 0 0 1-2.343 5.13 8.543 8.543 0 0 1-4.829 2.558l-.101.016c-.081.012-.161.025-.242.033l-.34.035-.6.05-1.199.092a189.129 189.129 0 0 1-7.198.398 205.775 205.775 0 0 1-19.214-.178c-1.6-.089-3.198-.202-4.797-.338l-.15-.012-.075-.006-.085-.009c-.115-.012-.23-.023-.345-.038l-.343-.053-.34-.067a8.63 8.63 0 0 1-6.545-6.52 8.713 8.713 0 0 1-.129-.686l-.043-.345-.032-.304a99.867 99.867 0 0 1-.298-3.65 107.377 107.377 0 0 1-.157-9.744c.092-3.245.319-6.481.667-9.707.1-.914.345-1.817.727-2.655a8.53 8.53 0 0 1 1.521-2.284 8.486 8.486 0 0 1 4.73-2.58c.226-.037.45-.07.677-.089l.169-.015.15-.01.3-.022 1.2-.079a191.143 191.143 0 0 1 5.545-.255l-.309-.39a79.062 79.062 0 0 1-1.585-2.131l-.385-.542-.19-.272-.014-.021a3.15 3.15 0 0 1-.167-.257 2.163 2.163 0 0 1-.245-1.466 2.613 2.613 0 0 1 2.873-2.11c.32.041.562.137.773.257.21.119.387.265.535.43.068.074.127.154.187.234l.02.027.198.265.392.537a75.887 75.887 0 0 1 1.522 2.178c.493.736.973 1.483 1.433 2.243.179.296.354.594.527.895a301.567 301.567 0 0 1 7.425-.007c.172-.298.347-.594.523-.888.46-.762.94-1.507 1.434-2.243a75.887 75.887 0 0 1 1.521-2.178l.392-.537.198-.265.02-.027c.06-.08.12-.16.187-.234.148-.165.325-.31.535-.43.212-.12.453-.216.773-.256 1.365-.17 2.614.767 2.874 2.109.06.318.043.58-.003.82a2.166 2.166 0 0 1-.242.646 2.93 2.93 0 0 1-.163.25l-.019.028-.19.272-.385.542a75.788 75.788 0 0 1-1.585 2.13 31.312 31.312 0 0 1-.298.377c.76.025 1.522.054 2.282.088 1.6.072 3.2.161 4.801.28l.075.005.084.009.17.017c.112.008.22.024.33.04l.01.002.17.025.168.032a8.49 8.49 0 0 1 1.642.483A8.582 8.582 0 0 1 49.2 14.61l.03.17.023.171.023.171.012.093.007.062.033.303c.045.404.087.809.127 1.213Zm-4.48 16.756c.086-1.57.136-3.131.148-4.638.023-3.104-.082-6.24-.315-9.315a120.78 120.78 0 0 0-.322-3.468l-.033-.303.003.027-.01-.087-.028-.21-.03-.163-.018-.08a3.666 3.666 0 0 0-2.732-2.758l-.062-.015-.155-.028-.163-.024-.173-.017-.067-.005a155.47 155.47 0 0 0-4.655-.272c-2.952-.13-6.029-.2-9.404-.215a570.01 570.01 0 0 0-1.703-.004c-2.819 0-5.349.03-7.744.096-1.603.04-3.181.098-4.681.17l-.385.02c-.614.032-1.289.066-1.939.108l-1.188.079-.385.027-.157.015a3.621 3.621 0 0 0-2.912 2.105 3.73 3.73 0 0 0-.311 1.136 118.847 118.847 0 0 0-.64 9.313c-.09 3.175-.04 6.302.148 9.295a85.293 85.293 0 0 0 .282 3.454l.025.242.028.219c.017.106.032.192.047.254l.006.034a3.739 3.739 0 0 0 2.256 2.63c.175.069.356.126.54.168l.178.035.17.027.177.019.221.018c1.524.13 3.09.24 4.659.328a203.81 203.81 0 0 0 11.24.318 202.36 202.36 0 0 0 12.199-.373l.088-.006c.695-.044 1.487-.094 2.243-.152l1.189-.093.533-.044.245-.025s.107-.015.147-.022a3.676 3.676 0 0 0 2.035-1.083l.015-.015a3.782 3.782 0 0 0 1.008-2.14l.01-.085.052-.474.058-.58.005-.052c.033-.364.066-.727.097-1.09.061-.759.116-1.534.16-2.3Zm-4.647-10.6c.188.1.372.2.565.315.675.397.787 1.127.538 1.904-.288.898-1.218 1.686-2.108 1.395l-.038-.011c-.182-.06-.377-.131-.567-.202l-.143-.054c-.142-.054-.285-.108-.427-.165l-.058-.023c-.17-.066-.34-.133-.509-.204-.19-.076-.378-.153-.565-.233-.188-.079-.376-.16-.563-.24-.188-.08-.375-.16-.564-.238l-1.128-.471c-.752-.311-1.507-.616-2.26-.917l-1.132-.445c-.188-.075-.377-.146-.566-.218-.188-.072-.377-.143-.565-.218l-.045-.018c-.784-.315-.815-1.295-.577-2.13.253-.889.967-1.49 1.848-1.234.407.118.817.239 1.22.369l.607.193.602.203c.801.276 1.595.566 2.38.872.347.131.69.27 1.032.41l.143.057.216.088c.318.13.635.26.95.398a27.324 27.324 0 0 1 1.714.817Zm-20.339-.042-.045.019c-.18.072-.363.141-.545.21-.195.075-.39.149-.585.227l-1.131.446c-.754.3-1.509.604-2.26.916l-1.129.471-.498.212c-.21.09-.418.179-.628.266-.187.08-.375.158-.566.234-.131.055-.264.108-.398.16l-.168.067a26.616 26.616 0 0 1-1.137.42l-.038.012c-.892.292-1.82-.498-2.109-1.396-.25-.78-.136-1.509.537-1.905a17.666 17.666 0 0 1 1.13-.602c.378-.185.762-.364 1.148-.53.338-.147.677-.286 1.017-.425l.15-.061a64.772 64.772 0 0 1 3.555-1.339l.602-.203.607-.194c.401-.13.811-.25 1.22-.368.881-.256 1.595.345 1.848 1.234.237.834.205 1.813-.577 2.13Zm11.597 5.663c-.395-.08-.751.097-.863.479l-.02.069-.033.118-.04.13a7.027 7.027 0 0 1-.295.787 4.96 4.96 0 0 1-.517.936c-.2.272-.417.504-.645.654-.23.15-.462.222-.722.227a1.783 1.783 0 0 1-.813-.168c-.265-.121-.517-.316-.759-.552a4.674 4.674 0 0 1-.655-.83 5.849 5.849 0 0 1-.403-.725l-.058-.123-.049-.108-.031-.069a.772.772 0 0 0-.719-.457h-.006a.773.773 0 0 0-.719.457l-.031.07-.049.107-.058.123c-.04.082-.08.165-.123.247-.087.163-.18.323-.28.478-.195.309-.415.593-.655.83-.242.236-.494.43-.759.552a1.774 1.774 0 0 1-.813.168 1.344 1.344 0 0 1-.722-.227c-.23-.15-.446-.382-.645-.654a4.96 4.96 0 0 1-.516-.935 6.484 6.484 0 0 1-.207-.521c-.027-.077-.052-.154-.076-.23l-.012-.036-.04-.131-.034-.118-.02-.069c-.11-.384-.466-.558-.863-.48-.418.083-.72.428-.638.85l.02.1.018.088.04.172a8.41 8.41 0 0 0 .307.992c.168.434.375.861.65 1.273.273.41.623.806 1.083 1.118a3.055 3.055 0 0 0 1.603.525 3.402 3.402 0 0 0 1.587-.343 4.2 4.2 0 0 0 1.232-.918c.28-.3.516-.619.723-.95.207.331.444.65.724.95.336.36.748.684 1.231.918.483.236 1.037.36 1.587.343.282-.008.57-.059.843-.15.274-.089.53-.22.76-.374.46-.313.81-.709 1.084-1.119a6.6 6.6 0 0 0 .65-1.273 8.698 8.698 0 0 0 .306-.992l.04-.172.019-.087.02-.101c.081-.424-.219-.767-.639-.85Z",fill:"currentColor"},null,-1),_hoisted_3$S=[_hoisted_2$V];function render$e(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$Z,_hoisted_3$S)}var WidgetStv={render:render$e},FolderMediaCard_vue_vue_type_style_index_0_lang="";const _hoisted_1$Y={class:"folder_media_card"},_hoisted_2$U=createBaseVNode("div",{class:"folder_media_card--stand is-last"},null,-1),_hoisted_3$R=createBaseVNode("div",{class:"folder_media_card--stand is-middle"},null,-1),_hoisted_4$G={class:"folder_media_card--wrap"},_hoisted_5$y=["src"],_sfc_main$K=defineComponent({__name:"FolderMediaCard",props:{src:{type:String,required:!0},keepSrc:{type:Boolean,default:!1},width:{type:Number,default:160}},setup(a){return(o,s)=>{const i=resolveComponent("VImg");return openBlock(),createElementBlock("div",_hoisted_1$Y,[_hoisted_2$U,_hoisted_3$R,createBaseVNode("div",_hoisted_4$G,[a.src?a.keepSrc?(openBlock(),createElementBlock("img",{key:1,class:"folder_media_card--img object_fit_fill",src:a.src},null,8,_hoisted_5$y)):(openBlock(),createBlock(i,{key:2,class:"folder_media_card--img",src:a.src,width:a.width,height:a.width/16*9,loading:"lazy",rule:"1c","bfs-style":"pc-common-cover-h"},null,8,["src","width","height"])):(openBlock(),createBlock(unref(WidgetStv),{key:0,class:"folder_media_card--def"}))])])}}});var MineDownload_vue_vue_type_style_index_0_scoped_true_lang="",MineDownload_vue_vue_type_style_index_1_lang="";const _withScopeId$8=a=>(pushScopeId("data-v-304e6052"),a=a(),popScopeId(),a),_hoisted_1$X={class:"mine-download"},_hoisted_2$T={key:0,class:"md-header i_wrapper"},_hoisted_3$Q={class:"dl-tabs"},_hoisted_4$F=["onClick"],_hoisted_5$x=["textContent"],_hoisted_6$v=["textContent"],_hoisted_7$t={class:"options"},_hoisted_8$s=createTextVNode("\u7F13\u5B58\u6392\u5E8F"),_hoisted_9$p=createTextVNode(" \u66F4\u591A\u64CD\u4F5C "),_hoisted_10$m={class:"dropdown_select--content group-more-options"},_hoisted_11$k=createTextVNode(" \u5220\u9664\u6240\u6709\u7F13\u5B58 "),_hoisted_12$h=_withScopeId$8(()=>createBaseVNode("span",null,"\u64AD\u653E\u5168\u90E8",-1)),_hoisted_13$b=createTextVNode(" \u4EFB\u52A1\u6392\u5E8F "),_hoisted_14$a=createTextVNode(" \u540C\u65F6\u7F13\u5B58\u4E2A\u6570"),_hoisted_15$8={class:"brand_pink"},_hoisted_16$7={class:"dropdown_select--content task-num-options"},_hoisted_17$7=_withScopeId$8(()=>createBaseVNode("div",{class:"dropdown_select--option-title"},"1\u4E2A",-1)),_hoisted_18$7=[_hoisted_17$7],_hoisted_19$6=_withScopeId$8(()=>createBaseVNode("div",{class:"dropdown_select--option-title"},[createTextVNode("2\u4E2A"),createBaseVNode("span",{class:"brand_pink"},"\uFF08\u5927\u4F1A\u5458\u4E13\u4EAB\uFF09")],-1)),_hoisted_20$6=[_hoisted_19$6],_hoisted_21$6=_withScopeId$8(()=>createBaseVNode("div",{class:"dropdown_select--option-title"},[createTextVNode("3\u4E2A"),createBaseVNode("span",{class:"brand_pink"},"\uFF08\u5927\u4F1A\u5458\u4E13\u4EAB\uFF09")],-1)),_hoisted_22$5=[_hoisted_21$6],_hoisted_23$5=createTextVNode(" \u66F4\u591A\u64CD\u4F5C "),_hoisted_24$5={class:"dropdown_select--content task-more-options"},_hoisted_25$5=_withScopeId$8(()=>createBaseVNode("div",{class:"dropdown_select--option-title"},"\u5168\u90E8\u5F00\u59CB",-1)),_hoisted_26$5=[_hoisted_25$5],_hoisted_27$4=_withScopeId$8(()=>createBaseVNode("div",{class:"dropdown_select--option-title"},"\u5168\u90E8\u6682\u505C",-1)),_hoisted_28$3=[_hoisted_27$4],_hoisted_29$2=_withScopeId$8(()=>createBaseVNode("div",{class:"dropdown_select--option-title stress_red"},"\u5168\u90E8\u5220\u9664",-1)),_hoisted_30$1=[_hoisted_29$2],_hoisted_31$1={key:1,class:"row gutter_md"},_hoisted_32$1={key:2,class:"tab-content downloading i_wrapper"},_hoisted_33$1={key:1,class:"row gutter_md"},_hoisted_34$1={key:3,class:"tab-content downloaded i_wrapper"},_hoisted_35$1={key:1,class:"row gutter_md"},_hoisted_36$1={ref:"bottomRef",class:"bottom-load"},_hoisted_37$1={class:"content-wrapper"},_hoisted_38$1={class:"b_text text_center text1 mt_md"},_hoisted_39$1={key:0,class:"b_text text_center text2 mt_md"},_hoisted_40$1={class:"mt_xl text_center dialog_btns"},_hoisted_41$1=createTextVNode("\u53D6 \u6D88"),_hoisted_42$1=_withScopeId$8(()=>createBaseVNode("p",{class:"b_text text2 mt_nsm mb_md text_center text_ellipsis"},"\u62D6\u52A8\u8FDB\u884C\u6392\u5E8F",-1)),_hoisted_43$1={class:"content-wrapper"},_hoisted_44$1={class:"download_group--item p_relative"},_hoisted_45$1={class:"task-img p_relative"},_hoisted_46$1=["src"],_hoisted_47$1={class:"download_group--item-tt p_center_x b_n2 fs_6 text_ellipsis"},_hoisted_48$1={class:"mt_xl text_center dialog_btns"},_hoisted_49$1=createTextVNode("\u53D6\u6D88"),_hoisted_50$1=createTextVNode("\u786E\u5B9A"),_hoisted_51$1=_withScopeId$8(()=>createBaseVNode("p",{class:"b_text text2 mt_nsm mb_md text_center text_ellipsis"},"\u62D6\u52A8\u8FDB\u884C\u6392\u5E8F",-1)),_hoisted_52$1={class:"content-wrapper"},_hoisted_53$1={class:"download_group--item p_relative"},_hoisted_54$1={class:"download_group--item-tt p_center_x b_n2 fs_6 text_ellipsis"},_hoisted_55$1={class:"mt_xl text_center dialog_btns"},_hoisted_56$1=createTextVNode("\u53D6\u6D88"),_hoisted_57$1=createTextVNode("\u786E\u5B9A"),_sfc_main$J=defineComponent({__name:"MineDownload",setup(a,{expose:o}){useReportPv({spm_id:SPM_PV.mineDownload,isKeepAlive:!1,pageName:"MineDownload"});const s=useUserInfoStore(),{userInfo:i}=storeToRefs(s),l=useDownloadPageStore(),{activeTab:c}=storeToRefs(l),r=useRoute(),u=useRouter(),d=[{key:"downloaded",name:"\u5DF2\u7F13\u5B58\u89C6\u9891"},{key:"downloading",name:"\u6B63\u5728\u7F13\u5B58"}],_=computed(()=>d.find(oe=>oe.key===c.value)),f=oe=>{l.setActiveTab(oe),u.replace({name:"MineDownload",query:{tab:oe==="downloading"?2:1}})};if(r.query.tab){const oe={1:"downloaded",2:"downloading"};l.setActiveTab(oe[Number(r.query.tab)]||1)}const m=ref(!1),p=ref(!1),v=ref(!1),g=ref([]),$=ref([]),y=computed(()=>$.value.length);let B=!1;const C=ref(!1),S=ref([]);o({doSearch:async(oe="")=>{const ie=oe.trim();ie?(C.value=!0,callNative("download/getAllVideoList",{search:ie}).then(({data:ye})=>{S.value=ye})):C.value=!1}});const k=()=>{var ie,ye;const oe=(ye=(ie=g.value[0])==null?void 0:ie.itemList[0])==null?void 0:ye.itemId;!oe||openPlayerWindow({type:"ugc",fromSpmid:"main.mine-cache.0.0.pv",mediaList:{bizType:-1,bizId:oe,bizTitle:"\u79BB\u7EBF\u7F13\u5B58"}})},b=ref(1),V=()=>{callNative("config/getDlParallelNum").then(({data:oe})=>b.value=oe)};V(),useIpcListener("auth/userInfoChange",()=>V()),useIpcListener("config/dlParallelNumChange",({data:oe})=>b.value=oe);const A=oe=>{if(oe!==b.value){if(!i.value.isLogin)return requestLogin("mine.downloadNum");if(oe>1&&!i.value.vipStatus)return requestBigVip("downloadVIP");callNative("config/setDlParallelNum",oe)}},x=ref(!1),T=ref({text:"",content:"",confirm:"",handler:()=>{}}),I=()=>{var oe,ie;(ie=(oe=T.value).handler)==null||ie.call(oe)},R=()=>{x.value=!0,T.value={text:"\u786E\u8BA4\u5220\u9664\u6240\u6709\u7F13\u5B58\u5417\uFF1F",content:"\u5DF2\u7F13\u5B58\u89C6\u9891\u88AB\u5220\u9664\u4EE5\u540E\u5C06\u4E0D\u80FD\u6062\u590D\uFF01",confirm:"\u6E05\u7A7A",handler:async()=>{if(x.value=!1,!B){B=!0;try{await callNative("download/deleteAllGroups")}finally{B=!1}}}}},N=async()=>{if(!i.value.isLogin){requestLogin("mineDownload.startAll");return}if(!B){B=!0;try{await callNative("download/startAllTasks")}finally{B=!1}}},w=async()=>{if(!B){B=!0;try{await callNative("download/pauseAllTasks")}finally{B=!1}}},D=()=>{x.value=!0,T.value={text:"\u786E\u8BA4\u5220\u9664\u6240\u6709\u4E0B\u8F7D\u4EFB\u52A1\u5417\uFF1F",content:"",confirm:"\u6E05\u7A7A",handler:async()=>{if(x.value=!1,!B){B=!0;try{await callNative("download/deleteAllTasks")}finally{B=!1}}}}},L=ref(!1),P=ref(!1),j=ref([]),O=ref(!0),F=oe=>{oe.item.classList.add("invisible")},U=oe=>{oe.item.classList.remove("invisible");const ie=$.value.map(Te=>Te.itemId).join(","),ye=j.value.map(Te=>Te.itemId).join(",");O.value=ye===ie,P.value=!1},W=()=>{j.value=[...$.value],O.value=!0,L.value=!0},ne=()=>{L.value=!1,callNative("download/sortTasks",j.value.map((oe,ie)=>({itemId:oe.itemId,taskOrder:j.value.length-ie})))},H=ref(!1),M=ref(!1),ee=ref([]),G=ref(!0),Q=oe=>{oe.item.classList.add("invisible")},te=oe=>{oe.item.classList.remove("invisible");const ie=g.value.map(Te=>Te.groupId).join(","),ye=ee.value.map(Te=>Te.groupId).join(",");G.value=ye===ie,M.value=!1},ce=()=>{ee.value=[...g.value],G.value=!0,H.value=!0},$e=()=>{H.value=!1,callNative("download/sortGroupList",ee.value.map((oe,ie)=>({groupId:oe.groupId,groupOrder:ee.value.length-ie})))},we=()=>{callNative("download/getCompletedGroups").then(oe=>{g.value=oe.data})},_e=()=>{callNative("download/getTaskList").then(oe=>{$.value=oe.data||[]})},ke=()=>{we(),_e()};return callNative("download/reloadVideoList").then(()=>ke()),useIpcListener("download/itemListEvent",oe=>{we()}),useIpcListener("download/taskListEvent",oe=>{_e()}),useIpcListener("download/statusChange",({data:oe})=>{if(oe.status==="damaged"){we();return}if(oe.status==="error"){const ie=$.value.findIndex(ye=>ye.itemId===oe.itemId);if(ie<0)return;$.value[ie].status="error",oe.errorMsg&&($.value[ie].errorMsg=oe.errorMsg)}}),useIpcListener("download/progressChange",({data:oe})=>{const ie=$.value.findIndex(ye=>ye.itemId===oe.itemId);ie<0||($.value[ie]=oe,oe.status==="completed"&&ke())}),(oe,ie)=>{const ye=resolveComponent("v-button"),Te=resolveComponent("WidgetArrow"),Ee=resolveComponent("VDropdown"),Ve=resolveComponent("v-dialog");return openBlock(),createElementBlock("div",_hoisted_1$X,[C.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_2$T,[createBaseVNode("div",_hoisted_3$Q,[(openBlock(),createElementBlock(Fragment,null,renderList(d,ue=>createBaseVNode("div",{key:ue.key,class:normalizeClass(["tab",{active:unref(c)===ue.key}]),onClick:Oe=>f(ue.key)},[createBaseVNode("span",{textContent:toDisplayString(ue.name)},null,8,_hoisted_5$x),ue.key=="downloading"&&unref(y)>0?(openBlock(),createElementBlock("span",{key:0,class:"count",textContent:toDisplayString(unref(y))},null,8,_hoisted_6$v)):createCommentVNode("",!0)],10,_hoisted_4$F)),64))]),createBaseVNode("div",_hoisted_7$t,[unref(_).key==="downloaded"?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(ye,{class:"option mr_sm",disabled:!g.value.length,onClick:ce},{default:withCtx(()=>[_hoisted_8$s]),_:1},8,["disabled"]),createVNode(Ee,{trigger:"hover",placement:"bottom-end","click-hide":"",onShow:ie[0]||(ie[0]=ue=>m.value=!0),onHide:ie[1]||(ie[1]=ue=>m.value=!1)},{content:withCtx(()=>[createBaseVNode("div",_hoisted_10$m,[createBaseVNode("div",{class:"dropdown_select--option cs_pointer stress_red",onClick:R},[createVNode(unref(IcoDelete$1),{class:"stress_red mt_n3",width:"16"}),_hoisted_11$k])])]),default:withCtx(()=>[createVNode(ye,{class:"dropdown_select--button p_relative fs_4 text_ellipsis text_left group-more-button mr_sm",disabled:!g.value.length},{default:withCtx(()=>[_hoisted_9$p,createVNode(Te,{class:normalizeClass(["dropdown_select--button--icon rotate_90 p_absolute",{rotate_deg:m.value}])},null,8,["class"])]),_:1},8,["disabled"])]),_:1}),createVNode(ye,{class:"play-all",type:"pink",disabled:!g.value.length,onClick:k},{default:withCtx(()=>[createVNode(unref(PlayAllIco)),_hoisted_12$h]),_:1},8,["disabled"])],64)):createCommentVNode("",!0),unref(_).key==="downloading"?(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(ye,{class:"option mr_sm",disabled:!$.value.length,onClick:W},{default:withCtx(()=>[_hoisted_13$b]),_:1},8,["disabled"]),createVNode(Ee,{trigger:"hover",placement:"bottom-end","click-hide":"",onShow:ie[5]||(ie[5]=ue=>p.value=!0),onHide:ie[6]||(ie[6]=ue=>p.value=!1)},{content:withCtx(()=>[createBaseVNode("div",_hoisted_16$7,[createBaseVNode("div",{class:"dropdown_select--option cs_pointer",onClick:ie[2]||(ie[2]=ue=>A(1))},_hoisted_18$7),createBaseVNode("div",{class:"dropdown_select--option cs_pointer",onClick:ie[3]||(ie[3]=ue=>A(2))},_hoisted_20$6),createBaseVNode("div",{class:"dropdown_select--option cs_pointer",onClick:ie[4]||(ie[4]=ue=>A(3))},_hoisted_22$5)])]),default:withCtx(()=>[createVNode(ye,{class:"dropdown_select--button p_relative fs_4 text_ellipsis text_left mr_sm task-num-button"},{default:withCtx(()=>[_hoisted_14$a,createBaseVNode("span",_hoisted_15$8,toDisplayString(b.value),1),createVNode(Te,{class:normalizeClass(["dropdown_select--button--icon rotate_90 p_absolute",{rotate_deg:p.value}])},null,8,["class"])]),_:1})]),_:1}),createVNode(Ee,{trigger:"hover",placement:"bottom-end","click-hide":"",onShow:ie[7]||(ie[7]=ue=>v.value=!0),onHide:ie[8]||(ie[8]=ue=>v.value=!1)},{content:withCtx(()=>[createBaseVNode("div",_hoisted_24$5,[createBaseVNode("div",{class:normalizeClass(["dropdown_select--option cs_pointer",{disabled:!$.value.length}]),onClick:N},_hoisted_26$5,2),createBaseVNode("div",{class:normalizeClass(["dropdown_select--option cs_pointer",{disabled:!$.value.length}]),onClick:w},_hoisted_28$3,2),createBaseVNode("div",{class:normalizeClass(["dropdown_select--option cs_pointer",{disabled:!$.value.length}]),onClick:D},_hoisted_30$1,2)])]),default:withCtx(()=>[createVNode(ye,{class:"dropdown_select--button p_relative fs_4 text_ellipsis text_left task-more-button"},{default:withCtx(()=>[_hoisted_23$5,createVNode(Te,{class:normalizeClass(["dropdown_select--button--icon rotate_90 p_absolute",{rotate_deg:v.value}])},null,8,["class"])]),_:1})]),_:1})],64)):createCommentVNode("",!0)])])),!C.value&&unref(c)==="downloaded"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["tab-content downloaded i_wrapper",{"first-line-collection":g.value.slice(0,5).some(ue=>{var Oe;return((Oe=ue.itemList)==null?void 0:Oe.length)>1})}])},[g.value.length===0?(openBlock(),createBlock(NoData,{key:0,text:"\u6682\u65E0\u7F13\u5B58\u7684\u89C6\u9891"})):createCommentVNode("",!0),g.value.length?(openBlock(),createElementBlock("div",_hoisted_31$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,ue=>(openBlock(),createBlock(DownloadItem,{class:"col_3 col_sm_1_5 mb_lg al-flex-end",item:ue,key:ue.groupId},null,8,["item"]))),128))])):createCommentVNode("",!0)],2)):createCommentVNode("",!0),!C.value&&unref(c)==="downloading"?(openBlock(),createElementBlock("div",_hoisted_32$1,[$.value.length===0?(openBlock(),createBlock(NoData,{key:0,text:"\u6682\u65E0\u7F13\u5B58\u4E2D\u7684\u89C6\u9891"})):createCommentVNode("",!0),$.value.length?(openBlock(),createElementBlock("div",_hoisted_33$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList($.value,ue=>(openBlock(),createBlock(DownloadItem,{class:"col_3 col_sm_1_5 mb_lg al-flex-end",item:ue,key:ue.itemId,isDownloaded:!1},null,8,["item"]))),128))])):createCommentVNode("",!0)])):createCommentVNode("",!0),C.value?(openBlock(),createElementBlock("div",_hoisted_34$1,[createVNode(SearchResultCount,{count:S.value.length,unit:"\u7ED3\u679C"},null,8,["count"]),S.value.length===0?(openBlock(),createBlock(NoData,{key:0,text:"\u6682\u65E0\u7F13\u5B58\u7684\u89C6\u9891"})):createCommentVNode("",!0),S.value.length?(openBlock(),createElementBlock("div",_hoisted_35$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(S.value,ue=>(openBlock(),createBlock(DownloadItem,{class:"col_3 col_sm_1_5 mb_lg al-flex-end",item:ue,key:ue.itemId,isDownloadSearch:!0},null,8,["item"]))),128))])):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_36$1,null,512),createVNode(Ve,{visible:x.value,"onUpdate:visible":ie[10]||(ie[10]=ue=>x.value=ue),width:320,"class-name":"i_dialog py_lg",onCancel:ie[11]||(ie[11]=ue=>x.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_37$1,[createBaseVNode("h4",_hoisted_38$1,toDisplayString(T.value.text),1),T.value.content?(openBlock(),createElementBlock("p",_hoisted_39$1,toDisplayString(T.value.content),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_40$1,[createVNode(ye,{class:"mr_sm",onClick:ie[9]||(ie[9]=ue=>x.value=!1)},{default:withCtx(()=>[_hoisted_41$1]),_:1}),createVNode(ye,{type:"danger",onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString(T.value.confirm),1)]),_:1})])])]),_:1},8,["visible"]),createVNode(Ve,{visible:L.value,"onUpdate:visible":ie[15]||(ie[15]=ue=>L.value=ue),width:580,"class-name":"i_dialog py_lg",title:"\u4E0B\u8F7D\u6392\u5E8F",center:!0,"is-show-default-footer":!1,onCancel:ie[16]||(ie[16]=ue=>L.value=!1)},{default:withCtx(()=>[_hoisted_42$1,createBaseVNode("div",_hoisted_43$1,[createBaseVNode("div",{class:normalizeClass(["sort_download_group",{sorting:P.value}])},[createVNode(unref(Draggable),{list:j.value,class:"download_group page_scroller",draggable:".download_group--item",animation:"500","item-key":"id",onMousedown:ie[12]||(ie[12]=ue=>P.value=!0),onMouseup:ie[13]||(ie[13]=ue=>P.value=!1),onStart:F,onEnd:U},{item:withCtx(({element:ue})=>[createBaseVNode("div",_hoisted_44$1,[createBaseVNode("div",_hoisted_45$1,[createBaseVNode("img",{class:"p_center",src:ue.coverUrl},null,8,_hoisted_46$1)]),createBaseVNode("h6",_hoisted_47$1,toDisplayString(ue.title),1)])]),_:1},8,["list"])],2),createBaseVNode("div",_hoisted_48$1,[createVNode(ye,{class:"mr_sm",onClick:ie[14]||(ie[14]=ue=>L.value=!1)},{default:withCtx(()=>[_hoisted_49$1]),_:1}),createVNode(ye,{type:"pink",onClick:ne,disabled:O.value},{default:withCtx(()=>[_hoisted_50$1]),_:1},8,["disabled"])])])]),_:1},8,["visible"]),createVNode(Ve,{visible:H.value,"onUpdate:visible":ie[20]||(ie[20]=ue=>H.value=ue),width:580,"class-name":"i_dialog py_lg",title:"\u7F13\u5B58\u6392\u5E8F",center:!0,"is-show-default-footer":!1,onCancel:ie[21]||(ie[21]=ue=>H.value=!1)},{default:withCtx(()=>[_hoisted_51$1,createBaseVNode("div",_hoisted_52$1,[createBaseVNode("div",{class:normalizeClass(["sort_download_group",{sorting:M.value}])},[createVNode(unref(Draggable),{list:ee.value,class:"download_group page_scroller",draggable:".download_group--item",animation:"500","item-key":"id",onMousedown:ie[17]||(ie[17]=ue=>M.value=!0),onMouseup:ie[18]||(ie[18]=ue=>M.value=!1),onStart:Q,onEnd:te},{item:withCtx(({element:ue})=>[createBaseVNode("div",_hoisted_53$1,[createVNode(_sfc_main$K,{src:ue.coverImg,"keep-src":!0,width:227},null,8,["src"]),createBaseVNode("h6",_hoisted_54$1,toDisplayString(ue.title),1)])]),_:1},8,["list"])],2),createBaseVNode("div",_hoisted_55$1,[createVNode(ye,{class:"mr_sm",onClick:ie[19]||(ie[19]=ue=>H.value=!1)},{default:withCtx(()=>[_hoisted_56$1]),_:1}),createVNode(ye,{type:"pink",onClick:$e,disabled:G.value},{default:withCtx(()=>[_hoisted_57$1]),_:1},8,["disabled"])])])]),_:1},8,["visible"])])}}});var MineDownload=_export_sfc(_sfc_main$J,[["__scopeId","data-v-304e6052"]]);const _hoisted_1$W={width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$S=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.187 3.38C.287 2.276 1.072.624 2.495.624h11.01c1.423 0 2.207 1.652 1.308 2.754l-3.977 4.875a.938.938 0 0 0-.211.593v3.488a1.5 1.5 0 0 1-1.895 1.447l-2.111-.576a1.688 1.688 0 0 1-1.244-1.628V8.847a.938.938 0 0 0-.211-.593L1.187 3.38Zm1.308-1.63a.563.563 0 0 0-.436.918l3.977 4.875c.3.368.464.829.464 1.304v2.731c0 .254.17.476.415.543l2.111.576a.375.375 0 0 0 .474-.362V8.847c0-.475.164-.936.464-1.304l3.977-4.875a.563.563 0 0 0-.436-.918H2.495Z",fill:"#61666D"},null,-1),_hoisted_3$P=[_hoisted_2$S];function render$d(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$W,_hoisted_3$P)}var Sort={render:render$d},TabsFrame_vue_vue_type_style_index_0_lang="";const _hoisted_1$V={class:"tabs_frame"},_hoisted_2$R={class:"tabs_frame--nav"},_hoisted_3$O={class:"tabs_frame--content"},_sfc_main$I=defineComponent({__name:"TabsFrame",props:{activeKey:{type:[String,Number],default:0},tabKey:{type:String,default:""},tabs:{type:Array,default:()=>[]}},setup(a){const o=a;function s(i){return typeof i=="string"?i:i[o.tabKey||"key"]}return(i,l)=>(openBlock(),createElementBlock("div",_hoisted_1$V,[createBaseVNode("div",_hoisted_2$R,[renderSlot(i.$slots,"nav")]),createBaseVNode("div",_hoisted_3$O,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.tabs,c=>withDirectives((openBlock(),createElementBlock("div",{key:s(c),class:"tabs_frame--pane"},[renderSlot(i.$slots,s(c))])),[[vShow,a.activeKey===s(c)]])),128))])]))}});var FilterButtons_vue_vue_type_style_index_0_lang="";const _hoisted_1$U={class:"filter_buttons flex_row flex_wrap w_100"},_hoisted_2$Q=["textContent","onClick"],_sfc_main$H=defineComponent({__name:"FilterButtons",props:{activeKey:{type:[String,Number],default:0},list:{type:Array,default:()=>[]}},emits:["update:active-key"],setup(a,{emit:o}){const s=a;function i(l){l!==s.activeKey&&o("update:active-key",l)}return(l,c)=>(openBlock(),createElementBlock("div",_hoisted_1$U,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.list,r=>(openBlock(),createElementBlock("div",{key:r.key,class:normalizeClass(["filter_buttons--item text_center cs_pointer",{"is-active":a.activeKey===r.key}]),textContent:toDisplayString(r.label),onClick:u=>i(r.key)},null,10,_hoisted_2$Q))),128))]))}});var FavoriteVideoCard_vue_vue_type_style_index_0_lang="";const _hoisted_1$T={class:"favorite_video_card"},_sfc_main$G=defineComponent({__name:"FavoriteVideoCard",props:{info:{type:Object,default:()=>({})},isDft:Boolean},emits:["remove","selectDir"],setup(a,{emit:o}){const s=a,i=computed(()=>s.isDft?"pc_app_mine_fav_default":"pc_app_mine_fav_folder"),l=[{type:"SELECT_DIR",label:"\u9009\u62E9\u6536\u85CF\u5939"},{type:"REMOVE",label:"\u53D6\u6D88\u6536\u85CF"}];function c(r){switch(r.type){case"REMOVE":o("remove");break;case"SELECT_DIR":o("selectDir");break}}return(r,u)=>(openBlock(),createElementBlock("div",_hoisted_1$T,[createVNode(unref(BiliVideoCard),{info:a.info,"img-lazy":"eager","is-rcmd":"","disable-frame":"","disable-scale":"",iid:unref(i)},{more:withCtx(()=>[createVNode(_sfc_main$2z,{class:"favorite_video_card--more",items:l,onSelect:c},{default:withCtx(()=>[createVNode(unref(IcoMore$1),{class:"favorite_video_card--more--btn"})]),_:1})]),_:1},8,["info","iid"])]))}});var FavoriteVideos_vue_vue_type_style_index_0_lang="";const _hoisted_1$S={key:1,class:"search-result-count"},_hoisted_2$P={key:0,class:"favorite_videos--loading mt_sm"},_hoisted_3$N={class:"row gutter_md"},_hoisted_4$E={key:0,class:"flex_center mt_x50 mb_x50"},_hoisted_5$w={class:"content-wrapper"},_hoisted_6$u=createBaseVNode("h4",{class:"b_text text1 text_center mt_md"},"\u786E\u5B9A\u53D6\u6D88\u6536\u85CF\u9009\u4E2D\u7684\u89C6\u9891\u5417\uFF1F",-1),_hoisted_7$s={class:"b_text text2 mt_sm text_center text_ellipsis_2l"},_hoisted_8$r=createTextVNode(" \u89C6\u9891\uFF1A"),_hoisted_9$o=["title"],_hoisted_10$l={class:"mt_xl text_center dialog_btns"},_hoisted_11$j=createTextVNode("\u624B\u6ED1\u4E86"),_hoisted_12$g=createTextVNode("\u53D6\u6D88\u6536\u85CF"),_sfc_main$F=defineComponent({__name:"FavoriteVideos",props:{owner:{type:Boolean,default:!1},type:{type:String,default:"folder"},id:{type:Number,default:0},isDefault:{type:Boolean,default:!1},isSearchPage:{type:Boolean,default:!1},searchMode:{type:String,default:"currentFolder"}},emits:["update-info"],setup(a,{expose:o,emit:s}){const i=a,{status:l,list:c,reset:r}=useFeedState([]),u=ref(!1),d=ref(),_=ref(null),f=ref(0),m=ref(20),p=computed(()=>i.owner&&i.type==="folder"),{isOnLoadingFolders:v,isFoldersLoadError:g,dftFavVideosPageNum:$}=storeToRefs(useMineStore()),y=ref(""),B={currentFolder:0,allFolder:1},C=ref(1);i.isDefault&&(C.value=$.value),useRefresh("Favorite",()=>E());const S=()=>{f.value=0,C.value=i.isDefault?$.value:1,r(),E()},E=async()=>{var w,D,L;if(l.value==="loading"||!p.value&&l.value==="noMore"||!i.id)return;l.value="loading";let N;try{if(i.type==="folder"){const P={media_id:i.id,pn:C.value};y.value&&(P.keyword=y.value,P.type=B[i.searchMode]),N=await getFavoriteFolderResourceList(P),f.value=((w=N.info)==null?void 0:w.media_count)||0,(D=N.medias)!=null&&D.length?c.value=[...N.medias.map((j,O)=>({id:j.id,info:transformFavFolderVideoToVideoInfo(j,O,`${SPM_PV.mineFavorite}.pv`),type:j.type}))]:c.value=[]}else N=await getFavoriteSeasonVideoList(i.id,C.value),(L=N.medias)!=null&&L.length?c.value=[...c.value,...N.medias.map((P,j)=>({id:P.id,type:P.type,info:transformFavSeasonVideoToVideoInfo(P,j,`${SPM_PV.mineFavorite}.pv`)}))]:c.value=[];N.info&&s("update-info",N.info),c.value.length?N.has_more?l.value="loaded":l.value="noMore":l.value="empty"}catch{l.value="error",c.value=[]}},k=()=>{c.value.length!==0&&l.value!=="noMore"&&(++C.value,E())},b=()=>{setTimeout(()=>{events.emit("requestScrollToTop"),E()},100)},V=N=>{var w;(w=_.value)==null||w.showFavDialog(N)},A=()=>{setTimeout(()=>E(),500)},x=N=>{d.value=N,u.value=!0},T=async()=>{u.value=!1;try{const{id:N,type:w}=d.value;await postFavoriteFolderVideoBatchDel(i.id,`${N}:${w}`),setTimeout(()=>E(),500),toastAsync({content:"\u53D6\u6D88\u6536\u85CF\u6210\u529F\uFF01"})}catch{toastAsync({content:"\u53D6\u6D88\u6536\u85CF\u5931\u8D25"})}},I=async N=>{y.value=N,events.emit("requestScrollToTop"),C.value=1,E()};watch(C,N=>{i.isDefault&&!i.isSearchPage&&($.value=N)});let R;return watch([i,v],N=>{clearTimeout(R),!i.id&&!N&&(R=setTimeout(()=>l.value="error",1e3))}),watch(()=>i.id,N=>{i.isSearchPage||S()},{immediate:!0}),o({doSearch:I}),(N,w)=>{const D=resolveComponent("v-pagenation"),L=resolveComponent("v-button"),P=resolveComponent("v-dialog");return openBlock(),createElementBlock("div",{class:normalizeClass(["favorite_videos i_wrapper p_relative pt_sm",{h_100:!unref(c).length}])},[!unref(c).length&&(unref(l)==="error"&&!unref(v)||unref(g))?(openBlock(),createBlock(DataError,{key:0,class:"mt_sm",showRefresh:!1,text:"\u54CE\u5440\uFF01\u597D\u50CF\u52A0\u8F7D\u5931\u8D25\u4E86>.<"})):createCommentVNode("",!0),a.isSearchPage?(openBlock(),createElementBlock("div",_hoisted_1$S,[createVNode(SearchResultCount,{count:f.value,unit:"\u89C6\u9891"},null,8,["count"])])):createCommentVNode("",!0),!unref(c).length&&(unref(l)!=="error"||unref(v))&&!unref(g)?(openBlock(),createElementBlock(Fragment,{key:2},[unref(l)==="loading"||unref(l)==="initial"||unref(v)?(openBlock(),createElementBlock("div",_hoisted_2$P,[createVNode(_sfc_main$1Q,{itemNum:20,showAvatar:!1,showLoadingAnimation:""})])):unref(l)==="empty"?(openBlock(),createBlock(SearchNoData,{key:1,"is-small":""})):createCommentVNode("",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:3},[createBaseVNode("div",_hoisted_3$N,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(c),j=>(openBlock(),createElementBlock("div",{class:"favorite_videos--card col_3 col_sm_1_5 mb_xxl",key:j.id},[unref(p)?(openBlock(),createBlock(_sfc_main$G,{key:0,info:j.info,"is-dft":a.isDefault,onRemove:O=>x(j),onSelectDir:O=>V(j)},null,8,["info","is-dft","onRemove","onSelectDir"])):(openBlock(),createBlock(unref(BiliVideoCard),{key:1,info:j.info,"is-rcmd":"","img-lazy":"eager","disable-frame":"","disable-scale":"",iid:"pc_app_mine_fav_seasons"},null,8,["info"]))]))),128))]),f.value>m.value?(openBlock(),createElementBlock("div",_hoisted_4$E,[createVNode(D,{theme:"pink",pageNum:C.value,"onUpdate:pageNum":w[0]||(w[0]=j=>C.value=j),"page-size":m.value,total:f.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:b},null,8,["pageNum","page-size","total"])])):unref(p)?createCommentVNode("",!0):(openBlock(),createBlock(_sfc_main$2d,{key:1,onTrigger:k}))],64)),createVNode(_sfc_main$1t,{ref_key:"selectFavFolder",ref:_,onFavSuccess:A},null,512),createVNode(P,{visible:u.value,"onUpdate:visible":w[2]||(w[2]=j=>u.value=j),width:320,"class-name":"i_dialog py_lg",onCancel:w[3]||(w[3]=j=>u.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>{var j,O,F,U;return[createBaseVNode("div",_hoisted_5$w,[_hoisted_6$u,createBaseVNode("p",_hoisted_7$s,[_hoisted_8$r,createBaseVNode("strong",{title:(O=(j=d.value)==null?void 0:j.info)==null?void 0:O.title},toDisplayString((U=(F=d.value)==null?void 0:F.info)==null?void 0:U.title),9,_hoisted_9$o)]),createBaseVNode("div",_hoisted_10$l,[createVNode(L,{class:"mr_sm",onClick:w[1]||(w[1]=W=>u.value=!1)},{default:withCtx(()=>[_hoisted_11$j]),_:1}),createVNode(L,{type:"danger",onClick:T},{default:withCtx(()=>[_hoisted_12$g]),_:1})])])]}),_:1},8,["visible"])],2)}}}),_hoisted_1$R={viewBox:"0 0 1024 1024"},_hoisted_2$O=createBaseVNode("path",{d:"M895.55 1022.801h-767.1c-29.866 5.394-58.532-14.383-63.926-44.248a54.288 54.288 0 0 1 0-19.677V512.8c-3.595-32.362 19.677-61.528 52.04-65.224 3.895-.399 7.89-.499 11.885-.1h63.926V255.7C192.375 89.495 332.01 0 512.999 0s318.626 83.902 318.626 255.7v191.776h63.926c64.524 0 63.925 20.875 63.925 63.925v447.475c6.292 29.066-12.186 57.633-41.152 63.925a54.686 54.686 0 0 1-22.773 0zm-511.4-191.775c0 70.617 57.233 127.85 127.85 127.85s127.85-57.233 127.85-127.85c-5.194-48.943-27.867-94.39-63.925-127.85v-127.85c0-35.259-28.666-63.925-63.925-63.925s-63.925 28.666-63.925 63.925v127.85c-36.058 33.46-58.731 78.907-63.925 127.85zM703.775 255.7c0-97.685-108.672-127.85-191.775-127.85S320.225 161.61 320.225 255.7v191.776h383.55V255.7zM513.298 0z",fill:"currentColor"},null,-1),_hoisted_3$M=[_hoisted_2$O];function render$c(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$R,_hoisted_3$M)}var IcoLock={render:render$c},FavoriteCard_vue_vue_type_style_index_0_lang="";const _hoisted_1$Q={class:"favorite_card--cover"},_hoisted_2$N={class:"favorite_card--stats"},_hoisted_3$L={class:"favorite_card--stats--item left"},_hoisted_4$D={key:0,class:"favorite_card--stats--item"},_hoisted_5$v={class:"favorite_card--info"},_hoisted_6$t={class:"favorite_card--title flex_between"},_hoisted_7$r={class:"favorite_card--title-txt flex_start"},_hoisted_8$q={class:"p_relative w_lg h_lg"},_hoisted_9$n={class:"favorite_card--desc"},_sfc_main$E=defineComponent({__name:"FavoriteCard",props:{data:{type:Object,default:()=>({})},cardType:{type:String,default:"folders"}},emits:["submitAction"],setup(a,{emit:o}){const{data:s,cardType:i}=a,l=useRouter(),c=computed(()=>s.type===21),r=computed(()=>c.value?s.play_switch?s.view_text_1?`${s.view_text_1}\u64AD\u653E`:`${formatNum(s.view_count||0)}\u64AD\u653E`:`${formatNum(s.view_count||0)}\u64AD\u653E`:`\u521B\u5EFA\u4E8E${formatDate("YYYY-MM-DD",s.ctime*1e3)}`),u=computed(()=>c.value?"\u5408\u96C6":""),d=computed(()=>c.value?`${s.media_count||0}\u4E2A\u5185\u5BB9`:`${s.media_count||0}\u4E2A\u5185\u5BB9\xB7${(s.attr>>0&1)===0?"\u516C\u5F00":"\u79C1\u5BC6"}`);function _(){l.push({name:"Favorite",query:{type:c.value?"season":"folder",id:s.id}})}let f=[];switch(i){case"folders":f=[{type:"EDIT",label:"\u7F16\u8F91\u4FE1\u606F"},{type:"DELETE",label:"\u5220\u9664\u6536\u85CF\u5939"}];break;case"seasons":f=[{type:"DELETE",label:"\u53D6\u6D88\u8BA2\u9605"}];break;case"spaceSeasons":f=[];break}function m({type:p}){o("submitAction",{type:p,data:s})}return(p,v)=>(openBlock(),createElementBlock("div",{class:"favorite_card",onClick:_},[createBaseVNode("div",_hoisted_1$Q,[createVNode(_sfc_main$K,{src:a.data.cover,width:227},null,8,["src"]),createBaseVNode("div",_hoisted_2$N,[createBaseVNode("div",_hoisted_3$L,toDisplayString(unref(d)),1),unref(u)?(openBlock(),createElementBlock("div",_hoisted_4$D,toDisplayString(unref(u)),1)):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_5$v,[createBaseVNode("div",_hoisted_6$t,[createBaseVNode("div",_hoisted_7$r,[a.data.isPrivate?(openBlock(),createBlock(unref(IcoLock),{key:0})):createCommentVNode("",!0),createBaseVNode("span",null,toDisplayString(a.data.title),1)]),createBaseVNode("div",_hoisted_8$q,[unref(f).length?(openBlock(),createBlock(_sfc_main$2z,{key:0,class:"favorite_video_card--more",items:unref(f),onSelect:m},{default:withCtx(()=>[createVNode(unref(IcoMore$1),{class:"favorite_video_card--more--btn"})]),_:1},8,["items"])):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_9$n,toDisplayString(unref(r)),1)])]))}});var FolderMediaCardSkeleton_vue_vue_type_style_index_0_lang="";const _sfc_main$D={},_hoisted_1$P={class:"folder_media_card_skeleton"},_hoisted_2$M=createBaseVNode("div",{class:"folder_media_card_skeleton--stand is-last"},null,-1),_hoisted_3$K=createBaseVNode("div",{class:"folder_media_card_skeleton--stand is-middle"},null,-1),_hoisted_4$C=createBaseVNode("div",{class:"folder_media_card_skeleton--img"},null,-1),_hoisted_5$u=[_hoisted_2$M,_hoisted_3$K,_hoisted_4$C];function _sfc_render(a,o){return openBlock(),createElementBlock("div",_hoisted_1$P,_hoisted_5$u)}var FolderMediaCardSkeleton=_export_sfc(_sfc_main$D,[["render",_sfc_render]]),FavoriteCardSkeleton_vue_vue_type_style_index_0_lang="";const _hoisted_1$O={class:"favorite_card_skeleton"},_hoisted_2$L={class:"favorite_card_skeleton--cover"},_hoisted_3$J=createBaseVNode("div",{class:"favorite_card_skeleton--info"},[createBaseVNode("div",{class:"favorite_card_skeleton--title"}),createBaseVNode("div",{class:"favorite_card_skeleton--desc"})],-1),_sfc_main$C=defineComponent({__name:"FavoriteCardSkeleton",setup(a){return(o,s)=>(openBlock(),createElementBlock("div",_hoisted_1$O,[createBaseVNode("div",_hoisted_2$L,[createVNode(FolderMediaCardSkeleton,{class:"mb_xxl",width:227})]),_hoisted_3$J]))}});var FavoriteFolders_vue_vue_type_style_index_0_lang="";const _hoisted_1$N={class:"favorite_folders i_wrapper p_relative pt_sm"},_hoisted_2$K={key:2,class:"favorite_folders--loading row gutter_md"},_hoisted_3$I={class:"row gutter_md"},_hoisted_4$B=createBaseVNode("p",{class:"b_text text2 mt_nsm mb_md text_center text_ellipsis"},"\u62D6\u52A8\u6536\u85CF\u5939\u8FDB\u884C\u6392\u5E8F",-1),_hoisted_5$t={class:"content-wrapper"},_hoisted_6$s={class:"collection_dir--item p_relative"},_hoisted_7$q={class:"collection_dir--item-tt p_center_x b_n2 fs_6 text_ellipsis"},_hoisted_8$p={class:"mt_xl text_center dialog_btns"},_hoisted_9$m=createTextVNode("\u53D6\u6D88"),_hoisted_10$k=createTextVNode("\u786E\u5B9A"),_hoisted_11$i={class:"content-wrapper"},_hoisted_12$f={class:"mt_sm text_left"},_hoisted_13$a={class:"mt_xl text_center dialog_btns"},_hoisted_14$9=createTextVNode("\u53D6\u6D88"),_hoisted_15$7=createTextVNode("\u786E\u5B9A"),_hoisted_16$6={class:"content-wrapper"},_hoisted_17$6={class:"mt_sm text_left"},_hoisted_18$6={class:"mt_xl text_center dialog_btns"},_hoisted_19$5=createTextVNode("\u53D6\u6D88"),_hoisted_20$5=createTextVNode("\u786E\u5B9A"),_hoisted_21$5={class:"content-wrapper"},_hoisted_22$4=createBaseVNode("h4",{class:"b_text text1 text_center mt_md"},"\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684\u6536\u85CF\u5939\u5417\uFF1F",-1),_hoisted_23$4={class:"b_text text2 mt_sm text_center text_ellipsis"},_hoisted_24$4=createTextVNode(" \u6536\u85CF\u5939\uFF1A"),_hoisted_25$4=["title"],_hoisted_26$4={class:"mt_xl text_center dialog_btns"},_hoisted_27$3=createTextVNode("\u624B\u6ED1\u4E86"),_hoisted_28$2=createTextVNode("\u786E\u5B9A\u5220\u9664"),_sfc_main$B=defineComponent({__name:"FavoriteFolders",emits:["update-default-folder-id"],setup(a,{expose:o,emit:s}){const i=ref(!1),l=ref(!1),c=ref(!1),r=ref(!1),u=ref(!1),d=ref(),_=ref(!0),{userInfo:f}=storeToRefs(useUserInfoStore()),{isFavFolderChanged:m,isOnLoadingFolders:p,isFoldersLoadError:v}=storeToRefs(useMineStore()),{status:g,list:$,reset:y}=useFeedState([]),B=ref([]),C=ref(""),S=ref({title:"",public:!0,media_id:0}),E=ref({title:"",public:!0});let k=1;function b(){k=1,$.value=[],y(),V()}async function V(){var O;if(!(g.value==="loading"||g.value==="noMore")){g.value="loading",p.value=!0,v.value=!1;try{const F=await getFavoriteFolders(f.value.mid,k);if((O=F.list)!=null&&O.length){if(k===1){F.list.forEach(M=>M.isPrivate=x(M.attr,0));const{id:W,media_count:ne,title:H}=F.list[0];C.value=W,s("update-default-folder-id",{id:W,count:ne,title:H}),F.list.shift()}const U=F.list.filter(W=>[C.value,...$.value].every(ne=>ne.id!==W.id));$.value.push(...U)}$.value.length?F.has_more?g.value="loaded":g.value="noMore":g.value="empty",m.value=!1,p.value=!1}catch{g.value="error",p.value=!1,v.value=!0}}}const A=({type:O,data:F})=>{d.value=F,S.value={title:F.title,public:!F.isPrivate,media_id:F.id},O==="EDIT"?l.value=!0:O==="DELETE"&&(r.value=!0)};function x(O,F){const U=+O.toString(2);return parseInt(("000000"+U).substr(-7).split("").reverse().join("").charAt(F))}const T=()=>{l.value=!1,postEditCollectionDir({...S.value,privacy:+!S.value.public}).then(()=>{setTimeout(()=>b(),500),toastAsync({content:"\u7F16\u8F91\u6536\u85CF\u5939\u6210\u529F\uFF01"})}).catch(O=>{console.error(O),toastAsync({content:"\u7F16\u8F91\u6536\u85CF\u5939\u5931\u8D25\uFF01"})})},I=O=>{O.item.classList.add("invisible")},R=O=>{O.item.classList.remove("invisible");const F=$.value.map(W=>W.id).join(","),U=B.value.map(W=>W.id).join(",");_.value=U===F,u.value=!1},N=()=>{r.value=!1,postDelCollectionDir({media_ids:d.value.id}).then(()=>{setTimeout(()=>b(),500),toastAsync({content:"\u5220\u9664\u6536\u85CF\u5939\u6210\u529F\uFF01"})}).catch(O=>{console.error(O),toastAsync({content:"\u5220\u9664\u6536\u85CF\u5939\u5931\u8D25\uFF01"})})},w=()=>{i.value=!0,E.value={title:"",public:!0}},D=()=>{i.value=!1,postCreateCollectionDir({...E.value,privacy:+!E.value.public}).then(()=>{setTimeout(()=>b(),500),toastAsync({content:"\u65B0\u5EFA\u6536\u85CF\u5939\u6210\u529F\uFF01"})}).catch(O=>{console.error(O),toastAsync({content:"\u65B0\u5EFA\u6536\u85CF\u5939\u5931\u8D25\uFF01"})})},L=()=>{B.value=[...$.value],_.value=!0,c.value=!0},P=()=>{c.value=!1,postSortCollectionDir({sort:`${C.value},${B.value.map(O=>O.id).join(",")}`}).then(()=>{setTimeout(()=>b(),500),toastAsync({content:"\u6536\u85CF\u5939\u6392\u5E8F\u6210\u529F\uFF01"})}).catch(O=>{console.error(O),toastAsync({content:"\u6536\u85CF\u5939\u6392\u5E8F\u5931\u8D25\uFF01"})})};o({list:$,reload:()=>{m.value&&b()},handleCreateFolder:w,handleSortFavFolder:L}),watch(()=>S.value.title,O=>{O.length>20&&nextTick(()=>S.value.title=O.substr(0,20))}),watch(()=>E.value.title,O=>{O.length>20&&nextTick(()=>E.value.title=O.substr(0,20))}),watch(f,O=>{!(O!=null&&O.mid)||$.value.length||V()},{immediate:!0});function j(){g.value==="error"||g.value==="empty"||g.value==="noMore"||(++k,V())}return(O,F)=>{const U=resolveComponent("v-button"),W=resolveComponent("v-dialog"),ne=resolveComponent("v-input"),H=resolveComponent("v-checkbox");return openBlock(),createElementBlock("div",_hoisted_1$N,[unref($).length?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_3$I,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref($),M=>(openBlock(),createElementBlock("div",{class:"favorite_folders--card col_3 col_sm_1_5 mb_xxl",key:M.aid},[createVNode(_sfc_main$E,{data:M,cardType:"folders",onSubmitAction:A},null,8,["data"])]))),128))]),createVNode(_sfc_main$2d,{onTrigger:j})],64)):(openBlock(),createElementBlock(Fragment,{key:0},[unref(g)==="error"?(openBlock(),createBlock(DataError,{key:0,showRefresh:!1,text:"\u54CE\u5440\uFF01\u597D\u50CF\u52A0\u8F7D\u5931\u8D25\u4E86>.<"})):unref(g)==="empty"?(openBlock(),createBlock(SearchNoData,{key:1,"is-small":""})):unref(g)==="loading"?(openBlock(),createElementBlock("div",_hoisted_2$K,[(openBlock(),createElementBlock(Fragment,null,renderList(20,M=>createBaseVNode("div",{class:"favorite_folders--card col_3 col_sm_1_5 mb_xxl",key:M},[createVNode(_sfc_main$C,{data:M},null,8,["data"])])),64))])):createCommentVNode("",!0)],64)),createVNode(W,{visible:c.value,"onUpdate:visible":F[3]||(F[3]=M=>c.value=M),width:580,"class-name":"i_dialog py_lg",title:"\u6536\u85CF\u5939\u6392\u5E8F",center:!0,"is-show-default-footer":!1,onCancel:F[4]||(F[4]=M=>c.value=!1)},{default:withCtx(()=>[_hoisted_4$B,createBaseVNode("div",_hoisted_5$t,[createBaseVNode("div",{class:normalizeClass(["sort_collection_dir",{sorting:u.value}])},[createVNode(unref(Draggable),{list:B.value,class:"collection_dir",draggable:".collection_dir--item",animation:"500","item-key":"id",onMousedown:F[0]||(F[0]=M=>u.value=!0),onMouseup:F[1]||(F[1]=M=>u.value=!1),onStart:I,onEnd:R},{item:withCtx(({element:M})=>[createBaseVNode("div",_hoisted_6$s,[createVNode(_sfc_main$K,{src:M.cover,width:227},null,8,["src"]),createBaseVNode("h6",_hoisted_7$q,toDisplayString(M.title),1)])]),_:1},8,["list"])],2),createBaseVNode("div",_hoisted_8$p,[createVNode(U,{class:"mr_sm",onClick:F[2]||(F[2]=M=>c.value=!1)},{default:withCtx(()=>[_hoisted_9$m]),_:1}),createVNode(U,{type:"pink",onClick:P,disabled:_.value},{default:withCtx(()=>[_hoisted_10$k]),_:1},8,["disabled"])])])]),_:1},8,["visible"]),createVNode(W,{visible:i.value,"onUpdate:visible":F[8]||(F[8]=M=>i.value=M),width:380,"class-name":"i_dialog py_lg",title:"\u65B0\u5EFA\u6536\u85CF\u5939",center:!0,"is-show-default-footer":!1,onCancel:F[9]||(F[9]=M=>i.value=!1)},{default:withCtx(()=>[createBaseVNode("div",_hoisted_11$i,[createBaseVNode("div",null,[createVNode(ne,{placeholder:"\u6536\u85CF\u5939\u540D\u79F0\uFF08\u4E0D\u8D85\u8FC720\u4E2A\u5B57\uFF09",modelValue:E.value.title,"onUpdate:modelValue":F[5]||(F[5]=M=>E.value.title=M)},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_12$f,[createVNode(H,{label:"\u516C\u5F00\u6536\u85CF\u5939",theme:"pink",modelValue:E.value.public,"onUpdate:modelValue":F[6]||(F[6]=M=>E.value.public=M)},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_13$a,[createVNode(U,{class:"mr_sm",onClick:F[7]||(F[7]=M=>i.value=!1)},{default:withCtx(()=>[_hoisted_14$9]),_:1}),createVNode(U,{type:"pink",onClick:D},{default:withCtx(()=>[_hoisted_15$7]),_:1})])])]),_:1},8,["visible"]),createVNode(W,{visible:l.value,"onUpdate:visible":F[13]||(F[13]=M=>l.value=M),width:380,"class-name":"i_dialog py_lg",title:"\u7F16\u8F91\u4FE1\u606F",center:!0,"is-show-default-footer":!1,onCancel:F[14]||(F[14]=M=>l.value=!1)},{default:withCtx(()=>[createBaseVNode("div",_hoisted_16$6,[createBaseVNode("div",null,[createVNode(ne,{placeholder:"\u6536\u85CF\u5939\u540D\u79F0\uFF08\u4E0D\u8D85\u8FC720\u4E2A\u5B57\uFF09",modelValue:S.value.title,"onUpdate:modelValue":F[10]||(F[10]=M=>S.value.title=M)},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_17$6,[createVNode(H,{label:"\u516C\u5F00\u6536\u85CF\u5939",theme:"pink",modelValue:S.value.public,"onUpdate:modelValue":F[11]||(F[11]=M=>S.value.public=M)},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_18$6,[createVNode(U,{class:"mr_sm",onClick:F[12]||(F[12]=M=>l.value=!1)},{default:withCtx(()=>[_hoisted_19$5]),_:1}),createVNode(U,{type:"pink",onClick:T},{default:withCtx(()=>[_hoisted_20$5]),_:1})])])]),_:1},8,["visible"]),createVNode(W,{visible:r.value,"onUpdate:visible":F[16]||(F[16]=M=>r.value=M),width:320,"class-name":"i_dialog py_lg",onCancel:F[17]||(F[17]=M=>r.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>{var M,ee;return[createBaseVNode("div",_hoisted_21$5,[_hoisted_22$4,createBaseVNode("p",_hoisted_23$4,[_hoisted_24$4,createBaseVNode("strong",{title:(M=d.value)==null?void 0:M.title},toDisplayString((ee=d.value)==null?void 0:ee.title),9,_hoisted_25$4)]),createBaseVNode("div",_hoisted_26$4,[createVNode(U,{class:"mr_sm",onClick:F[15]||(F[15]=G=>r.value=!1)},{default:withCtx(()=>[_hoisted_27$3]),_:1}),createVNode(U,{type:"pink",onClick:N},{default:withCtx(()=>[_hoisted_28$2]),_:1})])])]}),_:1},8,["visible"])])}}}),_hoisted_1$M={class:"favorite_seasons i_wrapper p_relative pt_sm"},_hoisted_2$J={key:0,class:"favorite_seasons--loading row gutter_md"},_hoisted_3$H={class:"row gutter_md"},_hoisted_4$A={class:"content-wrapper"},_hoisted_5$s=createBaseVNode("h4",{class:"b_text text1 text_center mt_md"},"\u786E\u5B9A\u9700\u8981\u53D6\u6D88\u8BE5\u6536\u85CF\u6216\u5408\u96C6\u5417\uFF1F",-1),_hoisted_6$r={class:"b_text text2 mt_sm text_center text_ellipsis"},_hoisted_7$p=createTextVNode(" \u540D\u79F0\uFF1A"),_hoisted_8$o=["title"],_hoisted_9$l={class:"mt_xl text_center dialog_btns"},_hoisted_10$j=createTextVNode("\u624B\u6ED1\u4E86"),_hoisted_11$h=createTextVNode("\u53D6\u6D88\u8BA2\u9605"),_sfc_main$A=defineComponent({__name:"FavoriteSeasons",setup(a){const o=ref(!1),s=ref(),{userInfo:i}=storeToRefs(useUserInfoStore()),{status:l,list:c,reset:r}=useFeedState([]);let u=1;function d(){u=1,c.value=[],r(),_()}async function _(){var v;if(!(l.value==="loading"||l.value==="noMore")){l.value="loading";try{const g=await getFavoriteCollections(i.value.mid,u);(v=g.list)!=null&&v.length&&c.value.push(...g.list),c.value.length?g.has_more?l.value="loaded":l.value="noMore":l.value="empty"}catch{l.value="error"}}}const f=({type:v,data:g})=>{s.value=g,v==="DELETE"&&(o.value=!0)},m=()=>{o.value=!1;const{type:v,id:g}=s.value;v===11?postUnfavFolder({media_id:g}).then(()=>{setTimeout(()=>d(),500),toastAsync({content:"\u53D6\u6D88\u8BA2\u9605\u6210\u529F\uFF01"})}).catch(()=>{toastAsync({content:"\u53D6\u6D88\u8BA2\u9605\u5931\u8D25\uFF01"})}):postUnfavSeason({season_id:g}).then(()=>{setTimeout(()=>d(),500),toastAsync({content:"\u53D6\u6D88\u8BA2\u9605\u6210\u529F\uFF01"})}).catch(()=>{toastAsync({content:"\u53D6\u6D88\u8BA2\u9605\u5931\u8D25\uFF01"})})};watch(i,v=>{!(v!=null&&v.mid)||c.value.length||_()},{immediate:!0});function p(){l.value==="error"||l.value==="empty"||l.value==="noMore"||(++u,_())}return(v,g)=>{const $=resolveComponent("v-button"),y=resolveComponent("v-dialog");return openBlock(),createElementBlock("div",_hoisted_1$M,[!unref(c).length&&unref(l)==="error"?(openBlock(),createBlock(DataError,{key:0,showRefresh:!1,text:"\u54CE\u5440\uFF01\u597D\u50CF\u52A0\u8F7D\u5931\u8D25\u4E86>.<"})):createCommentVNode("",!0),!unref(c).length&&unref(l)!=="error"?(openBlock(),createElementBlock(Fragment,{key:1},[unref(l)==="loading"?(openBlock(),createElementBlock("div",_hoisted_2$J,[(openBlock(),createElementBlock(Fragment,null,renderList(20,B=>createBaseVNode("div",{class:"favorite_seasons--card col_3 col_sm_1_5 mb_xxl",key:B},[createVNode(_sfc_main$C,{data:B},null,8,["data"])])),64))])):unref(l)==="empty"?(openBlock(),createBlock(SearchNoData,{key:1,"is-small":""})):createCommentVNode("",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("div",_hoisted_3$H,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(c),B=>(openBlock(),createElementBlock("div",{class:"favorite_seasons--card col_3 col_sm_1_5 mb_xxl",key:B.aid},[createVNode(_sfc_main$E,{data:B,cardType:"seasons",onSubmitAction:f},null,8,["data"])]))),128))]),createVNode(_sfc_main$2d,{onTrigger:p})],64)),createVNode(y,{visible:o.value,"onUpdate:visible":g[1]||(g[1]=B=>o.value=B),width:320,"class-name":"i_dialog py_lg",onCancel:g[2]||(g[2]=B=>o.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>{var B,C;return[createBaseVNode("div",_hoisted_4$A,[_hoisted_5$s,createBaseVNode("p",_hoisted_6$r,[_hoisted_7$p,createBaseVNode("strong",{title:(B=s.value)==null?void 0:B.title},toDisplayString((C=s.value)==null?void 0:C.title),9,_hoisted_8$o)]),createBaseVNode("div",_hoisted_9$l,[createVNode($,{class:"mr_sm",onClick:g[0]||(g[0]=S=>o.value=!1)},{default:withCtx(()=>[_hoisted_10$j]),_:1}),createVNode($,{type:"danger",onClick:m},{default:withCtx(()=>[_hoisted_11$h]),_:1})])])]}),_:1},8,["visible"])])}}}),_hoisted_1$L={key:0,class:"favorite_ogv_list--loading i_wrapper mt_sm"},_hoisted_2$I={key:2,class:"favorite_ogv_list pt_sm i_wrapper p_relative"},_hoisted_3$G={class:"row gutter_md"},_hoisted_4$z=createBaseVNode("div",{class:"favorite_ogv_list--card--more"},null,-1),_hoisted_5$r={class:"content-wrapper"},_hoisted_6$q={class:"b_text text1 text_center mt_md"},_hoisted_7$o={class:"b_text text2 mt_sm text_center text_ellipsis"},_hoisted_8$n=["title"],_hoisted_9$k={class:"mt_xl text_center dialog_btns"},_hoisted_10$i=createTextVNode("\u624B\u6ED1\u4E86"),_sfc_main$z=defineComponent({__name:"FavoriteOgvList",props:{type:{type:Number,default:1},followStatus:{type:Number,default:0}},setup(a,{expose:o}){const s=a,{userInfo:i}=storeToRefs(useUserInfoStore()),{status:l,list:c,reset:r}=useFeedState([]),u=ref([]),d=ref(!1),_=ref();let f=1;function m(){f=1,c.value=[],u.value=[],r()}async function p(){var S;if(!(l.value==="loading"||l.value==="noMore"||!s.type)){l.value="loading";try{const E=await getFavoriteOgvList(i.value.mid,s.type,s.followStatus,f),k=E.total>E.ps*E.pn;(S=E.list)!=null&&S.length&&(u.value.push(...E.list),c.value.push(...E.list.map(transformBangumiItemToBangumiInfo))),c.value.length?k?l.value="loaded":l.value="noMore":l.value="empty"}catch{l.value="error"}}}function v(){l.value==="error"||l.value==="empty"||l.value==="noMore"||(++f,p())}function g(){m(),p()}function $(S){openPlayerWindow({type:"ogv",seasonId:S.sid,fromSpmid:`${SPM_PV.mineFavorite}.pv`})}o({refresh:g});const y=[{type:"REMOVE",label:s.type===1?"\u53D6\u6D88\u8FFD\u756A":"\u53D6\u6D88\u8FFD\u5267"}],B=(S,E)=>{S.type==="REMOVE"&&(d.value=!0,_.value=E)},C=()=>{d.value=!1;const S=u.value.find(b=>b.season_id===_.value.sid),{season_id:E,season_type:k}=S;postUnfollowerPgc({season_id:E,season_type:k}).then(()=>{setTimeout(()=>g(),500),toastAsync({content:s.type===1?"\u53D6\u6D88\u8FFD\u756A\u6210\u529F\uFF01":"\u53D6\u6D88\u8FFD\u5267\u6210\u529F\uFF01"})}).catch(b=>{console.error(b),toastAsync({content:s.type===1?"\u53D6\u6D88\u8FFD\u756A\u5931\u8D25\uFF01":"\u53D6\u6D88\u8FFD\u5267\u5931\u8D25\uFF01"})})};return(S,E)=>{const k=resolveComponent("v-button"),b=resolveComponent("v-dialog");return openBlock(),createElementBlock("div",null,[!unref(c).length&&unref(l)==="error"?(openBlock(),createBlock(DataError,{key:0,class:"mt_sm",showRefresh:!1,text:"\u54CE\u5440\uFF01\u597D\u50CF\u52A0\u8F7D\u5931\u8D25\u4E86>.<"})):createCommentVNode("",!0),!unref(c).length&&unref(l)!=="error"?(openBlock(),createElementBlock(Fragment,{key:1},[unref(l)==="loading"?(openBlock(),createElementBlock("div",_hoisted_1$L,[createVNode(_sfc_main$1i)])):unref(l)==="empty"?(openBlock(),createBlock(SearchNoData,{key:1,class:"mt_sm","is-small":""})):createCommentVNode("",!0)],64)):(openBlock(),createElementBlock("div",_hoisted_2$I,[createBaseVNode("div",_hoisted_3$G,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(c),V=>(openBlock(),createElementBlock("div",{class:"favorite_ogv_list--card col_2 col_sm_1_7 mb_xxl",key:V.bvid},[createVNode(unref(BiliBangumiCard),{onClickBangumi:$,info:V,mode:"vertical","img-lazy":"eager","disable-frame":"","disable-scale":"","disable-inline-player":"","disable-hover":""},{more:withCtx(()=>[createBaseVNode("div",null,[createVNode(_sfc_main$2z,{class:"favorite_video_card--more",items:y,onSelect:A=>B(A,V)},{default:withCtx(()=>[createVNode(unref(IcoMore$1),{class:"favorite_video_card--more--btn"})]),_:2},1032,["onSelect"])])]),_:2},1032,["info"]),_hoisted_4$z]))),128))]),unref(c).length?(openBlock(),createBlock(_sfc_main$2d,{key:0,onTrigger:v})):createCommentVNode("",!0),createVNode(b,{visible:d.value,"onUpdate:visible":E[1]||(E[1]=V=>d.value=V),width:320,"class-name":"i_dialog py_lg",onCancel:E[2]||(E[2]=V=>d.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>{var V,A;return[createBaseVNode("div",_hoisted_5$r,[createBaseVNode("h4",_hoisted_6$q,"\u786E\u5B9A\u9700\u8981\u53D6\u6D88\u8BE5\u8FFD"+toDisplayString(a.type===1?"\u756A":"\u5267")+"\u5417\uFF1F",1),createBaseVNode("p",_hoisted_7$o,[createTextVNode(toDisplayString(a.type===1?"\u756A\u540D":"\u5267\u540D")+"\uFF1A",1),createBaseVNode("strong",{title:(V=_.value)==null?void 0:V.title},toDisplayString((A=_.value)==null?void 0:A.title),9,_hoisted_8$n)]),createBaseVNode("div",_hoisted_9$k,[createVNode(k,{class:"mr_sm",onClick:E[0]||(E[0]=x=>d.value=!1)},{default:withCtx(()=>[_hoisted_10$i]),_:1}),createVNode(k,{type:"danger",onClick:C},{default:withCtx(()=>[createTextVNode("\u53D6\u6D88\u8FFD"+toDisplayString(a.type===1?"\u756A":"\u5267"),1)]),_:1})])])]}),_:1},8,["visible"])]))])}}});var MineFavorite_vue_vue_type_style_index_0_lang="";const _hoisted_1$K={key:0,class:"mine_favorite--unlogin flex_col_center w_100 h_100"},_hoisted_2$H={key:1,class:"mine_favorite"},_hoisted_3$F={class:"mine_favorite--header flex_between i_wrapper"},_hoisted_4$y={class:"mine_favorite--header--right"},_hoisted_5$q=createBaseVNode("span",null,"\u64AD\u653E\u5168\u90E8",-1),_hoisted_6$p={class:"mine_favorite--header--right flex_start"},_hoisted_7$n=createBaseVNode("span",{class:"fs_2 mr_xs"},"+",-1),_hoisted_8$m=createTextVNode(" \u65B0\u5EFA\u6536\u85CF\u5939 "),_hoisted_9$j=createBaseVNode("span",null,"\u6536\u85CF\u5939\u6392\u5E8F",-1),_hoisted_10$h={class:"mine_favorite--header--right"},_hoisted_11$g={class:normalizeClass({"favorite_dropdown_select--content":!0})},_hoisted_12$e=["onClick","textContent"],_hoisted_13$9={key:1,class:"favorite_search_panel"},_sfc_main$y=defineComponent({__name:"MineFavorite",setup(a,{expose:o}){var E;const s=ref(null),i=ref(null),l=ref(null),c=ref(null),r=ref(!1),u=reactive({visible:!1,options:[],index:0}),d=reactive({video:{defaultFolderId:0,defaultFolderLength:0,defaultFolderName:"\u9ED8\u8BA4\u6536\u85CF\u5939"},followSeries:{followStatus:0},bingeWatching:{followStatus:0}}),_=useRoute(),f=useRouter(),{userInfo:m}=storeToRefs(useUserInfoStore());useReportPv({spm_id:SPM_PV.mineFavorite,isKeepAlive:!1,pageName:"MineFavorite"});const{mineFavoriteTab:p}=storeToRefs(useMineStore()),v=(E=_.query)==null?void 0:E.tab;if(v){const k=MINE_FAVORITE_FILTER_TYPE_LIST.find(b=>b.key===v);k&&(p.value=k.key,f.replace({path:_.path,query:omit$1(_.query,["tab"])}))}watch(p,async()=>{["FOLLOW_SERIES","BINGE_WATCHING"].includes(p.value)?u.options=MINE_FAVORITE_OGV_OPTIONS:u.options=[],g(0)},{immediate:!0});async function g(k){u.index=k,p.value==="CUSTOM_FOLDERS"?(await nextTick(),s.value.reload()):p.value==="FOLLOW_SERIES"?(d.followSeries.followStatus=u.options[k].value,await nextTick(),i.value.refresh()):p.value==="BINGE_WATCHING"&&(d.bingeWatching.followStatus=u.options[k].value,await nextTick(),l.value.refresh())}function $({id:k,count:b,title:V}){d.video.defaultFolderId=k,d.video.defaultFolderLength=b,d.video.defaultFolderName=V}const y=()=>{const k=d.video.defaultFolderId;!k||!d.video.defaultFolderLength||openPlayerWindow({type:"ugc",fromSpmid:"main.mine-collection.0.0.pv",mediaList:{bizType:3,bizId:k.toString(),bizTitle:d.video.defaultFolderName}})},B=()=>{var k;(k=s.value)==null||k.handleCreateFolder()},C=()=>{var k;(k=s.value)==null||k.handleSortFavFolder()};return o({doSearch:async k=>{var b;r.value=!!k,await nextTick(),k&&((b=c.value)==null||b.doSearch(k))}}),(k,b)=>{const V=resolveComponent("v-button"),A=resolveComponent("WidgetArrow"),x=resolveComponent("VDropdown");return!unref(m)||!unref(m).isLogin?(openBlock(),createElementBlock("div",_hoisted_1$K,[createVNode(_sfc_main$12,{showAvatar:""})])):(openBlock(),createElementBlock("div",_hoisted_2$H,[r.value?(openBlock(),createElementBlock("div",_hoisted_13$9,[createVNode(_sfc_main$F,{ref_key:"favoriteVideoRef",ref:c,isSearchPage:!0,id:d.video.defaultFolderId,owner:"",searchMode:unref(p)==="DEFAULT_FOLDER"?"currentFolder":"allFolder"},null,8,["id","searchMode"])])):(openBlock(),createBlock(_sfc_main$I,{key:0,tabs:unref(MINE_FAVORITE_FILTER_TYPE_LIST),"active-key":unref(p)},{nav:withCtx(()=>{var T,I;return[createBaseVNode("div",_hoisted_3$F,[createVNode(_sfc_main$H,{class:"mine_favorite--header--left",list:unref(MINE_FAVORITE_FILTER_TYPE_LIST),"active-key":unref(p),"onUpdate:active-key":b[0]||(b[0]=R=>isRef(p)?p.value=R:null)},null,8,["list","active-key"]),withDirectives(createBaseVNode("div",_hoisted_4$y,[createVNode(V,{disabled:!d.video.defaultFolderLength,class:"right-btn",type:"pink",onClick:y},{default:withCtx(()=>[createVNode(unref(PlayAllIco)),_hoisted_5$q]),_:1},8,["disabled"])],512),[[vShow,unref(p)==="DEFAULT_FOLDER"]]),withDirectives(createBaseVNode("div",_hoisted_6$p,[createVNode(V,{class:"right-btn mr_sm text2",onClick:B},{default:withCtx(()=>[_hoisted_7$n,_hoisted_8$m]),_:1}),createVNode(V,{disabled:!((I=(T=s.value)==null?void 0:T.list)!=null&&I.length),class:"right-btn text2",onClick:C},{default:withCtx(()=>[createVNode(unref(Sort)),_hoisted_9$j]),_:1},8,["disabled"])],512),[[vShow,unref(p)==="CUSTOM_FOLDERS"]]),withDirectives(createBaseVNode("div",_hoisted_10$h,[createVNode(x,{classname:"favorite_dropdown_select",trigger:"hover",placement:"bottom-end",onShow:b[1]||(b[1]=R=>u.visible=!0),onHide:b[2]||(b[2]=R=>u.visible=!1)},{content:withCtx(()=>[createBaseVNode("div",_hoisted_11$g,[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.options,(R,N)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["favorite_dropdown_select--content--item cs_pointer",{"is-active":N===u.index}]),key:N,onClick:w=>g(N),textContent:toDisplayString(R.label)},null,10,_hoisted_12$e))),128))])]),default:withCtx(()=>[createVNode(V,{class:"favorite_dropdown_select--button p_relative fs_14 text_ellipsis"},{default:withCtx(()=>{var R;return[createTextVNode(toDisplayString((R=u.options[u.index])==null?void 0:R.label)+" ",1),createVNode(A,{class:normalizeClass(["favorite_dropdown_select--button--icon rotate_90 p_absolute",{rotate_deg:u.visible}])},null,8,["class"])]}),_:1})]),_:1})],512),[[vShow,u.options.length]])])]}),DEFAULT_FOLDER:withCtx(()=>[createVNode(_sfc_main$F,{id:d.video.defaultFolderId,owner:"",isDefault:!0},null,8,["id"])]),CUSTOM_FOLDERS:withCtx(()=>[createVNode(_sfc_main$B,{onUpdateDefaultFolderId:$,ref_key:"favoriteFolders",ref:s},null,512)]),COLLECTION:withCtx(()=>[createVNode(_sfc_main$A)]),FOLLOW_SERIES:withCtx(()=>[createVNode(_sfc_main$z,{type:1,"follow-status":d.followSeries.followStatus,ref_key:"followSeriesRef",ref:i},null,8,["follow-status"])]),BINGE_WATCHING:withCtx(()=>[createVNode(_sfc_main$z,{type:2,"follow-status":d.bingeWatching.followStatus,ref_key:"bingeWatchingRef",ref:l},null,8,["follow-status"])]),_:1},8,["tabs","active-key"]))]))}}}),_hoisted_1$J={class:"icon",viewBox:"0 0 16 16",fill:"#fff"},_hoisted_2$G=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.742 3.924A52.952 52.952 0 0 1 8 3.75c1.714 0 3.208.088 4.258.174A1.45 1.45 0 0 1 13.6 5.245c.078.862.151 2.004.151 3.255s-.073 2.393-.15 3.255a1.45 1.45 0 0 1-1.342 1.321c-1.05.086-2.544.174-4.258.174s-3.208-.088-4.258-.174A1.45 1.45 0 0 1 2.4 11.754 36.666 36.666 0 0 1 2.25 8.5c0-1.25.073-2.393.15-3.254a1.45 1.45 0 0 1 1.342-1.322ZM8 2.75c-1.747 0-3.27.09-4.34.177a2.45 2.45 0 0 0-2.255 2.229c-.08.883-.155 2.056-.155 3.344 0 1.288.075 2.461.155 3.344a2.45 2.45 0 0 0 2.255 2.229A53.91 53.91 0 0 0 8 14.25c1.747 0 3.27-.09 4.34-.177a2.45 2.45 0 0 0 2.255-2.229c.08-.882.155-2.056.155-3.344 0-1.288-.075-2.462-.155-3.345a2.45 2.45 0 0 0-2.255-2.228A53.953 53.953 0 0 0 8 2.75Zm1.75 6.328a.667.667 0 0 0 0-1.155l-2.5-1.444a.667.667 0 0 0-1 .577v2.888c0 .513.555.834 1 .578l2.5-1.444Z"},null,-1),_hoisted_3$E=[_hoisted_2$G];function render$b(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$J,_hoisted_3$E)}var IcoPlayNum={render:render$b};const _hoisted_1$I={class:"icon",viewBox:"0 0 16 16",fill:"#fff"},_hoisted_2$F=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 3.75c-1.714 0-3.208.088-4.258.174A1.45 1.45 0 0 0 2.4 5.246C2.323 6.107 2.25 7.25 2.25 8.5s.073 2.393.15 3.254a1.45 1.45 0 0 0 1.342 1.322c1.05.086 2.544.174 4.258.174s3.208-.088 4.258-.174a1.45 1.45 0 0 0 1.341-1.321c.078-.862.151-2.004.151-3.255s-.073-2.393-.15-3.255a1.45 1.45 0 0 0-1.342-1.321A52.956 52.956 0 0 0 8 3.75Zm-4.34-.823A53.955 53.955 0 0 1 8 2.75c1.747 0 3.27.09 4.34.177a2.45 2.45 0 0 1 2.255 2.228c.08.883.155 2.057.155 3.345 0 1.288-.075 2.462-.155 3.345a2.45 2.45 0 0 1-2.255 2.228c-1.07.087-2.593.177-4.34.177-1.747 0-3.27-.09-4.34-.177a2.45 2.45 0 0 1-2.255-2.229A37.662 37.662 0 0 1 1.25 8.5c0-1.288.075-2.461.155-3.344A2.45 2.45 0 0 1 3.66 2.927ZM4 7.25a.5.5 0 0 1 .5-.5h.25a.5.5 0 0 1 0 1H4.5a.5.5 0 0 1-.5-.5Zm2 0a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5Zm-.5 2a.5.5 0 0 0 0 1h.25a.5.5 0 0 0 0-1H5.5Zm2 0a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4Z"},null,-1),_hoisted_3$D=[_hoisted_2$F];function render$a(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$I,_hoisted_3$D)}var IcoDmNum={render:render$a},MineWatchLater_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$7=a=>(pushScopeId("data-v-76c51b58"),a=a(),popScopeId(),a),_hoisted_1$H={key:0,class:"flex_col_center w_100 h_100"},_hoisted_2$E={key:1,class:"container p_relative i_wrapper"},_hoisted_3$C={key:3,class:"list-cont p_relative row gutter_md"},_hoisted_4$x=["onClick"],_hoisted_5$p={key:0,class:"badge"},_hoisted_6$o={class:"tapper"},_hoisted_7$m=["textContent"],_hoisted_8$l=["textContent"],_hoisted_9$i=["textContent"],_hoisted_10$g=_withScopeId$7(()=>createBaseVNode("span",{class:"ct"},null,-1)),_hoisted_11$f=["textContent"],_hoisted_12$d={class:"info"},_hoisted_13$8={class:"info-content"},_hoisted_14$8=["title","textContent","onClick"],_hoisted_15$6=["onClick"],_hoisted_16$5=["textContent"],_hoisted_17$5={class:"info-option"},_hoisted_18$5={class:"drop-down-list"},_hoisted_19$4=["onClick"],_hoisted_20$4={class:"content-wrapper"},_hoisted_21$4=_withScopeId$7(()=>createBaseVNode("h4",{class:"b_text text1 text_center mt_md"},"\u786E\u8BA4\u5220\u9664\u5DF2\u89C2\u770B\u89C6\u9891\u5417\uFF1F",-1)),_hoisted_22$3={class:"mt_xl text_center dialog_btns"},_hoisted_23$3=createTextVNode("\u53D6\u6D88"),_hoisted_24$3=createTextVNode("\u5220\u9664"),_hoisted_25$3={class:"content-wrapper"},_hoisted_26$3=_withScopeId$7(()=>createBaseVNode("h4",{class:"b_text text1 text_center mt_md"},"\u786E\u8BA4\u6E05\u7A7A\u5168\u90E8\u7A0D\u540E\u518D\u770B\u89C6\u9891\u5417\uFF1F",-1)),_hoisted_27$2={class:"mt_xl text_center dialog_btns"},_hoisted_28$1=createTextVNode("\u53D6\u6D88"),_hoisted_29$1=createTextVNode("\u786E\u8BA4"),_sfc_main$x=defineComponent({__name:"MineWatchLater",setup(a){useReportPv({spm_id:SPM_PV.mineWatchLater,isKeepAlive:!1,pageName:"MineWatchLater"});const o=DPR(),s=useRouter(),i=ref([]),l=20,c=ref(1),r=ref(0),u=ref(!1),d=ref(!1),{userInfo:_}=storeToRefs(useUserInfoStore()),{isWatchLaterEmpty:f}=storeToRefs(useMineStore());watch(i,A=>f.value=!A.length,{immediate:!0});const m=async()=>{if(!(!_.value.isLogin||u.value)){u.value=!0,d.value=!1;try{const A=await getWatchLater({ps:l,pn:c.value});u.value=!1,r.value=(A==null?void 0:A.count)||0,i.value=i.value.concat((A==null?void 0:A.list)||[])}catch{u.value=!1,d.value=!0}}};m().then(()=>{$.value&&v()});const p=()=>{i.value=[],r.value=NaN,c.value=1,m().then(()=>{$.value&&v()})},v=()=>{!r.value||r.value/l<=c.value||(c.value++,m())},g=ref(null),$=useElementVisible(g);watch($,A=>{A&&v()});const y=ref(!1),B=async()=>{try{await deleteWatched(),toastAsync({content:"\u5220\u9664\u6210\u529F"}),setTimeout(()=>mineEvents.emit("handleRefresh"),500)}catch(A){toastAsync({content:A.message||"\u7F51\u7EDC\u9519\u8BEF"})}y.value=!1},C=ref(!1),S=async()=>{try{await clearWatchLater(),events.emit("clearWatchLaterCount"),toastAsync({content:"\u5220\u9664\u6210\u529F"}),setTimeout(()=>mineEvents.emit("handleRefresh"),500)}catch(A){toastAsync({content:A.message||"\u7F51\u7EDC\u9519\u8BEF"})}C.value=!1},E=async A=>{try{await deleteWatchLaterItem(i.value[A].aid),i.value.splice(A,1),i.value.length===0&&p(),toastAsync({content:"\u5220\u9664\u6210\u529F"})}catch(x){toastAsync({content:x.message||"\u7F51\u7EDC\u9519\u8BEF"})}},k=A=>{s.push({name:"Space",query:{mid:A}})},b=A=>{openPlayerWindow({type:"ugc",fromSpmid:`${SPM_PV.mineWatchLater}.pv`,aid:A.aid,bvid:A.bvid,mediaList:{bizType:2,bizId:String(_.value.mid),bizTitle:"\u7A0D\u540E\u518D\u770B"}})},V=()=>{var A;if(!((A=_.value)!=null&&A.isLogin)){events.emit("mineNavButton",[]);return}events.emit("mineNavButton",[{text:"\u4E00\u952E\u6E05\u7A7A",tab:"watchLater",handler:()=>{!_.value.isLogin||(C.value=!0)}},{text:"\u5220\u9664\u5DF2\u89C2\u770B",tab:"watchLater",handler:()=>{!_.value.isLogin||(y.value=!0)}},{text:"\u64AD\u653E\u5168\u90E8",tab:"watchLater",handler:()=>{if(!_.value.isLogin||i.value.length===0){toastAsync({content:"\u6682\u65E0\u7A0D\u540E\u518D\u770B\u7684\u89C6\u9891"});return}openPlayerWindow({type:"ugc",fromSpmid:`${SPM_PV.mineWatchLater}.pv`,mediaList:{bizType:2,bizId:String(_.value.mid),bizTitle:"\u7A0D\u540E\u518D\u770B"}})}}])};return onMounted(()=>V()),mineEvents.on("handleRefresh",()=>p()),onBeforeUnmount(()=>mineEvents.off("handleRefresh")),(A,x)=>{const T=resolveComponent("VImg"),I=resolveComponent("v-dropdown"),R=resolveComponent("v-button"),N=resolveComponent("v-dialog");return!unref(_)||!unref(_).isLogin?(openBlock(),createElementBlock("div",_hoisted_1$H,[createVNode(_sfc_main$12,{showAvatar:""})])):(openBlock(),createElementBlock("div",_hoisted_2$E,[d.value?(openBlock(),createBlock(DataError,{key:0,onRefresh:p})):u.value&&!i.value.length?(openBlock(),createBlock(_sfc_main$1Q,{key:1,itemNum:20})):!u.value&&!i.value.length?(openBlock(),createBlock(NoData,{key:2})):(openBlock(),createElementBlock("div",_hoisted_3$C,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,(w,D)=>(openBlock(),createElementBlock("div",{class:"wl-item col_3 col_sm_1_5",key:w.bvid},[createBaseVNode("div",{class:"cover",onClick:L=>b(w)},[createVNode(T,{class:"cover-img",src:w.pic||"",width:512*unref(o),height:288*unref(o),loading:"lazy",rule:"1c","bfs-style":"pc-common-cover-h"},null,8,["src","width","height"]),w.progress<0?(openBlock(),createElementBlock("div",_hoisted_5$p,"\u5DF2\u770B\u5B8C")):createCommentVNode("",!0),createBaseVNode("div",_hoisted_6$o,[w.type!==24?(openBlock(),createElementBlock(Fragment,{key:0},[w.enable_vt?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(unref(PlayTime),{class:"icon"}),createBaseVNode("span",{class:"t-num",textContent:toDisplayString(w.view_text_1||unref(formatNumberWithUnit)(w.stat.vt))},null,8,_hoisted_7$m)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(unref(IcoPlayNum)),createBaseVNode("span",{class:"t-num",textContent:toDisplayString(unref(formatNumberWithUnit)(w.stat.view))},null,8,_hoisted_8$l)],64)),createVNode(unref(IcoDmNum)),createBaseVNode("span",{class:"t-num",textContent:toDisplayString(unref(formatNumberWithUnit)(w.stat.danmaku))},null,8,_hoisted_9$i)],64)):createCommentVNode("",!0),_hoisted_10$g,createBaseVNode("span",{textContent:toDisplayString(unref(formatDuration$1)(w.duration))},null,8,_hoisted_11$f)])],8,_hoisted_4$x),createBaseVNode("div",_hoisted_12$d,[createBaseVNode("div",_hoisted_13$8,[createBaseVNode("div",{class:"info-title fw_500",title:w.title,textContent:toDisplayString(w.title),onClick:L=>b(w)},null,8,_hoisted_14$8),createBaseVNode("div",{class:"info-up mt_xs",onClick:L=>k(w.owner.mid)},[createVNode(unref(IcoUpUser)),createBaseVNode("span",{class:"up-name",textContent:toDisplayString(w.owner.name)},null,8,_hoisted_16$5)],8,_hoisted_15$6)]),createVNode(I,{trigger:"click"},{content:withCtx(()=>[createBaseVNode("div",_hoisted_18$5,[createBaseVNode("div",{class:"delete",onClick:L=>E(D)},"\u5220\u9664",8,_hoisted_19$4)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_17$5,[createVNode(unref(IcoMore))])]),_:2},1024)])]))),128))])),createBaseVNode("div",{ref_key:"bottomRef",ref:g,class:"bottom-load"},null,512),createVNode(N,{visible:y.value,"onUpdate:visible":x[1]||(x[1]=w=>y.value=w),width:320,"class-name":"i_dialog py_lg",onCancel:x[2]||(x[2]=w=>y.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_20$4,[_hoisted_21$4,createBaseVNode("div",_hoisted_22$3,[createVNode(R,{class:"mr_sm",onClick:x[0]||(x[0]=w=>y.value=!1)},{default:withCtx(()=>[_hoisted_23$3]),_:1}),createVNode(R,{type:"danger",onClick:B},{default:withCtx(()=>[_hoisted_24$3]),_:1})])])]),_:1},8,["visible"]),createVNode(N,{visible:C.value,"onUpdate:visible":x[4]||(x[4]=w=>C.value=w),width:320,"class-name":"i_dialog py_lg",onCancel:x[5]||(x[5]=w=>C.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_25$3,[_hoisted_26$3,createBaseVNode("div",_hoisted_27$2,[createVNode(R,{class:"mr_sm",onClick:x[3]||(x[3]=w=>C.value=!1)},{default:withCtx(()=>[_hoisted_28$1]),_:1}),createVNode(R,{type:"danger",onClick:S},{default:withCtx(()=>[_hoisted_29$1]),_:1})])])]),_:1},8,["visible"])]))}}});var MineWatchLater=_export_sfc(_sfc_main$x,[["__scopeId","data-v-76c51b58"]]),DownloadCollection_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$6=a=>(pushScopeId("data-v-606d7208"),a=a(),popScopeId(),a),_hoisted_1$G={class:"download-collection i_page_content page_scroller i_wrapper"},_hoisted_2$D={class:"header mt_xxl"},_hoisted_3$B={class:"cover"},_hoisted_4$w=_withScopeId$6(()=>createBaseVNode("div",{class:"collection"},null,-1)),_hoisted_5$o=_withScopeId$6(()=>createBaseVNode("div",{class:"cover-bg"},null,-1)),_hoisted_6$n=["src","onload"],_hoisted_7$l={class:"info"},_hoisted_8$k=["textContent"],_hoisted_9$h=["textContent"],_hoisted_10$f={class:"play-all"},_hoisted_11$e={class:"content"},_hoisted_12$c={class:"row gutter_md"},_sfc_main$w=defineComponent({__name:"DownloadCollection",setup(a){useScrollToTop(".download-collection");const o=useDownloadPageStore(),{openedGroup:s}=storeToRefs(o),i=DPR(),l=ref(""),c=async()=>{var u;l.value=await tryLocalImage(s.value.coverImg,trimHttp$1(formatImg$1(((u=s.value)==null?void 0:u.coverUrl)||"",320*i,180*i)))};c(),watch(s,c);const r=()=>{var u,d;openPlayerWindow({type:((d=(u=s.value.itemList)==null?void 0:u[0])==null?void 0:d.type)||"ugc",fromSpmid:SPM_PV.mineDownload+".pv",mediaList:{bizType:-1,bizId:s.value.itemList[0].itemId,bizTitle:"\u79BB\u7EBF\u7F13\u5B58"}})};return useIpcListener("download/itemListEvent",({data:u})=>{o.refreshOpenedGroupList()}),useIpcListener("download/statusChange",({data:u})=>{u.status==="completed"&&o.refreshOpenedGroupList()}),(u,d)=>{var _,f,m,p;return openBlock(),createElementBlock("div",_hoisted_1$G,[createBaseVNode("div",_hoisted_2$D,[createBaseVNode("div",_hoisted_3$B,[_hoisted_4$w,_hoisted_5$o,createVNode(unref(PlaceHolerImg),{class:"cover-ph"}),l.value?(openBlock(),createElementBlock("img",{key:0,class:"cover-img",src:l.value,loading:"lazy",onload:v=>v.target.style.backgroundColor="transparent",onerror:"this.remove()"},null,8,_hoisted_6$n)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_7$l,[createBaseVNode("div",{class:"title",textContent:toDisplayString((_=unref(s))==null?void 0:_.title)},null,8,_hoisted_8$k),createBaseVNode("div",{class:"sub-title",textContent:toDisplayString("\u5408\u96C6 "+((f=unref(s))!=null&&f.uname?"\xB7 UP\u4E3B\uFF1A"+((m=unref(s))==null?void 0:m.uname):""))},null,8,_hoisted_9$h),createBaseVNode("div",_hoisted_10$f,[createVNode(unref(PlayAllIco)),createBaseVNode("span",{onClick:r},"\u64AD\u653E\u5168\u90E8")])])]),createBaseVNode("div",_hoisted_11$e,[createBaseVNode("div",_hoisted_12$c,[(openBlock(!0),createElementBlock(Fragment,null,renderList(((p=unref(s))==null?void 0:p.itemList)||[],v=>(openBlock(),createBlock(DownloadItem,{class:"col_3 col_sm_1_5 mb_md al-flex-end",key:v.itemId,item:v},null,8,["item"]))),128))])])])}}});var MineDownloadCollection=_export_sfc(_sfc_main$w,[["__scopeId","data-v-606d7208"]]),FavoriteInfoSkeleton_vue_vue_type_style_index_0_lang="";const _hoisted_1$F={class:"favorite_info_skeleton"},_hoisted_2$C={class:"favorite_info_skeleton--left"},_hoisted_3$A=createBaseVNode("div",{class:"favorite_info_skeleton--right"},[createBaseVNode("div",{class:"favorite_info_skeleton--title"}),createBaseVNode("div",{class:"favorite_info_skeleton--desc"}),createBaseVNode("div",{class:"favorite_info_skeleton--count"})],-1),_sfc_main$v=defineComponent({__name:"FavoriteInfoSkeleton",props:{width:{type:Number,default:160}},setup(a){return(o,s)=>(openBlock(),createElementBlock("div",_hoisted_1$F,[createBaseVNode("div",_hoisted_2$C,[createVNode(FolderMediaCardSkeleton,{class:"mb_xxl",width:160})]),_hoisted_3$A]))}});var Favorite_vue_vue_type_style_index_0_lang="";const _hoisted_1$E={class:"app_favorite i_page_wrapper"},_hoisted_2$B={key:0,class:"app_favorite--info i_wrapper"},_hoisted_3$z={class:"app_favorite--info--left"},_hoisted_4$v={class:"app_favorite--info--right"},_hoisted_5$n={class:"app_favorite--info--title"},_hoisted_6$m={key:0,class:"app_favorite--info--count"},_hoisted_7$k={key:1,class:"app_favorite--info--desc"},_hoisted_8$j={class:"flex_start"},_hoisted_9$g=createBaseVNode("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M9.3315 5.69705C10.2228 6.359 10.2228 7.641 9.33151 8.30294L2.80945 13.1465C1.66772 13.9945 0 13.221 0 11.8436V2.1564C0 0.77899 1.66772 0.00554585 2.80945 0.853451L9.3315 5.69705Z",fill:"currentColor"})],-1),_hoisted_10$e=createBaseVNode("span",null,"\u64AD\u653E\u5168\u90E8",-1),_hoisted_11$d={key:1,class:"app_favorite--content"},_hoisted_12$b={key:2,class:"app_favorite--search"},_sfc_main$u=defineComponent({__name:"Favorite",setup(a){const{userInfo:o}=storeToRefs(useUserInfoStore()),s=useRoute(),i=ref("folder"),l=ref(0),c=ref(null),r=ref(null),u=ref(!1);useScrollToTop(".app_favorite--scroller");const{pageScrollRef:d,handlePageScroll:_,resetScrollPosition:f}=useRouteScrollKeeper("MineFavoriteFolder"),m=g=>{var $;i.value==="folder"?c.value={mid:g.upper.mid,type:i.value,id:g.id,cover:g.cover,title:g.title,desc:`\u521B\u5EFA\u8005\uFF1A${g.upper.name}`,count:`${g.media_count}\u4E2A\u5185\u5BB9 \xB7 \u521B\u5EFA\u8005\uFF1A${g.upper.name}`,mediaCount:g.media_count}:c.value={mid:g.upper.mid,type:i.value,id:g.id,cover:g.cover,title:g.title,desc:`\u5408\u96C6 \xB7 UP\u4E3B\uFF1A${g.upper.name}`,count:`${g.media_count}\u4E2A\u89C6\u9891 \xB7 ${formatNum(($=g.cnt_info)==null?void 0:$.play)}\u64AD\u653E`,mediaCount:g.media_count}},p=()=>{const g=String(c.value.id||"");!g||openPlayerWindow({type:"ugc",fromSpmid:"main.mine-collection.0.0.pv",mediaList:{bizType:i.value==="folder"?3:8,bizId:g,bizTitle:c.value.title}})},v=async g=>{var $;u.value=!!g,await nextTick(),g&&(($=r.value)==null||$.doSearch(g))};return watch(s,()=>{s.name==="MineFavorite"&&(c.value=null,l.value=0,f())}),onActivated(()=>{var g,$;i.value=(g=s.query)==null?void 0:g.type,l.value=Number(($=s.query)==null?void 0:$.id),u.value=!1}),(g,$)=>{const y=resolveComponent("v-button");return openBlock(),createElementBlock("div",_hoisted_1$E,[c.value?createCommentVNode("",!0):(openBlock(),createBlock(_sfc_main$v,{key:0})),createVNode(_sfc_main$2K,{class:"app_favorite--scroller page_scroller",ref_key:"pageScrollRef",ref:d,onScroll:unref(_)},{default:withCtx(()=>[c.value?(openBlock(),createElementBlock("div",_hoisted_2$B,[createBaseVNode("div",_hoisted_3$z,[createVNode(_sfc_main$K,{class:"app_favorite--info--cover",src:c.value.cover},null,8,["src"])]),createBaseVNode("div",_hoisted_4$v,[createBaseVNode("div",_hoisted_5$n,toDisplayString(c.value.title),1),i.value==="folder"?(openBlock(),createElementBlock("div",_hoisted_6$m,toDisplayString(c.value.count),1)):createCommentVNode("",!0),i.value!=="folder"?(openBlock(),createElementBlock("div",_hoisted_7$k,toDisplayString(c.value.desc),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_8$j,[createVNode(y,{class:"app_favorite--info--play-all",type:"pink",onClick:p,disabled:!c.value.mediaCount},{default:withCtx(()=>[_hoisted_9$g,_hoisted_10$e]),_:1},8,["disabled"]),i.value==="folder"?(openBlock(),createBlock(_sfc_main$R,{key:0,class:"ml_sm",onConfirmSearch:v})):createCommentVNode("",!0)])])])):createCommentVNode("",!0),u.value?(openBlock(),createElementBlock("div",_hoisted_12$b,[createVNode(_sfc_main$F,{ref_key:"favoriteVideoRef",ref:r,isSearchPage:!0,id:l.value,owner:"",onUpdateInfo:m,searchMode:"currentFolder"},null,8,["id"])])):(openBlock(),createElementBlock("div",_hoisted_11$d,[createVNode(_sfc_main$F,{type:i.value,owner:unref(o)&&c.value&&unref(o).mid===c.value.mid,id:l.value,onUpdateInfo:m},null,8,["type","owner","id"])]))]),_:1},8,["onScroll"])])}}});var FollowerItem_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$5=a=>(pushScopeId("data-v-6b45f9b0"),a=a(),popScopeId(),a),_hoisted_1$D={class:"user-item"},_hoisted_2$A={class:"follow-info"},_hoisted_3$y={class:"r1"},_hoisted_4$u=["textContent"],_hoisted_5$m={key:0,class:"r2"},_hoisted_6$l=["textContent","title"],_hoisted_7$j={class:"r3"},_hoisted_8$i={class:"option gray"},_hoisted_9$f=_withScopeId$5(()=>createBaseVNode("svg",{class:"menu",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[createBaseVNode("line",{x1:"1",y1:"1",x2:"11",y2:"1","stroke-width":"2","stroke-linecap":"round"}),createBaseVNode("line",{x1:"1",y1:"6",x2:"11",y2:"6","stroke-width":"2","stroke-linecap":"round"}),createBaseVNode("line",{x1:"1",y1:"11",x2:"11",y2:"11","stroke-width":"2","stroke-linecap":"round"})],-1)),_hoisted_10$d=["textContent"],_hoisted_11$c={class:"f-dropdown"},_hoisted_12$a=_withScopeId$5(()=>createBaseVNode("svg",{class:"add",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[createBaseVNode("line",{x1:"1",y1:"6",x2:"11",y2:"6","stroke-width":"2","stroke-linecap":"round"}),createBaseVNode("line",{x1:"6",y1:"1",x2:"6",y2:"11","stroke-width":"2","stroke-linecap":"round"})],-1)),_hoisted_13$7=_withScopeId$5(()=>createBaseVNode("span",null,"\u5173\u6CE8",-1)),_hoisted_14$7=[_hoisted_12$a,_hoisted_13$7],_sfc_main$t=defineComponent({__name:"FollowerItem",props:{item:{type:Object,required:!0},oid:{type:Number,default:0}},emits:["update","updateGroup"],setup(a,{emit:o}){const s=a,i={1:"\u5DF2\u5173\u6CE8",2:"\u5DF2\u5173\u6CE8",6:"\u5DF2\u4E92\u7C89"},l=useRouter(),c=new UserAvatar$1,r=ref(null),{userInfo:u}=storeToRefs(useUserInfoStore());onMounted(()=>{if(r.value){const p=s.item;c.append({avatar:p.face,iconType:(()=>{var v,g;if(((v=p.official_verify)==null?void 0:v.type)===0)return"personal";if(((g=p.official_verify)==null?void 0:g.type)===1)return"business";if(p.vip.vipStatus)return"big-vip"})(),avatarWidth:78},r.value,"follow-avatar"+p.mid)}}),events.on("relationChange",async p=>{p.mid===s.item.mid&&o("update",p.isFollow?2:0)});const d=async p=>{if(!u.value.isLogin){requestLogin("followerItem.toggleFollow");return}let v=[1,2,6].includes(p.attribute);try{await modifyRelation(p.mid,v),toastAsync({content:v?"\u53D6\u5173\u6210\u529F":"\u5173\u6CE8\u6210\u529F"})}catch(g){toastAsync({content:g.message})}},_=p=>{l.push({name:"Space",query:{mid:p}})},f=ref(!1),m=ref(!1);return(p,v)=>{var $,y,B;const g=resolveComponent("v-dropdown");return openBlock(),createElementBlock("div",_hoisted_1$D,[createBaseVNode("div",{class:"follow-avatar",ref_key:"avatarRef",ref:r,onClick:v[0]||(v[0]=C=>_(a.item.mid))},null,512),createBaseVNode("div",_hoisted_2$A,[createBaseVNode("div",_hoisted_3$y,[createBaseVNode("div",{class:normalizeClass(["uname",{vip:a.item.vip.vipStatus>0}]),textContent:toDisplayString(a.item.uname),onClick:v[1]||(v[1]=C=>_(a.item.mid))},null,10,_hoisted_4$u)]),(($=a.item.official_verify)==null?void 0:$.desc)||a.item.sign?(openBlock(),createElementBlock("div",_hoisted_5$m,[createBaseVNode("span",{class:"desc",textContent:toDisplayString(((y=a.item.official_verify)==null?void 0:y.desc)||a.item.sign),title:((B=a.item.official_verify)==null?void 0:B.desc)||a.item.sign},null,8,_hoisted_6$l)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_7$j,[withDirectives(createBaseVNode("div",null,[createVNode(g,{visible:m.value,trigger:"click",onShow:v[4]||(v[4]=C=>m.value=!0),onHidden:v[5]||(v[5]=C=>m.value=!1)},{content:withCtx(()=>[createBaseVNode("div",_hoisted_11$c,[createBaseVNode("div",{class:"f-option",onClick:v[2]||(v[2]=C=>f.value=!0)},"\u8BBE\u7F6E\u5206\u7EC4"),createBaseVNode("div",{class:"f-option",onClick:v[3]||(v[3]=()=>{m.value=!1,d(a.item)})}," \u53D6\u6D88\u5173\u6CE8 ")])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_8$i,[_hoisted_9$f,createBaseVNode("span",{textContent:toDisplayString(i[a.item.attribute])},null,8,_hoisted_10$d)])]),_:1},8,["visible"])],512),[[vShow,[1,2,6].includes(a.item.attribute)]]),[1,2,6].includes(a.item.attribute)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:"option",onClick:v[6]||(v[6]=C=>d(a.item))},_hoisted_14$7))])]),createVNode(_sfc_main$2F,{zIndex:991,show:f.value,onClose:v[9]||(v[9]=C=>f.value=!1)},{default:withCtx(()=>[createVNode(_sfc_main$2E,{upName:a.item.uname,upid:a.item.mid,onClose:v[7]||(v[7]=()=>{f.value=!1,m.value=!1}),onSave:v[8]||(v[8]=C=>{f.value=!1,m.value=!1,o("updateGroup",C)})},null,8,["upName","upid"])]),_:1},8,["show"])])}}});var FollowerItem=_export_sfc(_sfc_main$t,[["__scopeId","data-v-6b45f9b0"]]),FollowTag_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$4=a=>(pushScopeId("data-v-95337676"),a=a(),popScopeId(),a),_hoisted_1$C={class:"follow-tag"},_hoisted_2$z=_withScopeId$4(()=>createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:`M2.09508 3.86764C2.22185 3.74087 2.42738 3.74087 2.55415 3.86764L6.22 7.53349L9.88585 3.86764\r
          C10.0126 3.74087 10.2182 3.74087 10.3449 3.86764C10.4717 3.99441 10.4717 4.19995 10.3449 4.32672\r
          L6.60256 8.06908C6.39128 8.28036 6.04872 8.28036 5.83744 8.06908L2.09508 4.32672C1.96831 4.19995\r
          1.96831 3.99441 2.09508 3.86764Z`,stroke:"#61666D","stroke-width":"1.3","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),_hoisted_3$x=[_hoisted_2$z],_hoisted_4$t=["textContent"],_hoisted_5$l=["textContent"],_hoisted_6$k=_withScopeId$4(()=>createBaseVNode("svg",{class:"sort-icon",width:"20",height:"20",viewBox:"0 0 20 20"},[createBaseVNode("path",{d:`M2.73585 7.74043L2.97391 7.49415L3.83341 6.60502V7.84167V14.1667C3.83341 14.2551 3.86853\r
            14.3399 3.93104 14.4024C3.99355 14.4649 4.07833 14.5 4.16674 14.5C4.25514 14.5 4.33993\r
            14.4649 4.40244 14.4024C4.46495 14.3399 4.50007 14.2551 4.50007 14.1667V7.84167V6.60502\r
            L5.35957 7.49416L5.59763 7.74043C5.62841 7.77061 5.6647 7.79461 5.70454 7.81111C5.74539\r
            7.82803 5.78918 7.83674 5.83341 7.83674C5.87763 7.83674 5.92142 7.82803 5.96227 7.81111\r
            C6.00313 7.79419 6.04025 7.76938 6.07152 7.73811C6.10279 7.70684 6.12759 7.66972 6.14452\r
            7.62887C6.16144 7.58801 6.17015 7.54422 6.17015 7.5C6.17015 7.45578 6.16144 7.41199 6.14452\r
            7.37113C6.12759 7.33028 6.10279 7.29316 6.07152 7.26189L4.40957 5.59994C4.37854 5.57098 4.34225\r
            5.5482 4.30265 5.53285L4.29186 5.52867L4.28128 5.52399C4.2452 5.50804 4.20619 5.49981 4.16674\r
            5.49981C4.12729 5.49981 4.08828 5.50804 4.0522 5.52399L4.04162 5.52867L4.03082 5.53285C3.99123\r
            5.54821 3.95493 5.57098 3.9239 5.59995L2.26196 7.26189C2.19881 7.32504 2.16333 7.41069 2.16333\r
            7.5C2.16333 7.58931 2.19881 7.67496 2.26196 7.73811C2.32511 7.80126 2.41076 7.83674 2.50007\r
            7.83674C2.58829 7.83674 2.67293 7.80213 2.73585 7.74043ZM17.5001 13.8333H9.16674C9.07833\r
            13.8333 8.99355 13.8685 8.93104 13.931C8.86852 13.9935 8.83341 14.0783 8.83341 14.1667C8.83341\r
            14.2551 8.86852 14.3399 8.93104 14.4024C8.99355 14.4649 9.07833 14.5 9.16674 14.5H17.5001C17.5885\r
            14.5 17.6733 14.4649 17.7358 14.4024C17.7983 14.3399 17.8334 14.2551 17.8334 14.1667C17.8334\r
            14.0783 17.7983 13.9935 17.7358 13.931C17.6733 13.8685 17.5885 13.8333 17.5001 13.8333ZM9.16674\r
            10.3333H17.5001C17.5885 10.3333 17.6733 10.2982 17.7358 10.2357C17.7983 10.1732 17.8334 10.0884\r
            17.8334 10C17.8334 9.91159 17.7983 9.82681 17.7358 9.7643C17.6733 9.70179 17.5885 9.66667 17.5001\r
            9.66667H9.16674C9.07833 9.66667 8.99355 9.70179 8.93104 9.7643C8.86852 9.82681 8.83341 9.91159\r
            8.83341 10C8.83341 10.0884 8.86852 10.1732 8.93104 10.2357C8.99355 10.2982 9.07833 10.3333 9.16674\r
            10.3333ZM9.16674 6.16667H17.5001C17.5885 6.16667 17.6733 6.13155 17.7358 6.06904C17.7983 6.00652\r
            17.8334 5.92174 17.8334 5.83333C17.8334 5.74493 17.7983 5.66014 17.7358 5.59763C17.6733 5.53512\r
            17.5885 5.5 17.5001 5.5H9.16674C9.07833 5.5 8.99355 5.53512 8.93104 5.59763C8.86852 5.66014\r
            8.83341 5.74493 8.83341 5.83333C8.83341 5.92174 8.86852 6.00652 8.93104 6.06904C8.99355 6.13155\r
            9.07833 6.16667 9.16674 6.16667Z`})],-1)),_hoisted_7$i=["textContent"],_hoisted_8$h={key:0,class:"row"},_sfc_main$s=defineComponent({__name:"FollowTag",props:{tag:{type:Object,required:!0},mid:{type:Number,default:0}},emits:["updateCount"],setup(a,{emit:o}){const s=a,{userInfo:i}=storeToRefs(useUserInfoStore()),l=ref([]),c=ref("initiating"),r=ref({ps:20,pn:1,order_type:s.tag.tagid===0?"attention":""}),u=ref(!1);let d=!1;const _=()=>{d||(u.value=!u.value)},f=ref(null);watch(u,async()=>{const B=f.value;if(u.value){if(!B.clientHeight)return;d=!0,B.style.height=B.clientHeight+"px",B.dataset.height=B.clientHeight+"px",setTimeout(()=>{const C=()=>{B.removeEventListener("transitionend",C),d=!1};B.addEventListener("transitionend",C),B.style.height="0"},16)}else{if(!B.dataset.height)return;d=!0;const C=()=>{B.style.removeProperty("height"),B.removeEventListener("transitionend",C),d=!1};B.addEventListener("transitionend",C),B.style.height=B.dataset.height}});const m=async()=>{try{const C=(await fetchFollowTag({mid:i.value.mid,tagid:s.tag.tagid,ps:r.value.ps,pn:r.value.pn,order_type:r.value.order_type})).data||[],S=C.length?await fetchFollowInterRelations({fids:C.map(E=>E.mid).join(",")}):{};C.forEach(E=>{E.attribute=S[E.mid].attribute}),l.value=l.value.concat(C),c.value="loaded"}catch(B){console.error(B),toastAsync({content:B.message||"\u7F51\u7EDC\u9519\u8BEF"}),c.value="error"}};m().then(()=>{g()});let p=!1;const v=async B=>{B.stopPropagation(),c.value==="loaded"&&(p||(p=!0,r.value.order_type=r.value.order_type==="attention"?"":"attention",l.value=[],r.value.ps=20,r.value.pn=1,await m(),p=!1))},g=async()=>{if(!(d||u.value)&&!(!i.value.isLogin||s.mid&&i.value.mid!==s.mid)&&!(s.tag.count/r.value.ps<=r.value.pn)&&c.value==="loaded")return c.value="loading",r.value.pn+=1,m()},$=ref(null),y=useElementVisible($);return watch(y,()=>{y.value&&c.value==="loaded"&&!p&&g()}),onMounted(()=>{events.on("syncFollowerTagList",({user:B,groupList:C})=>{const S=C.includes(s.tag.tagid),E=l.value.some(k=>k.mid===B.mid);S&&!E?(l.value.unshift(B),o("updateCount",s.tag.count+1)):!S&&E&&(o("updateCount",Math.max(s.tag.count-1,0)),l.value=l.value.filter(k=>k.mid!==B.mid))})}),(B,C)=>(openBlock(),createElementBlock("div",_hoisted_1$C,[createBaseVNode("div",{class:"tag-header",onClick:_},[(openBlock(),createElementBlock("svg",{class:normalizeClass(["fold-icon",{rotated:u.value}]),width:"12",height:"12",viewBox:"0 0 12 12"},_hoisted_3$x,2)),createBaseVNode("div",{class:"tag-title",textContent:toDisplayString(a.tag.name)},null,8,_hoisted_4$t),createBaseVNode("div",{class:"tag-count",textContent:toDisplayString(a.tag.count)},null,8,_hoisted_5$l),a.tag.tagid===0&&!u.value?(openBlock(),createElementBlock("div",{key:0,class:"follow-tag-sort",onClick:v},[_hoisted_6$k,createBaseVNode("span",{textContent:toDisplayString(r.value.order_type==="attention"?"\u6700\u5E38\u8BBF\u95EE":"\u6700\u8FD1\u5173\u6CE8")},null,8,_hoisted_7$i)])):createCommentVNode("",!0)]),createBaseVNode("div",{class:"tag-content",ref_key:"contentRef",ref:f},[["loaded","loading"].includes(c.value)?(openBlock(),createElementBlock("div",_hoisted_8$h,[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.value,S=>(openBlock(),createBlock(FollowerItem,{key:S.mid,item:S,oid:a.mid,class:"col_6",onUpdate:E=>S.attribute=E,onUpdateGroup:E=>unref(events).emit("syncFollowerTagList",{user:S,groupList:E})},null,8,["item","oid","onUpdate","onUpdateGroup"]))),128))])):createCommentVNode("",!0),createBaseVNode("div",{ref_key:"bottomRef",ref:$,class:"bottom-load"},null,512)],512)]))}});var FollowTag=_export_sfc(_sfc_main$s,[["__scopeId","data-v-95337676"]]),Following_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$B={class:"app_following i_page_wrapper"},_hoisted_2$y={class:"app_following--content i_page_content page_scroller"},_hoisted_3$w={key:0,class:"p_relative follow-content"},_hoisted_4$s={key:1,class:"not-self p_relative follow-content"},_hoisted_5$k={key:2,class:"total"},_hoisted_6$j=createTextVNode("\u5168\u90E8\u5171"),_hoisted_7$h=["textContent"],_hoisted_8$g=createTextVNode("\u4E2A\u5173\u6CE8\u7528\u6237"),_hoisted_9$e={class:"row gutter_lg"},_hoisted_10$c={key:3,class:"limit-tip"},_sfc_main$r=defineComponent({__name:"Following",setup(a){useScrollToTop(".app_following--content");const{userInfo:o}=storeToRefs(useUserInfoStore()),s=useRoute(),i=computed(()=>parseInt(s.query.mid)),l=ref(!1);onActivated(()=>{r.value=[],d.value=[],_.value=NaN,f.value={state:"",message:""},l.value=o.value.isLogin&&(!i.value||i.value===o.value.mid),l.value?u():m()});const r=ref([]),u=async()=>{const v=await fetchFollowTags({vmid:o.value.mid});r.value=v.data||[]},d=ref([]),_=ref(NaN),f=ref({state:"",message:""}),m=async()=>{if(!i.value){toastAsync({content:"\u53C2\u6570\u9519\u8BEF"});return}try{const v=await fetchFollowings({vmid:i.value,ps:30,pn:1,order:"desc"});d.value=v.list||[],_.value=v.total}catch(v){f.value.state="error",f.value.message=v.message,toastAsync({content:v.message})}},p=()=>{f.value.state};return(v,g)=>(openBlock(),createElementBlock("div",_hoisted_1$B,[createBaseVNode("div",_hoisted_2$y,[l.value?(openBlock(),createElementBlock("div",_hoisted_3$w,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,$=>(openBlock(),createBlock(FollowTag,{key:$.tagid,tag:$,mid:unref(i),onUpdateCount:y=>$.count=y},null,8,["tag","mid","onUpdateCount"]))),128))])):createCommentVNode("",!0),l.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_4$s,[_.value===0&&!d.value.length?(openBlock(),createBlock(SearchNoData,{key:0})):createCommentVNode("",!0),f.value.state==="error"?(openBlock(),createBlock(DataError,{key:1,text:f.value.message||"\u6682\u65E0\u5173\u6CE8\u7528\u6237",onRefresh:p},null,8,["text"])):createCommentVNode("",!0),_.value?(openBlock(),createElementBlock("div",_hoisted_5$k,[_hoisted_6$j,createBaseVNode("span",{textContent:toDisplayString(unref(formatNumberWithUnit)(_.value))},null,8,_hoisted_7$h),_hoisted_8$g])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_9$e,[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value,$=>(openBlock(),createBlock(FollowerItem,{key:$.mid,item:$,oid:unref(i),class:"col_6",onUpdate:y=>$.attribute=y},null,8,["item","oid","onUpdate"]))),128))]),!l.value&&_.value>30?(openBlock(),createElementBlock("div",_hoisted_10$c,"\u7CFB\u7EDF\u9650\u5236\uFF0C\u4E0D\u80FD\u67E5\u770B\u66F4\u591A\u5566~")):createCommentVNode("",!0)]))])]))}});var Following=_export_sfc(_sfc_main$r,[["__scopeId","data-v-094041c1"]]),Follower_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$A={class:"app_follower i_page_wrapper"},_hoisted_2$x={class:"app_follower--content i_page_content page_scroller"},_hoisted_3$v={class:"p_relative follow-content"},_hoisted_4$r={key:2,class:"total"},_hoisted_5$j=createTextVNode(" \u5168\u90E8\u5171"),_hoisted_6$i=["textContent"],_hoisted_7$g=createTextVNode("\u4E2A\u7C89\u4E1D "),_hoisted_8$f={key:3,class:"follower-list p_relative row gutter_lg"},_hoisted_9$d={key:4,class:"limit-tip"},_sfc_main$q=defineComponent({__name:"Follower",setup(a){useScrollToTop(".app_follower--content");const{userInfo:o}=storeToRefs(useUserInfoStore()),s=useRoute(),i=computed(()=>parseInt(s.query.mid)),l=computed(()=>i.value&&o.value.mid!==i.value),c=ref("initiating"),r=ref([]),u=ref({ps:30,pn:1,re_version:0,total:0}),d=()=>{c.value="initiating",r.value=[],u.value={ps:30,pn:1,re_version:0,total:0},_().then(()=>{p.value&&f()})};onActivated(d);const _=async()=>{try{const g=await fetchFollowers({...u.value,vmid:i.value||o.value.mid});r.value=r.value.concat(g.list||[]),u.value.re_version=g.re_version,u.value.total=g.total,c.value="loaded"}catch(g){console.error(g),c.value="error"}},f=()=>{!o.value.isLogin||l.value||u.value.total/u.value.ps<=u.value.pn||c.value==="loaded"&&(u.value.pn+=1,c.value="loading",_())},m=ref(null),p=useElementVisible(m);watch(p,()=>{p.value&&c.value==="loaded"&&f()});const v=()=>{c.value!=="initiating"&&d()};return(g,$)=>(openBlock(),createElementBlock("div",_hoisted_1$A,[createBaseVNode("div",_hoisted_2$x,[createBaseVNode("div",_hoisted_3$v,[c.value==="loaded"&&r.value.length===0?(openBlock(),createBlock(SearchNoData,{key:0})):createCommentVNode("",!0),c.value==="error"?(openBlock(),createBlock(DataError,{key:1,onRefresh:v})):createCommentVNode("",!0),c.value==="loaded"&&u.value.total>0?(openBlock(),createElementBlock("div",_hoisted_4$r,[_hoisted_5$j,createBaseVNode("span",{textContent:toDisplayString(unref(formatNumberWithUnit)(u.value.total))},null,8,_hoisted_6$i),_hoisted_7$g])):createCommentVNode("",!0),["loaded","loading"].includes(c.value)?(openBlock(),createElementBlock("div",_hoisted_8$f,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,y=>(openBlock(),createBlock(FollowerItem,{key:y.mid,item:y,oid:unref(i),class:"col_6",onUpdate:B=>y.attribute=B},null,8,["item","oid","onUpdate"]))),128))])):createCommentVNode("",!0),unref(l)&&u.value.total>30?(openBlock(),createElementBlock("div",_hoisted_9$d,"\u7CFB\u7EDF\u9650\u5236\uFF0C\u4E0D\u80FD\u67E5\u770B\u66F4\u591A\u5566~")):createCommentVNode("",!0),createBaseVNode("div",{ref_key:"bottomRef",ref:m,class:"bottom-load"},null,512)])])]))}});var Follower=_export_sfc(_sfc_main$q,[["__scopeId","data-v-3b87143d"]]),SpaceSkeleton_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$3=a=>(pushScopeId("data-v-1a12e930"),a=a(),popScopeId(),a),_hoisted_1$z={class:"space_skeleton"},_hoisted_2$w=_withScopeId$3(()=>createBaseVNode("div",{class:"skeleton_top_photo"},null,-1)),_hoisted_3$u={class:"px_40"},_hoisted_4$q=createStaticVNode('<div class="flex_between mb_40" data-v-1a12e930><div class="flex_start" data-v-1a12e930><div class="skeleton_avatar mr_lg" data-v-1a12e930></div><div class="pt_10" data-v-1a12e930><div class="fs_1 fw_bold mr_sm skeleton_name" data-v-1a12e930></div><div data-v-1a12e930><div class="skeleton_desc" data-v-1a12e930></div><div class="skeleton_desc" data-v-1a12e930></div></div></div></div><div class="skeleton_statistics" data-v-1a12e930><div class="skeleton_statistics_number" data-v-1a12e930><div data-v-1a12e930></div><div data-v-1a12e930></div></div><div class="divider" data-v-1a12e930></div><div class="skeleton_statistics_number" data-v-1a12e930><div data-v-1a12e930></div><div data-v-1a12e930></div></div><div class="divider" data-v-1a12e930></div><div class="skeleton_statistics_number" data-v-1a12e930><div data-v-1a12e930></div><div data-v-1a12e930></div></div><div class="divider" data-v-1a12e930></div><div class="skeleton_statistics_follow" data-v-1a12e930></div></div></div><div class="skeleton_tabs" data-v-1a12e930><div data-v-1a12e930></div><div data-v-1a12e930></div></div><div class="skeleton_video_order" data-v-1a12e930><div data-v-1a12e930></div><div data-v-1a12e930></div></div>',3),_sfc_main$p=defineComponent({__name:"SpaceSkeleton",setup(a){return(o,s)=>(openBlock(),createElementBlock("div",_hoisted_1$z,[_hoisted_2$w,createBaseVNode("div",_hoisted_3$u,[_hoisted_4$q,createVNode(_sfc_main$1Q,{itemNum:24,showAvatar:!1,showLoadingAnimation:""})])]))}});var SpaceSkeleton=_export_sfc(_sfc_main$p,[["__scopeId","data-v-1a12e930"]]),FollowButton_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$y={class:"flex_start"},_hoisted_2$v={class:"follow-text"},_hoisted_3$t={class:"follow_dropdown"},_sfc_main$o=defineComponent({__name:"FollowButton",props:{followed:{type:Boolean,required:!0},followText:{type:String,required:!0}},emits:["group","follow"],setup(a,{emit:o}){const s=a;return storeToRefs(useUserInfoStore()),(i,l)=>{const c=resolveComponent("v-button");return openBlock(),createBlock(c,{type:s.followed?"grey":"pink",class:normalizeClass(["follow-btn",s.followed?"following":"not-follow"]),onClick:l[2]||(l[2]=r=>o("follow",!0))},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$y,[s.followed?(openBlock(),createBlock(unref(VdMenu),{key:0,class:"follow-menu"})):(openBlock(),createBlock(unref(VdFollow$1),{key:1})),createBaseVNode("span",_hoisted_2$v,toDisplayString(s.followText),1)]),createBaseVNode("ul",_hoisted_3$t,[createBaseVNode("li",{onClick:l[0]||(l[0]=r=>o("group"))},"\u8BBE\u7F6E\u5206\u7EC4"),createBaseVNode("li",{onClick:l[1]||(l[1]=withModifiers(r=>o("follow",!1),["stop"]))},"\u53D6\u6D88\u5173\u6CE8")])]),_:1},8,["type","class"])}}});var FollowButton=_export_sfc(_sfc_main$o,[["__scopeId","data-v-2a1201cc"]]),SpaceStatistics_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$2=a=>(pushScopeId("data-v-726a9953"),a=a(),popScopeId(),a),_hoisted_1$x={class:"n-statistics"},_hoisted_2$u={class:"n-data-v hover"},_hoisted_3$s=_withScopeId$2(()=>createBaseVNode("p",{class:"n-data-k"},"\u5173\u6CE8\u6570",-1)),_hoisted_4$p=_withScopeId$2(()=>createBaseVNode("div",{class:"divider"},null,-1)),_hoisted_5$i={class:"n-data-v hover"},_hoisted_6$h=_withScopeId$2(()=>createBaseVNode("p",{class:"n-data-k"},"\u7C89\u4E1D\u6570",-1)),_hoisted_7$f={key:0,class:"divider"},_hoisted_8$e=["title"],_hoisted_9$c={class:"n-data-v cs_default"},_hoisted_10$b=_withScopeId$2(()=>createBaseVNode("p",{class:"n-data-k"},"\u83B7\u8D5E\u6570",-1)),_hoisted_11$b=createTextVNode("\u53D1\u6D88\u606F"),_sfc_main$n=defineComponent({__name:"SpaceStatistics",props:{followed:{type:Boolean,required:!0},followText:{type:String,required:!0}},emits:["follow"],setup(a,{emit:o}){const s=inject("account"),i=inject("settings"),l=inject("upStat"),c=inject("relations"),r=inject("isOwner"),u=inject("isVisitor"),d=ref(!1);useRoute();const{userInfo:_}=storeToRefs(useUserInfoStore()),f=E=>{o("follow",E)};function m(E){if(E<=0||!E)return 0;if(E==="--")return"--";const k=Number(E);return k>99999999?Math.round(k/1e7)/10+"\u4EBF":k>9999?Math.round(k/1e3)/10+"\u4E07":k}const p=E=>String(E).replace(/\d{1,3}(?=(\d{3})+$)/g,function(k){return k+","}),v=E=>`\u89C6\u9891\u3001\u52A8\u6001\u3001\u4E13\u680F\u7D2F\u8BA1\u83B7\u8D5E${String(E).replace(/\d{1,3}(?=(\d{3})+$)/g,function(b){return b+","})}`,g=computed(()=>{var E;return((E=l.value)==null?void 0:E.likes)>=0}),$=computed(()=>{var E,k;return((k=(E=i.value)==null?void 0:E.privacy)==null?void 0:k.disable_following)&&!r.value}),y=()=>{$.value&&toastAsync({content:"\u7531\u4E8E\u8BE5\u7528\u6237\u9690\u79C1\u8BBE\u7F6E\uFF0C\u5173\u6CE8\u5217\u8868\u4E0D\u53EF\u89C1"})},B=()=>{d.value=!0};let C=!1;const S=async()=>{var E;if(!_.value.isLogin){requestLogin("spaceStatistics.openMessage");return}if(!C){C=!0;try{const k=(E=s.value)==null?void 0:E.mid;(await Upinfo.getRelation(k)).data.relation.attribute>=128?toastAsync({content:"\u8BE5\u7528\u6237\u5DF2\u88AB\u62C9\u9ED1"}):messageEvents.emit("openMessage",k)}finally{C=!1}}};return(E,k)=>{var A,x,T,I,R,N;const b=resolveComponent("router-link"),V=resolveComponent("v-button");return openBlock(),createElementBlock("div",_hoisted_1$x,[(openBlock(),createBlock(resolveDynamicComponent(unref($)?"div":"router-link"),{class:"n-data",to:{name:"Following",query:{mid:(A=unref(s))==null?void 0:A.mid}},title:p((x=unref(c))==null?void 0:x.following),onClick:y},{default:withCtx(()=>{var w;return[createBaseVNode("p",_hoisted_2$u,toDisplayString(m((w=unref(c))==null?void 0:w.following)),1),_hoisted_3$s]}),_:1},8,["to","title"])),_hoisted_4$p,createVNode(b,{class:"n-data",to:{name:"Follower",query:{mid:(T=unref(s))==null?void 0:T.mid}},title:p((I=unref(c))==null?void 0:I.follower)},{default:withCtx(()=>{var w;return[createBaseVNode("p",_hoisted_5$i,toDisplayString(m((w=unref(c))==null?void 0:w.follower)),1),_hoisted_6$h]}),_:1},8,["to","title"]),unref(g)?(openBlock(),createElementBlock("div",_hoisted_7$f)):createCommentVNode("",!0),unref(g)?(openBlock(),createElementBlock("div",{key:1,class:"n-data",title:v((R=unref(l))==null?void 0:R.likes)},[createBaseVNode("p",_hoisted_9$c,toDisplayString(m((N=unref(l))==null?void 0:N.likes)),1),_hoisted_10$b],8,_hoisted_8$e)):createCommentVNode("",!0),unref(u)?(openBlock(),createBlock(FollowButton,{key:2,followed:a.followed,followText:a.followText,onGroup:B,onFollow:f,class:"ml_28"},null,8,["followed","followText"])):createCommentVNode("",!0),createVNode(_sfc_main$2F,{show:d.value,onClose:k[2]||(k[2]=w=>d.value=!1)},{default:withCtx(()=>{var w,D;return[createVNode(_sfc_main$2E,{upName:(w=unref(s))==null?void 0:w.name,upid:(D=unref(s))==null?void 0:D.mid,onClose:k[0]||(k[0]=L=>d.value=!1),onSave:k[1]||(k[1]=L=>d.value=!1)},null,8,["upName","upid"])]}),_:1},8,["show"]),unref(u)?(openBlock(),createBlock(V,{key:3,class:"message-btn",plain:"",type:"pink",onClick:S},{default:withCtx(()=>[_hoisted_11$b]),_:1})):createCommentVNode("",!0)])}}});var SpaceStatistics=_export_sfc(_sfc_main$n,[["__scopeId","data-v-726a9953"]]);const _hoisted_1$w={width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$t=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.88 5.972A3.134 3.134 0 0 1 7.253 7.39c-.584 0-1.209-.167-1.71-.5-1.459-.96-1.917-2.878-.958-4.337.583-.834 1.585-1.376 2.627-1.418.583 0 1.209.167 1.71.5 1.458.96 1.917 2.878.958 4.337ZM9.421.76C8.796.3 8.004.093 7.17.093c-1.376 0-2.71.667-3.503 1.96-1.167 1.75-.75 4.086.793 5.42l-.417.667-2.46-1.584s-.584-.375-.835.042c-.291.458.292.833.292.833L3.5 9.016l-1.376 2.127s-.25.416.209.667c.5.291.75-.167.75-.167l1.335-2.085 2.418 1.585s.626.375.918-.084c.25-.375-.334-.75-.334-.75L4.96 8.682l.417-.625c.584.292 1.21.417 1.793.417 1.376 0 2.71-.667 3.502-1.96 1.251-1.918.667-4.503-1.25-5.754Z",fill:"#61666D"},null,-1),_hoisted_3$r=[_hoisted_2$t];function render$9(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$w,_hoisted_3$r)}var IconFemale={render:render$9};const _hoisted_1$v={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$s=createBaseVNode("mask",{id:"a",style:{"mask-type":"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"16",height:"16"},[createBaseVNode("path",{fill:"#61666D",d:"M0 0h16v16H0z"})],-1),_hoisted_3$q=createBaseVNode("g",{mask:"url(#a)"},[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.159 2.396a.574.574 0 0 0 .562.562l3.362.05-3.335 3.336c-1.758-1.38-4.27-1.295-5.844.279-1.704 1.704-1.662 4.51.094 6.265 1.756 1.757 4.561 1.799 6.266.095 1.573-1.574 1.658-4.086.279-5.844l3.335-3.336.05 3.362a.574.574 0 0 0 .563.562c.306.005.55-.24.545-.545l-.07-4.699a.574.574 0 0 0-.563-.562l-4.699-.07a.534.534 0 0 0-.545.545Zm.31 9.792c-1.278 1.278-3.382 1.246-4.7-.071-1.317-1.317-1.348-3.42-.07-4.699 1.278-1.278 3.382-1.246 4.699.07 1.317 1.318 1.349 3.422.07 4.7Z",fill:"#61666D"})],-1),_hoisted_4$o=[_hoisted_2$s,_hoisted_3$q];function render$8(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$v,_hoisted_4$o)}var IconMale={render:render$8},SpaceGender_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$u={class:"gender"},_sfc_main$m=defineComponent({__name:"SpaceGender",props:{gender:{type:String,required:!0}},setup(a){return(o,s)=>(openBlock(),createElementBlock("span",_hoisted_1$u,[a.gender==="male"?(openBlock(),createBlock(unref(IconMale),{key:0})):a.gender==="female"?(openBlock(),createBlock(unref(IconFemale),{key:1})):createCommentVNode("",!0)]))}});var SpaceGender=_export_sfc(_sfc_main$m,[["__scopeId","data-v-3fe6f7f2"]]);const _hoisted_1$t={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$r=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.167 3.667c-1.68 0-3.145.085-4.18.169a1.448 1.448 0 0 0-1.34 1.32A35.962 35.962 0 0 0 2.5 8.333c0 1.218.07 2.332.147 3.177a1.448 1.448 0 0 0 1.34 1.32c1.035.085 2.5.17 4.18.17 1.679 0 3.145-.085 4.18-.17a1.448 1.448 0 0 0 1.34-1.32c.076-.844.146-1.958.146-3.177s-.07-2.333-.146-3.177a1.448 1.448 0 0 0-1.34-1.32c-1.035-.084-2.501-.17-4.18-.17Zm-4.26-.828a53.379 53.379 0 0 1 4.26-.172c1.711 0 3.205.087 4.26.172a2.448 2.448 0 0 1 2.256 2.227c.078.867.15 2.011.15 3.267 0 1.256-.072 2.401-.15 3.267a2.448 2.448 0 0 1-2.256 2.227 53.368 53.368 0 0 1-4.26.173c-1.712 0-3.205-.087-4.26-.173A2.448 2.448 0 0 1 1.65 11.6 36.965 36.965 0 0 1 1.5 8.333c0-1.255.073-2.4.15-3.266a2.448 2.448 0 0 1 2.256-2.228Z",fill:"#61666D"},null,-1),_hoisted_3$p=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.333 6.501a.5.5 0 0 1 .5.5c0 .864.005 1.525.145 1.978.065.212.147.33.231.398.08.064.21.124.457.124a.5.5 0 1 1 0 1c-.42 0-.788-.106-1.084-.345-.29-.234-.459-.553-.56-.883-.19-.614-.19-1.427-.189-2.211v-.06a.5.5 0 0 1 .5-.5Z",fill:"#61666D"},null,-1),_hoisted_4$n=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 6.501a.5.5 0 0 0-.5.5c0 .864-.005 1.525-.145 1.978-.065.212-.147.33-.231.398-.08.064-.21.124-.457.124a.5.5 0 1 0 0 1c.42 0 .788-.106 1.084-.345.29-.234.459-.553.56-.883.19-.614.19-1.427.189-2.211v-.06a.5.5 0 0 0-.5-.5ZM8.667 6.501a.5.5 0 0 1 .5.5v3a.5.5 0 1 1-1 0v-3a.5.5 0 0 1 .5-.5ZM11.988 6.772c.496.289.845.802.845 1.563 0 .734-.323 1.262-.765 1.606-.422.328-.932.476-1.335.532-.527.072-.9-.365-.9-.805V7.284c0-.393.292-.789.756-.812.402-.019.941.033 1.4.3Zm-1.155.699v1.966c.224-.056.446-.149.621-.285.218-.17.379-.415.379-.817 0-.405-.16-.59-.348-.7a1.448 1.448 0 0 0-.652-.164Z",fill:"#61666D"},null,-1),_hoisted_5$h=[_hoisted_2$r,_hoisted_3$p,_hoisted_4$n];function render$7(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$t,_hoisted_5$h)}var IconUid={render:render$7},SpaceUid_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$s={key:0,class:"uid"},_hoisted_2$q={class:"text2 fs_5"},_sfc_main$l=defineComponent({__name:"SpaceUid",props:{uid:{type:[String,Number],required:!0}},setup(a){return(o,s)=>a.uid?(openBlock(),createElementBlock("div",_hoisted_1$s,[createVNode(unref(IconUid),{class:"mr_3"}),createBaseVNode("span",_hoisted_2$q,toDisplayString(a.uid),1)])):createCommentVNode("",!0)}});var SpaceUid=_export_sfc(_sfc_main$l,[["__scopeId","data-v-9fca1c3e"]]),ImgProfession="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAMAAAC7m5rvAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABFUExURUxpcWFlbV9lbWFlbF9ka2FlbV9nb2FmbF9jb19jbF9fb19kbGFmbV9lbV9mbF9mbWJlbmFlbV9mbGFmbWJnbmBlbGFmbSRGAiYAAAAWdFJOUwC/kN8w3yDvEEAgYJ+AcFCPz6Cvb7D9AeNOAAABvElEQVR42u1Wy7aDIAwU5C1WrS3//6k3UE9zEsB6F901OyGTZCYRGH72TXNe7tqmZDcx+6sgLwGBZqO6AhKpMhE+lbcWPy0n4+BLLVKXhdWdoUJxioSPuue18SShyqSE4csmA0d1hrK31s4t76hehf2YRgMuNNXIKFIgx40tXVaIZ855r40SgTblxfmBQz0yAoTvANBDVDVALHMOM4108Z1smnCVrkD7JNsCwurlU1F8pPTCeRCNigkr45u5dbydRzrNq5wxv2ZCx3fEQYIXV2nBxMmTxpRkB4EngW1AjQtdN8ZAYq6Iw82cGhNgYxzwJjDYJERHh0wlcevDHOSeMYLpwbBIbEIoeljUo1WkRgaoA4qPE7gR2POISpsQ2BQuqHG7kXtx0JCUec2N4UIzmRQRnw0XiufZtFnNgiuuSMkf+cmC7aM/FxMhkJ8swyZ+bKiPv7zgAxjRg6a7ESaaHmSP9rEhq4MXiR0DI3vHa+hfKlwg7FUfpzLK/PfqeFjOgMdMsUoYREJU74IAIPHwIDyvkJuTqTjJRTn4MtNxCUs3nJtpXflXXhnqTh8Y8vrTZBZbFk/v0rvhZ1+0P1TyJPe5FgeZAAAAAElFTkSuQmCC",SpaceDescription$1="",SpaceDescription={setup(a){const o=inject("account"),s=inject("isVisitor"),i=computed(()=>{var $;let g="";switch(($=o.value)==null?void 0:$.sex){case"\u7537":g="male";break;case"\u5973":g="female";break;default:g="";break}return g}),l=computed(()=>{var g,$,y,B,C;if(((g=o.value)==null?void 0:g.official.type)===1){if(((y=($=o.value)==null?void 0:$.official)==null?void 0:y.role)===0)return"\u4E2A\u4EBA";if(((C=(B=o.value)==null?void 0:B.official)==null?void 0:C.role)===1)return"\u673A\u6784"}}),c=computed(()=>{var g,$;return($=(g=o==null?void 0:o.value.official)==null?void 0:g.title)!=null?$:""}),r=computed(()=>!!l.value),u=computed(()=>{var g,$;return!!s.value&&(($=(g=o.value)==null?void 0:g.profession)==null?void 0:$.is_show)}),d=18,_=ref(!1),f=ref(!1),m=ref(!1),p="space_sign",v=debounce$2(()=>{const g=document.querySelector(`.${p}`);g&&(f.value=g.clientHeight>d,m.value=g.scrollHeight>g.clientHeight)},100,{leading:!0});return onMounted(async()=>{await n(0),v(),window.addEventListener("resize",v)}),onUnmounted(()=>{window.removeEventListener("resize",v)}),()=>{const g=(k=!1)=>createVNode("span",{onClick:()=>{_.value=!_.value},style:{"word-break":"keep-all",cursor:"pointer",color:"var(--text_link)",position:k&&!_.value?"absolute":"static",background:"var(--bg1)",bottom:0,right:0}},[!_.value&&k?createVNode("span",{class:"text2"},[createTextVNode("...")]):"",createVNode("span",{class:"u_select_none",style:{"margin-left":"5px"}},[_.value?"\u6536\u8D77":"\u8BE6\u60C5"])]),$=k=>r.value?createVNode("div",{class:"text2",style:{"margin-bottom":"6px",position:"relative"}},[createVNode("span",null,[createTextVNode("bilibili"),l.value,createTextVNode("\u8BA4\u8BC1\uFF1A"),c.value]),k?g():null]):null,y=k=>{var b,V,A;return u.value?createVNode("div",{class:"profession-description text2",style:{"margin-bottom":"6px",position:"relative"}},[createVNode("img",{class:"profession-description__icon",src:ImgProfession,style:{"margin-right":"6px"}},null),createVNode("span",{class:_.value?"":"text_ellipsis_2l"},[createTextVNode("\u804C\u4E1A\u8D44\u8D28\uFF1A"),(b=o.value)==null?void 0:b.profession.department,createTextVNode("\xA0"),((V=o.value)==null?void 0:V.profession.title)||((A=o.value)==null?void 0:A.profession.name)]),k?g():null]):null},B=(k,b=1)=>{var V;return createVNode("div",{class:`text2 ${p}`,style:_.value?{"margin-bottom":"6px",position:"relative"}:{position:"relative",display:"-webkit-box",overflow:"hidden","margin-bottom":"6px","word-break":"break-all","-webkit-line-clamp":b,"-webkit-box-orient":"vertical","text-overflow":"ellipsis"}},[createVNode("span",null,[((V=o.value)==null?void 0:V.sign)||"\u8FD9\u4E2A\u4EBA\u5F88\u795E\u79D8\uFF0C\u4EC0\u4E48\u90FD\u6CA1\u6709\u5199"]),k?g(m.value):null])},C=()=>{var k;return createVNode("div",{class:"flex_start"},[i.value?createVNode(SpaceGender,{gender:i.value,style:{"margin-right":"5px"}},null):null,createVNode(SpaceUid,{uid:(k=o.value)==null?void 0:k.mid},null)])};let S=[],E=[];return r.value&&u.value?(S=[$(!0),y],E=[B,C]):!r.value&&!u.value?(S=[B(!0,2)],E=[C]):r.value?(S=[$(!0),B],E=[C]):u.value&&(S=[y(!0),B],E=[C]),createVNode("div",{class:"space_description"},[S.map(k=>isFunction$1(k)?k():k),_.value?E.map(k=>isFunction$1(k)?k():k):null])}}},SpaceAuthor_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$r={class:"space_author"},_hoisted_2$p={class:"flex_start items_start"},_hoisted_3$o={class:"author-avatar -mt_18 mr_lg"},_hoisted_4$m={class:"flex_1 min_w_0"},_hoisted_5$g={class:"flex_start mb_4"},_hoisted_6$g={class:"fz_20 fw_bold mr_sm text_ellipsis account-name"},_hoisted_7$e={key:0,class:"level_wrapper"},_hoisted_8$d={class:"level_wrapper__exp"},_hoisted_9$b={key:0,class:"exp"},_hoisted_10$a={class:"level_wrapper__bar"},_hoisted_11$a={key:2,class:"h-vipLevel"},_hoisted_12$9=["src"],_sfc_main$k=defineComponent({__name:"SpaceAuthor",setup(a){const o=inject("account"),s=inject("isOwner"),i=inject("isVisitor"),{userInfo:l}=storeToRefs(useUserInfoStore()),c=ref(null);ref(!1),computed(()=>{var v,g,$,y;if(((g=(v=o.value)==null?void 0:v.official)==null?void 0:g.role)===0)return"\u4E2A\u4EBA";if(((y=($=o.value)==null?void 0:$.official)==null?void 0:y.role)===1)return"\u673A\u6784"});const r=computed(()=>{var g;const v=(g=l==null?void 0:l.value)==null?void 0:g.level_info;return v?v.current_level===6?"100%":(v.current_exp/v.next_exp*100>>0)+"%":"0"});computed(()=>{var g;let v="";switch((g=o.value)==null?void 0:g.sex){case"\u7537":v="male";break;case"\u5973":v="female";break;default:v="";break}return v});const u=computed(()=>{var S;const v=(S=o.value)!=null?S:{};let g="",$="",y;const{vip:B}=v;y=(B.type===1||B.type===2)&&B.status===1;const{type:C}=v==null?void 0:v.official;return C===0?g="person":C===1&&(g="organization"),g==="organization"?$="business":g==="person"?$="personal":y&&B.avatar_subscript===2?$="small-vip":y&&B.avatar_subscript===1&&($="big-vip"),$}),d=computed(()=>{var v,g,$;return(($=(g=(v=o.value)==null?void 0:v.vip)==null?void 0:g.label)==null?void 0:$.img_label_uri_hans_static)||""}),_=computed(()=>{var g;const v=(g=o.value)==null?void 0:g.vip;return(v==null?void 0:v.type)!==0&&(v==null?void 0:v.status)===1}),f=computed(()=>{var v,g;return(g=(v=o.value)==null?void 0:v.level)!=null?g:0}),m=computed(()=>{var v,g,$;return _.value?($=(g=(v=o.value)==null?void 0:v.vip)==null?void 0:g.label)==null?void 0:$.text:""}),p=()=>{var v,g,$;if((v=o.value)!=null&&v.face){const y=new UserAvatar$1({}),B=96;y.append({avatarWidth:B,avatarHeight:B,avatar:(g=o.value)==null?void 0:g.face,renderWidth:B,isNFT:($=o.value)==null?void 0:$.face_nft,iconType:u.value},c.value,"avatar")}};return watch(()=>{var v;return(v=o.value)==null?void 0:v.face},async v=>{!v||(await nextTick(),p())},{immediate:!0}),onActivated(p),(v,g)=>{var $,y,B,C,S,E,k,b;return openBlock(),createElementBlock("div",_hoisted_1$r,[createBaseVNode("div",_hoisted_2$p,[createBaseVNode("div",_hoisted_3$o,[createBaseVNode("div",{ref_key:"avatarRef",ref:c},null,512)]),createBaseVNode("div",_hoisted_4$m,[createBaseVNode("div",_hoisted_5$g,[createBaseVNode("div",_hoisted_6$g,toDisplayString(($=unref(o))==null?void 0:$.name),1),unref(s)?(openBlock(),createElementBlock("div",_hoisted_7$e,[createBaseVNode("div",_hoisted_8$d,[createVNode(UserLevel,{level:unref(f),isSenior:!!unref(l).is_senior_member,class:"level"},null,8,["level","isSenior"]),(B=(y=unref(l))==null?void 0:y.level_info)!=null&&B.current_level?(openBlock(),createElementBlock("div",_hoisted_9$b,[createTextVNode(toDisplayString(unref(l).level_info.current_exp),1),createBaseVNode("span",null,"/"+toDisplayString(unref(l).level_info.next_exp),1)])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_10$a,[createBaseVNode("div",{class:"rate",style:normalizeStyle("width:"+unref(r))},null,4)])])):unref(f)&&unref(i)?(openBlock(),createBlock(UserLevel,{key:1,level:unref(f),isSenior:!!((C=unref(o))!=null&&C.is_senior_member),class:"level_visitor"},null,8,["level","isSenior"])):createCommentVNode("",!0),unref(d)?(openBlock(),createElementBlock("div",_hoisted_11$a,[createBaseVNode("img",{src:unref(d),alt:""},null,8,_hoisted_12$9)])):unref(_)?(openBlock(),createElementBlock("div",{key:3,style:normalizeStyle({color:(E=(S=unref(o))==null?void 0:S.vip)!=null&&E.label?unref(o).vip.label.text_color:"#ffffff",backgroundColor:(b=(k=unref(o))==null?void 0:k.vip)!=null&&b.label?unref(o).vip.label.bg_color:""}),class:"h-vipType flex_shrink_0"},toDisplayString(unref(m)),5)):createCommentVNode("",!0)]),createVNode(unref(SpaceDescription))])])])}}});var SpaceAuthor=_export_sfc(_sfc_main$k,[["__scopeId","data-v-10954ee4"]]),SpaceTabs_vue_vue_type_style_index_0_lang="";const _hoisted_1$q={key:0,class:"space_tabs_search"},_sfc_main$j=defineComponent({__name:"SpaceTabs",props:{activeKey:{type:Number,required:!0},tabs:{type:Array,required:!0},sticky:{type:Boolean,default:!1},headerTabs:{type:Boolean,default:!1}},emits:["update:activeKey"],setup(a,{emit:o}){const s=a,i={0:{name:"\u52A8\u6001",supportSearch:!1},1:{name:"\u6295\u7A3F",supportSearch:!0,placeholder:"\u641C\u7D22\u6295\u7A3F\u89C6\u9891"},2:{name:"\u5408\u96C6\u548C\u5217\u8868",supportSearch:!1}},l=ref(null),c=ref(""),r=computed(()=>{var f;return((f=i[s.activeKey])==null?void 0:f.supportSearch)||!1}),u=computed(()=>{var f;return((f=i[s.activeKey])==null?void 0:f.placeholder)||"\u641C\u7D22"}),d=f=>{o("update:activeKey",f)},_=f=>{c.value=f,searchEvents.emit("confirmSearch",f)};return watch(()=>s.activeKey,()=>{var f;(f=l.value)==null||f.clearSearchKeyWord()}),onMounted(()=>{searchEvents.on("clearSearchKeyWord",()=>{var f;(f=l.value)==null||f.clearSearchKeyWord()})}),(f,m)=>{const p=resolveComponent("v-tab-item"),v=resolveComponent("v-tabs");return openBlock(),createElementBlock("div",{class:normalizeClass(["space_tabs",{mx_40:!a.headerTabs,pl_md:a.headerTabs}])},[createVNode(v,{autoAdjustment:"","active-key":s.activeKey,"slide-to-hover":!1,"active-pink":!0,"tabs-gutter":32,"slider-width":18,noPaddingStart:"",onTabChange:d},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.tabs,g=>(openBlock(),createBlock(p,{key:g.key,tab:g.name},null,8,["tab"]))),128))]),_:1},8,["active-key"]),unref(r)?(openBlock(),createElementBlock("div",_hoisted_1$q,[createVNode(_sfc_main$R,{ref_key:"searchBox",ref:l,searchPlaceholder:unref(u),isSpacePage:!0,onConfirmSearch:_},null,8,["searchPlaceholder"])])):createCommentVNode("",!0)],2)}}}),_hoisted_1$p={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},_hoisted_2$o=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.251 8.75v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 1 0 0 1.5h4.5Z",fill:"#F69"},null,-1),_hoisted_3$n=[_hoisted_2$o];function render$6(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$p,_hoisted_3$n)}var VdFollow={render:render$6},SpaceStickyHeader_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$1=a=>(pushScopeId("data-v-1fc0d018"),a=a(),popScopeId(),a),_hoisted_1$o={class:"space_sticky_header"},_hoisted_2$n=_withScopeId$1(()=>createBaseVNode("div",{class:"space_sticky_header--dragshim"},null,-1)),_hoisted_3$m={key:0,class:"p_center no_drag search-drag-bg"},_hoisted_4$l=["src"],_hoisted_5$f={class:"name"},_hoisted_6$f={key:0,class:"p_center no_drag search-drag-bg"},_hoisted_7$d=["src"],_hoisted_8$c={class:"follow_text"},_sfc_main$i=defineComponent({__name:"SpaceStickyHeader",props:{followed:{type:Boolean,required:!0},followText:{type:String,required:!0}},emits:["follow"],setup(a,{emit:o}){const s=a,i=ref(40),l=ref(null),c=inject("isOwner"),r=inject("account"),{isSearchActive:u}=storeToRefs(useSearchStore()),d=computed(()=>!(s.followed||c.value));return watch(d,async()=>{await nextTick(),i.value=Math.min(l.value.offsetWidth,176)/2+20},{immediate:!0}),(_,f)=>(openBlock(),createElementBlock("div",_hoisted_1$o,[_hoisted_2$n,unref(d)?(openBlock(),createElementBlock("div",{key:1,class:"follow_btn p_relative",onClick:f[0]||(f[0]=m=>o("follow",!0)),ref_key:"center",ref:l},[unref(u)?(openBlock(),createElementBlock("div",_hoisted_6$f)):createCommentVNode("",!0),unref(r).face?(openBlock(),createElementBlock("img",{key:1,src:unref(r).face,class:"avatar mr_10"},null,8,_hoisted_7$d)):createCommentVNode("",!0),a.followed?createCommentVNode("",!0):(openBlock(),createBlock(unref(VdFollow),{key:2,class:"mr_2 brand_pink"})),createBaseVNode("span",_hoisted_8$c,toDisplayString(s.followText),1)],512)):(openBlock(),createElementBlock("div",{key:0,class:"up flex_center p_relative",ref_key:"center",ref:l},[unref(u)?(openBlock(),createElementBlock("div",_hoisted_3$m)):createCommentVNode("",!0),unref(r).face?(openBlock(),createElementBlock("img",{key:1,src:unref(r).face,class:"avatar"},null,8,_hoisted_4$l)):createCommentVNode("",!0),createBaseVNode("span",_hoisted_5$f,toDisplayString(unref(r).name),1)],512)),createBaseVNode("div",{class:"space_sticky_header--shim",style:normalizeStyle({minWidth:i.value+"px"})},null,4)]))}});var SpaceStickyHeader=_export_sfc(_sfc_main$i,[["__scopeId","data-v-1fc0d018"]]),SpaceDynamic_vue_vue_type_style_index_0_lang="";const _hoisted_1$n={class:"space_dynamic min_h_100 flex_col"},_sfc_main$h=defineComponent({__name:"SpaceDynamic",props:{active:{type:Boolean,default:!1},mid:{type:[Number,String]}},setup(a){const o=a,s=SPM_PV.spaceDynamic;provide("pageSpmId",s),provide("dynamicScene","space");const i=useCurrentInstanceActive(),l=ref(null),c=ref(null),r=()=>{var f;(f=l.value)==null||f.refresh()};watch(()=>o.mid,async()=>{var f;await nextTick(),(f=c.value)==null||f.close()});const{initEnterTime:u,reportPv:d,logOpenAppPage:_}=useReportPv({spm_id:s,isKeepAlive:!1,pageName:"SpaceDynamic"});return onActivated(()=>{u(),_()}),onDeactivated(()=>d()),onMounted(()=>{r(),spaceEvents.on("refreshContent",r)}),onBeforeUnmount(()=>{spaceEvents.off("refreshContent",r)}),(f,m)=>(openBlock(),createElementBlock("div",_hoisted_1$n,[createVNode(_sfc_main$11,{ref_key:"dynamicFeedFragment",ref:l,"class-key":"space",scene:"SPACE",active:unref(i),"disable-scroll":!0,"host-mid":a.mid},null,8,["active","host-mid"]),createVNode(_sfc_main$1W,{ref_key:"dynamicAllSupplements",ref:c,active:unref(i),"details-viewer-fixed":""},null,8,["active"])]))}});var SpaceVideos_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId=a=>(pushScopeId("data-v-618f8920"),a=a(),popScopeId(),a),_hoisted_1$m={class:"space_videos px_40 pb_x40"},_hoisted_2$m={key:0,class:"space-videos-header"},_hoisted_3$l={class:"tabs"},_hoisted_4$k=["onClick"],_hoisted_5$e={class:"control-area"},_hoisted_6$e=_withScopeId(()=>createBaseVNode("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M9.3315 5.69705C10.2228 6.359 10.2228 7.641 9.33151 8.30294L2.80945 13.1465C1.66772 13.9945 0 13.221 0 11.8436V2.1564C0 0.77899 1.66772 0.00554585 2.80945 0.853451L9.3315 5.69705Z",fill:"currentColor"})],-1)),_hoisted_7$c=_withScopeId(()=>createBaseVNode("span",null,"\u64AD\u653E\u5168\u90E8",-1)),_hoisted_8$b={key:5,style:{"padding-bottom":"1px"}},_hoisted_9$a={class:"row gutter_md"},_hoisted_10$9={key:0,class:"space-charge-tag p_absolute t_sm r_lg bd_radius_sm z_index_1 bg_brand_pink text_white fs_5"},_hoisted_11$9=createTextVNode("\u5145\u7535\u4E13\u5C5E "),_hoisted_12$8={key:0,class:"flex_center mt_x50 mb_x50"},_sfc_main$g=defineComponent({__name:"SpaceVideos",emits:["handleScrollToTop"],setup(a,{emit:o}){const s=inject("account"),i="main.space-contribution.0.0",l=[{name:"\u6700\u65B0\u53D1\u5E03",key:"pubdate"},{name:"\u6700\u591A\u64AD\u653E",key:"click"}],c=ref(l[0].key),r=ref([]),u=ref(!1),d=ref(!1),_=ref(0),f=ref(1),m=ref(20),p=ref(""),v=ref(!1),g=computed(()=>!!p.value),$=async x=>{var T,I;try{u.value=!0,d.value=!1;const R={mid:(T=s.value)==null?void 0:T.mid,pn:f.value,ps:m.value,order:c.value};x&&(R.keyword=x);const N=await getSearchVideosNum(R);_.value=((I=N.page)==null?void 0:I.count)||0,r.value=N.list.map(w=>({...w,spmInfo:{spmid:`${i}.pv`}})),v.value=!!x}catch{r.value=[],d.value=!0}finally{u.value=!1}},y=x=>{_.value=0,f.value=x,r.value=[]},B=()=>{p.value="",searchEvents.emit("clearSearchKeyWord"),y(1),$()},C=()=>{p.value="",searchEvents.emit("clearSearchKeyWord"),y(f.value),$()},S=()=>{setTimeout(()=>{events.emit("requestScrollToTop"),$(p.value)},200)},E=x=>{c.value=x,B()},k=()=>{var I,R;const x={pubdate:0,click:1},T=((I=s.value)==null?void 0:I.name)||"";openPlayerWindow({type:"ugc",fromSpmid:`${i}.pv`,mediaList:{bizType:1,bizId:String(((R=s.value)==null?void 0:R.mid)||""),bizTitle:`${T?T+"\u7684":""}\u6295\u7A3F\u89C6\u9891`,bizSortType:x[c.value]||0}})},{initEnterTime:b,reportPv:V,logOpenAppPage:A}=useReportPv({spm_id:i,isKeepAlive:!1,pageName:"SpaceVideo"});return watch(c,()=>{p.value="",searchEvents.emit("clearSearchKeyWord")}),watch(()=>{var x;return(x=s.value)==null?void 0:x.mid},B),onActivated(()=>{B(),b(),A()}),onDeactivated(()=>V()),onMounted(()=>{B(),spaceEvents.on("refreshContent",C),searchEvents.on("confirmSearch",x=>{o("handleScrollToTop"),p.value=x,y(1),$(x)}),searchEvents.on("clearSearchKeyWord",()=>{p.value=""})}),onBeforeUnmount(()=>{spaceEvents.off("refreshContent",C)}),(x,T)=>{const I=resolveComponent("v-button"),R=resolveComponent("bili-video-card"),N=resolveComponent("v-pagenation");return openBlock(),createElementBlock("div",_hoisted_1$m,[unref(g)?(openBlock(),createBlock(SearchResultCount,{key:1,count:_.value,unit:"\u89C6\u9891"},null,8,["count"])):(openBlock(),createElementBlock("div",_hoisted_2$m,[createBaseVNode("div",_hoisted_3$l,[(openBlock(),createElementBlock(Fragment,null,renderList(l,w=>createBaseVNode("div",{key:w.key,onClick:D=>E(w.key),class:normalizeClass(["tab",{active:c.value===w.key}])},toDisplayString(w.name),11,_hoisted_4$k)),64))]),createBaseVNode("div",_hoisted_5$e,[createVNode(I,{disabled:v.value||r.value.length<=0,class:"play-all",type:"pink",onClick:k},{default:withCtx(()=>[_hoisted_6$e,_hoisted_7$c]),_:1},8,["disabled"])])])),!d.value&&!u.value&&!r.value.length?(openBlock(),createBlock(SearchNoData,{key:2,isSmall:""})):d.value&&!u.value&&!r.value.length?(openBlock(),createBlock(SearchNetError,{key:3,isSmall:""})):u.value&&!r.value.length?(openBlock(),createBlock(_sfc_main$1Q,{key:4,showLoadingAnimation:"",itemNum:8})):(openBlock(),createElementBlock("div",_hoisted_8$b,[createBaseVNode("div",_hoisted_9$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,(w,D)=>(openBlock(),createElementBlock("div",{key:w.bvid,class:"col_3 col_sm_1_5 mb_xxl p_relative"},[(openBlock(),createBlock(R,{isRcmd:"",showAvatar:!1,key:`${w.bvid}-${D}`,info:w,"img-lazy":"eager","disable-frame":"","disable-scale":"",iid:"pc_app_space_videos"},null,8,["info"])),w.is_charging_arc?(openBlock(),createElementBlock("div",_hoisted_10$9,[createVNode(unref(IcoCharge)),_hoisted_11$9])):createCommentVNode("",!0)]))),128))]),_.value>m.value?(openBlock(),createElementBlock("div",_hoisted_12$8,[createVNode(N,{theme:"pink",pageNum:f.value,"onUpdate:pageNum":T[0]||(T[0]=w=>f.value=w),"page-size":m.value,total:_.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:S},null,8,["pageNum","page-size","total"])])):createCommentVNode("",!0)]))])}}});var SpaceVideos=_export_sfc(_sfc_main$g,[["__scopeId","data-v-618f8920"]]),SeasonCard_vue_vue_type_style_index_0_lang="";const _hoisted_1$l={class:"season_card"},_hoisted_2$l={class:"season_card--img-meta p_absolute b_0 w_100 flex_between px_sm pt_xs"},_hoisted_3$k={class:"b_text text1 fs_sm6 co_light"},_hoisted_4$j={class:"b_text text1 fs_sm6 co_light"},_hoisted_5$d={class:"season_card--info"},_hoisted_6$d={class:"b_text fs_sm4 font_medium"},_hoisted_7$b={class:"b_text text3"},_sfc_main$f=defineComponent({__name:"SeasonCard",props:{data:{type:Object,default:()=>({})},mid:{type:Number,default:null}},setup(a){const o=a,s=useRouter(),i=computed(()=>{let c="";return o.data.type==="season"?o.data.meta.ptime&&(c=formatTime(o.data.meta.ptime*1e3)):o.data.meta.mtime&&(c=formatTime(o.data.meta.mtime*1e3)),c||"--"}),l=()=>{var _;if(!o.mid||!((_=o.data)!=null&&_.meta))return;const{season_id:c,series_id:r,name:u,cover:d}=o.data.meta;s.push({name:"SpaceSeasonDetails",query:{mid:o.mid,type:o.data.type,season_id:c,series_id:r,name:u,cover:d}})};return(c,r)=>{var u,d,_;return openBlock(),createElementBlock("div",_hoisted_1$l,[createBaseVNode("div",{class:"season_card--img p_relative cs_pointer",onClick:l},[createVNode(_sfc_main$K,{src:((u=a.data.meta)==null?void 0:u.cover)||""},null,8,["src"]),createBaseVNode("div",_hoisted_2$l,[createBaseVNode("p",_hoisted_3$k,toDisplayString(((d=a.data.meta)==null?void 0:d.total)||0)+"\u4E2A\u5185\u5BB9",1),createBaseVNode("p",_hoisted_4$j,toDisplayString(a.data.type==="season"?"\u5408\u96C6":""),1)])]),createBaseVNode("div",_hoisted_5$d,[createBaseVNode("h3",_hoisted_6$d,[createBaseVNode("span",{class:"cs_pointer hover_pink ts_all_fast text_ellipsis",onClick:l},toDisplayString(((_=a.data.meta)==null?void 0:_.name)||"--"),1)]),createBaseVNode("p",_hoisted_7$b,toDisplayString(unref(i)),1)])])}}});var SeasonCardSkeleton_vue_vue_type_style_index_0_lang="";const _hoisted_1$k={class:"season_card_skeleton"},_hoisted_2$k=createBaseVNode("div",{class:"season_card_skeleton--info"},[createBaseVNode("h3",{class:"b_text fs_sm4 font_medium"},"\xA0"),createBaseVNode("p",{class:"b_text text3"},"\xA0")],-1),_sfc_main$e=defineComponent({__name:"SeasonCardSkeleton",setup(a){return(o,s)=>(openBlock(),createElementBlock("div",_hoisted_1$k,[createVNode(FolderMediaCardSkeleton),_hoisted_2$k]))}}),_hoisted_1$j={class:"space_seasons mt_xxl i_wrapper"},_hoisted_2$j={key:2,class:"row gutter_md"},_hoisted_3$j={key:3,class:"row gutter_md"},_hoisted_4$i={key:4,class:"flex_center mt_x50 mb_x50"},_sfc_main$d=defineComponent({__name:"SpaceSeasons",setup(a){const o="main.space-seasons-series.0.0.pv",s=inject("account"),i=ref(1),l=ref(20),c=ref(0),r=ref([]),u=ref(!1),d=ref(!1),_=()=>{var y;u.value||!((y=s.value)!=null&&y.mid)||(u.value=!0,d.value=!1,getSeasonsAndSeries(s.value.mid,i.value,l.value).then(({items_lists:B})=>{var E;c.value=((E=B==null?void 0:B.page)==null?void 0:E.total)||0;const C=((B==null?void 0:B.seasons_list)||[]).map(k=>(k.type="season",k)),S=((B==null?void 0:B.series_list)||[]).map(k=>(k.type="series",k));r.value=[...C,...S]}).catch(B=>{console.error(B),d.value=!0}).finally(()=>{u.value=!1}))},f=()=>{i.value=1,r.value=[],u.value=!1,events.emit("requestScrollToTop"),_()},m=()=>{r.value=[],events.emit("requestScrollToTop"),_()},p=()=>{setTimeout(()=>m(),200)};watch(()=>{var y;return(y=s.value)==null?void 0:y.mid},()=>f());const{initEnterTime:v,reportPv:g,logOpenAppPage:$}=useReportPv({spm_id:o,isKeepAlive:!1,pageName:"SpaceVideo"});return onActivated(()=>{f(),v(),$()}),onDeactivated(()=>g()),onMounted(()=>{f(),spaceEvents.on("refreshContent",m)}),onBeforeUnmount(()=>{spaceEvents.off("refreshContent",m)}),(y,B)=>{const C=resolveComponent("v-pagenation"),S=resolveComponent("Scroller");return openBlock(),createElementBlock("div",_hoisted_1$j,[createVNode(S,{class:"space_seasons--scroller page_scroller ov_visible"},{default:withCtx(()=>[!d.value&&!u.value&&!r.value.length?(openBlock(),createBlock(SearchNoData,{key:0,isSmall:""})):d.value&&!u.value&&!r.value.length?(openBlock(),createBlock(SearchNetError,{key:1,isSmall:""})):u.value&&!r.value.length?(openBlock(),createElementBlock("div",_hoisted_2$j,[(openBlock(),createElementBlock(Fragment,null,renderList(20,E=>createBaseVNode("div",{class:"col_3 col_sm_1_5 mb_xxl",key:E},[createVNode(_sfc_main$e)])),64))])):(openBlock(),createElementBlock("div",_hoisted_3$j,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,E=>{var k;return openBlock(),createElementBlock("div",{class:"col_3 col_sm_1_5 mb_xxl",key:E.aid},[createVNode(_sfc_main$f,{data:E,mid:(k=unref(s))==null?void 0:k.mid},null,8,["data","mid"])])}),128))])),c.value>l.value?(openBlock(),createElementBlock("div",_hoisted_4$i,[createVNode(C,{theme:"pink",pageNum:i.value,"onUpdate:pageNum":B[0]||(B[0]=E=>i.value=E),"page-size":l.value,total:c.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:p},null,8,["pageNum","page-size","total"])])):createCommentVNode("",!0)]),_:1})])}}}),textMap={0:"\u5173\u6CE8",1:"\u5173\u6CE8",2:"\u5DF2\u5173\u6CE8",3:"\u5DF2\u4E92\u7C89"},useFollow=a=>{const{userInfo:o}=storeToRefs(useUserInfoStore()),s=ref(!1),i=ref(!0),l=ref(!1),c=ref(0),r=ref(!1),u=f=>{if(f&&s.value)return;if(!o.value.isLogin)return requestLogin("useFollow.follow");let m=1;s.value&&(m=c.value===1?4:2),Upinfo.followChange({fid:Number(a.value),act:m,re_src:14}).then(()=>{m===1?(s.value=!0,c.value=2,toastAsync({content:"\u5173\u6CE8\u6210\u529F"})):(s.value=!1,toastAsync({content:"\u53D6\u6D88\u5173\u6CE8\u6210\u529F"}))}).catch(p=>{toastAsync({content:p.message||"\u7F51\u7EDC\u5F02\u5E38"})})};function d(f){!f||Upinfo.getRelation(Number(f)).then(m=>{var g,$;if(m.code!==0)return;const p=((g=m.data)==null?void 0:g.relation)||{},v=(($=m.data)==null?void 0:$.be_relation)||{};i.value=!1,p.attribute===1||p.attribute===2||p.attribute===6?(s.value=!0,c.value=p.attribute):s.value=!1,r.value=p.attribute>=128,l.value=v.attribute===2||v.attribute===6})}const _=computed(()=>{const f=s.value?2:0,m=l.value?1:0;return textMap[f+m]});return watch(a,()=>{o.value.isLogin?(i.value=!0,d(a.value)):i.value=!1},{immediate:!0}),watch(o,()=>{o.value.isLogin?d(a.value):s.value=!1}),{followed:s,followText:_,follow:u,loading:i,inBlackList:r}};var Space_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$i={class:"wrapper"},_hoisted_2$i={class:"app_space--header"},_hoisted_3$i={class:"app_space--nav mb_20 pl_40 pr_48"},_hoisted_4$h={class:"app_space--content"},_hoisted_5$c={key:0,class:"app_space--content-tabs"},_hoisted_6$c={class:"i_wrapper"},_sfc_main$c=defineComponent({__name:"Space",setup(a){const{userInfo:o}=useUserInfoStore(),s=ref(),i=mitt(),l=useRoute(),c=[{name:"\u52A8\u6001",key:0,component:_sfc_main$h},{name:"\u6295\u7A3F",key:1,component:SpaceVideos},{name:"\u5408\u96C6\u548C\u5217\u8868",key:2,component:_sfc_main$d}],r=ref(),u=ref(),d=ref(c[0].key),_=ref(!1),f=computed(()=>l.query.mid||String(o.mid)),{followed:m,follow:p,followText:v,inBlackList:g}=useFollow(f),{isOnHistoryGoBack:$}=storeToRefs(useConfigStore()),y=ref(!1);let B=f.value;useRoutePageFadeIn(".app_space"),onActivated(()=>{!$.value&&f.value&&f.value!==String(o.mid)&&(!B||f.value!==B)&&(S.value=void 0),B=f.value;const w=l.query.tab;w&&(d.value=parseInt(w)||0)});const{spaceFromMessage:C}=storeToRefs(useMessageStore());onDeactivated(()=>{events.emit("leaveGallery"),setTimeout(()=>C.value=!1,500)});const{data:S,run:E,loading:k,error:b}=useRequest(()=>getAccountInfo({mid:String(f.value)}),{refreshDeps:[f],ready:computed(()=>!!f.value)}),{data:V}=useRequest(()=>getSettings({mid:f.value}),{ready:computed(()=>!!f.value),refreshDeps:[f]}),{data:A}=useRequest(()=>getRelationNumbers({vmid:f.value}),{ready:computed(()=>!!f.value),refreshDeps:[f]}),{data:x}=useRequest(()=>getUpStat({mid:f.value}),{ready:computed(()=>!!f.value),refreshDeps:[f]}),T=computed(()=>!l.query.mid||l.query.mid===String(o==null?void 0:o.mid)?"owner":"visitor"),I=useCurrentInstanceActive();useIntersectionObserver(r,([{isIntersecting:w}])=>{!I.value||(_.value=!w)}),useIntersectionObserver(u,([{isIntersecting:w}])=>{y.value=!w});const R=()=>i.emit("loadMore");provide("galleryContainer",".app_space"),provide("account",S),provide("settings",V),provide("relations",A),provide("upStat",x),provide("emitter",i),provide("isOwner",computed(()=>T.value==="owner")),provide("isVisitor",computed(()=>T.value==="visitor")),useRefresh("Space",()=>{E(),spaceEvents.emit("refreshContent"),searchEvents.emit("clearSearchKeyWord")}),useScrollToTop(".app_space");const N=()=>{_.value=!1,scrollToTop({element:s.value.$el,speed:3})};return watch(d,()=>N()),watch(S,()=>N()),(w,D)=>{const L=resolveComponent("HeaderSlot"),P=resolveComponent("VImg"),j=resolveComponent("Scroller");return openBlock(),createElementBlock(Fragment,null,[_.value?(openBlock(),createBlock(L,{key:0,class:"space_header_slot"},{default:withCtx(()=>[createVNode(SpaceStickyHeader,{followed:unref(m),followText:unref(v),onFollow:unref(p)},null,8,["followed","followText","onFollow"])]),_:1})):createCommentVNode("",!0),createVNode(j,{class:"app_space page_scroller",onLoadMore:R,ref_key:"appSpace",ref:s},{default:withCtx(()=>{var O;return[createBaseVNode("div",_hoisted_1$i,[!unref(k)&&!unref(S)&&unref(b)?(openBlock(),createBlock(SearchNetError,{key:0})):!unref(k)&&!unref(S)&&!unref(b)?(openBlock(),createBlock(SearchNoData,{key:1})):unref(k)&&!unref(S)&&!unref(b)?(openBlock(),createBlock(SpaceSkeleton,{key:2})):unref(b)?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:3},[createBaseVNode("div",_hoisted_2$i,[createVNode(P,{class:"top_photo",src:(O=unref(S))==null?void 0:O.top_photo,width:2560,height:400,loading:"lazy",rule:"100q_1o","bfs-style":"pc-space-header-pic"},null,8,["src"]),createBaseVNode("div",_hoisted_3$i,[createVNode(SpaceAuthor,{class:"mr_65"}),createVNode(SpaceStatistics,{followed:unref(m),followText:unref(v),onFollow:unref(p)},null,8,["followed","followText","onFollow"])]),createBaseVNode("div",{ref_key:"tabsTopRef",ref:u},null,512),createBaseVNode("div",{ref_key:"tabsRef",ref:r,class:"pt_4"},[createVNode(_sfc_main$j,{"active-key":d.value,"onUpdate:active-key":D[0]||(D[0]=F=>d.value=F),tabs:c},null,8,["active-key"])],512)]),createBaseVNode("div",_hoisted_4$h,[y.value?(openBlock(),createElementBlock("div",_hoisted_5$c,[createBaseVNode("div",_hoisted_6$c,[createVNode(_sfc_main$j,{class:"space-sticky-tabs","active-key":d.value,"onUpdate:active-key":D[1]||(D[1]=F=>d.value=F),tabs:c},null,8,["active-key"])])])):createCommentVNode("",!0),unref(g)?(openBlock(),createBlock(SearchNoData,{key:1})):(openBlock(),createBlock(resolveDynamicComponent(c[d.value].component),{key:2,active:_.value,mid:unref(f),onHandleScrollToTop:N},null,40,["active","mid"]))])],64))])]}),_:1},512)],64)}}});var Space=_export_sfc(_sfc_main$c,[["__scopeId","data-v-1f95929a"]]),SeasonDetails_vue_vue_type_style_index_0_lang="";const _hoisted_1$h={class:"season_details h_100"},_hoisted_2$h={class:"i_wrapper mt_xxl"},_hoisted_3$h={class:"season_details--header flex_start items_start"},_hoisted_4$g={class:"season_details--header-info"},_hoisted_5$b={class:"b_text mt_xs text_ellipsis"},_hoisted_6$b={class:"b_text text3 fs_5"},_hoisted_7$a=createTextVNode(" \u64AD\u653E\u5168\u90E8 "),_hoisted_8$a={class:"season_details--content mt_xxl"},_hoisted_9$9={key:2,class:"row gutter_md"},_hoisted_10$8={key:3,class:"row gutter_md"},_hoisted_11$8={key:0,class:"flex_center mt_x50 mb_x50"},_sfc_main$b=defineComponent({__name:"SeasonDetails",setup(a){const o=ref({}),s=ref([]),i=ref(1),l=ref(20),c=ref(0),r=ref(!1),u=ref(!1),d=useRoute(),_=useRouter(),f=computed(()=>{const{mid:B,type:C,season_id:S,series_id:E,name:k,cover:b}=d.query;return{mid:B,type:C,season_id:S,series_id:E,name:k,cover:b}}),m=computed(()=>{let B="";return f.value.type==="season"?o.value.ptime&&(B=formatTime(o.value.ptime*1e3)):o.value.mtime&&(B=formatTime(o.value.mtime*1e3)),B||"--"});useScrollToTop(".season_details--scroller");const p=()=>{if(r.value)return;r.value=!0,u.value=!1;const{mid:B,type:C,season_id:S,series_id:E}=f.value;C==="season"?getSeasonDetails({mid:B,season_id:S,reverse:!1,pn:i.value,ps:l.value}).then(k=>{var b;c.value=((b=k.page)==null?void 0:b.total)||0,o.value=k.meta||{},s.value=(k.archives||[]).map(V=>transformSpaceSeasonToVideoInfo(V)),r.value=!1}).catch(k=>{console.error(k),r.value=!1,u.value=!0}):Promise.all([getSeriesDetails(E),getSeriesCollection({mid:B,series_id:E,sort:"desc",pn:i.value,ps:l.value})]).then(([k,b])=>{var V;c.value=((V=b.page)==null?void 0:V.total)||0,o.value=k.meta||{},s.value=(b.archives||[]).map(A=>transformSpaceSeasonToVideoInfo(A)),r.value=!1}).catch(k=>{console.error(k),r.value=!1,u.value=!0})},v=()=>{i.value=1,s.value=[],events.emit("requestScrollToTop"),p()},g=()=>{s.value=[],events.emit("requestScrollToTop"),p()},$=()=>{setTimeout(()=>g(),200)},y=()=>{const{type:B}=f.value;openPlayerWindow({type:"ugc",fromSpmid:"main.space-seasons-series.0.0.pv",mediaList:{bizType:B==="season"?8:5,bizId:B==="season"?f.value.season_id:f.value.series_id,bizTitle:f.value.name}})};return onActivated(()=>{const{mid:B,type:C}=d.query;if(!B||!C){_.replace({name:"HomeRecommends"});return}v()}),(B,C)=>{const S=resolveComponent("v-button"),E=resolveComponent("bili-video-card"),k=resolveComponent("v-pagenation");return openBlock(),createElementBlock("div",_hoisted_1$h,[createVNode(_sfc_main$2K,{class:"season_details--scroller page_scroller h_100"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$h,[createBaseVNode("div",_hoisted_3$h,[unref(f).cover?(openBlock(),createBlock(_sfc_main$K,{key:1,class:"season_details--header-card mr_sm",src:unref(f).cover},null,8,["src"])):(openBlock(),createBlock(FolderMediaCardSkeleton,{key:0,class:"season_details--header-card mr_sm"})),createBaseVNode("div",_hoisted_4$g,[createBaseVNode("h4",_hoisted_5$b,toDisplayString(o.value.name||"--"),1),createBaseVNode("p",_hoisted_6$b,toDisplayString(unref(f).type==="season"?"\u5408\u96C6 \xB7 ":"")+toDisplayString(o.value.total||0)+"\u4E2A\u89C6\u9891 \xB7 "+toDisplayString(unref(m))+"\u66F4\u65B0 ",1),createVNode(S,{class:"mt_md",type:"pink",disabled:!s.value.length,onClick:y},{default:withCtx(()=>[createVNode(unref(PlayAllIco),{class:"mt_n2"}),_hoisted_7$a]),_:1},8,["disabled"])])]),createBaseVNode("div",_hoisted_8$a,[!u.value&&!r.value&&!s.value.length?(openBlock(),createBlock(SearchNoData,{key:0})):u.value&&!r.value&&!s.value.length?(openBlock(),createBlock(SearchNetError,{key:1})):r.value&&!s.value.length?(openBlock(),createElementBlock("div",_hoisted_9$9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.value,b=>(openBlock(),createElementBlock("div",{class:"col_3 col_sm_1_5 mb_xxl",key:b},[createVNode(E,{"img-lazy":"eager","disable-frame":"","disable-scale":"",skeleton:!0})]))),128))])):(openBlock(),createElementBlock("div",_hoisted_10$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,b=>(openBlock(),createElementBlock("div",{class:"col_3 col_sm_1_5 mb_xxl",key:b.aid},[createVNode(E,{info:b,"img-lazy":"eager","disable-frame":"","disable-scale":"",iid:"pc_app_space_seasons"},null,8,["info"])]))),128))]))]),c.value>l.value?(openBlock(),createElementBlock("div",_hoisted_11$8,[createVNode(k,{theme:"pink",pageNum:i.value,"onUpdate:pageNum":C[0]||(C[0]=b=>i.value=b),"page-size":l.value,total:c.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:$},null,8,["pageNum","page-size","total"])])):createCommentVNode("",!0)])]),_:1})])}}}),_hoisted_1$g={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$g=createBaseVNode("rect",{x:"2.857",y:"3.571",width:"14.286",height:"11.429",rx:"2.143",stroke:"currentColor","stroke-width":"1.429"},null,-1),_hoisted_3$g=createBaseVNode("path",{d:"M6.786 17.5h6.428",stroke:"currentColor","stroke-width":"1.429","stroke-linecap":"round"},null,-1),_hoisted_4$f=createBaseVNode("path",{d:"M5.143 6.686v5.1h.836V9.529h2.585v2.257H9.4v-5.1h-.836v2.128H5.98V6.686h-.836ZM10.402 6.686v5.1h1.865c.828 0 1.45-.229 1.878-.686.407-.436.614-1.057.614-1.864 0-.815-.207-1.436-.614-1.865-.428-.457-1.05-.685-1.878-.685h-1.865Zm.836.714h.872c.635 0 1.1.143 1.392.436.286.285.429.757.429 1.4 0 .628-.143 1.093-.429 1.393-.293.292-.757.442-1.393.442h-.87V7.4Z",fill:"currentColor"},null,-1),_hoisted_5$a=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.964 6.507h1.193v2.129h2.229V6.507h1.193v5.457H8.386V9.707H6.157v2.257H4.964V6.507Zm.357.357v4.743H5.8V9.35h2.943v2.257h.478V6.864h-.478v2.129H5.8V6.864h-.479Zm4.903-.357h2.043c.861 0 1.536.239 2.008.742.448.472.663 1.144.663 1.987 0 .837-.215 1.507-.662 1.986-.472.503-1.147.742-2.01.742h-2.042V6.507Zm.357.357v4.743h1.686c.795 0 1.363-.218 1.748-.63.367-.392.566-.964.566-1.741 0-.786-.2-1.357-.565-1.742h-.001c-.385-.411-.953-.63-1.748-.63H10.58Zm.479.357h1.05c.657 0 1.178.147 1.519.488.334.335.48.864.48 1.527 0 .651-.147 1.169-.477 1.516l-.003.003c-.34.34-.86.495-1.52.495h-1.05V7.221Zm.357.358v3.314h.693c.61 0 1.019-.144 1.265-.39.24-.252.377-.663.377-1.267 0-.623-.14-1.037-.376-1.274-.245-.245-.652-.383-1.266-.383h-.693Z",fill:"currentColor"},null,-1),_hoisted_6$a=[_hoisted_2$g,_hoisted_3$g,_hoisted_4$f,_hoisted_5$a];function render$5(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$g,_hoisted_6$a)}var IcoHd={render:render$5};const _hoisted_1$f={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$f=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 2.143a7.857 7.857 0 1 0 0 15.714 7.857 7.857 0 0 0 0-15.714Zm0 1.428A6.436 6.436 0 0 1 16.429 10 6.436 6.436 0 0 1 10 16.429 6.436 6.436 0 0 1 3.571 10 6.436 6.436 0 0 1 10 3.571Z",fill:"currentColor"},null,-1),_hoisted_3$f=createBaseVNode("path",{d:"M10 6.429V10M12.143 10H10",stroke:"currentColor","stroke-width":"1.429","stroke-linecap":"round"},null,-1),_hoisted_4$e=[_hoisted_2$f,_hoisted_3$f];function render$4(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$f,_hoisted_4$e)}var IcoHistory={render:render$4};const _hoisted_1$e={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$e=createBaseVNode("path",{d:"M9.286 8.571h4.285M5.714 8.571h.715M6.429 12.143h.714M10 12.143h4.286",stroke:"currentColor","stroke-width":"1.429","stroke-linecap":"round"},null,-1),_hoisted_3$e=createBaseVNode("rect",{x:"2.857",y:"4.286",width:"14.286",height:"12.143",rx:"2.143",stroke:"currentColor","stroke-width":"1.429"},null,-1),_hoisted_4$d=[_hoisted_2$e,_hoisted_3$e];function render$3(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$e,_hoisted_4$d)}var IcoDanmu={render:render$3};const _hoisted_1$d={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$d=createBaseVNode("rect",{x:"2.857",y:"4.286",width:"14.286",height:"12.143",rx:"2.143",stroke:"currentColor","stroke-width":"1.429"},null,-1),_hoisted_3$d=createBaseVNode("path",{d:"M11.514 9.756a.714.714 0 0 1 0 1.202l-2.04 1.312a.714.714 0 0 1-1.101-.6V9.044a.714.714 0 0 1 1.1-.6l2.041 1.311Z",stroke:"currentColor","stroke-width":"1.429"},null,-1),_hoisted_4$c=[_hoisted_2$d,_hoisted_3$d];function render$2(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$d,_hoisted_4$c)}var IcoHot={render:render$2};const _hoisted_1$c={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$c=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M23.228 12.133A1.061 1.061 0 0 0 23 10.979l-2.995-2.995a1.059 1.059 0 1 0-1.497 1.498l1.187 1.187h-9.423a1.058 1.058 0 1 0 0 2.118h9.423l-1.187 1.187a1.059 1.059 0 1 0 1.497 1.498L23 12.477c.097-.098.175-.214.228-.344Z",fill:"currentColor"},null,-1),_hoisted_3$c=createBaseVNode("path",{d:"M16.262 17.718a8.471 8.471 0 1 1 0-11.98",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),_hoisted_4$b=[_hoisted_2$c,_hoisted_3$c];function render$1(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$c,_hoisted_4$b)}var IcoLogout={render:render$1},AccountSettings_vue_vue_type_style_index_0_lang="";const _hoisted_1$b={key:0,class:"settings_content--item pt_sm login-item"},_hoisted_2$b=createBaseVNode("h4",{class:"b_text mt_0"},"\u767B\u5F55\u54D4\u54E9\u54D4\u54E9\u4F60\u53EF\u4EE5",-1),_hoisted_3$b={class:"flex_start mt_md"},_hoisted_4$a={class:"feature-item text2 mr_lg"},_hoisted_5$9=createTextVNode(" \u514D\u8D39\u770B\u9AD8\u6E05\u89C6\u9891"),_hoisted_6$9={class:"feature-item text2 mr_lg"},_hoisted_7$9=createTextVNode(" \u591A\u7AEF\u540C\u6B65\u64AD\u653E\u8BB0\u5F55"),_hoisted_8$9={class:"feature-item text2 mr_lg"},_hoisted_9$8=createTextVNode(" \u53D1\u8868\u5F39\u5E55/\u8BC4\u8BBA"),_hoisted_10$7={class:"feature-item text2"},_hoisted_11$7=createTextVNode(" \u70ED\u95E8\u756A\u5267\u5F71\u89C6\u770B\u4E0D\u505C"),_hoisted_12$7={class:"mt_md"},_hoisted_13$6=createTextVNode("\u7ACB\u5373\u767B\u5F55"),_hoisted_14$6={key:1,class:"settings_content--item login-item"},_hoisted_15$5={class:"flex_start items_stretch"},_hoisted_16$4={class:"user-info flex_col items_start w_100"},_hoisted_17$4={class:"user-info-name b_text text1 text_ellipsis"},_hoisted_18$4=createTextVNode(" \u9000\u51FA\u8D26\u53F7\u767B\u5F55 "),_sfc_main$a=defineComponent({__name:"AccountSettings",emits:["logout"],setup(a,{emit:o}){const{userInfo:s}=storeToRefs(useUserInfoStore());return(i,l)=>{var r;const c=resolveComponent("v-button");return unref(s).isLogin?(openBlock(),createElementBlock("div",_hoisted_14$6,[createBaseVNode("div",_hoisted_15$5,[createVNode(UserAvatar,{class:"flex_shrink_0 u_select_none","is-small":"",info:unref(s)},null,8,["info"]),createBaseVNode("div",_hoisted_16$4,[createBaseVNode("h3",_hoisted_17$4,[createTextVNode(toDisplayString(unref(s).uname)+" ",1),createVNode(UserLevel,{class:"ml_sm v_align_baseline",level:(r=unref(s).level_info)==null?void 0:r.current_level,isSenior:!!unref(s).is_senior_member},null,8,["level","isSenior"])]),createBaseVNode("a",{class:"brand_pink mt_sm cs_pointer u_select_none flex_start",onClick:l[1]||(l[1]=u=>o("logout"))},[createVNode(unref(IcoLogout),{class:"exit-icon mr_2"}),_hoisted_18$4])])])])):(openBlock(),createElementBlock("div",_hoisted_1$b,[_hoisted_2$b,createBaseVNode("div",_hoisted_3$b,[createBaseVNode("div",_hoisted_4$a,[createVNode(unref(IcoHd)),_hoisted_5$9]),createBaseVNode("div",_hoisted_6$9,[createVNode(unref(IcoHistory)),_hoisted_7$9]),createBaseVNode("div",_hoisted_8$9,[createVNode(unref(IcoDanmu)),_hoisted_9$8]),createBaseVNode("div",_hoisted_10$7,[createVNode(unref(IcoHot)),_hoisted_11$7])]),createBaseVNode("div",_hoisted_12$7,[createVNode(c,{class:"login-button",type:"pink",onClick:l[0]||(l[0]=u=>unref(requestLogin)("settings"))},{default:withCtx(()=>[_hoisted_13$6]),_:1})])]))}}});var CommonSettings_vue_vue_type_style_index_0_lang="";const _hoisted_1$a={class:"settings_content--item theme-item"},_hoisted_2$a=createBaseVNode("h4",{class:"b_text mt_0"},"\u5E38\u89C4\u8BBE\u7F6E",-1),_hoisted_3$a={class:"mt_md"},_hoisted_4$9=createBaseVNode("p",{class:"b_text text2"},"\u542F\u52A8\u65F6\u989C\u8272\u6A21\u5F0F\uFF1A\uFF08\u66F4\u6539\u6A21\u5F0F\u540E\u5C06\u4E8E\u4E0B\u6B21\u542F\u52A8\u65F6\u751F\u6548\uFF09",-1),_hoisted_5$8={class:"dropdown_select--content settings-dropdown"},_hoisted_6$8=["onClick"],_hoisted_7$8={class:"dropdown_select--option-title"},_hoisted_8$8={key:0,class:"mt_md"},_hoisted_9$7=createBaseVNode("p",{class:"b_text text2"},"\u5B57\u4F53\u9009\u62E9\uFF1A\uFF08\u82E5\u5B57\u4F53\u663E\u793A\u5F02\u5E38\uFF0C\u53EF\u5207\u6362\u4E3A\u9ED8\u8BA4\u5B57\u4F53\uFF09",-1),_hoisted_10$6={class:"dropdown_select--content settings-dropdown"},_hoisted_11$6=["onClick"],_hoisted_12$6={class:"dropdown_select--option-title"},_hoisted_13$5={class:"mt_sm"},_hoisted_14$5={key:1,class:"flex_start"},_hoisted_15$4={class:"flex_start"},_hoisted_16$3=createBaseVNode("span",{class:"text2"},"\uFF08\u5982\u679C\u754C\u9762\u663E\u793A\u5F02\u5E38\u6216\u6A21\u7CCA\u5C1D\u8BD5\u52FE\u9009\u6B64\u9879\uFF0C\u4E00\u822C\u4E0D\u63A8\u8350\u7981\u7528\uFF09",-1),_hoisted_17$3=createBaseVNode("p",{class:"b_text text2 mt_md"},"\u5173\u95ED\u4E3B\u754C\u9762\u65F6\uFF1A",-1),_hoisted_18$3=createTextVNode("\u6700\u5C0F\u5316\u5230\u7CFB\u7EDF\u6258\u76D8"),_hoisted_19$3=createBaseVNode("br",null,null,-1),_hoisted_20$3=createTextVNode("\u9000\u51FA\u54D4\u54E9\u54D4\u54E9\u7A0B\u5E8F"),_hoisted_21$3={class:"mt_sm"},_hoisted_22$2={class:"content-wrapper"},_hoisted_23$2=createBaseVNode("h4",{class:"b_text text1 text_center mt_md"},"GPU\u8BBE\u7F6E\u5C06\u5728\u91CD\u542F\u5E94\u7528\u540E\u751F\u6548",-1),_hoisted_24$2={class:"mt_xl text_center dialog_btns"},_hoisted_25$2=createTextVNode("\u7A0D\u540E\u518D\u8BF4"),_hoisted_26$2=createTextVNode("\u73B0\u5728\u91CD\u542F"),_sfc_main$9=defineComponent({__name:"CommonSettings",setup(a){const o=[{theme:"current",name:"\u81EA\u52A8\u8BB0\u5FC6"},{theme:"system",name:"\u8DDF\u968F\u7CFB\u7EDF"},{theme:"light",name:"\u6D45\u8272\u6A21\u5F0F"},{theme:"dark",name:"\u6DF1\u8272\u6A21\u5F0F"}],s=getAppStartUpTheme(),i=ref(o.find(k=>k.theme===s)),l=ref(!1),c=ref(!1),r=ref(callNativeSync("system/getFontsInfo")),u=ref(callNativeSync("config/getSystemFont")),d=ref(getIsGpuDisabled()),_=ref(getIsSelectedFirst()),f=ref(!1),m=ref(getIsAppOpenAtLogin()),{isForceRestart:p}=storeToRefs(useConfigStore()),{abTestInfo:v}=storeToRefs(useAbTestStore()),g=k=>{i.value.theme!==k.theme&&(i.value=k,setAppStartUpTheme(k.theme))},$=k=>{k.id!==u.value.id&&callNative("config/setSystemFont",k)};useIpcListener("config/systemFontChange",()=>u.value=callNativeSync("config/getSystemFont"));const y=()=>{f.value=!0,setIsDisableGpu(d.value)},B=()=>{p.value=!0,relaunchApp()},C=ref(getIsQuitByCloseMain());useIpcListener("config/quitByCloseMainChange",({data:k})=>{C.value=k});const S=ref(!callNativeSync("config/getIsQuitDialogPoped"));useIpcListener("config/quitDialogPopedChange",({data:k})=>{S.value=!k});const E=()=>{callNative("config/setIsQuitDialogPoped",!S.value)};return(k,b)=>{const V=resolveComponent("WidgetArrow"),A=resolveComponent("v-button"),x=resolveComponent("VDropdown"),T=resolveComponent("v-checkbox"),I=resolveComponent("v-radio"),R=resolveComponent("v-radio-group"),N=resolveComponent("v-dialog");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$a,[_hoisted_2$a,createBaseVNode("div",_hoisted_3$a,[_hoisted_4$9,createVNode(x,{trigger:"click",placement:"bottom-start","click-hide":"",onShow:b[0]||(b[0]=w=>l.value=!0),onHide:b[1]||(b[1]=w=>l.value=!1)},{content:withCtx(()=>[createBaseVNode("div",_hoisted_5$8,[(openBlock(),createElementBlock(Fragment,null,renderList(o,(w,D)=>createBaseVNode("div",{class:normalizeClass(["dropdown_select--option cs_pointer",{mt_xs:D>0,"is-active":w.theme===i.value.theme}]),key:w.theme,onClick:L=>g(w)},[createBaseVNode("div",_hoisted_7$8,toDisplayString(w.name),1)],10,_hoisted_6$8)),64))])]),default:withCtx(()=>[createVNode(A,{class:"dropdown_select--button mt_sm p_relative fs_4 text_ellipsis text_left"},{default:withCtx(()=>[createTextVNode(toDisplayString(i.value.name)+" ",1),createVNode(V,{class:normalizeClass(["dropdown_select--button--icon rotate_90 p_absolute",{rotate_deg:l.value}])},null,8,["class"])]),_:1})]),_:1})]),unref(IS_WIN)?(openBlock(),createElementBlock("div",_hoisted_8$8,[_hoisted_9$7,createVNode(x,{trigger:"click",placement:"bottom-start","click-hide":"",onShow:b[2]||(b[2]=w=>c.value=!0),onHide:b[3]||(b[3]=w=>c.value=!1)},{content:withCtx(()=>[createBaseVNode("div",_hoisted_10$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,(w,D)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["dropdown_select--option cs_pointer",{mt_xs:D>0,"is-active":w.id===u.value.id}]),key:w.id,onClick:L=>$(w)},[createBaseVNode("div",_hoisted_12$6,toDisplayString(w.name),1)],10,_hoisted_11$6))),128))])]),default:withCtx(()=>[createVNode(A,{class:"dropdown_select--button mt_sm p_relative fs_4 text_ellipsis text_left"},{default:withCtx(()=>[createTextVNode(toDisplayString(u.value.name)+" ",1),createVNode(V,{class:normalizeClass(["dropdown_select--button--icon rotate_90 p_absolute",{rotate_deg:c.value}])},null,8,["class"])]),_:1})]),_:1})])):createCommentVNode("",!0),createBaseVNode("p",_hoisted_13$5,[createVNode(T,{modelValue:m.value,"onUpdate:modelValue":b[4]||(b[4]=w=>m.value=w),size:"large",theme:"pink",label:"\u5F00\u673A\u81EA\u52A8\u542F\u52A8",onChange:unref(setIsAppOpenAtLogin)},null,8,["modelValue","onChange"])]),unref(v).sidebar_selected_hide2_r?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_14$5,[createVNode(T,{modelValue:_.value,"onUpdate:modelValue":b[5]||(b[5]=w=>_.value=w),size:"large",theme:"pink",label:"\u542F\u52A8\u65F6\u9ED8\u8BA4\u8FDB\u5165\u7CBE\u9009\u9875",onChange:unref(setIsSelectedFirst)},null,8,["modelValue","onChange"])])),createBaseVNode("p",_hoisted_15$4,[createVNode(T,{modelValue:d.value,"onUpdate:modelValue":b[6]||(b[6]=w=>d.value=w),size:"large",theme:"pink",label:"\u7981\u7528GPU\u52A0\u901F",onChange:y},null,8,["modelValue"]),_hoisted_16$3]),_hoisted_17$3,createVNode(R,{modelValue:C.value,"onUpdate:modelValue":b[7]||(b[7]=w=>C.value=w),class:"mt_sm",theme:"pink",size:"large",onChange:b[8]||(b[8]=w=>unref(setIsQuitByCloseMain)(C.value))},{default:withCtx(()=>[createVNode(I,{value:!1},{default:withCtx(()=>[_hoisted_18$3]),_:1}),_hoisted_19$3,createVNode(I,{value:!0},{default:withCtx(()=>[_hoisted_20$3]),_:1})]),_:1},8,["modelValue"]),createBaseVNode("p",_hoisted_21$3,[createVNode(T,{modelValue:S.value,"onUpdate:modelValue":b[9]||(b[9]=w=>S.value=w),size:"large",theme:"pink",label:"\u5173\u95ED\u65F6\u63D0\u793A",onChange:E},null,8,["modelValue"])])]),createVNode(N,{visible:f.value,"onUpdate:visible":b[11]||(b[11]=w=>f.value=w),width:320,"class-name":"i_dialog py_lg",onCancel:b[12]||(b[12]=w=>f.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_22$2,[_hoisted_23$2,createBaseVNode("div",_hoisted_24$2,[createVNode(A,{class:"mr_sm",onClick:b[10]||(b[10]=w=>f.value=!1)},{default:withCtx(()=>[_hoisted_25$2]),_:1}),createVNode(A,{type:"danger",onClick:B},{default:withCtx(()=>[_hoisted_26$2]),_:1})])])]),_:1},8,["visible"])],64)}}});var DownloadSettings_vue_vue_type_style_index_0_lang="";const _hoisted_1$9={class:"settings_content--item download-item"},_hoisted_2$9=createBaseVNode("h4",{class:"b_text mt_0"},"\u4E0B\u8F7D\u8BBE\u7F6E",-1),_hoisted_3$9={class:"mt_md"},_hoisted_4$8=createBaseVNode("p",{class:"b_text text2"},"\u7F13\u5B58\u76EE\u5F55\uFF1A\uFF08\u4E0B\u8F7D\u6587\u4EF6\u5B58\u653E\u8DEF\u5F84\uFF09",-1),_hoisted_5$7={class:"download-input mt_sm p_relative"},_hoisted_6$7={class:"mt_sm"},_hoisted_7$7=createTextVNode(" \u6062\u590D\u5230\u9ED8\u8BA4\u5730\u5740 "),_hoisted_8$7={class:"mt_sm"},_hoisted_9$6={class:"dropdown_select--content download-num-dropdown"},_hoisted_10$5=createBaseVNode("div",{class:"dropdown_select--option-title"},"1\u4E2A",-1),_hoisted_11$5=[_hoisted_10$5],_hoisted_12$5=createBaseVNode("div",{class:"dropdown_select--option-title"},[createTextVNode("2\u4E2A"),createBaseVNode("span",{class:"brand_pink"},"\uFF08\u5927\u4F1A\u5458\u4E13\u4EAB\uFF09")],-1),_hoisted_13$4=[_hoisted_12$5],_hoisted_14$4=createBaseVNode("div",{class:"dropdown_select--option-title"},[createTextVNode("3\u4E2A"),createBaseVNode("span",{class:"brand_pink"},"\uFF08\u5927\u4F1A\u5458\u4E13\u4EAB\uFF09")],-1),_hoisted_15$3=[_hoisted_14$4],_hoisted_16$2={class:"content-wrapper"},_hoisted_17$2=createBaseVNode("h3",{class:"b_text text1 text_center mt_sm"},"\u786E\u8BA4\u4FEE\u6539\u5417\uFF1F",-1),_hoisted_18$2=createBaseVNode("p",{class:"b_text text2 text_center mt_md"},"\u4E34\u65F6\u4FEE\u6539\u7F13\u5B58\u5730\u5740\uFF0C\u5C06\u5BFC\u81F4\u5DF2\u7F13\u5B58\u6216\u7F13\u5B58\u4E2D\u7684\u89C6\u9891\u4E22\u5931",-1),_hoisted_19$2={class:"mt_xl text_center dialog_btns"},_hoisted_20$2=createTextVNode("\u53D6\u6D88"),_hoisted_21$2=createTextVNode("\u4ECD\u8981\u4FEE\u6539"),_sfc_main$8=defineComponent({__name:"DownloadSettings",setup(a){const{userInfo:o}=storeToRefs(useUserInfoStore()),s=ref(!1),i=ref(!1),l=ref(getDownloadInfo());useIpcListener("config/downloadInfoChange",()=>l.value=getDownloadInfo());const c=()=>{s.value=!0,i.value=!1},r=()=>{if(l.value.isDefault){toastAsync({content:"\u5DF2\u7ECF\u662F\u9ED8\u8BA4\u5730\u5740\u4E86~"});return}s.value=!0,i.value=!0},u=()=>{s.value=!1,i.value?callNative("config/setToDftDownloadPath"):callNative("config/setDownloadPath")},d=ref(!1),_=ref(1),f=()=>{callNative("config/getDlParallelNum").then(({data:v})=>_.value=v)};f(),useIpcListener("auth/userInfoChange",()=>f()),useIpcListener("config/dlParallelNumChange",({data:v})=>_.value=v);const m=v=>{if(v!==_.value){if(!o.value.isLogin)return requestLogin("settings.downloadNum");if(v>1&&!o.value.vipStatus)return requestBigVip("downloadVIP");callNative("config/setDlParallelNum",v)}},p=()=>{callNative("config/setAutoStartDownload",l.value.isAutoStart)};return(v,g)=>{const $=resolveComponent("v-input"),y=resolveComponent("v-button"),B=resolveComponent("v-checkbox"),C=resolveComponent("WidgetArrow"),S=resolveComponent("VDropdown"),E=resolveComponent("v-dialog");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$9,[_hoisted_2$9,createBaseVNode("div",_hoisted_3$9,[_hoisted_4$8,createBaseVNode("div",_hoisted_5$7,[createVNode($,{class:"text1",modelValue:l.value.downloadPath,"onUpdate:modelValue":g[0]||(g[0]=k=>l.value.downloadPath=k),readonly:""},null,8,["modelValue"]),createBaseVNode("span",{class:"text2 p_center_y r_md u_select_none cs_pointer hover_underline",onClick:c}," \u66F4\u6539\u76EE\u5F55 ")]),createBaseVNode("div",_hoisted_6$7,[createVNode(y,{class:"h_30",onClick:r},{default:withCtx(()=>[_hoisted_7$7]),_:1})])]),createBaseVNode("p",_hoisted_8$7,[createVNode(B,{modelValue:l.value.isAutoStart,"onUpdate:modelValue":g[1]||(g[1]=k=>l.value.isAutoStart=k),size:"large",theme:"pink",label:"\u542F\u52A8\u65F6\u81EA\u52A8\u7EE7\u7EED\u4E0B\u8F7D",onChange:p},null,8,["modelValue"])]),createVNode(S,{trigger:"click",placement:"bottom-start","click-hide":"",onShow:g[5]||(g[5]=k=>d.value=!0),onHide:g[6]||(g[6]=k=>d.value=!1)},{content:withCtx(()=>[createBaseVNode("div",_hoisted_9$6,[createBaseVNode("div",{class:"dropdown_select--option cs_pointer",onClick:g[2]||(g[2]=k=>m(1))},_hoisted_11$5),createBaseVNode("div",{class:"dropdown_select--option cs_pointer",onClick:g[3]||(g[3]=k=>m(2))},_hoisted_13$4),createBaseVNode("div",{class:"dropdown_select--option cs_pointer",onClick:g[4]||(g[4]=k=>m(3))},_hoisted_15$3)])]),default:withCtx(()=>[createVNode(y,{class:"dropdown_select--button p_relative fs_4 text_ellipsis text_left mr_sm mt_sm"},{default:withCtx(()=>[createTextVNode(" \u540C\u65F6\u7F13\u5B58\u4E2A\u6570\uFF08"+toDisplayString(_.value)+"\u4E2A\uFF09 ",1),createVNode(C,{class:normalizeClass(["dropdown_select--button--icon rotate_90 p_absolute",{rotate_deg:d.value}])},null,8,["class"])]),_:1})]),_:1})]),createVNode(E,{visible:s.value,"onUpdate:visible":g[8]||(g[8]=k=>s.value=k),width:320,"class-name":"i_dialog py_lg",onCancel:g[9]||(g[9]=k=>s.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_16$2,[_hoisted_17$2,_hoisted_18$2,createBaseVNode("div",_hoisted_19$2,[createVNode(y,{class:"mr_sm",onClick:g[7]||(g[7]=k=>s.value=!1)},{default:withCtx(()=>[_hoisted_20$2]),_:1}),createVNode(y,{type:"danger",onClick:u},{default:withCtx(()=>[_hoisted_21$2]),_:1})])])]),_:1},8,["visible"])],64)}}});var ShortcutSettings_vue_vue_type_style_index_0_lang="";const _hoisted_1$8={class:"settings_content--item hotkey-item"},_hoisted_2$8=createBaseVNode("h4",{class:"b_text mt_0"},"\u5FEB\u6377\u952E",-1),_hoisted_3$8={class:"mt_md"},_hoisted_4$7=createTextVNode("\u5FEB\u6377\u952E\u4F7F\u7528\u8BF4\u660E"),_hoisted_5$6={class:"mt_md"},_hoisted_6$6=createBaseVNode("p",{class:"b_text text2"},"\u8001\u677F\u952E\uFF1A\uFF08\u5FEB\u901F\u9690\u85CF\u548C\u663E\u793A\u7A0B\u5E8F\uFF0C\u9690\u85CF\u65F6\u4F1A\u6682\u505C\u6B63\u5728\u64AD\u653E\u7684\u89C6\u9891\uFF09",-1),_hoisted_7$6={class:"hotkey-input mt_sm"},_hoisted_8$6=createBaseVNode("div",{class:"content-wrapper"},[createBaseVNode("h3",{class:"b_text text1 text_center mt_nsm"},"\u5FEB\u6377\u952E\u4F7F\u7528\u8BF4\u660E"),createBaseVNode("div",{class:"settings-shortcut-panel mt_sm scrollbar_thin"},[createBaseVNode("table",null,[createBaseVNode("tr",null,[createBaseVNode("td",{colspan:"2"},"\u5BA2\u6237\u7AEF\u5FEB\u6377\u952E")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"A"),createBaseVNode("td",null,"\u56DE\u5230\u4E3B\u754C\u9762\uFF08\u4EC5\u5728\u64AD\u653E\u7A97\u53E3\u6709\u6548\uFF09")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"B"),createBaseVNode("td",null,"\u6253\u5F00\u64AD\u653E\u8BE6\u60C5\u7A97\u53E3\uFF08\u4EC5\u5728\u4E3B\u7A97\u53E3\u6709\u6548\uFF09")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Z"),createBaseVNode("td",null,"\u6253\u5F00\u76F4\u64AD\u8BE6\u60C5\u7A97\u53E3\uFF08\u4EC5\u5728\u4E3B\u7A97\u53E3\u6709\u6548\uFF09")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"G"),createBaseVNode("td",null,"\u8FDB\u5165/\u9000\u51FA\uFF0C\u7A97\u53E3\u6700\u5927\u5316")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"S"),createBaseVNode("td",null,"\u8FDB\u5165/\u9000\u51FA\uFF0C\u5C0F\u7A97\u53E3\u64AD\u653E")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"X"),createBaseVNode("td",null,"\u6253\u5F00/\u5173\u95ED\uFF0C\u89C6\u9891\u7B80\u4ECB")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"C"),createBaseVNode("td",null,"\u6253\u5F00/\u5173\u95ED\uFF0C\u89C6\u9891\u8BC4\u8BBA")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"V"),createBaseVNode("td",null,"\u5206\u4EAB\u89C6\u9891\uFF0C\u8FDE\u7EED\u6309\u4E24\u6B21\u590D\u5236\u5206\u4EAB\u94FE\u63A5")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Shift + \u2191"),createBaseVNode("td",null,"\u7CBE\u9009\uFF0C\u97F3\u91CF\u589E\u52A010%")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Shift + \u2193"),createBaseVNode("td",null,"\u7CBE\u9009\uFF0C\u97F3\u91CF\u964D\u4F4E10%")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Shift + \u2192"),createBaseVNode("td",null,"\u589E\u52A0\u64AD\u653E\u500D\u901F\uFF0C\u6700\u9AD82\u500D\u901F")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Shift + \u2190"),createBaseVNode("td",null,"\u964D\u4F4E\u64AD\u653E\u500D\u901F\uFF0C\u6700\u4F4E0.5\u500D\u901F")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"<"),createBaseVNode("td",null,"\u591AP \u4E0A\u4E00P")]),createBaseVNode("tr",null,[createBaseVNode("td",null,">"),createBaseVNode("td",null,"\u591AP \u4E0B\u4E00P")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Shift + <"),createBaseVNode("td",null,"\u5386\u53F2 \u4E0A\u4E00\u4E2A")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Shift + >"),createBaseVNode("td",null,"\u5386\u53F2 \u4E0B\u4E00\u4E2A")]),createBaseVNode("tr",null,[createBaseVNode("td",{colspan:"2"},"\u64AD\u653E\u5668\u5FEB\u6377\u952E")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Q"),createBaseVNode("td",null,"\u5355\u6B21\u70B9\u8D5E/\u53D6\u6D88\u70B9\u8D5E\uFF0C\u957F\u6309\u4E00\u952E\u4E09\u8FDE")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"W"),createBaseVNode("td",null,"\u6295\u5E01")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"E"),createBaseVNode("td",null,"\u6536\u85CF")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"R"),createBaseVNode("td",null,"\u957F\u6309\u4E00\u952E\u4E09\u8FDE")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Space"),createBaseVNode("td",null,"\u64AD\u653E/\u6682\u505C")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"\u2192"),createBaseVNode("td",null,"\u5355\u6B21\u5FEB\u8FDB5s\uFF0C\u957F\u6309\u500D\u901F\u64AD\u653E")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"\u2190"),createBaseVNode("td",null,"\u5FEB\u90005s")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"\u2191"),createBaseVNode("td",null,"\u97F3\u91CF\u589E\u52A010%")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"\u2193"),createBaseVNode("td",null,"\u97F3\u91CF\u964D\u4F4E10%")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Esc"),createBaseVNode("td",null,"\u9000\u51FA\u5168\u5C4F")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"\u5A92\u4F53\u952E play/pause"),createBaseVNode("td",null,"\u64AD\u653E/\u6682\u505C")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"F"),createBaseVNode("td",null,"\u5168\u5C4F/\u9000\u51FA\u5168\u5C4F")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"["),createBaseVNode("td",null,"\u591AP \u4E0A\u4E00P")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"]"),createBaseVNode("td",null,"\u591AP \u4E0B\u4E00P")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Enter"),createBaseVNode("td",null,"\u53D1\u5F39\u5E55")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"D"),createBaseVNode("td",null,"\u5F00\u542F/\u5173\u95ED\u5F39\u5E55")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"M"),createBaseVNode("td",null,"\u5F00\u542F/\u5173\u95ED\u9759\u97F3")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Shift + 1"),createBaseVNode("td",null,"\u4E00\u500D\u901F\uFF08\u6B63\u5E38\u500D\u901F\uFF09")]),createBaseVNode("tr",null,[createBaseVNode("td",null,"Shift + 2"),createBaseVNode("td",null,"\u4E8C\u500D\u901F")])])])],-1),_sfc_main$7=defineComponent({__name:"ShortcutSettings",setup(a){const o=ref(!1),s=reactive(getBossShortcutInfo()),i=ref(!1),l=ref(""),c=ref(""),r="abcdefghijklmnopqrstuvwxyz",u=r+r.toUpperCase()+"1234567890`-=[];\\',./",d=()=>{i.value=s.isEnable,l.value=s.shortcut,c.value=s.shortcut,s.shortcut=""},_=()=>{s.shortcut!==c.value&&(s.shortcut=c.value)},f=({altKey:m,ctrlKey:p,shiftKey:v,key:g})=>{if(!!u.includes(g)&&(p||v||m)){let $="";m&&($+="Alt + "),p&&($+="Ctrl + "),v&&($+="Shift + "),$+=String(g).toUpperCase(),s.shortcut=$,c.value=$}};return watch(s,(m,p)=>{m.isEnable!==i.value?(i.value=m.isEnable,setBossShortcutInfo(m)):m.shortcut&&l.value!==m.shortcut&&(l.value=m.shortcut,setBossShortcutInfo(m))}),(m,p)=>{const v=resolveComponent("v-button"),g=resolveComponent("v-checkbox"),$=resolveComponent("v-input"),y=resolveComponent("v-dialog");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$8,[_hoisted_2$8,createBaseVNode("div",_hoisted_3$8,[createVNode(v,{onClick:p[0]||(p[0]=B=>o.value=!0)},{default:withCtx(()=>[_hoisted_4$7]),_:1})]),createBaseVNode("div",_hoisted_5$6,[_hoisted_6$6,createBaseVNode("p",null,[createVNode(g,{modelValue:s.isEnable,"onUpdate:modelValue":p[1]||(p[1]=B=>s.isEnable=B),size:"large",theme:"pink",label:"\u5F00\u542F\u8001\u677F\u952E"},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_7$6,[createVNode($,{class:"text1",modelValue:s.shortcut,"onUpdate:modelValue":p[2]||(p[2]=B=>s.shortcut=B),disabled:!s.isEnable,readonly:"",placeholder:"\u8BBE\u7F6E\u8001\u677F\u952E\u5FEB\u6377\u952E~",onFocus:d,onBlur:_,onKeydown:f},null,8,["modelValue","disabled"])])])]),createVNode(y,{visible:o.value,"onUpdate:visible":p[3]||(p[3]=B=>o.value=B),width:500,"class-name":"i_dialog pl_lg pr_md",onCancel:p[4]||(p[4]=B=>o.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>[_hoisted_8$6]),_:1},8,["visible"])],64)}}}),_hoisted_1$7={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},_hoisted_2$7=createBaseVNode("path",{d:"M12 3.749a8.25 8.25 0 1 0 0 16.5 8.25 8.25 0 0 0 0-16.5zm-10.25 8.25c0-5.66 4.59-10.25 10.25-10.25s10.25 4.59 10.25 10.25-4.59 10.25-10.25 10.25-10.25-4.59-10.25-10.25z",fill:"currentColor"},null,-1),_hoisted_3$7=createBaseVNode("path",{d:"M13.125 16.124a1.125 1.125 0 1 1-2.25 0 1.125 1.125 0 0 1 2.25 0zM12 8.999a1 1 0 0 0-1 1 1 1 0 1 1-2 0 3 3 0 1 1 6 0 2.82 2.82 0 0 1-.674 1.859c-.177.215-.37.399-.534.55-.05.048-.098.091-.143.132-.112.103-.21.191-.31.291-.229.23-.294.376-.315.437a.623.623 0 0 0-.024.231 1 1 0 1 1-2 0c0-.159-.003-.488.134-.886.137-.396.389-.793.792-1.196.134-.135.28-.268.402-.38l.107-.097c.15-.14.26-.248.346-.353A.83.83 0 0 0 13 10a1 1 0 0 0-1-1z",fill:"currentColor"},null,-1),_hoisted_4$6=[_hoisted_2$7,_hoisted_3$7];function render(a,o){return openBlock(),createElementBlock("svg",_hoisted_1$7,_hoisted_4$6)}var HelpIcon={render},PlayerSettings_vue_vue_type_style_index_0_lang="";const _hoisted_1$6={class:"settings_content--item player-item"},_hoisted_2$6=createBaseVNode("h4",{class:"b_text mt_0"},"\u64AD\u653E\u8BBE\u7F6E",-1),_hoisted_3$6={class:"mt_sm flex_start"},_hoisted_4$5=createBaseVNode("div",{class:"media-session-help"},[createBaseVNode("p",{class:"b_text pd_sm mg_0"}," \u5F00\u542F\u591A\u5A92\u4F53\u4F1A\u8BDD\u670D\u52A1\uFF1A\u6307\u5141\u8BB8\u952E\u76D8\u3001\u9F20\u6807\u6216\u84DD\u7259\u7B49\u8BBE\u5907\u7684\u591A\u5A92\u4F53\u6309\u94AE\u63A7\u5236\u5BA2\u6237\u7AEF\u7684\u89C6\u9891\u64AD\u653E\uFF0C\u5E76\u5728\u8BBE\u5907\u7684\u5A92\u4F53\u63A7\u5236\u4E2D\u5FC3\u663E\u793A\u64AD\u653E\u4FE1\u606F\u3002 ")],-1),_hoisted_5$5={class:"content-wrapper"},_hoisted_6$5=createBaseVNode("h4",{class:"b_text text1 text_center mt_md"},"\u591A\u5A92\u4F53\u4F1A\u8BDD\u8BBE\u7F6E\u5C06\u5728\u91CD\u542F\u5E94\u7528\u540E\u751F\u6548",-1),_hoisted_7$5={class:"mt_xl text_center dialog_btns"},_hoisted_8$5=createTextVNode("\u7A0D\u540E\u518D\u8BF4"),_hoisted_9$5=createTextVNode("\u73B0\u5728\u91CD\u542F"),_sfc_main$6=defineComponent({__name:"PlayerSettings",setup(a){const{isForceRestart:o}=storeToRefs(useConfigStore()),s=ref(callNativeSync("config/getUseMediaSession")),i=ref(!1),l=()=>{i.value=!0,callNative$1("config/setUseMediaSession",s.value)},c=()=>{o.value=!0,relaunchApp()},r=useScrollTriggerInlinePlayStore(),{active:u}=storeToRefs(r),d=r.setActive;return(_,f)=>{const m=resolveComponent("v-checkbox"),p=resolveComponent("v-dropdown"),v=resolveComponent("v-button"),g=resolveComponent("v-dialog");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$6,[_hoisted_2$6,createBaseVNode("p",_hoisted_3$6,[createVNode(m,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=$=>s.value=$),size:"large",theme:"pink",label:"\u5F00\u542F\u591A\u5A92\u4F53\u4F1A\u8BDD\u670D\u52A1",onChange:l},null,8,["modelValue"]),createVNode(p,{trigger:"hover",placement:"right"},{content:withCtx(()=>[_hoisted_4$5]),default:withCtx(()=>[createVNode(unref(HelpIcon),{class:"media-session-icon text3 mr_n4 cs_pointer"})]),_:1})]),createBaseVNode("p",null,[createVNode(m,{modelValue:unref(u),"onUpdate:modelValue":f[1]||(f[1]=$=>isRef(u)?u.value=$:null),size:"large",theme:"pink",label:"\u52A8\u6001\u9875\u89C6\u9891\u81EA\u52A8\u64AD\u653E",onChange:unref(d)},null,8,["modelValue","onChange"])])]),createVNode(g,{visible:i.value,"onUpdate:visible":f[3]||(f[3]=$=>i.value=$),width:320,"class-name":"i_dialog py_lg",onCancel:f[4]||(f[4]=$=>i.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_5$5,[_hoisted_6$5,createBaseVNode("div",_hoisted_7$5,[createVNode(v,{class:"mr_sm",onClick:f[2]||(f[2]=$=>i.value=!1)},{default:withCtx(()=>[_hoisted_8$5]),_:1}),createVNode(v,{type:"danger",onClick:c},{default:withCtx(()=>[_hoisted_9$5]),_:1})])])]),_:1},8,["visible"])],64)}}});var MessageSettings_vue_vue_type_style_index_0_lang="";const _hoisted_1$5=createBaseVNode("h4",{class:"b_text mt_0"},"\u6D88\u606F\u8BBE\u7F6E",-1),_hoisted_2$5={class:"mt_md"},_hoisted_3$5=createBaseVNode("p",{class:"b_text text2 mt_md"},"\u6D88\u606F\u63D0\u9192\uFF1A\uFF08\u5173\u95ED\u540E\uFF0C\u6D88\u606F\u5C06\u4E0D\u518D\u8FDB\u884C\u63D0\u9192\uFF09",-1),_hoisted_4$4=createTextVNode("\u5F00\u542F"),_hoisted_5$4=createTextVNode("\u5173\u95ED"),_hoisted_6$4={class:"mt_md"},_hoisted_7$4=createBaseVNode("p",{class:"b_text text2 mt_md"},"\u79C1\u4FE1\u667A\u80FD\u62E6\u622A\uFF1A\uFF08\u5F00\u542F\u540E\uFF0C\u5C06\u81EA\u52A8\u62E6\u622A\u7591\u4F3C\u9A9A\u6270\u548C\u4E0D\u826F\u7684\u4F1A\u8BDD\uFF09",-1),_hoisted_8$4=createTextVNode("\u5F00\u542F"),_hoisted_9$4=createTextVNode("\u5173\u95ED"),_hoisted_10$4={class:"mt_md"},_hoisted_11$4=createBaseVNode("p",{class:"b_text text2 mt_md"},"\u56DE\u590D\u6211\u7684\u6D88\u606F\u63D0\u9192\uFF1A\uFF08\u63A5\u53D7\u8C01\u7684\u8BC4\u8BBA\u6D88\u606F\u63D0\u9192\uFF09",-1),_hoisted_12$4=createTextVNode("\u6240\u6709\u4EBA"),_hoisted_13$3=createTextVNode("\u5173\u6CE8\u7684\u4EBA"),_hoisted_14$3=createTextVNode("\u4E0D\u63A5\u53D7\u4EFB\u4F55\u6D88\u606F\u63D0\u9192"),_hoisted_15$2={class:"mt_md"},_hoisted_16$1=createBaseVNode("p",{class:"b_text text2 mt_md"},"@\u6211\u7684\u6D88\u606F\u63D0\u9192\uFF1A\uFF08\u63A5\u53D7\u8C01\u7684@\u6D88\u606F\u63D0\u9192\uFF09",-1),_hoisted_17$1=createTextVNode("\u6240\u6709\u4EBA"),_hoisted_18$1=createTextVNode("\u5173\u6CE8\u7684\u4EBA"),_hoisted_19$1=createTextVNode("\u4E0D\u63A5\u53D7\u4EFB\u4F55\u6D88\u606F\u63D0\u9192"),_hoisted_20$1={class:"mt_md"},_hoisted_21$1=createBaseVNode("p",{class:"b_text text2 mt_md"},"\u6536\u5230\u7684\u8D5E\u6D88\u606F\u63D0\u9192\uFF1A",-1),_hoisted_22$1=createTextVNode("\u5F00\u542F"),_hoisted_23$1=createTextVNode("\u5173\u95ED"),_hoisted_24$1={class:"mt_md"},_hoisted_25$1=createBaseVNode("p",{class:"b_text text2 mt_md"},"\u6536\u8D77\u672A\u5173\u6CE8\u4EBA\u6D88\u606F\uFF1A\uFF08\u5F00\u542F\u540E\uFF0C\u672A\u5173\u6CE8\u4EBA\u6D88\u606F\u5C06\u88AB\u6298\u53E0\u8D77\u6765\uFF09",-1),_hoisted_26$1=createTextVNode("\u5F00\u542F"),_hoisted_27$1=createTextVNode("\u5173\u95ED"),_sfc_main$5=defineComponent({__name:"MessageSettings",setup(a){const{userInfo:o}=storeToRefs(useUserInfoStore()),s=useMessageStore(),{notifyConfig:i,settingFromMessage:l}=storeToRefs(s),c=useRoute(),r=ref(null);return onActivated(()=>{var u,d;((u=c.query)==null?void 0:u.from)==="message"&&((d=r.value)==null||d.scrollIntoView())}),onDeactivated(()=>{setTimeout(()=>l.value=!1,500)}),watch(l,u=>{var d;u&&((d=r.value)==null||d.scrollIntoView())}),(u,d)=>{const _=resolveComponent("v-radio"),f=resolveComponent("v-radio-group");return unref(o).isLogin?(openBlock(),createElementBlock("div",{key:0,class:"settings_content--item message-item",ref_key:"messageSettingEl",ref:r},[_hoisted_1$5,createBaseVNode("div",_hoisted_2$5,[_hoisted_3$5,createVNode(f,{modelValue:unref(i).msg_notify,"onUpdate:modelValue":d[0]||(d[0]=m=>unref(i).msg_notify=m),class:"mt_sm",theme:"pink",size:"large",onChange:d[1]||(d[1]=m=>unref(s).setMessageSetting("msg_notify",m))},{default:withCtx(()=>[createVNode(_,{value:1},{default:withCtx(()=>[_hoisted_4$4]),_:1}),createVNode(_,{value:3},{default:withCtx(()=>[_hoisted_5$4]),_:1})]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_6$4,[_hoisted_7$4,createVNode(f,{modelValue:unref(i).ai_intercept,"onUpdate:modelValue":d[2]||(d[2]=m=>unref(i).ai_intercept=m),class:"mt_sm",theme:"pink",size:"large",onChange:d[3]||(d[3]=m=>unref(s).setMessageSetting("ai_intercept",m))},{default:withCtx(()=>[createVNode(_,{value:1},{default:withCtx(()=>[_hoisted_8$4]),_:1}),createVNode(_,{value:0},{default:withCtx(()=>[_hoisted_9$4]),_:1})]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_10$4,[_hoisted_11$4,createVNode(f,{modelValue:unref(i).set_comment,"onUpdate:modelValue":d[4]||(d[4]=m=>unref(i).set_comment=m),class:"mt_sm",theme:"pink",size:"large",onChange:d[5]||(d[5]=m=>unref(s).setMessageSetting("set_comment",m))},{default:withCtx(()=>[createVNode(_,{value:0},{default:withCtx(()=>[_hoisted_12$4]),_:1}),createVNode(_,{value:1},{default:withCtx(()=>[_hoisted_13$3]),_:1}),createVNode(_,{value:2},{default:withCtx(()=>[_hoisted_14$3]),_:1})]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_15$2,[_hoisted_16$1,createVNode(f,{modelValue:unref(i).set_at,"onUpdate:modelValue":d[6]||(d[6]=m=>unref(i).set_at=m),class:"mt_sm",theme:"pink",size:"large",onChange:d[7]||(d[7]=m=>unref(s).setMessageSetting("set_at",m))},{default:withCtx(()=>[createVNode(_,{value:0},{default:withCtx(()=>[_hoisted_17$1]),_:1}),createVNode(_,{value:1},{default:withCtx(()=>[_hoisted_18$1]),_:1}),createVNode(_,{value:2},{default:withCtx(()=>[_hoisted_19$1]),_:1})]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_20$1,[_hoisted_21$1,createVNode(f,{modelValue:unref(i).set_like,"onUpdate:modelValue":d[8]||(d[8]=m=>unref(i).set_like=m),class:"mt_sm",theme:"pink",size:"large",onChange:d[9]||(d[9]=m=>unref(s).setMessageSetting("set_like",m))},{default:withCtx(()=>[createVNode(_,{value:0},{default:withCtx(()=>[_hoisted_22$1]),_:1}),createVNode(_,{value:5},{default:withCtx(()=>[_hoisted_23$1]),_:1})]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_24$1,[_hoisted_25$1,createVNode(f,{modelValue:unref(i).show_unfollowed_msg,"onUpdate:modelValue":d[10]||(d[10]=m=>unref(i).show_unfollowed_msg=m),class:"mt_sm",theme:"pink",size:"large",onChange:d[11]||(d[11]=m=>unref(s).setMessageSetting("show_unfollowed_msg",m))},{default:withCtx(()=>[createVNode(_,{value:1},{default:withCtx(()=>[_hoisted_26$1]),_:1}),createVNode(_,{value:0},{default:withCtx(()=>[_hoisted_27$1]),_:1})]),_:1},8,["modelValue"])])],512)):createCommentVNode("",!0)}}});var NotificationSettings_vue_vue_type_style_index_0_lang="";const _hoisted_1$4={class:"settings_content--item notification-item"},_hoisted_2$4=createBaseVNode("h4",{class:"b_text mt_0"},"\u63A8\u9001\u8BBE\u7F6E",-1),_hoisted_3$4={class:"mt_md"},_hoisted_4$3=createBaseVNode("p",{class:"b_text text2 mt_md"},"\u70ED\u95E8\u5185\u5BB9\u63A8\u9001\uFF1A\uFF08\u5F00\u542F\u540E\uFF0C\u6BCF\u5468\u4E94\u5C06\u63A8\u9001\u6BCF\u5468\u5FC5\u770B\uFF09",-1),_hoisted_5$3=createTextVNode("\u5F00\u542F"),_hoisted_6$3=createTextVNode("\u5173\u95ED"),_hoisted_7$3={class:"mt_md"},_hoisted_8$3=createBaseVNode("p",{class:"b_text text2 mt_md"},"\u4E3B\u64AD\u5F00\u64AD\u63D0\u9192\uFF1A\uFF08\u5F00\u542F\u540E\uFF0C\u5C06\u63A8\u9001\u4E3B\u64AD\u5F00\u64AD\u63D0\u793A\uFF09",-1),_hoisted_9$3=createTextVNode("\u5F00\u542F"),_hoisted_10$3=createTextVNode("\u5173\u95ED"),_hoisted_11$3={class:"mt_md"},_hoisted_12$3=createBaseVNode("p",{class:"b_text text2 mt_md"},"\u5173\u6CE8UP\u4E3B\u66F4\u65B0\u63A8\u9001\uFF1A\uFF08\u5F00\u542F\u540E\uFF0C\u63A8\u9001\u5173\u6CE8\u7684UP\u4E3B\u7A3F\u4EF6\uFF09",-1),_hoisted_13$2=createTextVNode("\u5F00\u542F"),_hoisted_14$2=createTextVNode("\u5173\u95ED"),_sfc_main$4=defineComponent({__name:"NotificationSettings",setup(a){const o=useNotificationStore(),{pushRecommend:s,pushDynamic:i,pushLive:l}=storeToRefs(o);return(c,r)=>{const u=resolveComponent("v-radio"),d=resolveComponent("v-radio-group");return openBlock(),createElementBlock("div",_hoisted_1$4,[_hoisted_2$4,createBaseVNode("div",_hoisted_3$4,[_hoisted_4$3,createVNode(d,{modelValue:unref(s),"onUpdate:modelValue":r[0]||(r[0]=_=>isRef(s)?s.value=_:null),class:"mt_sm",theme:"pink",size:"large",onChange:r[1]||(r[1]=_=>unref(o).setPushRecommend(_))},{default:withCtx(()=>[createVNode(u,{value:!0},{default:withCtx(()=>[_hoisted_5$3]),_:1}),createVNode(u,{value:!1},{default:withCtx(()=>[_hoisted_6$3]),_:1})]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_7$3,[_hoisted_8$3,createVNode(d,{modelValue:unref(l),"onUpdate:modelValue":r[2]||(r[2]=_=>isRef(l)?l.value=_:null),class:"mt_sm",theme:"pink",size:"large",onChange:r[3]||(r[3]=_=>unref(o).setPushLive(_))},{default:withCtx(()=>[createVNode(u,{value:!0},{default:withCtx(()=>[_hoisted_9$3]),_:1}),createVNode(u,{value:!1},{default:withCtx(()=>[_hoisted_10$3]),_:1})]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_11$3,[_hoisted_12$3,createVNode(d,{modelValue:unref(i),"onUpdate:modelValue":r[4]||(r[4]=_=>isRef(i)?i.value=_:null),class:"mt_sm",theme:"pink",size:"large",onChange:r[5]||(r[5]=_=>unref(o).setPushDynamic(_))},{default:withCtx(()=>[createVNode(u,{value:!0},{default:withCtx(()=>[_hoisted_13$2]),_:1}),createVNode(u,{value:!1},{default:withCtx(()=>[_hoisted_14$2]),_:1})]),_:1},8,["modelValue"])])])}}});var AboutBilibili_vue_vue_type_style_index_0_lang="";const _hoisted_1$3={class:"settings_content--item about-item"},_hoisted_2$3={class:"fs_5 mt_md"},_hoisted_3$3={class:"text2 mr_md"},_hoisted_4$2=createTextVNode(" \u5F53\u524D\u7248\u672C\uFF1A"),_hoisted_5$2={class:"text3"},_hoisted_6$2={class:"mt_sm"},_hoisted_7$2=createTextVNode(" \u9000\u51FA\u5F00\u53D1\u6A21\u5F0F "),_hoisted_8$2=createTextVNode("\u68C0\u67E5\u66F4\u65B0"),_hoisted_9$2=createTextVNode("\u53CD\u9988\u610F\u89C1"),_hoisted_10$2=createTextVNode("\u5BA2\u670D\u4E2D\u5FC3"),_hoisted_11$2={class:"about-agreenments flex_start mt_xxl u_select_none cs_pointer"},_hoisted_12$2={class:"content-wrapper"},_hoisted_13$1={class:"dev-mode-pwd"},_hoisted_14$1=createBaseVNode("label",{class:"d_block mb_xs u_select_none"},"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF1A",-1),_hoisted_15$1=createBaseVNode("div",{class:"content-wrapper license-modal"},[createBaseVNode("h4",{class:"b_text text1 text_center mt_0"},"\u5F00\u6E90\u8F6F\u4EF6\u8BB8\u53EF"),createBaseVNode("iframe",{class:"mt_sm",src:"./license.html",frameborder:"0"})],-1),_sfc_main$3=defineComponent({__name:"AboutBilibili",setup(a){const o=ref(!1),s=ref(""),i=ref(!1),{showVersion:l,isShowLicense:c}=storeToRefs(useAppInfoStore());let r=0,u=null;const d=()=>{IS_DEV_MODE||(clearTimeout(u),u=setTimeout(()=>r=0,1e3),r++,r===7&&(s.value="",o.value=!0))},_=()=>{o.value=!1,m(!0,s.value)},f=$=>{$.key==="Enter"&&_()},m=($,y="")=>{callNative("config/setIsDevMode",$,y)},p=()=>{callNative("update/checkForUpdate"),allCustomReport({type:"click",spm_info:"main.settings.about-bilibili.0"})},v=()=>{callNative("report/reportMainAppLog"),openInBrowser$1("https://www.bilibili.com/blackboard/activity-mqigCKpQUG.html","settings.About")},g=()=>{openInBrowser$1("https://www.bilibili.com/v/customer-service?from=bilibili_pc","settings.About")};return($,y)=>{const B=resolveComponent("v-button"),C=resolveComponent("v-dialog");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$3,[createBaseVNode("h4",{class:"b_text mt_0",onClick:d},"\u5173\u4E8E\u54D4\u54E9\u54D4\u54E9"),createBaseVNode("div",_hoisted_2$3,[createBaseVNode("span",_hoisted_3$3,[_hoisted_4$2,createBaseVNode("span",_hoisted_5$2,toDisplayString(unref(l))+toDisplayString(unref(IS_DEV_MODE)?" (\u5F00\u53D1\u8005\u6A21\u5F0F)":""),1)])]),createBaseVNode("div",_hoisted_6$2,[unref(IS_DEV_MODE)&&unref(IS_RELEASE)?(openBlock(),createBlock(B,{key:0,class:"about-button mr_sm",type:"pink",plain:"",onClick:y[0]||(y[0]=S=>m(!1))},{default:withCtx(()=>[createVNode(unref(ExitIcon),{class:"mt_n2"}),_hoisted_7$2]),_:1})):createCommentVNode("",!0),createVNode(B,{class:"about-button mr_sm",onClick:p},{default:withCtx(()=>[_hoisted_8$2]),_:1}),createVNode(B,{class:"about-button mr_sm",onClick:y[1]||(y[1]=S=>v())},{default:withCtx(()=>[_hoisted_9$2]),_:1}),createVNode(B,{class:"about-button mr_sm",onClick:y[2]||(y[2]=S=>g())},{default:withCtx(()=>[_hoisted_10$2]),_:1})]),createBaseVNode("div",_hoisted_11$2,[createBaseVNode("a",{class:"hover_pink",onClick:y[3]||(y[3]=S=>unref(openInBrowser$1)("https://www.bilibili.com","settings.About"))},"\u300A\u54D4\u54E9\u54D4\u54E9\u5B98\u7F51\u300B"),createBaseVNode("a",{class:"hover_pink",onClick:y[4]||(y[4]=S=>unref(openInBrowser$1)("https://www.bilibili.com/protocal/licence.html","settings.About"))},"\u300A\u7528\u6237\u534F\u8BAE\u300B"),createBaseVNode("a",{class:"hover_pink",onClick:y[5]||(y[5]=S=>unref(openInBrowser$1)("https://www.bilibili.com/blackboard/protocal/privacy-pc-desktop.html","settings.About"))},"\u300A\u9690\u79C1\u653F\u7B56\u300B"),createBaseVNode("a",{class:"hover_pink",onClick:y[6]||(y[6]=S=>unref(openInBrowser$1)("https://app.bilibili.com","settings.About"))},"\u300AAPP\u4E0B\u8F7D\u300B"),unref(c)?(openBlock(),createElementBlock("a",{key:0,class:"hover_pink",onClick:y[7]||(y[7]=S=>i.value=!0)},"\u300A\u5F00\u6E90\u8F6F\u4EF6\u8BB8\u53EF\u300B")):createCommentVNode("",!0)])]),createVNode(C,{visible:o.value,"onUpdate:visible":y[9]||(y[9]=S=>o.value=S),title:"\u5F00\u53D1\u8005\u6A21\u5F0F","mask-closable":!1,onOk:_,onCancel:y[10]||(y[10]=S=>o.value=!1)},{default:withCtx(()=>[createBaseVNode("div",_hoisted_12$2,[createBaseVNode("div",_hoisted_13$1,[_hoisted_14$1,withDirectives(createBaseVNode("input",{"onUpdate:modelValue":y[8]||(y[8]=S=>s.value=S),type:"password",class:"vuix_input w_100",onKeydown:f},null,544),[[vModelText,s.value]])])])]),_:1},8,["visible"]),createVNode(C,{visible:i.value,"onUpdate:visible":y[11]||(y[11]=S=>i.value=S),width:800,"class-name":"i_dialog py_lg",onCancel:y[12]||(y[12]=S=>i.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>[_hoisted_15$1]),_:1},8,["visible"])],64)}}});var DevelopSettings_vue_vue_type_style_index_0_lang="";const _hoisted_1$2={class:"settings_content--item dev-item"},_hoisted_2$2={class:"text_center settings-area"},_hoisted_3$2={class:"mb_lg"},_hoisted_4$1={class:"mb_sm"},_hoisted_5$1=createBaseVNode("h2",{class:"b_text"},"APP\u4FE1\u606F",-1),_hoisted_6$1={class:"app-info mg_0_auto"},_hoisted_7$1={class:"b_text text3 mt_md"},_hoisted_8$1={class:"text2"},_hoisted_9$1=["onClick"],_hoisted_10$1=createTextVNode("\xA0\xA0\xA0 "),_hoisted_11$1={class:"mb_sm"},_hoisted_12$1=createTextVNode(" \u6784\u5EFA\u53F7\uFF1A"),_hoisted_13={class:"mb_sm"},_hoisted_14=createTextVNode(" \u6570\u636E\u76EE\u5F55\uFF1A "),_hoisted_15={class:"mb_sm"},_hoisted_16=createTextVNode(" \u65E5\u5FD7\u76EE\u5F55\uFF1A "),_hoisted_17={class:"mb_sm"},_hoisted_18=createTextVNode(" \u5B89\u88C5\u76EE\u5F55\uFF1A "),_hoisted_19={class:"setting-btns mt_lg"},_hoisted_20={class:"flex_center"},_hoisted_21=createTextVNode("\u67E5\u770B\u5B9E\u65F6\u65E5\u5FD7"),_hoisted_22={class:"flex_center"},_hoisted_23=createTextVNode("\u91CD\u542F\u5BA2\u6237\u7AEF"),_hoisted_24={class:"flex_center"},_hoisted_25=createTextVNode("\u6253\u5F00\u8C03\u8BD5\u5DE5\u5177"),_hoisted_26={class:"settings_content--item advance-item"},_hoisted_27=createBaseVNode("h2",{class:"b_text"},"\u5F00\u53D1\u8BBE\u7F6E",-1),_hoisted_28={class:"row mt_sm"},_hoisted_29={class:"col col_6 flex_start"},_hoisted_30=createBaseVNode("div",{class:"col-label"},"\u663E\u793A\u6E32\u67D3\u8FDB\u7A0B\u63A7\u5236\u53F0\u65E5\u5FD7",-1),_hoisted_31={class:"col-config"},_hoisted_32={class:"col col_6 flex_start"},_hoisted_33=createBaseVNode("div",{class:"col-label"},"\u4F7F\u7528PRE\u73AF\u5883\u8FDC\u7A0B\u914D\u7F6E",-1),_hoisted_34={class:"col-config"},_hoisted_35={class:"col col_6 flex_start"},_hoisted_36=createBaseVNode("div",{class:"col-label"},"\u5F00\u542F\u4E3B\u7A97\u53E3\u4E3B\u754C\u9762\u8C03\u8BD5",-1),_hoisted_37={class:"col-config"},_hoisted_38={class:"col col_6 flex_start"},_hoisted_39=createBaseVNode("div",{class:"col-label"},"\u4F7F\u7528FF-AB\u5B9E\u9A8C\u6D4B\u8BD5\u73AF\u5883",-1),_hoisted_40={class:"col-config"},_hoisted_41={class:"col col_6 flex_start"},_hoisted_42=createBaseVNode("div",{class:"col-label"},"\u542F\u52A8\u65F6\u7981\u6B62\u8DF3\u767B\u5F55\u7A97\u53E3",-1),_hoisted_43={class:"col-config"},_hoisted_44={class:"col col_6 flex_start"},_hoisted_45=createBaseVNode("div",{class:"col-label"},"\u663E\u793A\u4E3B\u8FDB\u7A0B\u57CB\u70B9\u4E0A\u62A5\u65E5\u5FD7",-1),_hoisted_46={class:"col-config"},_hoisted_47={class:"col col_6 flex_start"},_hoisted_48=createBaseVNode("div",{class:"col-label"},"\u5F00\u542F\u4E3B\u8FDB\u7A0B\u8BF7\u6C42\u4EE3\u7406",-1),_hoisted_49={class:"col-config"},_hoisted_50={class:"col col_6 flex_start"},_hoisted_51=createBaseVNode("div",{class:"col-label"},"\u6E32\u67D3\u8FDB\u7A0B\u901A\u8FC7\u590D\u5199\u542F\u52A8",-1),_hoisted_52={class:"col-config"},_hoisted_53={class:"row"},_hoisted_54={class:"col col_6 flex_start"},_hoisted_55=createBaseVNode("div",{class:"col-label"},"\u4E3B\u8FDB\u7A0B\u8BF7\u6C42\u4EE3\u7406\u8BBE\u7F6E",-1),_hoisted_56={class:"col-config"},_hoisted_57={class:"col col_6 flex_start"},_hoisted_58=createBaseVNode("div",{class:"col-label"},"\u64AD\u653E\u65F6\u9996\u6B21\u8DF3\u767B\u5F55\u7A97\u53E3\u65F6\u95F4(ms)",-1),_hoisted_59={class:"col-config"},_hoisted_60={class:"col col_6 flex_start"},_hoisted_61=createBaseVNode("div",{class:"col-label"},"\u8BBE\u7F6E\u8282\u80FD\u6A21\u5F0F\u65F6\u95F4(ms)",-1),_hoisted_62={class:"col-config"},_hoisted_63={class:"col col_6 flex_start"},_hoisted_64=createBaseVNode("div",{class:"col-label"},"\u64AD\u653E\u65F6\u8DF3\u767B\u5F55\u7A97\u53E3\u95F4\u9694\u65F6\u95F4(ms)",-1),_hoisted_65={class:"col-config"},_hoisted_66={class:"col col_6 flex_start"},_hoisted_67=createBaseVNode("div",{class:"col-label"},"\u76F4\u64AD\u95F4\u7A97\u53E3\u5730\u5740(BaseUrl)",-1),_hoisted_68={class:"col-config"},_hoisted_69={class:"col col_6 flex_start"},_hoisted_70=createBaseVNode("div",{class:"col-label"},"\u76F4\u64AD\u5F00\u64AD\u7A97\u53E3\u5730\u5740",-1),_hoisted_71={class:"col-config"},_hoisted_72={class:"col col_6 flex_start"},_hoisted_73=createBaseVNode("div",{class:"col-label"},"\u76F4\u64AD\u95F4\u67E5\u8BE2\u53C2\u6570(QueryString)",-1),_hoisted_74={class:"col-config"},_hoisted_75={class:"col col_6 flex_start"},_hoisted_76=createBaseVNode("div",{class:"col-label"},"\u8BBE\u7F6EAB\u5B9E\u9A8C\u672C\u5730\u8986\u76D6",-1),_hoisted_77={class:"col-config"},_hoisted_78=["value"],_hoisted_79={class:"settings_content--item ab-test-item"},_hoisted_80=createBaseVNode("h2",{class:"b_text"},"Buvid\u767D\u540D\u5355\u7F16\u7801",-1),_hoisted_81={class:"mt_lg"},_hoisted_82=createBaseVNode("label",{class:"test-item-label"},"buvid\uFF1A",-1),_hoisted_83=["placeholder"],_hoisted_84=createTextVNode("\u67E5\u8BE2"),_hoisted_85=createTextVNode("\u6E05\u7A7A"),_hoisted_86={class:"settings_content--item ab-test-item"},_hoisted_87=createBaseVNode("h2",{class:"b_text"},"AB\u6D4B\u8BD5\u5206\u6876\u67E5\u8BE2",-1),_hoisted_88={class:"mt_lg"},_hoisted_89=createBaseVNode("label",{class:"test-item-label"},"\u5206\u6876\u7B56\u7565\uFF1A",-1),_hoisted_90=createBaseVNode("option",{value:"dm"},"buvid+\u76D0",-1),_hoisted_91=createBaseVNode("option",{value:"um"},"mid+\u76D0",-1),_hoisted_92=[_hoisted_90,_hoisted_91],_hoisted_93={class:"mt_sm"},_hoisted_94=createBaseVNode("label",{class:"test-item-label"},"buvid/mid\uFF1A",-1),_hoisted_95=["placeholder"],_hoisted_96={class:"mt_sm"},_hoisted_97=createBaseVNode("label",{class:"test-item-label"},"\u76D0\u503C\uFF1A",-1),_hoisted_98=createTextVNode("\u67E5\u8BE2"),_hoisted_99=createTextVNode("\u91CD\u7F6E"),_hoisted_100={class:"desc mt_lg pd_sm"},_hoisted_101={class:"b_text"},_hoisted_102=createTextVNode(" SQL\u5206\u6876\uFF1A "),_hoisted_103={class:"b_text"},_hoisted_104=createTextVNode(" HIVE\u5206\u6876\uFF1A "),_hoisted_105={class:"b_text"},_hoisted_106=createTextVNode(" NodeJS\u5206\u6876\uFF1A "),_hoisted_107={class:"settings_content--item demo-item"},_hoisted_108=createBaseVNode("h2",{class:"b_text test-win-header"},"PC\u5BA2\u6237\u7AEF\u6D4B\u8BD5\u7A97\u53E3",-1),_hoisted_109={class:"test-window"},_hoisted_110={class:"mt_lg win-link"},_hoisted_111=createBaseVNode("label",{for:""},"\u9875\u9762\u94FE\u63A5\uFF1A",-1),_hoisted_112={class:"mt_md win-titlebar"},_hoisted_113=createBaseVNode("label",{for:""},"\u662F\u5426\u5E26\u6807\u9898\u680F\uFF1A",-1),_hoisted_114={class:"mt_md"},_hoisted_115=createBaseVNode("label",{for:""},"\u6700\u5C0F\u5BBD\u5EA6(>=300)\uFF1A",-1),_hoisted_116={class:"mt_md"},_hoisted_117=createBaseVNode("label",{for:""},"\u6700\u5C0F\u9AD8\u5EA6(>=200)\uFF1A",-1),_hoisted_118=createTextVNode(" \u6253\u5F00\u7A97\u53E3 "),_hoisted_119=createTextVNode(" \u5173\u95ED\u7A97\u53E3 "),_hoisted_120=createTextVNode(" \u6253\u5F00\u5F00\u53D1\u5DE5\u5177 "),_hoisted_121=createTextVNode(" \u5173\u95ED\u5F00\u53D1\u5DE5\u5177 "),_sfc_main$2=defineComponent({__name:"DevelopSettings",props:{buildCode:{type:String}},setup(__props){const testWinInfo=ref({url:"",minWidth:null,minHeight:null,titleBar:!1}),{userInfo}=storeToRefs(useUserInfoStore()),{appInfo}=storeToRefs(useAppInfoStore()),appExePath=getAppPath(),appDataPath=getPath("userData"),appLogsPath=getPath("logs"),wlBuvid=ref(""),buvidCode=ref("--"),appData=computed(()=>({...appInfo.value,mid:userInfo.value.mid||"--"})),strategy=ref("dm"),bid=ref(""),salt=ref(""),bucket=ref("--"),bidPlaceholder=computed(()=>strategy.value==="dm"?appInfo.value.buvid:userInfo.value.mid),sqlCode="MOD(CONV(LEFT(MD5(CONCAT('buvid', 'salt')), 8), 16, 10), 1000)",hiveCode="PMOD(CONV(SUBSTR(MD5(CONCAT('buvid', 'salt')), 0, 8), 16, 10), 1000)",nodeCode="parseInt(require('crypto').createHash('md5').update('buvid' + 'salt').digest('hex').substring(0, 8), 16) % 1000",handleQueryBuvidCode=()=>{wlBuvid.value||(wlBuvid.value=appInfo.value.buvid),callNative("system/getBuvidWlCode",wlBuvid.value).then(({data:a})=>buvidCode.value=a)},handleClearBuvid=()=>{wlBuvid.value="",buvidCode.value="--"},handleQueryAbTestBucket=()=>{bid.value||(bid.value=bidPlaceholder.value),callNative("system/getBucketInfo",{bid:bid.value,salt:salt.value}).then(({data:a})=>bucket.value=a)},handleResetAbTestInfo=()=>{strategy.value="dm",bid.value="",salt.value="",bucket.value="--"},handleCopyText=a=>{copyText(String(a)),toastAsync({content:"\u590D\u5236\u6210\u529F"})},openAppLogWindow=()=>{callNative("window/openAppLogWindow")},customConfig=ref({}),customAbInfo=computed(()=>JSON.stringify(customConfig.value.customAbInfo));callNative("config/getCustomConfig").then(({data:a})=>{customConfig.value=a}),useIpcListener("config/customConfigChange",({data:a})=>{customConfig.value=a});const handleCustomConfig=a=>{callNative("config/setCustomConfig",a)},isCustomAbOk=ref(!0),handleCustomAbInfoChange=e=>{try{isCustomAbOk.value=!0;let abInfo={};eval(`abInfo = ${e.target.value}`),callNative("config/setCustomConfig",{customAbInfo:abInfo})}catch{isCustomAbOk.value=!1}},isShowConsoleLog=ref(callNativeSync("config/getIsShowConsoleLog")),handleSetConsoleLog=a=>{callNative("config/setIsShowConsoleLog",a)},handleRestartApp=()=>{IS_DEV?callNative("app/restart"):callNative("app/relaunch")};return(a,o)=>{const s=resolveComponent("v-button"),i=resolveComponent("v-switch");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[createBaseVNode("div",_hoisted_4$1,[_hoisted_5$1,createBaseVNode("div",_hoisted_6$1,[createBaseVNode("p",_hoisted_7$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(appData),(l,c)=>(openBlock(),createElementBlock("span",{key:c},[createBaseVNode("strong",_hoisted_8$1,toDisplayString(c)+": ",1),createBaseVNode("span",{class:"hover_underline",onClick:r=>handleCopyText(l)},toDisplayString(l||"--"),9,_hoisted_9$1),_hoisted_10$1]))),128))])])]),createBaseVNode("p",_hoisted_11$1,[_hoisted_12$1,createBaseVNode("span",{class:"hover_underline text3",onClick:o[0]||(o[0]=l=>handleCopyText(__props.buildCode))},toDisplayString(__props.buildCode),1)]),createBaseVNode("p",_hoisted_13,[_hoisted_14,createBaseVNode("span",{class:"hover_underline text3 mr_md",onClick:o[1]||(o[1]=l=>handleCopyText(unref(appDataPath)))},toDisplayString(unref(appDataPath)),1),createBaseVNode("a",{class:"fs_5 hover_underline cs_pointer",onClick:o[2]||(o[2]=l=>unref(openPath)(unref(appDataPath)))},"\u6253\u5F00\u76EE\u5F55")]),createBaseVNode("p",_hoisted_15,[_hoisted_16,createBaseVNode("span",{class:"hover_underline text3 mr_md",onClick:o[3]||(o[3]=l=>handleCopyText(unref(appLogsPath)))},toDisplayString(unref(appLogsPath)),1),createBaseVNode("a",{class:"fs_5 hover_underline cs_pointer",onClick:o[4]||(o[4]=l=>unref(openPath)(unref(appLogsPath)))},"\u6253\u5F00\u76EE\u5F55")]),createBaseVNode("p",_hoisted_17,[_hoisted_18,createBaseVNode("span",{class:"hover_underline text3 mr_md",onClick:o[5]||(o[5]=l=>handleCopyText(unref(appExePath)))},toDisplayString(unref(appExePath)),1),createBaseVNode("a",{class:"fs_5 hover_underline cs_pointer",onClick:o[6]||(o[6]=l=>unref(openPath)(unref(appExePath)))},"\u6253\u5F00\u76EE\u5F55")])]),createBaseVNode("div",_hoisted_19,[createVNode(s,{type:"pink",onClick:openAppLogWindow},{default:withCtx(()=>[createBaseVNode("div",_hoisted_20,[createVNode(unref(BtnLog),{class:"log"}),_hoisted_21])]),_:1}),createVNode(s,{type:"pink",onClick:handleRestartApp},{default:withCtx(()=>[createBaseVNode("div",_hoisted_22,[createVNode(unref(VdRestart),{class:"restart mt_n1"}),_hoisted_23])]),_:1}),createVNode(s,{type:"pink",onClick:unref(toggleDevTools)},{default:withCtx(()=>[createBaseVNode("div",_hoisted_24,[createVNode(unref(BtnDev),{class:"dev mt_n1"}),_hoisted_25])]),_:1},8,["onClick"])])])]),createBaseVNode("div",_hoisted_26,[_hoisted_27,createBaseVNode("div",_hoisted_28,[createBaseVNode("div",_hoisted_29,[_hoisted_30,createBaseVNode("div",_hoisted_31,[createVNode(i,{value:isShowConsoleLog.value,onChange:handleSetConsoleLog},null,8,["value"])])]),createBaseVNode("div",_hoisted_32,[_hoisted_33,createBaseVNode("div",_hoisted_34,[createVNode(i,{value:customConfig.value.isRemoteConfigPre,onChange:o[7]||(o[7]=l=>handleCustomConfig({isRemoteConfigPre:!customConfig.value.isRemoteConfigPre}))},null,8,["value"])])]),createBaseVNode("div",_hoisted_35,[_hoisted_36,createBaseVNode("div",_hoisted_37,[createVNode(i,{value:customConfig.value.debugBiliApp,onChange:o[8]||(o[8]=l=>handleCustomConfig({debugBiliApp:!customConfig.value.debugBiliApp}))},null,8,["value"])])]),createBaseVNode("div",_hoisted_38,[_hoisted_39,createBaseVNode("div",_hoisted_40,[createVNode(i,{value:customConfig.value.isFawkesFFTest,onChange:o[9]||(o[9]=l=>handleCustomConfig({isFawkesFFTest:!customConfig.value.isFawkesFFTest}))},null,8,["value"])])]),createBaseVNode("div",_hoisted_41,[_hoisted_42,createBaseVNode("div",_hoisted_43,[createVNode(i,{value:customConfig.value.noPopLoginAtStart,onChange:o[10]||(o[10]=l=>handleCustomConfig({noPopLoginAtStart:!customConfig.value.noPopLoginAtStart}))},null,8,["value"])])]),createBaseVNode("div",_hoisted_44,[_hoisted_45,createBaseVNode("div",_hoisted_46,[createVNode(i,{value:customConfig.value.showReportLog,onChange:o[11]||(o[11]=l=>handleCustomConfig({showReportLog:!customConfig.value.showReportLog}))},null,8,["value"])])]),createBaseVNode("div",_hoisted_47,[_hoisted_48,createBaseVNode("div",_hoisted_49,[createVNode(i,{value:customConfig.value.enableProxyAgent,onChange:o[12]||(o[12]=l=>handleCustomConfig({enableProxyAgent:!customConfig.value.enableProxyAgent}))},null,8,["value"])])]),createBaseVNode("div",_hoisted_50,[_hoisted_51,createBaseVNode("div",_hoisted_52,[createVNode(i,{value:customConfig.value.restrictStartRender,onChange:o[13]||(o[13]=l=>handleCustomConfig({restrictStartRender:!customConfig.value.restrictStartRender}))},null,8,["value"])])])]),createBaseVNode("div",_hoisted_53,[createBaseVNode("div",_hoisted_54,[_hoisted_55,createBaseVNode("div",_hoisted_56,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":o[14]||(o[14]=l=>customConfig.value.proxyAgentUrl=l),placeholder:"\u4F8B\u5982\uFF1Ahttp://127.0.0.1:8888",onChange:o[15]||(o[15]=l=>handleCustomConfig({proxyAgentUrl:customConfig.value.proxyAgentUrl}))},null,544),[[vModelText,customConfig.value.proxyAgentUrl]])])]),createBaseVNode("div",_hoisted_57,[_hoisted_58,createBaseVNode("div",_hoisted_59,[withDirectives(createBaseVNode("input",{type:"number",placeholder:"\u65F6\u95F4\u6BEB\u79D2\u6570","onUpdate:modelValue":o[16]||(o[16]=l=>customConfig.value.popAtPlayingFirst=l),onChange:o[17]||(o[17]=l=>handleCustomConfig({popAtPlayingFirst:customConfig.value.popAtPlayingFirst}))},null,544),[[vModelText,customConfig.value.popAtPlayingFirst]])])]),createBaseVNode("div",_hoisted_60,[_hoisted_61,createBaseVNode("div",_hoisted_62,[withDirectives(createBaseVNode("input",{type:"number",placeholder:"\u65F6\u95F4\u6BEB\u79D2\u6570","onUpdate:modelValue":o[18]||(o[18]=l=>customConfig.value.fallAsleepTime=l),onChange:o[19]||(o[19]=l=>handleCustomConfig({fallAsleepTime:customConfig.value.fallAsleepTime}))},null,544),[[vModelText,customConfig.value.fallAsleepTime]])])]),createBaseVNode("div",_hoisted_63,[_hoisted_64,createBaseVNode("div",_hoisted_65,[withDirectives(createBaseVNode("input",{type:"number",placeholder:"\u65F6\u95F4\u6BEB\u79D2\u6570","onUpdate:modelValue":o[20]||(o[20]=l=>customConfig.value.popLoginDuration=l),onChange:o[21]||(o[21]=l=>handleCustomConfig({popLoginDuration:customConfig.value.popLoginDuration}))},null,544),[[vModelText,customConfig.value.popLoginDuration]])])]),createBaseVNode("div",_hoisted_66,[_hoisted_67,createBaseVNode("div",_hoisted_68,[withDirectives(createBaseVNode("input",{placeholder:"\u4F8B\u5982\uFF1Ahttps://ff-dev.bilibili.com/desktop","onUpdate:modelValue":o[22]||(o[22]=l=>customConfig.value.liveRoomBaseUrl=l),onChange:o[23]||(o[23]=l=>handleCustomConfig({liveRoomBaseUrl:customConfig.value.liveRoomBaseUrl}))},null,544),[[vModelText,customConfig.value.liveRoomBaseUrl]])])]),createBaseVNode("div",_hoisted_69,[_hoisted_70,createBaseVNode("div",_hoisted_71,[withDirectives(createBaseVNode("input",{placeholder:"\u8F93\u5165\u4E00\u4E2AURL","onUpdate:modelValue":o[24]||(o[24]=l=>customConfig.value.liveNowPageUrl=l),onChange:o[25]||(o[25]=l=>handleCustomConfig({liveNowPageUrl:customConfig.value.liveNowPageUrl}))},null,544),[[vModelText,customConfig.value.liveNowPageUrl]])])]),createBaseVNode("div",_hoisted_72,[_hoisted_73,createBaseVNode("div",_hoisted_74,[withDirectives(createBaseVNode("input",{placeholder:"\u53EF\u4F20ff-dev\u53C2\u6570\uFF0C\u4F8B\u5982\uFF1A_port_=8080","onUpdate:modelValue":o[26]||(o[26]=l=>customConfig.value.liveRoomQueryString=l),onChange:o[27]||(o[27]=l=>handleCustomConfig({liveRoomQueryString:customConfig.value.liveRoomQueryString}))},null,544),[[vModelText,customConfig.value.liveRoomQueryString]])])]),createBaseVNode("div",_hoisted_75,[_hoisted_76,createBaseVNode("div",_hoisted_77,[createBaseVNode("textarea",{placeholder:"\u4F8B\u5982\uFF1A{ sidebar_upload_toweb: true }",value:unref(customAbInfo),onChange:handleCustomAbInfoChange},null,40,_hoisted_78)])])])]),createBaseVNode("div",_hoisted_79,[_hoisted_80,createBaseVNode("p",_hoisted_81,[_hoisted_82,withDirectives(createBaseVNode("input",{type:"text",placeholder:unref(appInfo).buvid,"onUpdate:modelValue":o[28]||(o[28]=l=>wlBuvid.value=l)},null,8,_hoisted_83),[[vModelText,wlBuvid.value]]),createVNode(s,{size:"small",class:"ml_sm",onClick:handleQueryBuvidCode},{default:withCtx(()=>[_hoisted_84]),_:1}),createVNode(s,{size:"small",class:"ml_sm mr_xl",onClick:handleClearBuvid},{default:withCtx(()=>[_hoisted_85]),_:1}),createTextVNode(" \u7F16\u7801\uFF1A"+toDisplayString(buvidCode.value),1)])]),createBaseVNode("div",_hoisted_86,[_hoisted_87,createBaseVNode("p",_hoisted_88,[_hoisted_89,withDirectives(createBaseVNode("select",{"onUpdate:modelValue":o[29]||(o[29]=l=>strategy.value=l)},_hoisted_92,512),[[vModelSelect,strategy.value]])]),createBaseVNode("p",_hoisted_93,[_hoisted_94,withDirectives(createBaseVNode("input",{type:"text",placeholder:unref(bidPlaceholder)+"","onUpdate:modelValue":o[30]||(o[30]=l=>bid.value=l)},null,8,_hoisted_95),[[vModelText,bid.value]])]),createBaseVNode("p",_hoisted_96,[_hoisted_97,withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":o[31]||(o[31]=l=>salt.value=l)},null,512),[[vModelText,salt.value]]),createVNode(s,{size:"small",class:"ml_sm",onClick:handleQueryAbTestBucket},{default:withCtx(()=>[_hoisted_98]),_:1}),createVNode(s,{size:"small",class:"ml_sm mr_xl",onClick:handleResetAbTestInfo},{default:withCtx(()=>[_hoisted_99]),_:1}),createTextVNode(" \u5206\u6876\uFF1A"+toDisplayString(bucket.value),1)]),createBaseVNode("div",_hoisted_100,[createBaseVNode("p",_hoisted_101,[_hoisted_102,createBaseVNode("span",{class:"text2 hover_underline",onClick:o[32]||(o[32]=l=>handleCopyText(sqlCode))},toDisplayString(sqlCode))]),createBaseVNode("p",_hoisted_103,[_hoisted_104,createBaseVNode("span",{class:"text2 hover_underline",onClick:o[33]||(o[33]=l=>handleCopyText(hiveCode))},toDisplayString(hiveCode))]),createBaseVNode("p",_hoisted_105,[_hoisted_106,createBaseVNode("span",{class:"text2 hover_underline",onClick:o[34]||(o[34]=l=>handleCopyText(nodeCode))},toDisplayString(nodeCode))])])]),createBaseVNode("div",_hoisted_107,[_hoisted_108,createBaseVNode("div",_hoisted_109,[createBaseVNode("p",_hoisted_110,[_hoisted_111,withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":o[35]||(o[35]=l=>testWinInfo.value.url=l)},null,512),[[vModelText,testWinInfo.value.url]])]),createBaseVNode("p",_hoisted_112,[_hoisted_113,withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":o[36]||(o[36]=l=>testWinInfo.value.titleBar=l)},null,512),[[vModelCheckbox,testWinInfo.value.titleBar]])]),createBaseVNode("p",_hoisted_114,[_hoisted_115,withDirectives(createBaseVNode("input",{type:"number",min:300,"onUpdate:modelValue":o[37]||(o[37]=l=>testWinInfo.value.minWidth=l)},null,512),[[vModelText,testWinInfo.value.minWidth]])]),createBaseVNode("p",_hoisted_116,[_hoisted_117,withDirectives(createBaseVNode("input",{type:"number",min:200,"onUpdate:modelValue":o[38]||(o[38]=l=>testWinInfo.value.minHeight=l)},null,512),[[vModelText,testWinInfo.value.minHeight]])]),createVNode(s,{class:"mt_xl mr_xs",type:"pink",onClick:o[39]||(o[39]=l=>unref(openTestWindow)(testWinInfo.value))},{default:withCtx(()=>[_hoisted_118]),_:1}),createVNode(s,{class:"mt_sm mr_xs",type:"pink",onClick:unref(closeTestWindow)},{default:withCtx(()=>[_hoisted_119]),_:1},8,["onClick"]),createVNode(s,{class:"mt_xl mr_xs",type:"pink",onClick:unref(openTestWindowDevTools)},{default:withCtx(()=>[_hoisted_120]),_:1},8,["onClick"]),createVNode(s,{class:"mt_sm mr_xs",type:"pink",onClick:unref(closeTestWindowDevTools)},{default:withCtx(()=>[_hoisted_121]),_:1},8,["onClick"])])])],64)}}});var Settings_vue_vue_type_style_index_0_lang="";const _hoisted_1$1={class:"app_settings i_page_wrapper"},_hoisted_2$1={class:"flex_start flex_inline header_tab"},_hoisted_3$1={class:"app_settings--content i_page_content p_relative"},_hoisted_4=createBaseVNode("br",null,null,-1),_hoisted_5=createTextVNode("\u53D1\u5DE5\u5177 "),_hoisted_6={class:"settings_content--wrapper i_wrapper p_relative min_h_100"},_hoisted_7={class:"b_text text3 fs_5 p_center_x b_sm"},_hoisted_8={class:"content-wrapper"},_hoisted_9=createBaseVNode("h4",{class:"b_text text1 text_center mt_md"},"\u786E\u5B9A\u9000\u51FA\u5F53\u524D\u8D26\u53F7\u5417\uFF1F",-1),_hoisted_10={class:"mt_xl text_center dialog_btns"},_hoisted_11=createTextVNode("\u53D6\u6D88"),_hoisted_12=createTextVNode("\u9000\u51FA"),_sfc_main$1=defineComponent({__name:"Settings",setup(a){useReportPv({spm_id:"main.settings.0.0",pageName:"Settings"}),useScrollToTop(".settings_content"),useRoutePageFadeIn(".app_settings");const o=debounce$1(()=>{callNative("auth/reloadUserInfo"),toastAsync({content:"\u540C\u6B65\u7528\u6237\u4FE1\u606F\u6210\u529F\uFF01"})},1e3);useRefresh("Settings",()=>o());const s=ref(""),i=ref(""),l=ref(!1),c=ref(!1),{appInfo:r}=storeToRefs(useAppInfoStore()),{abTestInfo:u}=storeToRefs(useAbTestStore());getVersion().then(m=>s.value=m);const d=()=>{requestLogout(),c.value=!1};getBuildCode().then(m=>i.value=m);const _=ref(null),f=()=>{l.value=!l.value,setTimeout(()=>{l.value&&_.value.scrollIntoView()})};return(m,p)=>{const v=resolveComponent("v-tab-item"),g=resolveComponent("v-tabs"),$=resolveComponent("HeaderSlot"),y=resolveComponent("Scroller"),B=resolveComponent("v-button"),C=resolveComponent("v-dialog");return openBlock(),createElementBlock("div",_hoisted_1$1,[createVNode($,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[createVNode(g,{class:"mt_xs","auto-adjustment":"","slide-to-hover":!1,"active-pink":!0,"no-padding-left":!1,"tabs-gutter":32,"slider-width":18},{default:withCtx(()=>[createVNode(v,{tab:"\u8BBE\u7F6E"})]),_:1})])]),_:1}),createBaseVNode("div",_hoisted_3$1,[unref(IS_DEV_MODE)?(openBlock(),createElementBlock("a",{key:0,class:"dev-fixed-btn bg_bg1 cs_pointer flex_center fs_5 z_index_1",onClick:f},[createTextVNode(toDisplayString(l.value?"\u9690\u85CF":"\u663E\u793A")+"\u5F00",1),_hoisted_4,_hoisted_5])):createCommentVNode("",!0),createVNode(y,{class:"settings_content page_scroller pt_lg"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_6,[createVNode(_sfc_main$a,{onLogout:p[0]||(p[0]=S=>c.value=!0)}),createVNode(_sfc_main$9),createVNode(_sfc_main$8),createVNode(_sfc_main$6),createVNode(_sfc_main$7),createVNode(_sfc_main$5),unref(u).enable_system_notification?(openBlock(),createBlock(_sfc_main$4,{key:0})):createCommentVNode("",!0),createVNode(_sfc_main$3),createBaseVNode("div",{ref_key:"devAreaAnchorRef",ref:_},null,512),unref(IS_DEV_MODE)&&l.value?(openBlock(),createBlock(_sfc_main$2,{key:1,buildCode:i.value},null,8,["buildCode"])):createCommentVNode("",!0),createBaseVNode("p",_hoisted_7," \u6784\u5EFA\u53F7\uFF1A"+toDisplayString(i.value)+toDisplayString(unref(r).fawkes_id?`(${unref(r).fawkes_id})`:""),1)])]),_:1}),createVNode(C,{visible:c.value,"onUpdate:visible":p[2]||(p[2]=S=>c.value=S),width:320,"class-name":"i_dialog py_lg",onCancel:p[3]||(p[3]=S=>c.value=!1),"is-show-default-footer":!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_8,[_hoisted_9,createBaseVNode("div",_hoisted_10,[createVNode(B,{class:"mr_sm",onClick:p[1]||(p[1]=S=>c.value=!1)},{default:withCtx(()=>[_hoisted_11]),_:1}),createVNode(B,{type:"danger",onClick:d},{default:withCtx(()=>[_hoisted_12]),_:1})])])]),_:1},8,["visible"])])])}}}),_hoisted_1={class:"i_page_wrapper"},_hoisted_2=createBaseVNode("div",{class:"i_page_content"},null,-1),_hoisted_3=[_hoisted_2],_sfc_main=defineComponent({__name:"SearchNoop",setup(a){return onActivated(()=>{events.emit("pageSpmIdChange","main.search-result.0.0")}),(o,s)=>(openBlock(),createElementBlock("div",_hoisted_1,_hoisted_3))}}),router=createRouter({history:createWebHashHistory(),routes:[{name:"Root",path:"/",redirect:{name:"HomeRecommends"}},{name:"Page",path:"/page",component:_sfc_main$1w,children:[{path:"",name:"Page0",redirect:{name:"HomeRecommends"}},{name:"Home",path:"home",component:_sfc_main$1v,children:[{path:"",name:"Home0",redirect:{name:"HomeRecommends"}},{name:"HomeLive",path:"live",component:_sfc_main$1u},{name:"HomeRecommends",path:"recommends",component:_sfc_main$1s},{name:"HomeHots",path:"hots",component:_sfc_main$1r,redirect:{name:"HomeHotsAll"},children:[{name:"HomeHotsAll",path:"all",component:_sfc_main$1q},{name:"HomeHotsSeries",path:"series",component:HomeHotsSeries},{name:"HomeHotsPrecious",path:"precious",component:HomeHotsPrecious},{name:"HomeHotsRanking",path:"ranking",component:_sfc_main$1k}]},{name:"HomeBangumi",path:"bangumi",component:HomeBangumi,redirect:{name:"HomeBangumiTab"},children:[{name:"HomeBangumiTab",path:"tab",component:HomeBangumiTab,meta:{isBangumi:!0}},{name:"HomeBangumiMore",path:"more",component:HomeBangumiMore,meta:{isSubPage:!0,isBangumi:!0}}]},{name:"HomePgc",path:"pgc",component:HomeBangumi,redirect:{name:"HomePgcTab"},children:[{name:"HomePgcTab",path:"tab",component:HomePgcTab,meta:{isPgc:!0}},{name:"HomePgcMore",path:"more",component:HomeBangumiMore,meta:{isSubPage:!0,isPgc:!0}}]}]},{name:"Selected",path:"selected",component:_sfc_main$1e},{name:"UgcSeason",path:"ugc-season",component:_sfc_main$17,meta:{isSubPage:!0}},{name:"Dynamic",path:"dynamic",component:_sfc_main$T},{name:"Mine",path:"mine",component:Mine,children:[{path:"",name:"Mine0",redirect:{name:"MineHistory"}},{name:"MineHistory",path:"history",component:MineHistory},{name:"MineDownload",path:"download",component:MineDownload},{name:"MineFavorite",path:"favorite",component:_sfc_main$y},{name:"MineWatchLater",path:"watch-later",component:MineWatchLater}]},{name:"MineDownloadCollection",path:"mine-download-collection",component:MineDownloadCollection,meta:{isSubPage:!0}},{name:"Favorite",path:"favorite",component:_sfc_main$u,meta:{isSubPage:!0}},{name:"Space",path:"space",meta:{isSubPage:!0},component:Space},{name:"SpaceSeasonDetails",path:"season-details",meta:{isSubPage:!0},component:_sfc_main$b},{name:"Settings",path:"settings",meta:{isSubPage:!0},component:_sfc_main$1},{name:"Following",path:"/following",meta:{isSubPage:!0},component:Following},{name:"Follower",path:"/follower",meta:{isSubPage:!0},component:Follower},{name:"SearchPage",path:"search-page",meta:{isSubPage:!0},component:_sfc_main}]}]});router.beforeEach((a,o,s)=>{window.isMouseBtn34Click||s()});const app=createApp(_sfc_main$2N);directive(app);app.use(createPinia());app.use(router);app.use(Button);app.use(Tabs);app.use(Dropdown);app.use(Dialog);app.use(directive$1);app.use(Space$1);app.use(Input);app.use(Pagenation);app.use(Checkbox);app.use(Radio);app.use(RadioGroup);app.use(Switch);app.use(Notification);app.component(VPopover.name,VPopover);app.component(VImg.name,VImg);app.component(ClientOnly.name,ClientOnly);app.component(BiliVideoCard.name,BiliVideoCard);app.component(BiliLiveCard.name,BiliLiveCard);app.component("WidgetArrow",WidgetArrow);app.component("HeaderSlot",_sfc_main$2L);app.component("NotFound",_sfc_main$2M);app.component("Scroller",_sfc_main$2K);app.component("Fragment",Fragment$1);let checkNanoTimer=null;const checkNanoAndMountApp=()=>{window.nano&&(clearInterval(checkNanoTimer),app.mount("#app"))};checkNanoTimer=setInterval(()=>checkNanoAndMountApp(),200);checkNanoAndMountApp();const{build,device}=callNativeSync$1("app/getAppInfo");callNativeSync$1("system/isInitSentry")&&Sentry.init({dsn:"http://c8fb384106ac4e03b53db13882e67228@api.bilibili.com/x/traceback/293",debug:!1,release:build,environment:"production",sampleRate:.1,ignoreErrors:["ResizeObserver loop limit exceeded"],integrations:[new sentryIntegrations.BiliIntegration({ignoreMessageList:[]}),new sentryIntegrations.TrackingReport({env:"production"}),new Sentry.Integrations.Vue({Vue:app,attachProps:!0})]});
